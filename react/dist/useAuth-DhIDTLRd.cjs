"use strict";const X=require("react/jsx-runtime"),I=require("react"),te=require("./LoadingSpinner-d6sSxgQN.cjs"),U=require("./apiClient-CTTKhsYb.cjs");let W=0;function He({theme:e,themeOverrides:A}){I.useEffect(()=>{if(typeof document>"u"||typeof window>"u")return;const t=document.documentElement;let i=!1;e==="dark"?i=!0:e==="light"?i=!1:i=window.matchMedia("(prefers-color-scheme: dark)").matches;let r=!1;i?(W++,r=!0,t.classList.add("cedros-dark")):W===0&&t.classList.remove("cedros-dark");const n=new Map;return A&&Object.entries(A).forEach(([o,l])=>{if(l){const C=t.style.getPropertyValue(o);n.set(o,C),t.style.setProperty(o,l)}}),()=>{r&&(W--,W===0&&t.classList.remove("cedros-dark")),n.forEach((o,l)=>{o?t.style.setProperty(l,o):t.style.removeProperty(l)})}},[e,A])}const Je="cedros_tokens",Me=6e4;class Ve{storage;requestedStorage;storageKey;tokens=null;expiresAt=0;refreshTimer=null;onRefreshNeeded=null;onSessionExpired=null;onRefreshError=null;isDestroyed=!1;sessionExpiredFired=!1;allowWebStorage;constructor(A="cookie",t=Je,i={}){this.requestedStorage=A,this.storage=A,this.storageKey=t,this.allowWebStorage=i.allowWebStorage??!1,this.warnIfLocalStorage(),!this.allowWebStorage&&(this.requestedStorage==="localStorage"||this.requestedStorage==="sessionStorage")&&(this.storage="memory"),this.loadFromStorage()}warnIfLocalStorage(){if((this.requestedStorage==="localStorage"||this.requestedStorage==="sessionStorage")&&typeof console<"u"){const A=this.allowWebStorage?"":" (web storage disabled by default; set allowWebStorage=true to enable)";console.warn("[cedros-login] SECURITY: Using web storage for token storage. Tokens are vulnerable to XSS attacks."+A+" PRODUCTION RECOMMENDATIONS: (1) Use httpOnly cookie storage instead, (2) If web storage required: implement strict Content-Security-Policy, sanitize all input/output, audit third-party scripts. See https://owasp.org/www-community/attacks/xss/")}}setRefreshCallback(A){this.onRefreshNeeded=A,this.scheduleRefresh()}setSessionExpiredCallback(A){this.onSessionExpired=A}setRefreshErrorCallback(A){this.onRefreshError=A}setTokens(A){this.tokens=A,this.expiresAt=Date.now()+A.expiresIn*1e3,this.sessionExpiredFired=!1,this.saveToStorage(),this.scheduleRefresh()}getAccessToken(){if(this.isDestroyed)return null;const A=this.tokens?.accessToken;return A?Date.now()>=this.expiresAt?(this.clear(),this.fireSessionExpired(),null):A:null}getRefreshToken(){return this.tokens?.refreshToken??null}clear(){this.tokens=null,this.expiresAt=0,this.cancelRefresh(),this.clearStorage()}hasTokens(){return this.tokens!==null&&Date.now()<this.expiresAt}destroy(){this.isDestroyed=!0,this.cancelRefresh(),this.clearStorage(),this.onRefreshNeeded=null,this.onSessionExpired=null,this.onRefreshError=null,this.tokens=null}getTimeUntilExpiry(){return this.tokens?Math.max(0,this.expiresAt-Date.now()):0}fireSessionExpired(){this.sessionExpiredFired||(this.sessionExpiredFired=!0,this.onSessionExpired?.())}scheduleRefresh(){if(this.cancelRefresh(),!this.tokens||!this.onRefreshNeeded)return;const A=this.getTimeUntilExpiry(),t=Math.max(0,A-Me);if(t<=0){if(this.isDestroyed)return;this.onRefreshNeeded().catch(i=>{if(this.isDestroyed)return;const r=i instanceof Error?i:new Error("Token refresh failed");this.onRefreshError?.(r),this.clear(),this.fireSessionExpired()});return}this.refreshTimer=setTimeout(()=>{this.isDestroyed||this.onRefreshNeeded?.().catch(i=>{if(this.isDestroyed)return;const r=i instanceof Error?i:new Error("Token refresh failed");this.onRefreshError?.(r),this.clear(),this.fireSessionExpired()})},t)}cancelRefresh(){this.refreshTimer&&(clearTimeout(this.refreshTimer),this.refreshTimer=null)}loadFromStorage(){if(this.storage!=="memory"&&!(typeof window>"u")&&!(!this.allowWebStorage&&(this.storage==="localStorage"||this.storage==="sessionStorage")))try{if(this.storage==="localStorage"||this.storage==="sessionStorage"){const A=this.storage==="localStorage"?localStorage:sessionStorage,t=A.getItem(this.storageKey);if(t){const i=JSON.parse(t);this.isValidStoredTokenData(i)?i.expiresAt>Date.now()?(this.tokens=i.tokens,this.expiresAt=i.expiresAt):A.removeItem(this.storageKey):A.removeItem(this.storageKey)}}}catch{if(this.storage==="localStorage"||this.storage==="sessionStorage"){const A=this.storage==="localStorage"?localStorage:sessionStorage;try{A.removeItem(this.storageKey)}catch{}}}}isValidStoredTokenData(A){if(typeof A!="object"||A===null)return!1;const t=A;if(typeof t.expiresAt!="number"||typeof t.tokens!="object"||t.tokens===null)return!1;const i=t.tokens;return!(typeof i.accessToken!="string"||typeof i.refreshToken!="string"||typeof i.expiresIn!="number")}saveToStorage(){if(!(this.storage==="memory"||!this.tokens)&&!(typeof window>"u")&&!(!this.allowWebStorage&&(this.storage==="localStorage"||this.storage==="sessionStorage")))try{if(this.storage==="localStorage"||this.storage==="sessionStorage"){const A=this.storage==="localStorage"?localStorage:sessionStorage,t={tokens:this.tokens,expiresAt:this.expiresAt};A.setItem(this.storageKey,JSON.stringify(t))}}catch{}}clearStorage(){if(this.storage!=="memory"&&!(typeof window>"u")&&!(!this.allowWebStorage&&(this.storage==="localStorage"||this.storage==="sessionStorage")))try{(this.storage==="localStorage"||this.storage==="sessionStorage")&&(this.storage==="localStorage"?localStorage:sessionStorage).removeItem(this.storageKey)}catch{}}}const Pe="cedros_auth_sync";class Ye{channel=null;callback=null;boundHandler=null;constructor(){typeof window<"u"&&"BroadcastChannel"in window&&(this.channel=new BroadcastChannel(Pe),this.boundHandler=this.handleMessage.bind(this),this.channel.addEventListener("message",this.boundHandler))}handleMessage(A){const t=A.data;if(!(!t||typeof t!="object"||typeof t.type!="string")&&["login","logout","refresh"].includes(t.type)){if(t.type==="login"){const i=t;if(typeof i.user!="object"||i.user===null||typeof i.user.id!="string")return}this.callback?.(t)}}setCallback(A){this.callback=A}broadcastLogin(A){this.channel?.postMessage({type:"login",user:A})}broadcastLogout(){this.channel?.postMessage({type:"logout"})}broadcastRefresh(){this.channel?.postMessage({type:"refresh"})}close(){this.channel&&(this.boundHandler&&(this.channel.removeEventListener("message",this.boundHandler),this.boundHandler=null),this.channel.close(),this.channel=null),this.callback=null}}function j(e){if(typeof e!="object"||e===null)return!1;const A=e;if(typeof A.user!="object"||A.user===null)return!1;const t=A.user;return typeof t.id=="string"&&t.id.length>0}function Ne(e){if(typeof e!="object"||e===null)return!1;const A=e;return typeof A.accessToken=="string"&&A.accessToken.length>0&&typeof A.refreshToken=="string"&&A.refreshToken.length>0&&typeof A.expiresIn=="number"&&A.expiresIn>0}function xe({serverUrl:e,session:A,callbacks:t,requestTimeoutMs:i}){const[r,n]=I.useState(null),[o,l]=I.useState("idle"),C=I.useRef(null),a=I.useRef(null),y=I.useRef(t),d=I.useRef(!0),f=I.useRef(null),b=I.useRef(()=>Promise.resolve()),D=I.useRef(()=>{});I.useEffect(()=>{y.current=t},[t]),I.useEffect(()=>(d.current=!0,()=>{d.current=!1}),[]);const Q=I.useCallback(c=>{d.current&&n(c)},[]),B=I.useCallback(c=>{d.current&&l(c)},[]),w=I.useMemo(()=>({storage:A?.storage??"cookie",autoRefresh:A?.autoRefresh??!0,syncTabs:A?.syncTabs??!0,persistKey:A?.persistKey,allowWebStorage:A?.allowWebStorage??!1}),[A?.storage,A?.autoRefresh,A?.syncTabs,A?.persistKey,A?.allowWebStorage]);I.useEffect(()=>{const c=new Ve(w.storage,w.persistKey,{allowWebStorage:w.allowWebStorage});return C.current=c,w.autoRefresh&&c.setRefreshCallback(()=>b.current()),c.setSessionExpiredCallback(()=>D.current()),w.syncTabs&&(a.current=new Ye),()=>{c.destroy(),C.current=null,a.current?.close()}},[w.storage,w.syncTabs,w.persistKey,w.allowWebStorage,w.autoRefresh]);const F=I.useCallback(async()=>{if(f.current)return f.current;const c=C.current?.getRefreshToken(),S=!!c,m=U.getCsrfToken(),K={};S&&(K["Content-Type"]="application/json"),m&&(K["X-CSRF-Token"]=m);let G,J;const Y=new Promise((L,ee)=>{G=L,J=ee});f.current=Y,(async()=>{const L=new AbortController,ee=i??1e4,Ke=window.setTimeout(()=>L.abort(),ee);try{const O=await fetch(`${e}/refresh`,{method:"POST",headers:Object.keys(K).length>0?K:void 0,credentials:"include",body:S?JSON.stringify({refreshToken:c}):void 0,signal:L.signal});if(!O.ok)throw new Error("Token refresh failed");const Ae=await O.json();if(Ae.tokens){if(!Ne(Ae.tokens))throw new Error("Invalid token response structure");C.current?.setTokens(Ae.tokens)}else if(w.storage!=="cookie")throw new Error("Token refresh failed");a.current?.broadcastRefresh(),G()}catch(O){throw J(O),O}finally{window.clearTimeout(Ke)}})().catch(()=>{});try{await Y}finally{f.current=null}},[e,w.storage,i]),E=I.useCallback(()=>{if(w.storage==="cookie")return;const c=C.current?.getAccessToken();if(c)return{Authorization:`Bearer ${c}`}},[w.storage]),u=I.useCallback(()=>{C.current?.clear(),Q(null),B("unauthenticated"),y.current?.onSessionExpired?.()},[B,Q]);b.current=F,D.current=u;const g=I.useCallback(c=>{const S=new AbortController,m=i??1e4,K=window.setTimeout(()=>S.abort(),m),G={},J=E();J&&Object.assign(G,J);const Y=U.getCsrfToken();return Y&&(G["X-CSRF-Token"]=Y),{promise:fetch(c,{credentials:"include",headers:Object.keys(G).length>0?G:void 0,signal:S.signal}),cleanup:()=>window.clearTimeout(K)}},[E,i]),s=I.useCallback(async()=>{const c=g(`${e}/user`);try{const S=await c.promise;if(S.ok){const m=await S.json();if(j(m)){Q(m.user),B("authenticated");return}}if(S.status===401&&w.autoRefresh){try{await F()}catch{u();return}const m=g(`${e}/user`);try{const K=await m.promise;if(K.ok){const G=await K.json();if(j(G)){Q(G.user),B("authenticated");return}}}finally{m.cleanup()}}Q(null),B("unauthenticated")}catch{Q(null),B("unauthenticated")}finally{c.cleanup()}},[e,w.autoRefresh,F,g,u,B,Q]);I.useEffect(()=>{!a.current||!w.syncTabs||a.current.setCallback(c=>{switch(c.type){case"login":Q(c.user),B("authenticated");break;case"logout":Q(null),B("unauthenticated"),C.current?.clear();break;case"refresh":s();break;default:console.warn("[Cedros Login] Unhandled tab sync event:",c)}})},[w.syncTabs,s,B,Q]),I.useEffect(()=>{const c=new AbortController,S=i??1e4,m=window.setTimeout(()=>c.abort(),S);return(async()=>{B("loading");try{const G=await fetch(`${e}/user`,{credentials:"include",headers:E(),signal:c.signal});if(G.ok){const J=await G.json();if(j(J)){Q(J.user),B("authenticated");return}}if(G.status===401&&w.autoRefresh){try{await F()}catch{u();return}const J=await fetch(`${e}/user`,{credentials:"include",headers:E(),signal:c.signal});if(J.ok){const Y=await J.json();if(j(Y)){Q(Y.user),B("authenticated");return}}}Q(null),B("unauthenticated")}catch{Q(null),B("unauthenticated")}})(),()=>{window.clearTimeout(m),c.abort()}},[e,w.autoRefresh,F,E,u,B,Q,i]);const h=I.useCallback((c,S)=>{Q(c),B("authenticated"),S&&C.current?.setTokens(S),d.current&&a.current?.broadcastLogin(c)},[Q,B]),k=I.useCallback(async()=>{const c=U.getCsrfToken(),S=new AbortController,m=i??1e4,K=window.setTimeout(()=>S.abort(),m);try{await fetch(`${e}/logout`,{method:"POST",headers:{...c?{"X-CSRF-Token":c}:{},...E()??{}},credentials:"include",signal:S.signal})}catch{}finally{window.clearTimeout(K),Q(null),B("unauthenticated"),C.current?.clear(),a.current?.broadcastLogout(),y.current?.onLogout?.()}},[e,E,Q,B,i]),H=I.useCallback(()=>C.current?.getAccessToken()??null,[]);return{user:r,authState:o,handleLoginSuccess:h,logout:k,refreshUser:s,getAccessToken:H}}const Be={mCost:19456,tCost:2,pCost:1};function Oe(e){return e.length===16}function ve(e){if(e.length===16)return!0;if(e.length<18)return!1;const A=e[0];return A===0||A===1||A===128||A===8}function Re(e){return e.length===32}function Te(e){return e.length===12}function Le(e){return e.length>=16}function Xe(e){return e.length===32}function de(e){if(!Oe(e))throw new Error(`Invalid seed length: expected 16, got ${e.length}`);return e}function We(e){if(!ve(e))throw new Error(`Invalid share length: expected >=16, got ${e.length}`);return e}function ce(e){if(!Re(e))throw new Error(`Invalid key length: expected 32, got ${e.length}`);return e}function je(e){if(!Te(e))throw new Error(`Invalid nonce length: expected 12, got ${e.length}`);return e}function Ze(e){if(!Le(e))throw new Error(`Invalid salt length: expected >=16, got ${e.length}`);return e}function qe(e){if(!Xe(e))throw new Error(`Invalid PRF salt length: expected 32, got ${e.length}`);return e}function N(e){return new Uint8Array(e)}function _(e){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("WebCrypto API not available. Secure random generation requires a modern browser.");const A=new Uint8Array(e);return crypto.getRandomValues(A),A}function _e(){return de(_(16))}function $e(){return je(_(12))}function ze(){return Ze(_(16))}function Ee(){return qe(_(32))}function Ce(e){if(!(!e||e.length===0)){if(typeof globalThis.crypto?.getRandomValues=="function")globalThis.crypto.getRandomValues(e);else for(let A=0;A<e.length;A++)e[A]=A*90&255;e.fill(0)}}function eA(...e){for(const A of e)A&&Ce(A)}async function AA(e){return crypto.subtle.importKey("raw",N(e),{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async function tA(e,A,t){const i=t??$e(),r=await AA(A),n=await crypto.subtle.encrypt({name:"AES-GCM",iv:N(i)},r,N(e));return{ciphertext:new Uint8Array(n),nonce:i}}async function iA(e,A){const t=await tA(e,A);return{ciphertext:T(t.ciphertext),nonce:T(t.nonce)}}function T(e){const t=[];for(let i=0;i<e.length;i+=32768){const r=e.subarray(i,Math.min(i+32768,e.length));t.push(String.fromCharCode(...r))}return btoa(t.join(""))}function pe(e){let A;try{A=atob(e)}catch{throw new Error("Invalid base64 string: input is malformed or contains invalid characters")}const t=new Uint8Array(A.length);for(let i=0;i<A.length;i++)t[i]=A.charCodeAt(i);return t}async function rA(e,A,t,i=32){const r=await crypto.subtle.importKey("raw",N(e),"HKDF",!1,["deriveBits"]),n=new TextEncoder().encode(t),o=await crypto.subtle.deriveBits({name:"HKDF",hash:"SHA-256",salt:N(A??new Uint8Array(32)),info:N(n)},r,i*8);return new Uint8Array(o)}async function nA(e,A){const t=await rA(e,A,"cedros-wallet-share-b-encryption",32);return ce(t)}async function oA(){try{const e=await crypto.subtle.importKey("raw",new Uint8Array(32),"HKDF",!1,["deriveBits"]);return await crypto.subtle.deriveBits({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(32),info:new Uint8Array(0)},e,256),!0}catch{return!1}}function x(e,A,t,i){function r(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function l(y){try{a(i.next(y))}catch(d){o(d)}}function C(y){try{a(i.throw(y))}catch(d){o(d)}}function a(y){y.done?n(y.value):r(y.value).then(l,C)}a((i=i.apply(e,[])).next())})}class p{constructor(){this.mutex=Promise.resolve()}lock(){let A=()=>{};return this.mutex=this.mutex.then(()=>new Promise(A)),new Promise(t=>{A=t})}dispatch(A){return x(this,void 0,void 0,function*(){const t=yield this.lock();try{return yield Promise.resolve(A())}finally{t()}})}}var ie;function sA(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global}const ae=sA(),re=(ie=ae.Buffer)!==null&&ie!==void 0?ie:null,IA=ae.TextEncoder?new ae.TextEncoder:null;function ye(e,A){return(e&15)+(e>>6|e>>3&8)<<4|(A&15)+(A>>6|A>>3&8)}function ke(e,A){const t=A.length>>1;for(let i=0;i<t;i++){const r=i<<1;e[i]=ye(A.charCodeAt(r),A.charCodeAt(r+1))}}function aA(e,A){if(e.length!==A.length*2)return!1;for(let t=0;t<A.length;t++){const i=t<<1;if(A[t]!==ye(e.charCodeAt(i),e.charCodeAt(i+1)))return!1}return!0}const he=87,ue=48;function ge(e,A,t){let i=0;for(let r=0;r<t;r++){let n=A[r]>>>4;e[i++]=n>9?n+he:n+ue,n=A[r]&15,e[i++]=n>9?n+he:n+ue}return String.fromCharCode.apply(null,e)}const P=re!==null?e=>{if(typeof e=="string"){const A=re.from(e,"utf8");return new Uint8Array(A.buffer,A.byteOffset,A.length)}if(re.isBuffer(e))return new Uint8Array(e.buffer,e.byteOffset,e.length);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Invalid data type!")}:e=>{if(typeof e=="string")return IA.encode(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Invalid data type!")},M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",R=new Uint8Array(256);for(let e=0;e<M.length;e++)R[M.charCodeAt(e)]=e;function fe(e,A=!0){const t=e.length,i=t%3,r=[],n=t-i;for(let o=0;o<n;o+=3){const l=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(e[o+2]&255),C=M.charAt(l>>18&63)+M.charAt(l>>12&63)+M.charAt(l>>6&63)+M.charAt(l&63);r.push(C)}if(i===1){const o=e[t-1],l=M.charAt(o>>2),C=M.charAt(o<<4&63);r.push(`${l}${C}`),A&&r.push("==")}else if(i===2){const o=(e[t-2]<<8)+e[t-1],l=M.charAt(o>>10),C=M.charAt(o>>4&63),a=M.charAt(o<<2&63);r.push(`${l}${C}${a}`),A&&r.push("=")}return r.join("")}function gA(e){let A=Math.floor(e.length*.75);const t=e.length;return e[t-1]==="="&&(A-=1,e[t-2]==="="&&(A-=1)),A}function lA(e){const A=gA(e),t=e.length,i=new Uint8Array(A);let r=0;for(let n=0;n<t;n+=4){const o=R[e.charCodeAt(n)],l=R[e.charCodeAt(n+1)],C=R[e.charCodeAt(n+2)],a=R[e.charCodeAt(n+3)];i[r]=o<<2|l>>4,r+=1,i[r]=(l&15)<<4|C>>2,r+=1,i[r]=(C&3)<<6|a&63,r+=1}return i}const Z=16*1024,v=4,cA=new p,ne=new Map;function Se(e,A){return x(this,void 0,void 0,function*(){let t=null,i=null,r=!1;if(typeof WebAssembly>"u")throw new Error("WebAssembly is not supported in this environment!");const n=(s,h=0)=>{i.set(s,h)},o=()=>i,l=()=>t.exports,C=s=>{t.exports.Hash_SetMemorySize(s);const h=t.exports.Hash_GetBuffer(),k=t.exports.memory.buffer;i=new Uint8Array(k,h,s)},a=()=>new DataView(t.exports.memory.buffer).getUint32(t.exports.STATE_SIZE,!0),y=cA.dispatch(()=>x(this,void 0,void 0,function*(){if(!ne.has(e.name)){const h=lA(e.data),k=WebAssembly.compile(h);ne.set(e.name,k)}const s=yield ne.get(e.name);t=yield WebAssembly.instantiate(s,{})})),d=()=>x(this,void 0,void 0,function*(){t||(yield y);const s=t.exports.Hash_GetBuffer(),h=t.exports.memory.buffer;i=new Uint8Array(h,s,Z)}),f=(s=null)=>{r=!0,t.exports.Hash_Init(s)},b=s=>{let h=0;for(;h<s.length;){const k=s.subarray(h,h+Z);h+=k.length,i.set(k),t.exports.Hash_Update(k.length)}},D=s=>{if(!r)throw new Error("update() called before init()");const h=P(s);b(h)},Q=new Uint8Array(A*2),B=(s,h=null)=>{if(!r)throw new Error("digest() called before init()");return r=!1,t.exports.Hash_Final(h),s==="binary"?i.slice(0,A):ge(Q,i,A)},w=()=>{if(!r)throw new Error("save() can only be called after init() and before digest()");const s=t.exports.Hash_GetState(),h=a(),k=t.exports.memory.buffer,H=new Uint8Array(k,s,h),c=new Uint8Array(v+h);return ke(c,e.hash),c.set(H,v),c},F=s=>{if(!(s instanceof Uint8Array))throw new Error("load() expects an Uint8Array generated by save()");const h=t.exports.Hash_GetState(),k=a(),H=v+k,c=t.exports.memory.buffer;if(s.length!==H)throw new Error(`Bad state length (expected ${H} bytes, got ${s.length})`);if(!aA(e.hash,s.subarray(0,v)))throw new Error("This state was written by an incompatible hash implementation");const S=s.subarray(v);new Uint8Array(c,h,k).set(S),r=!0},E=s=>typeof s=="string"?s.length<Z/4:s.byteLength<Z;let u=E;switch(e.name){case"argon2":case"scrypt":u=()=>!0;break;case"blake2b":case"blake2s":u=(s,h)=>h<=512&&E(s);break;case"blake3":u=(s,h)=>h===0&&E(s);break;case"xxhash64":case"xxhash3":case"xxhash128":case"crc64":u=()=>!1;break}const g=(s,h=null,k=null)=>{if(!u(s,h))return f(h),D(s),B("hex",k);const H=P(s);return i.set(H),t.exports.Hash_Calculate(H.length,h,k),ge(Q,i,A)};return yield d(),{getMemory:o,writeMemory:n,getExports:l,setMemorySize:C,init:f,update:D,digest:B,save:w,load:F,calculate:g,hashLength:A}})}new p;var CA="argon2",hA="AGFzbQEAAAABKQVgAX8Bf2AAAX9gEH9/f39/f39/f39/f39/f38AYAR/f39/AGACf38AAwYFAAECAwQFBgEBAoCAAgYIAX8BQZCoBAsHQQQGbWVtb3J5AgASSGFzaF9TZXRNZW1vcnlTaXplAAAOSGFzaF9HZXRCdWZmZXIAAQ5IYXNoX0NhbGN1bGF0ZQAECvEyBVgBAn9BACEBAkAgAEEAKAKICCICRg0AAkAgACACayIAQRB2IABBgIB8cSAASWoiAEAAQX9HDQBB/wHADwtBACEBQQBBACkDiAggAEEQdK18NwOICAsgAcALcAECfwJAQQAoAoAIIgANAEEAPwBBEHQiADYCgAhBACgCiAgiAUGAgCBGDQACQEGAgCAgAWsiAEEQdiAAQYCAfHEgAElqIgBAAEF/Rw0AQQAPC0EAQQApA4gIIABBEHStfDcDiAhBACgCgAghAAsgAAvcDgECfiAAIAQpAwAiECAAKQMAIhF8IBFCAYZC/v///x+DIBBC/////w+DfnwiEDcDACAMIBAgDCkDAIVCIIkiEDcDACAIIBAgCCkDACIRfCARQgGGQv7///8fgyAQQv////8Pg358IhA3AwAgBCAQIAQpAwCFQiiJIhA3AwAgACAQIAApAwAiEXwgEEL/////D4MgEUIBhkL+////H4N+fCIQNwMAIAwgECAMKQMAhUIwiSIQNwMAIAggECAIKQMAIhF8IBBC/////w+DIBFCAYZC/v///x+DfnwiEDcDACAEIBAgBCkDAIVCAYk3AwAgASAFKQMAIhAgASkDACIRfCARQgGGQv7///8fgyAQQv////8Pg358IhA3AwAgDSAQIA0pAwCFQiCJIhA3AwAgCSAQIAkpAwAiEXwgEUIBhkL+////H4MgEEL/////D4N+fCIQNwMAIAUgECAFKQMAhUIoiSIQNwMAIAEgECABKQMAIhF8IBBC/////w+DIBFCAYZC/v///x+DfnwiEDcDACANIBAgDSkDAIVCMIkiEDcDACAJIBAgCSkDACIRfCAQQv////8PgyARQgGGQv7///8fg358IhA3AwAgBSAQIAUpAwCFQgGJNwMAIAIgBikDACIQIAIpAwAiEXwgEUIBhkL+////H4MgEEL/////D4N+fCIQNwMAIA4gECAOKQMAhUIgiSIQNwMAIAogECAKKQMAIhF8IBFCAYZC/v///x+DIBBC/////w+DfnwiEDcDACAGIBAgBikDAIVCKIkiEDcDACACIBAgAikDACIRfCAQQv////8PgyARQgGGQv7///8fg358IhA3AwAgDiAQIA4pAwCFQjCJIhA3AwAgCiAQIAopAwAiEXwgEEL/////D4MgEUIBhkL+////H4N+fCIQNwMAIAYgECAGKQMAhUIBiTcDACADIAcpAwAiECADKQMAIhF8IBFCAYZC/v///x+DIBBC/////w+DfnwiEDcDACAPIBAgDykDAIVCIIkiEDcDACALIBAgCykDACIRfCARQgGGQv7///8fgyAQQv////8Pg358IhA3AwAgByAQIAcpAwCFQiiJIhA3AwAgAyAQIAMpAwAiEXwgEEL/////D4MgEUIBhkL+////H4N+fCIQNwMAIA8gECAPKQMAhUIwiSIQNwMAIAsgECALKQMAIhF8IBBC/////w+DIBFCAYZC/v///x+DfnwiEDcDACAHIBAgBykDAIVCAYk3AwAgACAFKQMAIhAgACkDACIRfCARQgGGQv7///8fgyAQQv////8Pg358IhA3AwAgDyAQIA8pAwCFQiCJIhA3AwAgCiAQIAopAwAiEXwgEUIBhkL+////H4MgEEL/////D4N+fCIQNwMAIAUgECAFKQMAhUIoiSIQNwMAIAAgECAAKQMAIhF8IBBC/////w+DIBFCAYZC/v///x+DfnwiEDcDACAPIBAgDykDAIVCMIkiEDcDACAKIBAgCikDACIRfCAQQv////8PgyARQgGGQv7///8fg358IhA3AwAgBSAQIAUpAwCFQgGJNwMAIAEgBikDACIQIAEpAwAiEXwgEUIBhkL+////H4MgEEL/////D4N+fCIQNwMAIAwgECAMKQMAhUIgiSIQNwMAIAsgECALKQMAIhF8IBFCAYZC/v///x+DIBBC/////w+DfnwiEDcDACAGIBAgBikDAIVCKIkiEDcDACABIBAgASkDACIRfCAQQv////8PgyARQgGGQv7///8fg358IhA3AwAgDCAQIAwpAwCFQjCJIhA3AwAgCyAQIAspAwAiEXwgEEL/////D4MgEUIBhkL+////H4N+fCIQNwMAIAYgECAGKQMAhUIBiTcDACACIAcpAwAiECACKQMAIhF8IBFCAYZC/v///x+DIBBC/////w+DfnwiEDcDACANIBAgDSkDAIVCIIkiEDcDACAIIBAgCCkDACIRfCARQgGGQv7///8fgyAQQv////8Pg358IhA3AwAgByAQIAcpAwCFQiiJIhA3AwAgAiAQIAIpAwAiEXwgEEL/////D4MgEUIBhkL+////H4N+fCIQNwMAIA0gECANKQMAhUIwiSIQNwMAIAggECAIKQMAIhF8IBBC/////w+DIBFCAYZC/v///x+DfnwiEDcDACAHIBAgBykDAIVCAYk3AwAgAyAEKQMAIhAgAykDACIRfCARQgGGQv7///8fgyAQQv////8Pg358IhA3AwAgDiAQIA4pAwCFQiCJIhA3AwAgCSAQIAkpAwAiEXwgEUIBhkL+////H4MgEEL/////D4N+fCIQNwMAIAQgECAEKQMAhUIoiSIQNwMAIAMgECADKQMAIhF8IBBC/////w+DIBFCAYZC/v///x+DfnwiEDcDACAOIBAgDikDAIVCMIkiEDcDACAJIBAgCSkDACIRfCAQQv////8PgyARQgGGQv7///8fg358IhA3AwAgBCAQIAQpAwCFQgGJNwMAC98aAQN/QQAhBEEAIAIpAwAgASkDAIU3A5AIQQAgAikDCCABKQMIhTcDmAhBACACKQMQIAEpAxCFNwOgCEEAIAIpAxggASkDGIU3A6gIQQAgAikDICABKQMghTcDsAhBACACKQMoIAEpAyiFNwO4CEEAIAIpAzAgASkDMIU3A8AIQQAgAikDOCABKQM4hTcDyAhBACACKQNAIAEpA0CFNwPQCEEAIAIpA0ggASkDSIU3A9gIQQAgAikDUCABKQNQhTcD4AhBACACKQNYIAEpA1iFNwPoCEEAIAIpA2AgASkDYIU3A/AIQQAgAikDaCABKQNohTcD+AhBACACKQNwIAEpA3CFNwOACUEAIAIpA3ggASkDeIU3A4gJQQAgAikDgAEgASkDgAGFNwOQCUEAIAIpA4gBIAEpA4gBhTcDmAlBACACKQOQASABKQOQAYU3A6AJQQAgAikDmAEgASkDmAGFNwOoCUEAIAIpA6ABIAEpA6ABhTcDsAlBACACKQOoASABKQOoAYU3A7gJQQAgAikDsAEgASkDsAGFNwPACUEAIAIpA7gBIAEpA7gBhTcDyAlBACACKQPAASABKQPAAYU3A9AJQQAgAikDyAEgASkD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",uA="e4cdc523",fA={name:CA,data:hA,hash:uA},wA="blake2b",QA="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",BA="c6f286e6",dA={name:wA,data:QA,hash:BA};new p;function we(e){return!Number.isInteger(e)||e<8||e>512||e%8!==0?new Error("Invalid variant! Valid values: 8, 16, ..., 512"):null}function EA(e,A){return e|A<<16}function le(e=512,A=null){if(we(e))return Promise.reject(we(e));let t=null,i=e;if(A!==null){if(t=P(A),t.length>64)return Promise.reject(new Error("Max key length is 64 bytes"));i=EA(e,t.length)}const r=e/8;return Se(dA,r).then(n=>{i>512&&n.writeMemory(t),n.init(i);const o={init:i>512?()=>(n.writeMemory(t),n.init(i),o):()=>(n.init(i),o),update:l=>(n.update(l),o),digest:l=>n.digest(l),save:()=>n.save(),load:l=>(n.load(l),o),blockSize:128,digestSize:r};return o})}function pA(e,A,t){const i=[`m=${A.memorySize}`,`t=${A.iterations}`,`p=${A.parallelism}`].join(",");return`$argon2${A.hashType}$v=19$${i}$${fe(e,!1)}$${fe(t,!1)}`}const Qe=new DataView(new ArrayBuffer(4));function V(e){return Qe.setInt32(0,e,!0),new Uint8Array(Qe.buffer)}function oe(e,A,t){return x(this,void 0,void 0,function*(){if(t<=64){const C=yield le(t*8);return C.update(V(t)),C.update(A),C.digest("binary")}const i=Math.ceil(t/32)-2,r=new Uint8Array(t);e.init(),e.update(V(t)),e.update(A);let n=e.digest("binary");r.set(n.subarray(0,32),0);for(let C=1;C<i;C++)e.init(),e.update(n),n=e.digest("binary"),r.set(n.subarray(0,32),C*32);const o=t-32*i;let l;return o===64?(l=e,l.init()):l=yield le(o*8),l.update(n),n=l.digest("binary"),r.set(n.subarray(0,o),i*32),r})}function yA(e){switch(e){case"d":return 0;case"i":return 1;default:return 2}}function kA(e){return x(this,void 0,void 0,function*(){var A;const{parallelism:t,iterations:i,hashLength:r}=e,n=P(e.password),o=P(e.salt),l=19,C=yA(e.hashType),{memorySize:a}=e,y=P((A=e.secret)!==null&&A!==void 0?A:""),[d,f]=yield Promise.all([Se(fA,1024),le(512)]);d.setMemorySize(a*1024+1024);const b=new Uint8Array(24),D=new DataView(b.buffer);D.setInt32(0,t,!0),D.setInt32(4,r,!0),D.setInt32(8,a,!0),D.setInt32(12,i,!0),D.setInt32(16,l,!0),D.setInt32(20,C,!0),d.writeMemory(b,a*1024),f.init(),f.update(b),f.update(V(n.length)),f.update(n),f.update(V(o.length)),f.update(o),f.update(V(y.length)),f.update(y),f.update(V(0));const B=Math.floor(a/(t*4))*4,w=new Uint8Array(72),F=f.digest("binary");w.set(F);for(let g=0;g<t;g++){w.set(V(0),64),w.set(V(g),68);let s=g*B,h=yield oe(f,w,1024);d.writeMemory(h,s*1024),s+=1,w.set(V(1),64),h=yield oe(f,w,1024),d.writeMemory(h,s*1024)}const E=new Uint8Array(1024);ke(E,d.calculate(new Uint8Array([]),a));const u=yield oe(f,E,r);if(e.outputType==="hex"){const g=new Uint8Array(r*2);return ge(g,u,r)}return e.outputType==="encoded"?pA(o,e,u):u})}const SA=e=>{var A;if(!e||typeof e!="object")throw new Error("Invalid options parameter. It requires an object.");if(!e.password)throw new Error("Password must be specified");if(e.password=P(e.password),e.password.length<1)throw new Error("Password must be specified");if(!e.salt)throw new Error("Salt must be specified");if(e.salt=P(e.salt),e.salt.length<8)throw new Error("Salt should be at least 8 bytes long");if(e.secret=P((A=e.secret)!==null&&A!==void 0?A:""),!Number.isInteger(e.iterations)||e.iterations<1)throw new Error("Iterations should be a positive number");if(!Number.isInteger(e.parallelism)||e.parallelism<1)throw new Error("Parallelism should be a positive number");if(!Number.isInteger(e.hashLength)||e.hashLength<4)throw new Error("Hash length should be at least 4 bytes.");if(!Number.isInteger(e.memorySize))throw new Error("Memory size should be specified.");if(e.memorySize<8*e.parallelism)throw new Error("Memory size should be at least 8 * parallelism.");if(e.outputType===void 0&&(e.outputType="hex"),!["hex","binary","encoded"].includes(e.outputType))throw new Error(`Insupported output type ${e.outputType}. Valid values: ['hex', 'binary', 'encoded']`)};function De(e){return x(this,void 0,void 0,function*(){return SA(e),kA(Object.assign(Object.assign({},e),{hashType:"id"}))})}new p;new p;new p;new p;new p;new p;new p;new p;new p;new p;new p;new p;new p;new p;new p;new p;new p;new p;new p;new p;const DA=32;async function FA(e,A,t=Be){Fe(t);try{const i=await De({password:e,salt:A,iterations:t.tCost,memorySize:t.mCost,parallelism:t.pCost,hashLength:DA,outputType:"binary"});return ce(i)}catch{throw new Error("Key derivation failed")}}function Fe(e){if(e.mCost<16384)throw new Error("KDF memory cost too low (minimum 16 MiB)");if(e.mCost>1048576)throw new Error("KDF memory cost too high (maximum 1 GiB)");if(e.tCost<1)throw new Error("KDF time cost must be at least 1");if(e.tCost>10)throw new Error("KDF time cost too high (maximum 10)");if(e.pCost<1)throw new Error("KDF parallelism must be at least 1");if(e.pCost>4)throw new Error("KDF parallelism too high (maximum 4)")}async function UA(){try{const e=await De({password:"test",salt:new Uint8Array(16),iterations:1,memorySize:1024,parallelism:1,hashLength:32,outputType:"binary"});return e.length!==32?!1:(Ce(e),!0)}catch{return!1}}function bA(e){return e==="localhost"||e==="127.0.0.1"||e.endsWith(".localhost")}function Ue(e){if(typeof window>"u")return;const A=window.location.hostname;if(!bA(A))throw new Error("[Cedros] WebAuthn RP domain validation is not configured. Set wallet.allowedRpDomains to a non-empty list of allowed domains.")}function $(){return typeof window<"u"&&typeof window.PublicKeyCredential<"u"&&typeof navigator.credentials<"u"}async function mA(){if(!$())return!1;try{if(!await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable())return!1;if("getClientCapabilities"in PublicKeyCredential&&typeof PublicKeyCredential.getClientCapabilities=="function"){const A=await PublicKeyCredential.getClientCapabilities();if(A&&"prf"in A)return A.prf===!0}return!0}catch{return!1}}async function GA(e,A,t,i,r){if(!$())throw new Error("WebAuthn is not available in this browser");Ue();const n=i??Ee(),o=await navigator.credentials.create({publicKey:{challenge:crypto.getRandomValues(new Uint8Array(32)),rp:{name:"Cedros Wallet",id:window.location.hostname},user:{id:N(e),name:A,displayName:t},pubKeyCredParams:[{type:"public-key",alg:-7},{type:"public-key",alg:-257}],authenticatorSelection:{authenticatorAttachment:"platform",userVerification:"required",residentKey:"required"},timeout:6e4,attestation:"none",extensions:{prf:{eval:{first:n}}}}});if(!o)throw new Error("Passkey registration was cancelled");const l=o.getClientExtensionResults();if(!l.prf?.enabled||!l.prf?.results?.first)throw new Error("PRF extension is not supported by this authenticator. Please use a device with a compatible platform authenticator.");const C=l.prf?.results?.first;if(!C)throw new Error("PRF extension did not return a result");const a=new Uint8Array(C);if(a.length!==32)throw new Error(`Unexpected PRF output length: expected 32 bytes, got ${a.length}. The authenticator may not be compatible.`);return{credentialId:T(new Uint8Array(o.rawId)),prfSalt:T(n),prfOutput:a}}async function KA(e,A){if(!$())throw new Error("WebAuthn is not available in this browser");Ue();const t=pe(e),i=await navigator.credentials.get({publicKey:{challenge:crypto.getRandomValues(new Uint8Array(32)),rpId:window.location.hostname,allowCredentials:[],userVerification:"required",timeout:6e4,extensions:{prf:{eval:{first:t}}}}});if(!i)throw new Error("Passkey authentication was cancelled");const n=i.getClientExtensionResults().prf?.results?.first;if(!n)throw new Error("PRF extension did not return a result during authentication");const o=new Uint8Array(n);if(o.length!==32)throw new Error(`Unexpected PRF output length: expected 32 bytes, got ${o.length}. The authenticator may not be compatible.`);return{prfOutput:o}}async function HA(){const[e,A,t,i,r,n,o]=await Promise.all([JA(),MA(),oA(),VA(),Promise.resolve($()),mA(),UA()]);return{webCrypto:e,aesGcm:A,hkdf:t,ed25519:i,webAuthn:r,webAuthnPrf:n,argon2:o,allSupported:e&&A&&t&&r&&n&&o}}async function JA(){try{return typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof crypto.getRandomValues=="function"}catch{return!1}}async function MA(){try{const e=await crypto.subtle.generateKey({name:"AES-GCM",length:256},!1,["encrypt","decrypt"]),A=new Uint8Array([1,2,3,4]),t=crypto.getRandomValues(new Uint8Array(12)),i=await crypto.subtle.encrypt({name:"AES-GCM",iv:t},e,A),r=await crypto.subtle.decrypt({name:"AES-GCM",iv:t},e,i),n=new Uint8Array(r);return n.length===A.length&&n.every((o,l)=>o===A[l])}catch{return!1}}async function VA(){try{return await crypto.subtle.generateKey("Ed25519",!1,["sign","verify"]),!0}catch{return!1}}function PA(e){if(e.allSupported)return null;const A=[];return e.webCrypto||A.push("Web Crypto API"),e.aesGcm||A.push("AES-GCM encryption"),e.hkdf||A.push("HKDF key derivation"),e.webAuthn||A.push("WebAuthn/Passkeys"),e.webAuthnPrf||A.push("WebAuthn PRF extension (requires platform authenticator)"),e.argon2||A.push("Argon2 password hashing"),A.length===0?null:`Your browser or device is missing required features: ${A.join(", ")}. Please use a modern browser with a platform authenticator (e.g., Touch ID, Face ID, Windows Hello).`}function YA(){const e=typeof navigator<"u"?navigator.userAgent:"",A=e.match(/Chrome\/(\d+)/);if(A){const n=parseInt(A[1],10);return{browser:"Chrome",version:A[1],likelySupported:n>=116}}const t=e.match(/Version\/(\d+)/);if(t&&e.includes("Safari")&&!e.includes("Chrome")){const n=parseInt(t[1],10);return{browser:"Safari",version:t[1],likelySupported:n>=17}}const i=e.match(/Firefox\/(\d+)/);if(i)return{browser:"Firefox",version:i[1],likelySupported:!1};const r=e.match(/Edg\/(\d+)/);if(r){const n=parseInt(r[1],10);return{browser:"Edge",version:r[1],likelySupported:n>=116}}return{browser:"Unknown",version:"Unknown",likelySupported:!1}}let q=null,se=null;const NA=6e4;async function xA(e=!1){const A=Date.now(),t=se===null||A-se>NA;return!e&&!(typeof window>"u")&&!t&&q!==null||(q=await HA(),se=Date.now()),q}function be(e){switch(e.type){case"password":return{password:e.password};case"prfOutput":return{prfOutput:e.prfOutput}}}function me(){const e=U.useCedrosLoginOptional(),[A,t]=I.useState(!1),[i,r]=I.useState(null),n=e?.config.serverUrl,o=e?.config.requestTimeout,l=e?.config.retryAttempts,C=e?._internal?.getAccessToken,a=I.useMemo(()=>e?new U.ApiClient({baseUrl:n,timeoutMs:o,retryAttempts:l,getAccessToken:C}):null,[e,n,o,l,C]),y=I.useCallback(async()=>{if(!a)throw new Error("useWalletMaterial must be used within a CedrosLoginProvider");t(!0),r(null);try{return await a.get("/wallet/status")}catch(u){const g=U.handleApiError(u,"Failed to fetch wallet status");throw r(g.message),g}finally{t(!1)}},[a]),d=I.useCallback(async()=>{if(!a)throw new Error("useWalletMaterial must be used within a CedrosLoginProvider");t(!0),r(null);try{return await a.get("/wallet/material")}catch(u){const g=U.handleApiError(u,"Failed to fetch wallet material");if(g.code==="NOT_FOUND")return null;throw r(g.message),g}finally{t(!1)}},[a]),f=I.useCallback(async u=>{if(!a)throw new Error("useWalletMaterial must be used within a CedrosLoginProvider");t(!0),r(null);try{await a.post("/wallet/enroll",u)}catch(g){const s=U.handleApiError(g,"Failed to enroll wallet");throw r(s.message),s}finally{t(!1)}},[a]),b=I.useCallback(async u=>{if(!a)throw new Error("useWalletMaterial must be used within a CedrosLoginProvider");t(!0),r(null);try{await a.post("/wallet/recover",u)}catch(g){const s=U.handleApiError(g,"Failed to recover wallet");throw r(s.message),s}finally{t(!1)}},[a]),D=I.useCallback(async u=>{if(!a)throw new Error("useWalletMaterial must be used within a CedrosLoginProvider");t(!0),r(null);try{return await a.post("/wallet/sign",u)}catch(g){const s=U.handleApiError(g,"Failed to sign transaction");throw r(s.message),s}finally{t(!1)}},[a]),Q=I.useCallback(async u=>{if(!a)throw new Error("useWalletMaterial must be used within a CedrosLoginProvider");t(!0),r(null);try{await a.post("/wallet/rotate-user-secret",u)}catch(g){const s=U.handleApiError(g,"Failed to rotate user secret");throw r(s.message),s}finally{t(!1)}},[a]),B=I.useCallback(async u=>{if(!a)throw new Error("useWalletMaterial must be used within a CedrosLoginProvider");t(!0),r(null);try{return await a.post("/wallet/unlock",be(u))}catch(g){const s=U.handleApiError(g,"Failed to unlock wallet");throw r(s.message),s}finally{t(!1)}},[a]),w=I.useCallback(async()=>{if(!a)throw new Error("useWalletMaterial must be used within a CedrosLoginProvider");t(!0),r(null);try{await a.post("/wallet/lock",{})}catch(u){const g=U.handleApiError(u,"Failed to lock wallet");throw r(g.message),g}finally{t(!1)}},[a]),F=I.useCallback(async u=>{if(!a)throw new Error("useWalletMaterial must be used within a CedrosLoginProvider");t(!0),r(null);try{return await a.post("/wallet/share-b",u)}catch(g){const s=U.handleApiError(g,"Failed to get Share B for recovery");throw r(s.message),s}finally{t(!1)}},[a]),E=I.useCallback(()=>r(null),[]);return{getStatus:y,getMaterial:d,enroll:f,recover:b,signTransaction:D,rotateUserSecret:Q,unlock:B,lock:w,getShareBForRecovery:F,isLoading:A,error:i,clearError:E}}const OA={status:"not_enrolled",solanaPubkey:null,authMethod:null,hasExternalWallet:!1,isUnlocked:!1,capabilities:null,isSupported:!1,error:null,refresh:async()=>{},clearError:()=>{}};function Ge(){const A=U.useCedrosLoginOptional()!==null,[t,i]=I.useState("loading"),[r,n]=I.useState(null),[o,l]=I.useState(null),[C,a]=I.useState(!1),[y,d]=I.useState(!1),[f,b]=I.useState(null),[D,Q]=I.useState(null),{getStatus:B,isLoading:w}=me(),F=I.useRef(!1);I.useEffect(()=>{if(!A)return;let g=!1;return(async()=>{try{const h=await xA();if(g)return;b(h),h.allSupported||(i("error"),Q("Your browser or device does not support all required features. Please use a modern browser with a platform authenticator."))}catch{if(g)return;b(null),i("error"),Q("Failed to check crypto capabilities")}})(),()=>{g=!0}},[A]);const E=I.useCallback(async()=>{if(!(!A||!f?.allSupported)){i("loading"),Q(null);try{const g=await B();n(g.solanaPubkey??null),l(g.authMethod??null),a(g.hasExternalWallet),d(g.unlocked),g.hasExternalWallet?i("enrolled_unlocked"):g.enrolled?i(g.unlocked?"enrolled_unlocked":"enrolled_locked"):i("not_enrolled")}catch(g){i("error"),Q(g instanceof Error?g.message:"Failed to fetch wallet status")}}},[A,f?.allSupported,B]);I.useEffect(()=>{A&&f?.allSupported&&!w&&!F.current&&(F.current=!0,E())},[A,f?.allSupported,w,E]);const u=I.useCallback(()=>Q(null),[]);return A?{status:t,solanaPubkey:r,authMethod:o,hasExternalWallet:C,isUnlocked:y,capabilities:f,isSupported:f?.allSupported??!1,error:D,refresh:E,clearError:u}:OA}const z="__CEDROS_EMBEDDED_WALLET__";function vA(e){typeof window<"u"&&(window[z]=e)}function Ie(){typeof window<"u"&&delete window[z]}function RA(){return typeof window>"u"?!1:window[z]?.available??!1}function TA(){return typeof window>"u"?null:window[z]??null}function LA(){const{config:e,user:A}=U.useCedrosLogin(),{status:t,solanaPubkey:i,hasExternalWallet:r}=Ge(),n=e.wallet?.exposeAvailability??!1,o=e.wallet?.exposePublicKey??!1;return I.useEffect(()=>{if(!n||!A){Ie();return}if(r){Ie();return}if(t==="loading")return;const l=t==="enrolled_locked"||t==="enrolled_unlocked";return vA({available:l,publicKey:o&&l?i:null}),()=>{Ie()}},[n,o,A,t,i,r]),null}function XA({config:e,children:A}){const[t,i]=I.useState(null),[r,n]=I.useState(!1),o=I.useRef(e.callbacks);o.current=e.callbacks;const l=I.useRef({onLoginSuccess:(...c)=>o.current?.onLoginSuccess?.(...c),onLoginError:(...c)=>o.current?.onLoginError?.(...c),onLogout:()=>o.current?.onLogout?.(),onSessionExpired:()=>o.current?.onSessionExpired?.()}),C=I.useMemo(()=>JSON.stringify(e.themeOverrides??null),[e.themeOverrides]),a=I.useMemo(()=>JSON.stringify(e.session??null),[e.session]),y=I.useMemo(()=>JSON.stringify(e.features??null),[e.features]),d=I.useMemo(()=>JSON.stringify(e.forms??null),[e.forms]),f=I.useMemo(()=>e,[e.serverUrl,e.googleClientId,e.requestTimeout,e.retryAttempts,e.theme,C,a,y,d]);He({theme:f.theme,themeOverrides:f.themeOverrides});const{user:b,authState:D,handleLoginSuccess:Q,logout:B,refreshUser:w,getAccessToken:F}=xe({serverUrl:f.serverUrl,session:f.session,callbacks:l.current,requestTimeoutMs:f.requestTimeout}),E=I.useCallback(async()=>{i(null),await B()},[B]),u=I.useCallback((...c)=>{i(null),Q(...c)},[Q]),g=I.useCallback(()=>n(!0),[]),s=I.useCallback(()=>n(!1),[]),h=I.useMemo(()=>({config:f,user:b,authState:D,logout:E,refreshUser:w,_internal:{handleLoginSuccess:u,getAccessToken:F}}),[f,b,D,E,w,u,F]),k=I.useMemo(()=>({error:t,isModalOpen:r,openModal:g,closeModal:s}),[t,r,g,s]),H=I.useMemo(()=>({...h,...k}),[h,k]);return X.jsx(te.AuthStateContext.Provider,{value:h,children:X.jsx(te.AuthUIContext.Provider,{value:k,children:X.jsxs(te.CedrosLoginContext.Provider,{value:H,children:[X.jsx(LA,{}),A]})})})}function WA(){const{user:e,authState:A,error:t,logout:i,refreshUser:r,openModal:n,closeModal:o}=U.useCedrosLogin();return{user:e,authState:A,error:t,isAuthenticated:A==="authenticated"&&e!==null,isLoading:A==="loading",logout:i,refreshUser:r,openLoginModal:n,closeLoginModal:o}}exports.CedrosLoginProvider=XA;exports.DEFAULT_KDF_PARAMS=Be;exports.aesGcmEncryptToBase64=iA;exports.argon2Derive=FA;exports.authenticateWithDiscoverablePrf=KA;exports.base64ToUint8Array=pe;exports.deriveKeyFromPrf=nA;exports.generateArgon2Salt=ze;exports.generatePrfSalt=Ee;exports.generateSeed=_e;exports.getBrowserSupportInfo=YA;exports.getEmbeddedWalletInfo=TA;exports.getMissingCapabilitiesMessage=PA;exports.isEmbeddedWalletAvailable=RA;exports.registerPasskeyWithPrf=GA;exports.toCredentialRequest=be;exports.toEncryptionKey=ce;exports.toSeed=de;exports.toShamirShare=We;exports.uint8ArrayToBase64=T;exports.useAuth=WA;exports.useWallet=Ge;exports.useWalletMaterial=me;exports.validateKdfParams=Fe;exports.wipeAll=eA;exports.wipeBytes=Ce;
