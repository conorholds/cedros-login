"use strict";const e=require("react/jsx-runtime"),o=require("react"),b=require("./LoadingSpinner-d6sSxgQN.cjs"),p=require("./ErrorMessage-CHbYbVi2.cjs"),d=require("./AutosaveStatus-CYkC2aI_.cjs"),y=[{id:"general",label:"Integrations",keys:["server_cedros_pay_api_key"]},{id:"logging",label:"Logging",keys:["server_log_level"]},{id:"metrics",label:"Metrics",keys:["server_metrics_api_key"]},{id:"security",label:"Security",categories:["security","features"],keys:["feature_mfa","security_cors_origins","security_session_timeout"]}];function k({className:i}){const{settings:n,edits:v,isLoading:h,autosaveStatus:S,autosaveError:x,error:l,fetchSettings:g,handleChange:f}=d.useSettingsAutosave(),[a,j]=o.useState("general");o.useEffect(()=>{g()},[g]);const t=y.find(s=>s.id===a),u=o.useMemo(()=>{if(!t)return[];const s=t.categories??["server"],m=[];for(const r of s){const c=n[r]??[];m.push(...c)}return m.filter(r=>t.keys.includes(r.key)).sort((r,c)=>t.keys.indexOf(r.key)-t.keys.indexOf(c.key))},[n,t]);return h&&Object.keys(n).length===0?e.jsxs("div",{className:`cedros-system-settings cedros-system-settings-loading ${i??""}`,children:[e.jsx(b.LoadingSpinner,{}),e.jsx("span",{children:"Loading settings..."})]}):l?e.jsx("div",{className:`cedros-system-settings ${i??""}`,children:e.jsx(p.ErrorMessage,{error:l.message})}):e.jsxs("div",{className:`cedros-system-settings ${i??""}`,children:[e.jsxs("div",{className:"cedros-settings-page-header",children:[e.jsxs("div",{className:"cedros-settings-page-header-content",children:[e.jsx("h2",{className:"cedros-settings-page-title",children:"Auth Server"}),e.jsx("p",{className:"cedros-settings-page-description",children:"Server infrastructure settings. Some may be overridden by environment variables."})]}),e.jsx(d.AutosaveStatus,{status:S,error:x})]}),e.jsx("div",{className:"cedros-admin-tabs cedros-admin-tabs--line",children:y.map(s=>e.jsx("button",{type:"button",className:`cedros-admin-tab ${a===s.id?"cedros-admin-tab-active":""}`,onClick:()=>j(s.id),"aria-selected":a===s.id,role:"tab",children:s.label},s.id))}),e.jsx("div",{className:"cedros-admin-tab-content",role:"tabpanel",children:u.length===0?e.jsx("div",{className:"cedros-system-settings-empty",children:e.jsxs("p",{children:["No settings found for ",t?.label??"this section","."]})}):e.jsx(d.SettingsSection,{settings:u,edits:v,onChange:f})})]})}exports.ServerSettings=k;
