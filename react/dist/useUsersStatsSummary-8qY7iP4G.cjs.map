{"version":3,"file":"useUsersStatsSummary-8qY7iP4G.cjs","sources":["../src/utils/adminUserApi.ts","../src/hooks/useAdminUsers.ts","../src/components/admin/AdminUserList.tsx","../src/components/admin/AdminUserDetail.tsx","../src/components/admin/hooks/useUsersStatsSummary.ts"],"sourcesContent":["import type {\n  AdminUser,\n  AdminUserChatsResponse,\n  AdminUserCreditsResponse,\n  AdminUserStatsResponse,\n  AdjustCreditsRequest,\n  ListAdminUsersResponse,\n  ListUsersParams,\n  UpdateUserRequest,\n} from '../types';\nimport type {\n  AdminDepositListResponse,\n  AdminUserWithdrawalHistoryResponse,\n} from '../types/deposit';\nimport { ApiClient, handleApiError } from './apiClient';\n\n/**\n * API client for admin user operations\n *\n * Requires system admin privileges.\n */\nexport class AdminUserApiClient {\n  private client: ApiClient;\n\n  constructor(\n    baseUrl: string,\n    timeoutMs?: number,\n    retryAttempts?: number,\n    getAccessToken?: () => string | null\n  ) {\n    this.client = new ApiClient({ baseUrl, timeoutMs, retryAttempts, getAccessToken });\n  }\n\n  /**\n   * List all users in the system\n   */\n  async listUsers(params?: ListUsersParams): Promise<ListAdminUsersResponse> {\n    try {\n      const query = new URLSearchParams();\n      if (params?.limit) query.set('limit', String(params.limit));\n      if (params?.offset) query.set('offset', String(params.offset));\n      const queryString = query.toString();\n      const url = `/admin/users${queryString ? `?${queryString}` : ''}`;\n      return await this.client.get<ListAdminUsersResponse>(url);\n    } catch (error) {\n      throw handleApiError(error, 'Failed to list users');\n    }\n  }\n\n  /**\n   * Get a specific user by ID\n   */\n  async getUser(userId: string): Promise<AdminUser> {\n    try {\n      return await this.client.get<AdminUser>(`/admin/users/${userId}`);\n    } catch (error) {\n      throw handleApiError(error, 'Failed to get user');\n    }\n  }\n\n  /**\n   * Set a user's system admin status\n   */\n  async setSystemAdmin(userId: string, isAdmin: boolean): Promise<void> {\n    try {\n      await this.client.patch(`/admin/users/${userId}/system-admin`, { isAdmin });\n    } catch (error) {\n      throw handleApiError(error, 'Failed to update system admin status');\n    }\n  }\n\n  /**\n   * Update a user's profile\n   */\n  async updateUser(userId: string, data: UpdateUserRequest): Promise<AdminUser> {\n    try {\n      return await this.client.patch<AdminUser>(`/admin/users/${userId}`, data);\n    } catch (error) {\n      throw handleApiError(error, 'Failed to update user');\n    }\n  }\n\n  /**\n   * Delete a user\n   */\n  async deleteUser(userId: string): Promise<void> {\n    try {\n      await this.client.delete(`/admin/users/${userId}`);\n    } catch (error) {\n      throw handleApiError(error, 'Failed to delete user');\n    }\n  }\n\n  /**\n   * Send a password reset email to a user\n   */\n  async forcePasswordReset(userId: string): Promise<void> {\n    try {\n      await this.client.post(`/admin/users/${userId}/force-password-reset`, {});\n    } catch (error) {\n      throw handleApiError(error, 'Failed to send password reset email');\n    }\n  }\n\n  /**\n   * Adjust a user's credits\n   */\n  async adjustCredits(userId: string, data: AdjustCreditsRequest): Promise<void> {\n    try {\n      await this.client.post(`/admin/users/${userId}/credits`, data);\n    } catch (error) {\n      throw handleApiError(error, 'Failed to adjust credits');\n    }\n  }\n\n  /**\n   * Get a user's deposit history\n   */\n  async getUserDeposits(\n    userId: string,\n    params?: ListUsersParams\n  ): Promise<AdminDepositListResponse> {\n    try {\n      const query = new URLSearchParams();\n      if (params?.limit) query.set('limit', String(params.limit));\n      if (params?.offset) query.set('offset', String(params.offset));\n      const queryString = query.toString();\n      const url = `/admin/users/${userId}/deposits${queryString ? `?${queryString}` : ''}`;\n      return await this.client.get<AdminDepositListResponse>(url);\n    } catch (error) {\n      throw handleApiError(error, 'Failed to get user deposits');\n    }\n  }\n\n  /**\n   * Get a user's credit stats and transaction history\n   */\n  async getUserCredits(\n    userId: string,\n    params?: ListUsersParams\n  ): Promise<AdminUserCreditsResponse> {\n    try {\n      const query = new URLSearchParams();\n      if (params?.limit) query.set('limit', String(params.limit));\n      if (params?.offset) query.set('offset', String(params.offset));\n      const queryString = query.toString();\n      const url = `/admin/users/${userId}/credits${queryString ? `?${queryString}` : ''}`;\n      return await this.client.get<AdminUserCreditsResponse>(url);\n    } catch (error) {\n      throw handleApiError(error, 'Failed to get user credits');\n    }\n  }\n\n  /**\n   * Get a user's withdrawal history\n   */\n  async getUserWithdrawalHistory(\n    userId: string,\n    params?: ListUsersParams\n  ): Promise<AdminUserWithdrawalHistoryResponse> {\n    try {\n      const query = new URLSearchParams();\n      if (params?.limit) query.set('limit', String(params.limit));\n      if (params?.offset) query.set('offset', String(params.offset));\n      const queryString = query.toString();\n      const url = `/admin/users/${userId}/withdrawal-history${queryString ? `?${queryString}` : ''}`;\n      return await this.client.get<AdminUserWithdrawalHistoryResponse>(url);\n    } catch (error) {\n      throw handleApiError(error, 'Failed to get user withdrawal history');\n    }\n  }\n\n  /**\n   * Get a user's chat history (from cedros-pay)\n   * Only available when cedros-pay is enabled.\n   */\n  async getUserChats(userId: string, params?: ListUsersParams): Promise<AdminUserChatsResponse> {\n    try {\n      const query = new URLSearchParams();\n      if (params?.limit) query.set('limit', String(params.limit));\n      if (params?.offset) query.set('offset', String(params.offset));\n      const queryString = query.toString();\n      const url = `/admin/users/${userId}/chats${queryString ? `?${queryString}` : ''}`;\n      return await this.client.get<AdminUserChatsResponse>(url);\n    } catch (error) {\n      throw handleApiError(error, 'Failed to get user chat history');\n    }\n  }\n\n  /**\n   * Get user statistics by auth method\n   */\n  async getStats(): Promise<AdminUserStatsResponse> {\n    try {\n      return await this.client.get<AdminUserStatsResponse>('/admin/users/stats');\n    } catch (error) {\n      throw handleApiError(error, 'Failed to get user stats');\n    }\n  }\n}\n","import { useState, useCallback, useMemo } from 'react';\nimport { useCedrosLogin } from '../context/useCedrosLogin';\nimport { AdminUserApiClient } from '../utils/adminUserApi';\nimport type {\n  AdminUser,\n  AdminUserChatsResponse,\n  AdminUserCreditsResponse,\n  AdminUserStatsResponse,\n  ListAdminUsersResponse,\n  ListUsersParams,\n  UpdateUserRequest,\n  UseAdminUsersReturn,\n} from '../types';\nimport type {\n  AdminDepositListResponse,\n  AdminUserWithdrawalHistoryResponse,\n} from '../types/deposit';\n\n/**\n * Hook for admin user management operations\n *\n * Provides methods to list all users, get individual users,\n * and manage system admin status. Requires system admin privileges.\n *\n * @example\n * ```tsx\n * function UserManagement() {\n *   const { users, total, isLoading, listUsers, setSystemAdmin } = useAdminUsers();\n *\n *   useEffect(() => {\n *     listUsers({ limit: 20 });\n *   }, [listUsers]);\n *\n *   return (\n *     <AdminUserList\n *       users={users}\n *       total={total}\n *       isLoading={isLoading}\n *       onToggleAdmin={(userId, isAdmin) => setSystemAdmin(userId, isAdmin)}\n *     />\n *   );\n * }\n * ```\n */\nexport function useAdminUsers(): UseAdminUsersReturn {\n  const { config, _internal } = useCedrosLogin();\n\n  const [users, setUsers] = useState<AdminUser[]>([]);\n  const [total, setTotal] = useState(0);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n  const [lastParams, setLastParams] = useState<ListUsersParams>({});\n\n  const apiClient = useMemo(\n    () =>\n      new AdminUserApiClient(\n        config.serverUrl,\n        config.requestTimeout,\n        config.retryAttempts,\n        _internal?.getAccessToken\n      ),\n    [config.serverUrl, config.requestTimeout, config.retryAttempts, _internal]\n  );\n\n  const listUsers = useCallback(\n    async (params?: ListUsersParams): Promise<ListAdminUsersResponse> => {\n      setIsLoading(true);\n      setError(null);\n      setLastParams(params || {});\n\n      try {\n        const response = await apiClient.listUsers(params);\n        setUsers(response.users);\n        setTotal(response.total);\n        return response;\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error('Failed to list users');\n        setError(error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const getUser = useCallback(\n    async (userId: string): Promise<AdminUser> => {\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        return await apiClient.getUser(userId);\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error('Failed to get user');\n        setError(error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const setSystemAdmin = useCallback(\n    async (userId: string, isAdmin: boolean): Promise<void> => {\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        await apiClient.setSystemAdmin(userId, isAdmin);\n        // Update local state\n        setUsers((prev) =>\n          prev.map((user) => (user.id === userId ? { ...user, isSystemAdmin: isAdmin } : user))\n        );\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error('Failed to update admin status');\n        setError(error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const updateUser = useCallback(\n    async (userId: string, data: UpdateUserRequest): Promise<AdminUser> => {\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        const updated = await apiClient.updateUser(userId, data);\n        // Update local state\n        setUsers((prev) => prev.map((user) => (user.id === userId ? updated : user)));\n        return updated;\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error('Failed to update user');\n        setError(error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const deleteUser = useCallback(\n    async (userId: string): Promise<void> => {\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        await apiClient.deleteUser(userId);\n        // Remove from local state\n        setUsers((prev) => prev.filter((user) => user.id !== userId));\n        setTotal((prev) => prev - 1);\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error('Failed to delete user');\n        setError(error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const forcePasswordReset = useCallback(\n    async (userId: string): Promise<void> => {\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        await apiClient.forcePasswordReset(userId);\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error('Failed to send password reset');\n        setError(error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const adjustCredits = useCallback(\n    async (userId: string, amount: number, reason: string): Promise<void> => {\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        await apiClient.adjustCredits(userId, { amount, reason });\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error('Failed to adjust credits');\n        setError(error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const getUserDeposits = useCallback(\n    async (userId: string, params?: ListUsersParams): Promise<AdminDepositListResponse> => {\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        return await apiClient.getUserDeposits(userId, params);\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error('Failed to get user deposits');\n        setError(error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const getUserCredits = useCallback(\n    async (userId: string, params?: ListUsersParams): Promise<AdminUserCreditsResponse> => {\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        return await apiClient.getUserCredits(userId, params);\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error('Failed to get user credits');\n        setError(error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const getUserWithdrawalHistory = useCallback(\n    async (\n      userId: string,\n      params?: ListUsersParams\n    ): Promise<AdminUserWithdrawalHistoryResponse> => {\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        return await apiClient.getUserWithdrawalHistory(userId, params);\n      } catch (err) {\n        const error =\n          err instanceof Error ? err : new Error('Failed to get user withdrawal history');\n        setError(error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const getUserChats = useCallback(\n    async (userId: string, params?: ListUsersParams): Promise<AdminUserChatsResponse> => {\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        return await apiClient.getUserChats(userId, params);\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error('Failed to get user chat history');\n        setError(error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const getStats = useCallback(async (): Promise<AdminUserStatsResponse> => {\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      return await apiClient.getStats();\n    } catch (err) {\n      const error = err instanceof Error ? err : new Error('Failed to get user stats');\n      setError(error);\n      throw error;\n    } finally {\n      setIsLoading(false);\n    }\n  }, [apiClient]);\n\n  const refresh = useCallback(async () => {\n    await listUsers(lastParams);\n  }, [listUsers, lastParams]);\n\n  const clearError = useCallback(() => {\n    setError(null);\n  }, []);\n\n  return {\n    users,\n    total,\n    isLoading,\n    error,\n    listUsers,\n    getUser,\n    setSystemAdmin,\n    updateUser,\n    deleteUser,\n    forcePasswordReset,\n    adjustCredits,\n    getUserDeposits,\n    getUserCredits,\n    getUserWithdrawalHistory,\n    getUserChats,\n    getStats,\n    refresh,\n    clearError,\n  };\n}\n","/**\n * Admin user list component\n *\n * Displays all registered users in the system with management actions.\n * Requires system admin privileges.\n */\n\nimport { useState, useEffect, useCallback, useMemo } from 'react';\nimport { useAdminUsers } from '../../hooks/useAdminUsers';\nimport type { AdminUser, ListAdminUsersResponse } from '../../types';\n\ntype SortField = 'name' | 'createdAt' | 'lastLoginAt' | 'balanceLamports';\ntype SortOrder = 'asc' | 'desc';\n\nexport interface AdminUserListProps {\n  /** Number of items per page (default: 20) */\n  pageSize?: number;\n  /** Auto-refresh interval in milliseconds (0 to disable) */\n  refreshInterval?: number;\n  /** Current user's ID (to highlight current user) */\n  currentUserId?: string;\n  /** Additional CSS classes */\n  className?: string;\n  /** Callback when list is loaded */\n  onLoad?: (response: ListAdminUsersResponse) => void;\n  /** Callback when a user is clicked */\n  onUserClick?: (user: AdminUser) => void;\n}\n\nfunction formatDate(dateString: string): string {\n  const date = new Date(dateString);\n  return date.toLocaleDateString(undefined, {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n  });\n}\n\nfunction truncateId(id: string): string {\n  if (id.length <= 12) return id;\n  return `${id.slice(0, 6)}...${id.slice(-4)}`;\n}\n\nfunction formatBalance(lamports: number | undefined): string {\n  if (lamports === undefined || lamports === null) return '-';\n  // Convert lamports to SOL (1 SOL = 1,000,000,000 lamports)\n  const sol = lamports / 1_000_000_000;\n  return sol.toFixed(4);\n}\n\n/**\n * Admin user list display\n *\n * Shows all registered users.\n */\nexport function AdminUserList({\n  pageSize = 20,\n  refreshInterval = 0,\n  currentUserId,\n  className = '',\n  onLoad,\n  onUserClick,\n}: AdminUserListProps) {\n  const { users, total, isLoading, error, listUsers, clearError } = useAdminUsers();\n\n  const [offset, setOffset] = useState(0);\n  const [loadError, setLoadError] = useState<string | null>(null);\n  const [sortField, setSortField] = useState<SortField>('createdAt');\n  const [sortOrder, setSortOrder] = useState<SortOrder>('desc');\n\n  const toggleSort = (field: SortField) => {\n    if (sortField === field) {\n      setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc');\n    } else {\n      setSortField(field);\n      setSortOrder('desc');\n    }\n  };\n\n  // P-05: Client-side sort applies only to the current page of results.\n  // For cross-page sorting, add server-side ORDER BY with sort parameters.\n  const sortedUsers = useMemo(() => {\n    return [...users].sort((a, b) => {\n      let aVal: string | number | null;\n      let bVal: string | number | null;\n\n      switch (sortField) {\n        case 'name':\n          aVal = (a.name || a.email || '').toLowerCase();\n          bVal = (b.name || b.email || '').toLowerCase();\n          break;\n        case 'createdAt':\n          aVal = new Date(a.createdAt).getTime();\n          bVal = new Date(b.createdAt).getTime();\n          break;\n        case 'lastLoginAt':\n          aVal = a.lastLoginAt ? new Date(a.lastLoginAt).getTime() : 0;\n          bVal = b.lastLoginAt ? new Date(b.lastLoginAt).getTime() : 0;\n          break;\n        case 'balanceLamports':\n          aVal = a.balanceLamports ?? 0;\n          bVal = b.balanceLamports ?? 0;\n          break;\n        default:\n          return 0;\n      }\n\n      if (aVal < bVal) return sortOrder === 'asc' ? -1 : 1;\n      if (aVal > bVal) return sortOrder === 'asc' ? 1 : -1;\n      return 0;\n    });\n  }, [users, sortField, sortOrder]);\n\n  const fetchUsers = useCallback(async () => {\n    try {\n      const result = await listUsers({ limit: pageSize, offset });\n      onLoad?.(result);\n      setLoadError(null);\n    } catch (err) {\n      setLoadError(err instanceof Error ? err.message : 'Failed to load users');\n    }\n  }, [pageSize, offset, listUsers, onLoad]);\n\n  // Reset offset when page size changes\n  useEffect(() => {\n    setOffset(0);\n  }, [pageSize]);\n\n  // Fetch on mount and when dependencies change\n  useEffect(() => {\n    fetchUsers();\n  }, [fetchUsers]);\n\n  // Auto-refresh\n  useEffect(() => {\n    if (refreshInterval <= 0) return;\n\n    const interval = setInterval(fetchUsers, refreshInterval);\n    return () => clearInterval(interval);\n  }, [refreshInterval, fetchUsers]);\n\n  const totalPages = Math.ceil(total / pageSize);\n  const currentPage = Math.floor(offset / pageSize) + 1;\n\n  const goToPage = (page: number) => {\n    const newOffset = (page - 1) * pageSize;\n    setOffset(Math.max(0, Math.min(newOffset, Math.max(0, total - 1))));\n  };\n\n  // Error state\n  if (loadError || error) {\n    return (\n      <div className={`cedros-admin-user-list cedros-admin-user-list-error ${className}`}>\n        <p className=\"cedros-admin-error\">{loadError || error?.message}</p>\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-outline\"\n          onClick={() => {\n            clearError();\n            setLoadError(null);\n            fetchUsers();\n          }}\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  // Loading state (initial load only)\n  if (isLoading && users.length === 0) {\n    return (\n      <div className={`cedros-admin-user-list cedros-admin-user-list-loading ${className}`}>\n        <span className=\"cedros-admin-loading-indicator\" />\n        <span className=\"cedros-admin-loading-text\">Loading users...</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`cedros-admin-user-list ${className}`}>\n      <div className=\"cedros-admin-user-list-header\">\n        <h4 className=\"cedros-admin-user-list-title\">All Users</h4>\n        <div className=\"cedros-admin-user-list-actions\">\n          <span className=\"cedros-admin-queue-count\">\n            {total} user{total !== 1 ? 's' : ''}\n          </span>\n          <button\n            type=\"button\"\n            className=\"cedros-admin__stats-bar-refresh\"\n            onClick={fetchUsers}\n            disabled={isLoading}\n            title=\"Refresh list\"\n            aria-label=\"Refresh list\"\n          >\n            {isLoading ? '...' : '↻'}\n          </button>\n        </div>\n      </div>\n\n      {users.length === 0 ? (\n        <div className=\"cedros-admin-empty\">\n          <p className=\"cedros-admin-empty-message\">No users found.</p>\n        </div>\n      ) : (\n        <>\n          <div className=\"cedros-admin-user-table\">\n            <div className=\"cedros-admin-user-thead\">\n              <div className=\"cedros-admin-user-th\">\n                <button\n                  type=\"button\"\n                  className={`cedros-admin-sort-button ${sortField === 'name' ? 'cedros-admin-sort-active' : ''}`}\n                  onClick={() => toggleSort('name')}\n                  aria-label=\"Sort by user\"\n                >\n                  User{' '}\n                  <span className=\"cedros-admin-sort-icon\">\n                    {sortField === 'name' ? (sortOrder === 'asc' ? '↑' : '↓') : '↕'}\n                  </span>\n                </button>\n              </div>\n              <div className=\"cedros-admin-user-th\">\n                <button\n                  type=\"button\"\n                  className={`cedros-admin-sort-button ${sortField === 'createdAt' ? 'cedros-admin-sort-active' : ''}`}\n                  onClick={() => toggleSort('createdAt')}\n                  aria-label=\"Sort by registered date\"\n                >\n                  Registered{' '}\n                  <span className=\"cedros-admin-sort-icon\">\n                    {sortField === 'createdAt' ? (sortOrder === 'asc' ? '↑' : '↓') : '↕'}\n                  </span>\n                </button>\n              </div>\n              <div className=\"cedros-admin-user-th\">\n                <button\n                  type=\"button\"\n                  className={`cedros-admin-sort-button ${sortField === 'lastLoginAt' ? 'cedros-admin-sort-active' : ''}`}\n                  onClick={() => toggleSort('lastLoginAt')}\n                  aria-label=\"Sort by last login\"\n                >\n                  Last Login{' '}\n                  <span className=\"cedros-admin-sort-icon\">\n                    {sortField === 'lastLoginAt' ? (sortOrder === 'asc' ? '↑' : '↓') : '↕'}\n                  </span>\n                </button>\n              </div>\n              <div className=\"cedros-admin-user-th\">\n                <button\n                  type=\"button\"\n                  className={`cedros-admin-sort-button ${sortField === 'balanceLamports' ? 'cedros-admin-sort-active' : ''}`}\n                  onClick={() => toggleSort('balanceLamports')}\n                  aria-label=\"Sort by balance\"\n                >\n                  Balance{' '}\n                  <span className=\"cedros-admin-sort-icon\">\n                    {sortField === 'balanceLamports' ? (sortOrder === 'asc' ? '↑' : '↓') : '↕'}\n                  </span>\n                </button>\n              </div>\n            </div>\n            {sortedUsers.map((user) => {\n              const isCurrentUser = user.id === currentUserId;\n\n              return (\n                <div\n                  key={user.id}\n                  className={`cedros-admin-user-row ${isCurrentUser ? 'cedros-admin-user-row-current' : ''}`}\n                  onClick={() => onUserClick?.(user)}\n                  onKeyDown={(e) => {\n                    if (e.key === 'Enter' || e.key === ' ') {\n                      e.preventDefault();\n                      onUserClick?.(user);\n                    }\n                  }}\n                  role={onUserClick ? 'button' : undefined}\n                  tabIndex={onUserClick ? 0 : undefined}\n                >\n                  <div className=\"cedros-admin-user-td cedros-admin-user-info\">\n                    <div className=\"cedros-admin-user-avatar\">\n                      {user.picture ? (\n                        <img\n                          src={user.picture}\n                          alt={user.name || user.email || 'User'}\n                          className=\"cedros-admin-user-avatar-img\"\n                          referrerPolicy=\"no-referrer\"\n                        />\n                      ) : (\n                        <span className=\"cedros-admin-user-avatar-placeholder\">\n                          {(user.name?.[0] || user.email?.[0] || '?').toUpperCase()}\n                        </span>\n                      )}\n                    </div>\n                    <div className=\"cedros-admin-user-details\">\n                      <span className=\"cedros-admin-user-name\">\n                        {user.name || 'Unknown'}\n                        {isCurrentUser && <span className=\"cedros-admin-user-you\">(you)</span>}\n                      </span>\n                      <span className=\"cedros-admin-user-email\" title={user.email}>\n                        {user.email || truncateId(user.id)}\n                      </span>\n                    </div>\n                  </div>\n                  <div className=\"cedros-admin-user-td\">{formatDate(user.createdAt)}</div>\n                  <div className=\"cedros-admin-user-td\">\n                    {user.lastLoginAt ? formatDate(user.lastLoginAt) : '-'}\n                  </div>\n                  <div className=\"cedros-admin-user-td\">{formatBalance(user.balanceLamports)}</div>\n                </div>\n              );\n            })}\n          </div>\n\n          {totalPages > 1 && (\n            <div className=\"cedros-admin-pagination\">\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-outline cedros-button-sm\"\n                onClick={() => goToPage(currentPage - 1)}\n                disabled={currentPage <= 1}\n              >\n                Previous\n              </button>\n              <span className=\"cedros-admin-page-info\">\n                Page {currentPage} of {totalPages} ({total} total)\n              </span>\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-outline cedros-button-sm\"\n                onClick={() => goToPage(currentPage + 1)}\n                disabled={currentPage >= totalPages}\n              >\n                Next\n              </button>\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n","/**\n * Admin user detail component\n *\n * Displays detailed information about a specific user including:\n * - Account information (email, auth methods, admin status)\n * - Credit balance and stats\n * - Deposit history\n * - Transaction history\n *\n * Requires system admin privileges.\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { useAdminUsers } from '../../hooks/useAdminUsers';\nimport type {\n  AdminUser,\n  AdminUserCreditsResponse,\n  AdminUserChatsResponse,\n  AdminChatSession,\n  AdminCreditTransactionItem,\n  ListUsersParams,\n} from '../../types';\nimport type { AdminDepositListResponse, AdminDepositItem } from '../../types/deposit';\n\nexport interface AdminUserDetailProps {\n  /** User ID to display */\n  userId: string;\n  /** Callback when back button is clicked */\n  onBack: () => void;\n  /** Current user's ID (to prevent self-demotion) */\n  currentUserId?: string;\n  /** Callback when edit is clicked (parent handles modal) */\n  onEditUser?: (user: AdminUser) => void;\n  /** Callback when credits adjustment is clicked (parent handles modal) */\n  onAdjustCredits?: (user: AdminUser) => void;\n  /** Whether cedros-pay is enabled (shows Chats tab) */\n  cedrosPayEnabled?: boolean;\n  /** Additional CSS classes */\n  className?: string;\n}\n\ntype TabId = 'deposits' | 'transactions' | 'chats';\n\nfunction formatDate(dateString: string): string {\n  const date = new Date(dateString);\n  return date.toLocaleDateString(undefined, {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n  });\n}\n\nfunction formatDateTime(dateString: string): string {\n  const date = new Date(dateString);\n  return date.toLocaleString(undefined, {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit',\n  });\n}\n\nfunction formatSol(lamports: number | null | undefined): string {\n  if (lamports === null || lamports === undefined) return '—';\n  const sol = lamports / 1_000_000_000;\n  return `${sol.toFixed(4)} SOL`;\n}\n\nfunction formatCredits(lamports: number | null | undefined): string {\n  if (lamports === null || lamports === undefined) return '—';\n  // Credits are stored in lamports but displayed as a simple number\n  const credits = lamports / 1_000_000_000;\n  return credits.toFixed(4);\n}\n\nfunction formatTxType(txType: string): string {\n  const typeMap: Record<string, string> = {\n    DEPOSIT: 'Deposit',\n    SPEND: 'Spend',\n    ADJUSTMENT: 'Adjustment',\n    REFUND: 'Refund',\n  };\n  return typeMap[txType.toUpperCase()] || txType;\n}\n\nfunction formatTxDescription(txType: string, referenceType?: string): string {\n  if (referenceType) {\n    const refMap: Record<string, string> = {\n      deposit: 'Credit deposit',\n      purchase: 'Purchase',\n      api_call: 'API usage',\n      subscription: 'Subscription',\n      refund: 'Refund',\n      bonus: 'Bonus credit',\n      promo: 'Promotional credit',\n      correction: 'Balance correction',\n    };\n    return refMap[referenceType.toLowerCase()] || referenceType;\n  }\n  // Fallback based on tx type\n  const typeDescriptions: Record<string, string> = {\n    DEPOSIT: 'Credit added',\n    SPEND: 'Credit used',\n    ADJUSTMENT: 'Manual adjustment',\n    REFUND: 'Credit refunded',\n  };\n  return typeDescriptions[txType.toUpperCase()] || '—';\n}\n\n/**\n * Admin user detail display\n *\n * Shows comprehensive user information with deposit and credit history.\n */\nexport function AdminUserDetail({\n  userId,\n  onBack,\n  currentUserId,\n  onEditUser,\n  onAdjustCredits,\n  cedrosPayEnabled = false,\n  className = '',\n}: AdminUserDetailProps) {\n  const {\n    isLoading,\n    getUser,\n    getUserDeposits,\n    getUserCredits,\n    getUserChats,\n    deleteUser,\n    forcePasswordReset,\n    clearError,\n  } = useAdminUsers();\n\n  const [user, setUser] = useState<AdminUser | null>(null);\n  const [credits, setCredits] = useState<AdminUserCreditsResponse | null>(null);\n  const [deposits, setDeposits] = useState<AdminDepositListResponse | null>(null);\n  const [chats, setChats] = useState<AdminUserChatsResponse | null>(null);\n  const [activeTab, setActiveTab] = useState<TabId>('deposits');\n  const [userError, setUserError] = useState<string | null>(null);\n  const [creditsError, setCreditsError] = useState<string | null>(null);\n  const [depositsError, setDepositsError] = useState<string | null>(null);\n  const [chatsError, setChatsError] = useState<string | null>(null);\n  const [actionInProgress, setActionInProgress] = useState(false);\n\n  // Pagination state\n  const [depositsOffset, setDepositsOffset] = useState(0);\n  const [transactionsOffset, setTransactionsOffset] = useState(0);\n  const [chatsOffset, setChatsOffset] = useState(0);\n  const pageSize = 10;\n\n  const fetchUser = useCallback(async () => {\n    try {\n      const userData = await getUser(userId);\n      setUser(userData);\n      setUserError(null);\n    } catch (err) {\n      setUserError(err instanceof Error ? err.message : 'Failed to load user');\n    }\n  }, [userId, getUser]);\n\n  const fetchDeposits = useCallback(async () => {\n    try {\n      const params: ListUsersParams = { limit: pageSize, offset: depositsOffset };\n      const depositsData = await getUserDeposits(userId, params);\n      setDeposits(depositsData);\n      setDepositsError(null);\n    } catch (err) {\n      setDepositsError(err instanceof Error ? err.message : 'Failed to load deposits');\n    }\n  }, [userId, getUserDeposits, depositsOffset]);\n\n  const fetchCredits = useCallback(async () => {\n    try {\n      const params: ListUsersParams = { limit: pageSize, offset: transactionsOffset };\n      const creditsData = await getUserCredits(userId, params);\n      setCredits(creditsData);\n      setCreditsError(null);\n    } catch (err) {\n      setCreditsError(err instanceof Error ? err.message : 'Failed to load credits');\n    }\n  }, [userId, getUserCredits, transactionsOffset]);\n\n  const fetchChats = useCallback(async () => {\n    if (!cedrosPayEnabled) return;\n    try {\n      const params: ListUsersParams = { limit: pageSize, offset: chatsOffset };\n      const chatsData = await getUserChats(userId, params);\n      setChats(chatsData);\n      setChatsError(null);\n    } catch (err) {\n      setChatsError(err instanceof Error ? err.message : 'Failed to load chat history');\n    }\n  }, [userId, getUserChats, chatsOffset, cedrosPayEnabled]);\n\n  // Initial load\n  useEffect(() => {\n    fetchUser();\n    fetchDeposits();\n    fetchCredits();\n    if (cedrosPayEnabled) {\n      fetchChats();\n    }\n  }, [fetchUser, fetchDeposits, fetchCredits, fetchChats, cedrosPayEnabled]);\n\n  const handleDelete = async () => {\n    if (!user) return;\n    if (user.id === currentUserId) {\n      alert('You cannot delete your own account');\n      return;\n    }\n    if (user.isSystemAdmin) {\n      alert('Cannot delete a system admin. Remove admin status first.');\n      return;\n    }\n\n    const confirmed = window.confirm(\n      `Are you sure you want to delete ${user.name || user.email || 'this user'}? This action cannot be undone.`\n    );\n    if (!confirmed) return;\n\n    setActionInProgress(true);\n    try {\n      await deleteUser(user.id);\n      onBack();\n    } catch {\n      // Error handled by hook\n    } finally {\n      setActionInProgress(false);\n    }\n  };\n\n  const handlePasswordReset = async () => {\n    if (!user?.email) {\n      alert('User has no email address');\n      return;\n    }\n\n    const confirmed = window.confirm(`Send a password reset email to ${user.email}?`);\n    if (!confirmed) return;\n\n    setActionInProgress(true);\n    try {\n      await forcePasswordReset(user.id);\n      alert('Password reset email sent');\n    } catch {\n      // Error handled by hook\n    } finally {\n      setActionInProgress(false);\n    }\n  };\n\n  // Pagination handlers\n  const depositsTotalPages = deposits ? Math.ceil(deposits.total / pageSize) : 0;\n  const depositsCurrentPage = Math.floor(depositsOffset / pageSize) + 1;\n\n  const transactionsTotalPages = credits ? Math.ceil(credits.totalTransactions / pageSize) : 0;\n  const transactionsCurrentPage = Math.floor(transactionsOffset / pageSize) + 1;\n\n  const goToDepositsPage = (page: number) => {\n    setDepositsOffset((page - 1) * pageSize);\n  };\n\n  const goToTransactionsPage = (page: number) => {\n    setTransactionsOffset((page - 1) * pageSize);\n  };\n\n  const chatsTotalPages = chats ? Math.ceil(chats.total / pageSize) : 0;\n  const chatsCurrentPage = Math.floor(chatsOffset / pageSize) + 1;\n\n  const goToChatsPage = (page: number) => {\n    setChatsOffset((page - 1) * pageSize);\n  };\n\n  // Critical error - user fetch failed\n  if (userError) {\n    return (\n      <div className={`cedros-admin-user-detail cedros-admin-user-detail-error ${className}`}>\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-outline cedros-button-sm\"\n          onClick={onBack}\n        >\n          Back\n        </button>\n        <p className=\"cedros-admin-error\">{userError}</p>\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-outline\"\n          onClick={() => {\n            clearError();\n            setUserError(null);\n            fetchUser();\n          }}\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  // Loading state\n  if (isLoading && !user) {\n    return (\n      <div className={`cedros-admin-user-detail cedros-admin-user-detail-loading ${className}`}>\n        <span className=\"cedros-admin-loading-indicator\" />\n        <span className=\"cedros-admin-loading-text\">Loading user...</span>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return (\n      <div className={`cedros-admin-user-detail ${className}`}>\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-outline cedros-button-sm\"\n          onClick={onBack}\n        >\n          Back\n        </button>\n        <p className=\"cedros-admin-empty-message\">User not found.</p>\n      </div>\n    );\n  }\n\n  const isCurrentUser = user.id === currentUserId;\n\n  return (\n    <div className={`cedros-admin-user-detail ${className}`}>\n      {/* Header */}\n      <div className=\"cedros-admin-user-detail-header\">\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-outline cedros-button-sm cedros-admin-back-btn\"\n          onClick={onBack}\n        >\n          Back to Users\n        </button>\n        <div className=\"cedros-admin-user-detail-actions\">\n          {onEditUser && (\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-outline cedros-button-sm\"\n              onClick={() => onEditUser(user)}\n              disabled={actionInProgress}\n            >\n              Edit\n            </button>\n          )}\n          {user.email && (\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-outline cedros-button-sm\"\n              onClick={handlePasswordReset}\n              disabled={actionInProgress}\n            >\n              Reset Password\n            </button>\n          )}\n          {onAdjustCredits && (\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-outline cedros-button-sm\"\n              onClick={() => onAdjustCredits(user)}\n              disabled={actionInProgress}\n            >\n              Adjust Credits\n            </button>\n          )}\n          {!isCurrentUser && !user.isSystemAdmin && (\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-outline cedros-button-sm cedros-admin-btn-danger\"\n              onClick={handleDelete}\n              disabled={actionInProgress}\n            >\n              Delete\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* User Info Section */}\n      <div className=\"cedros-admin-user-detail-info\">\n        <div className=\"cedros-admin-user-detail-avatar\">\n          {user.picture ? (\n            <img\n              src={user.picture}\n              alt={user.name || user.email || 'User'}\n              className=\"cedros-admin-user-detail-avatar-img\"\n              referrerPolicy=\"no-referrer\"\n            />\n          ) : (\n            <span className=\"cedros-admin-user-detail-avatar-placeholder\">\n              {(user.name?.[0] || user.email?.[0] || '?').toUpperCase()}\n            </span>\n          )}\n        </div>\n        <div className=\"cedros-admin-user-detail-meta\">\n          <h2 className=\"cedros-admin-user-detail-name\">\n            {user.name || 'Unknown'}\n            {isCurrentUser && <span className=\"cedros-admin-user-you\">(you)</span>}\n          </h2>\n          <p className=\"cedros-admin-user-detail-email\">\n            {user.email || 'No email'}\n            {user.emailVerified && (\n              <span className=\"cedros-admin-verified-badge\" title=\"Email verified\">\n                Verified\n              </span>\n            )}\n          </p>\n          {user.isSystemAdmin && (\n            <div className=\"cedros-admin-user-detail-badges\">\n              <span className=\"cedros-admin-admin-badge cedros-admin-admin-badge-yes\">\n                System Admin\n              </span>\n            </div>\n          )}\n          <div className=\"cedros-admin-user-detail-methods\">\n            <span className=\"cedros-admin-user-detail-methods-label\">Auth Methods:</span>\n            {user.authMethods.length > 0 ? (\n              user.authMethods.map((method) => (\n                <span\n                  key={method}\n                  className={`cedros-admin-auth-badge cedros-admin-auth-badge-${method}`}\n                >\n                  {method}\n                </span>\n              ))\n            ) : (\n              <span className=\"cedros-admin-auth-badge cedros-admin-auth-badge-none\">none</span>\n            )}\n          </div>\n          <p className=\"cedros-admin-user-detail-dates\">\n            Registered: {formatDate(user.createdAt)} | Updated: {formatDate(user.updatedAt)}\n          </p>\n        </div>\n      </div>\n\n      {/* Stats Cards */}\n      {creditsError ? (\n        <div className=\"cedros-admin-stats-error\">\n          <p className=\"cedros-admin-error-inline\">{creditsError}</p>\n          <button\n            type=\"button\"\n            className=\"cedros-button cedros-button-outline cedros-button-sm\"\n            onClick={() => {\n              setCreditsError(null);\n              fetchCredits();\n            }}\n          >\n            Retry\n          </button>\n        </div>\n      ) : credits ? (\n        <div className=\"cedros-admin-user-detail-stats\">\n          <div className=\"cedros-admin-stat-card\">\n            <span className=\"cedros-admin-stat-label\">Credit Balance</span>\n            <span className=\"cedros-admin-stat-value\">\n              {formatCredits(credits.stats.currentBalanceLamports)}\n            </span>\n          </div>\n          <div className=\"cedros-admin-stat-card\">\n            <span className=\"cedros-admin-stat-label\">Total Credited</span>\n            <span className=\"cedros-admin-stat-value\">\n              {formatCredits(credits.stats.totalDepositedLamports)}\n            </span>\n          </div>\n          <div className=\"cedros-admin-stat-card\">\n            <span className=\"cedros-admin-stat-label\">Total Spent</span>\n            <span className=\"cedros-admin-stat-value\">\n              {formatCredits(credits.stats.totalSpentLamports)}\n            </span>\n          </div>\n          <div className=\"cedros-admin-stat-card\">\n            <span className=\"cedros-admin-stat-label\">Deposits</span>\n            <span className=\"cedros-admin-stat-value\">{credits.stats.depositCount}</span>\n          </div>\n          <div className=\"cedros-admin-stat-card\">\n            <span className=\"cedros-admin-stat-label\">Transactions</span>\n            <span className=\"cedros-admin-stat-value\">{credits.stats.spendCount}</span>\n          </div>\n        </div>\n      ) : (\n        <div className=\"cedros-admin-stats-loading\">\n          <span className=\"cedros-admin-loading-indicator\" />\n          <span>Loading credit stats...</span>\n        </div>\n      )}\n\n      {/* Tabs */}\n      <div className=\"cedros-admin-user-detail-tabs\">\n        <button\n          type=\"button\"\n          className={`cedros-admin-tab ${activeTab === 'deposits' ? 'cedros-admin-tab-active' : ''}`}\n          onClick={() => setActiveTab('deposits')}\n        >\n          Deposits ({deposits?.total ?? 0})\n        </button>\n        <button\n          type=\"button\"\n          className={`cedros-admin-tab ${activeTab === 'transactions' ? 'cedros-admin-tab-active' : ''}`}\n          onClick={() => setActiveTab('transactions')}\n        >\n          Credits ({credits?.totalTransactions ?? 0})\n        </button>\n        {cedrosPayEnabled && (\n          <button\n            type=\"button\"\n            className={`cedros-admin-tab ${activeTab === 'chats' ? 'cedros-admin-tab-active' : ''}`}\n            onClick={() => setActiveTab('chats')}\n          >\n            Chats ({chats?.total ?? 0})\n          </button>\n        )}\n      </div>\n\n      {/* Tab Content */}\n      <div className=\"cedros-admin-user-detail-content\">\n        {activeTab === 'deposits' && (\n          <DepositsTab\n            deposits={deposits?.deposits ?? []}\n            total={deposits?.total ?? 0}\n            currentPage={depositsCurrentPage}\n            totalPages={depositsTotalPages}\n            onPageChange={goToDepositsPage}\n            isLoading={isLoading}\n            error={depositsError}\n            onRetry={() => {\n              setDepositsError(null);\n              fetchDeposits();\n            }}\n          />\n        )}\n        {activeTab === 'transactions' && (\n          <TransactionsTab\n            transactions={credits?.transactions ?? []}\n            total={credits?.totalTransactions ?? 0}\n            currentPage={transactionsCurrentPage}\n            totalPages={transactionsTotalPages}\n            onPageChange={goToTransactionsPage}\n            error={creditsError}\n            onRetry={() => {\n              setCreditsError(null);\n              fetchCredits();\n            }}\n            isLoading={isLoading}\n          />\n        )}\n        {activeTab === 'chats' && cedrosPayEnabled && (\n          <ChatsTab\n            sessions={chats?.sessions ?? []}\n            total={chats?.total ?? 0}\n            currentPage={chatsCurrentPage}\n            totalPages={chatsTotalPages}\n            onPageChange={goToChatsPage}\n            error={chatsError}\n            onRetry={() => {\n              setChatsError(null);\n              fetchChats();\n            }}\n            isLoading={isLoading}\n          />\n        )}\n      </div>\n    </div>\n  );\n}\n\n// =============================================================================\n// Tab Components\n// =============================================================================\n\ninterface DepositsTabProps {\n  deposits: AdminDepositItem[];\n  total: number;\n  currentPage: number;\n  totalPages: number;\n  onPageChange: (page: number) => void;\n  isLoading: boolean;\n  error: string | null;\n  onRetry: () => void;\n}\n\nfunction DepositsTab({\n  deposits,\n  total,\n  currentPage,\n  totalPages,\n  onPageChange,\n  isLoading,\n  error,\n  onRetry,\n}: DepositsTabProps) {\n  if (error) {\n    return (\n      <div className=\"cedros-admin-tab-error\">\n        <p className=\"cedros-admin-error-inline\">{error}</p>\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-outline cedros-button-sm\"\n          onClick={onRetry}\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  if (isLoading && deposits.length === 0) {\n    return (\n      <div className=\"cedros-admin-tab-loading\">\n        <span className=\"cedros-admin-loading-indicator\" />\n        <span>Loading deposits...</span>\n      </div>\n    );\n  }\n\n  if (total === 0) {\n    return <div className=\"cedros-admin-empty-message\">No deposits found.</div>;\n  }\n\n  return (\n    <>\n      <div className=\"cedros-admin-list-table\">\n        <div className=\"cedros-admin-list-thead\">\n          <div className=\"cedros-admin-list-th\">Date</div>\n          <div className=\"cedros-admin-list-th\">Amount</div>\n          <div className=\"cedros-admin-list-th\">Status</div>\n          <div className=\"cedros-admin-list-th\">Transaction</div>\n        </div>\n        {deposits.map((deposit) => (\n          <div key={deposit.id} className=\"cedros-admin-list-row\">\n            <div className=\"cedros-admin-list-td\">{formatDateTime(deposit.createdAt)}</div>\n            <div className=\"cedros-admin-list-td\">{formatSol(deposit.amountLamports)}</div>\n            <div className=\"cedros-admin-list-td\">\n              <span className={`cedros-admin-status-badge cedros-admin-status-${deposit.status}`}>\n                {deposit.status}\n              </span>\n            </div>\n            <div className=\"cedros-admin-list-td cedros-admin-list-td-actions\">\n              {deposit.txSignature ? (\n                <>\n                  <span className=\"cedros-admin-list-td-mono\" title={deposit.txSignature}>\n                    {deposit.txSignature.slice(0, 8)}...\n                  </span>\n                  <a\n                    href={`https://orbmarkets.io/tx/${deposit.txSignature}`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"cedros-admin-icon-link\"\n                    title=\"View on Orbmarkets\"\n                    aria-label=\"View transaction on Orbmarkets\"\n                  >\n                    ↗\n                  </a>\n                </>\n              ) : (\n                <span className=\"cedros-admin-list-td-muted\">—</span>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n      {totalPages > 1 && (\n        <Pagination\n          currentPage={currentPage}\n          totalPages={totalPages}\n          total={total}\n          onPageChange={onPageChange}\n        />\n      )}\n    </>\n  );\n}\n\ninterface TransactionsTabProps {\n  transactions: AdminCreditTransactionItem[];\n  total: number;\n  currentPage: number;\n  totalPages: number;\n  onPageChange: (page: number) => void;\n  isLoading: boolean;\n  error: string | null;\n  onRetry: () => void;\n}\n\nfunction TransactionsTab({\n  transactions,\n  total,\n  currentPage,\n  totalPages,\n  onPageChange,\n  isLoading,\n  error,\n  onRetry,\n}: TransactionsTabProps) {\n  if (error) {\n    return (\n      <div className=\"cedros-admin-tab-error\">\n        <p className=\"cedros-admin-error-inline\">{error}</p>\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-outline cedros-button-sm\"\n          onClick={onRetry}\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  if (isLoading && transactions.length === 0) {\n    return (\n      <div className=\"cedros-admin-tab-loading\">\n        <span className=\"cedros-admin-loading-indicator\" />\n        <span>Loading transactions...</span>\n      </div>\n    );\n  }\n\n  if (total === 0) {\n    return <div className=\"cedros-admin-empty-message\">No credit transactions found.</div>;\n  }\n\n  return (\n    <>\n      <div className=\"cedros-admin-list-table\">\n        <div className=\"cedros-admin-list-thead\">\n          <div className=\"cedros-admin-list-th\">Date</div>\n          <div className=\"cedros-admin-list-th\">Type</div>\n          <div className=\"cedros-admin-list-th\">Description</div>\n          <div className=\"cedros-admin-list-th\">Amount</div>\n        </div>\n        {transactions.map((tx) => (\n          <div key={tx.id} className=\"cedros-admin-list-row\">\n            <div className=\"cedros-admin-list-td\">{formatDateTime(tx.createdAt)}</div>\n            <div className=\"cedros-admin-list-td\">\n              <span\n                className={`cedros-admin-tx-type cedros-admin-tx-type-${tx.txType.toLowerCase()}`}\n              >\n                {formatTxType(tx.txType)}\n              </span>\n            </div>\n            <div className=\"cedros-admin-list-td\">\n              {formatTxDescription(tx.txType, tx.referenceType)}\n            </div>\n            <div\n              className={`cedros-admin-list-td ${tx.amountLamports >= 0 ? 'cedros-admin-amount-positive' : 'cedros-admin-amount-negative'}`}\n            >\n              {tx.amountLamports >= 0 ? '+' : ''}\n              {formatCredits(tx.amountLamports)}\n            </div>\n          </div>\n        ))}\n      </div>\n      {totalPages > 1 && (\n        <Pagination\n          currentPage={currentPage}\n          totalPages={totalPages}\n          total={total}\n          onPageChange={onPageChange}\n        />\n      )}\n    </>\n  );\n}\n\ninterface ChatsTabProps {\n  sessions: AdminChatSession[];\n  total: number;\n  currentPage: number;\n  totalPages: number;\n  onPageChange: (page: number) => void;\n  isLoading: boolean;\n  error: string | null;\n  onRetry: () => void;\n}\n\nfunction ChatsTab({\n  sessions,\n  total,\n  currentPage,\n  totalPages,\n  onPageChange,\n  isLoading,\n  error,\n  onRetry,\n}: ChatsTabProps) {\n  if (error) {\n    return (\n      <div className=\"cedros-admin-tab-error\">\n        <p className=\"cedros-admin-error-inline\">{error}</p>\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-outline cedros-button-sm\"\n          onClick={onRetry}\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  if (isLoading && sessions.length === 0) {\n    return (\n      <div className=\"cedros-admin-tab-loading\">\n        <span className=\"cedros-admin-loading-indicator\" />\n        <span>Loading chat history...</span>\n      </div>\n    );\n  }\n\n  if (total === 0) {\n    return <div className=\"cedros-admin-empty-message\">No chat sessions found.</div>;\n  }\n\n  return (\n    <>\n      <div className=\"cedros-admin-list-table\">\n        <div className=\"cedros-admin-list-thead\">\n          <div className=\"cedros-admin-list-th\">Date</div>\n          <div className=\"cedros-admin-list-th\">Session</div>\n          <div className=\"cedros-admin-list-th\">Messages</div>\n        </div>\n        {sessions.map((session) => (\n          <div key={session.id} className=\"cedros-admin-list-row\">\n            <div className=\"cedros-admin-list-td\">{formatDateTime(session.createdAt)}</div>\n            <div className=\"cedros-admin-list-td\">\n              {session.title || `Chat ${session.id.slice(0, 8)}...`}\n            </div>\n            <div className=\"cedros-admin-list-td\">{session.messageCount}</div>\n          </div>\n        ))}\n      </div>\n      {totalPages > 1 && (\n        <Pagination\n          currentPage={currentPage}\n          totalPages={totalPages}\n          total={total}\n          onPageChange={onPageChange}\n        />\n      )}\n    </>\n  );\n}\n\ninterface PaginationProps {\n  currentPage: number;\n  totalPages: number;\n  total: number;\n  onPageChange: (page: number) => void;\n}\n\nfunction Pagination({ currentPage, totalPages, total, onPageChange }: PaginationProps) {\n  return (\n    <div className=\"cedros-admin-pagination\">\n      <button\n        type=\"button\"\n        className=\"cedros-button cedros-button-outline cedros-button-sm\"\n        onClick={() => onPageChange(currentPage - 1)}\n        disabled={currentPage <= 1}\n      >\n        Previous\n      </button>\n      <span className=\"cedros-admin-page-info\">\n        Page {currentPage} of {totalPages} ({total} total)\n      </span>\n      <button\n        type=\"button\"\n        className=\"cedros-button cedros-button-outline cedros-button-sm\"\n        onClick={() => onPageChange(currentPage + 1)}\n        disabled={currentPage >= totalPages}\n      >\n        Next\n      </button>\n    </div>\n  );\n}\n","import { useCallback, useEffect, useMemo, useState } from 'react';\nimport type { AdminUserStatsResponse } from '../../../types';\nimport { useAdminUsers } from '../../../hooks/useAdminUsers';\nimport { useSystemSettings } from '../../../hooks/useSystemSettings';\nimport type { StatItem } from '../StatsBar';\n\nconst METHOD_ORDER = ['email', 'google', 'apple', 'solana', 'webauthn', 'sso'] as const;\n\nconst METHOD_LABELS: Record<(typeof METHOD_ORDER)[number], string> = {\n  email: 'Email Users',\n  google: 'Google Users',\n  apple: 'Apple Users',\n  solana: 'Solana Users',\n  webauthn: 'Passkey Users',\n  sso: 'SSO Provider Users',\n};\n\nconst METHOD_SETTINGS: Record<(typeof METHOD_ORDER)[number], string> = {\n  email: 'auth_email_enabled',\n  google: 'auth_google_enabled',\n  apple: 'auth_apple_enabled',\n  solana: 'auth_solana_enabled',\n  webauthn: 'auth_webauthn_enabled',\n  sso: 'feature_sso',\n};\n\nexport interface UsersStatsSummary {\n  statsItems: StatItem[];\n  isLoading: boolean;\n  error: string | null;\n  refresh: () => Promise<void>;\n}\n\nexport function useUsersStatsSummary(): UsersStatsSummary {\n  const { getStats } = useAdminUsers();\n  const { fetchSettings, getValue } = useSystemSettings();\n  const [stats, setStats] = useState<AdminUserStatsResponse | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [settingsFetched, setSettingsFetched] = useState(false);\n\n  useEffect(() => {\n    if (!settingsFetched) {\n      fetchSettings();\n      setSettingsFetched(true);\n    }\n  }, [fetchSettings, settingsFetched]);\n\n  const isSettingEnabled = useCallback(\n    (key: string): boolean => {\n      const value = getValue(key);\n      if (value === undefined) return false;\n      return value === 'true' || value === '1';\n    },\n    [getValue]\n  );\n\n  const refresh = useCallback(async () => {\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const result = await getStats();\n      setStats(result);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to load user stats');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [getStats]);\n\n  useEffect(() => {\n    void refresh();\n  }, [refresh]);\n\n  const statsItems = useMemo(() => {\n    const items: StatItem[] = [{ label: 'Total Users', value: stats?.total ?? '—' }];\n\n    METHOD_ORDER.forEach((method) => {\n      if (!isSettingEnabled(METHOD_SETTINGS[method])) return;\n      items.push({\n        label: METHOD_LABELS[method],\n        value: stats?.authMethodCounts[method] ?? 0,\n      });\n    });\n\n    return items;\n  }, [stats, isSettingEnabled]);\n\n  return { statsItems, isLoading, error, refresh };\n}\n"],"names":["AdminUserApiClient","baseUrl","timeoutMs","retryAttempts","getAccessToken","ApiClient","params","query","queryString","url","error","handleApiError","userId","isAdmin","data","useAdminUsers","config","_internal","useCedrosLogin","users","setUsers","useState","total","setTotal","isLoading","setIsLoading","setError","lastParams","setLastParams","apiClient","useMemo","listUsers","useCallback","response","err","getUser","setSystemAdmin","prev","user","updateUser","updated","deleteUser","forcePasswordReset","adjustCredits","amount","reason","getUserDeposits","getUserCredits","getUserWithdrawalHistory","getUserChats","getStats","refresh","clearError","formatDate","dateString","truncateId","id","formatBalance","lamports","AdminUserList","pageSize","refreshInterval","currentUserId","className","onLoad","onUserClick","offset","setOffset","loadError","setLoadError","sortField","setSortField","sortOrder","setSortOrder","toggleSort","field","sortedUsers","a","b","aVal","bVal","fetchUsers","result","useEffect","interval","totalPages","currentPage","goToPage","page","newOffset","jsxs","jsx","Fragment","isCurrentUser","e","formatDateTime","formatSol","formatCredits","formatTxType","txType","formatTxDescription","referenceType","AdminUserDetail","onBack","onEditUser","onAdjustCredits","cedrosPayEnabled","setUser","credits","setCredits","deposits","setDeposits","chats","setChats","activeTab","setActiveTab","userError","setUserError","creditsError","setCreditsError","depositsError","setDepositsError","chatsError","setChatsError","actionInProgress","setActionInProgress","depositsOffset","setDepositsOffset","transactionsOffset","setTransactionsOffset","chatsOffset","setChatsOffset","fetchUser","userData","fetchDeposits","depositsData","fetchCredits","creditsData","fetchChats","chatsData","handleDelete","handlePasswordReset","depositsTotalPages","depositsCurrentPage","transactionsTotalPages","transactionsCurrentPage","goToDepositsPage","goToTransactionsPage","chatsTotalPages","chatsCurrentPage","goToChatsPage","method","DepositsTab","TransactionsTab","ChatsTab","onPageChange","onRetry","deposit","Pagination","transactions","tx","sessions","session","METHOD_ORDER","METHOD_LABELS","METHOD_SETTINGS","useUsersStatsSummary","fetchSettings","getValue","useSystemSettings","stats","setStats","settingsFetched","setSettingsFetched","isSettingEnabled","key","value","items"],"mappings":"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"}