{"version":3,"file":"AdminWithdrawalHistory-Cud-yuWy.js","sources":["../src/components/deposit/admin/AdminWithdrawalStats.tsx","../src/components/deposit/admin/AdminWithdrawalQueue.tsx","../src/components/deposit/admin/AdminPrivacyPeriodDeposits.tsx","../src/components/deposit/admin/AdminWithdrawalHistory.tsx"],"sourcesContent":["/**\n * Admin withdrawal statistics component\n *\n * Shows high-level withdrawal pipeline stats in a single row.\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { useAdminDeposits } from '../../../hooks/useAdminDeposits';\nimport type { AdminDepositStatsResponse } from '../../../types/deposit';\nimport { FeatureDisabledMessage } from './FeatureDisabledMessage';\nimport { isFeatureDisabledError } from './featureDisabled';\nimport { StatsBar } from '../../admin/StatsBar';\n\nexport interface AdminWithdrawalStatsProps {\n  /** Auto-refresh interval in milliseconds (0 to disable) */\n  refreshInterval?: number;\n  /** External refresh signal from parent coordinator */\n  refreshSignal?: number;\n  /** Additional CSS classes */\n  className?: string;\n  /** Callback when stats are loaded */\n  onLoad?: (stats: AdminDepositStatsResponse) => void;\n}\n\nexport function AdminWithdrawalStats({\n  refreshInterval = 0,\n  refreshSignal,\n  className = '',\n  onLoad,\n}: AdminWithdrawalStatsProps) {\n  const { getStats, isLoading, error, clearError } = useAdminDeposits();\n\n  const [stats, setStats] = useState<AdminDepositStatsResponse | null>(null);\n  const [loadError, setLoadError] = useState<string | null>(null);\n\n  const fetchStats = useCallback(async () => {\n    try {\n      const result = await getStats();\n      setStats(result);\n      onLoad?.(result);\n      setLoadError(null);\n    } catch (err) {\n      const message =\n        err && typeof err === 'object' && 'message' in err\n          ? String((err as { message: unknown }).message)\n          : 'Failed to load stats';\n      setLoadError(message);\n    }\n  }, [getStats, onLoad]);\n\n  useEffect(() => {\n    fetchStats();\n  }, [fetchStats]);\n\n  useEffect(() => {\n    if (refreshSignal === undefined) return;\n    fetchStats();\n  }, [refreshSignal, fetchStats]);\n\n  useEffect(() => {\n    if (refreshSignal !== undefined) return;\n    if (refreshInterval <= 0) return;\n    const interval = setInterval(fetchStats, refreshInterval);\n    return () => clearInterval(interval);\n  }, [refreshInterval, refreshSignal, fetchStats]);\n\n  const errorMessage = loadError || error;\n  if (isFeatureDisabledError(errorMessage)) {\n    return <FeatureDisabledMessage feature=\"Privacy Cash\" className={className} />;\n  }\n\n  if (errorMessage) {\n    return (\n      <div className={`cedros-admin-stats ${className}`}>\n        <p className=\"cedros-admin-error\">{errorMessage}</p>\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-outline\"\n          onClick={() => {\n            clearError();\n            setLoadError(null);\n            fetchStats();\n          }}\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  if (isLoading && !stats) {\n    return (\n      <div className={`cedros-admin-stats ${className}`}>\n        <StatsBar\n          stats={[\n            { label: 'Total Withdrawn', value: 0 },\n            { label: 'Pending Withdraw', value: 0 },\n            { label: 'In Privacy Period', value: 0 },\n            { label: 'Microbatch (SOL)', value: '0.0000' },\n          ]}\n          isLoading\n        />\n      </div>\n    );\n  }\n\n  if (!stats) return null;\n\n  return (\n    <div className={`cedros-admin-stats ${className}`}>\n      <StatsBar\n        stats={[\n          { label: 'Total Withdrawn', value: stats.totalWithdrawnCount },\n          { label: 'Pending Withdraw', value: stats.pendingWithdrawalCount },\n          { label: 'In Privacy Period', value: stats.inPrivacyPeriodCount ?? 0 },\n          { label: 'Microbatch (SOL)', value: stats.readyForWithdrawalSol?.toFixed(4) ?? '0.0000' },\n        ]}\n        isLoading={isLoading}\n        onRefresh={fetchStats}\n      />\n    </div>\n  );\n}\n","/**\n * Admin withdrawal queue component\n *\n * Shows deposits that are ready for withdrawal (privacy period elapsed).\n * Includes buttons to process individual or all withdrawals.\n * Requires system admin privileges.\n */\n\nimport { useState, useEffect, useCallback, useMemo } from 'react';\nimport { useAdminDeposits } from '../../../hooks/useAdminDeposits';\nimport type {\n  AdminDepositItem,\n  AdminDepositListResponse,\n  ProcessWithdrawalResponse,\n  ProcessAllWithdrawalsResponse,\n} from '../../../types/deposit';\nimport { FeatureDisabledMessage } from './FeatureDisabledMessage';\nimport { isFeatureDisabledError } from './featureDisabled';\n\ntype QueueSortField = 'userId' | 'amountLamports' | 'withdrawalAvailableAt';\ntype SortOrder = 'asc' | 'desc';\n\nexport interface AdminWithdrawalQueueProps {\n  /** Number of items per page (default: 20) */\n  pageSize?: number;\n  /** Auto-refresh interval in milliseconds (0 to disable) */\n  refreshInterval?: number;\n  /** External refresh signal from parent coordinator */\n  refreshSignal?: number;\n  /** Additional CSS classes */\n  className?: string;\n  /** Callback when list is loaded */\n  onLoad?: (response: AdminDepositListResponse) => void;\n  /** Callback when a withdrawal item is clicked */\n  onItemClick?: (item: AdminDepositItem) => void;\n  /** Callback when a withdrawal is processed */\n  onWithdrawalProcessed?: (response: ProcessWithdrawalResponse) => void;\n  /** Callback when all withdrawals are processed */\n  onAllProcessed?: (response: ProcessAllWithdrawalsResponse) => void;\n}\n\nfunction formatAmount(lamports: number | null): string {\n  if (lamports === null || lamports === undefined) return '—';\n  const solAmount = lamports / 1_000_000_000;\n  return `${solAmount.toFixed(4)} SOL`;\n}\n\nfunction formatDate(dateString: string): string {\n  const date = new Date(dateString);\n  return date.toLocaleDateString(undefined, {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit',\n  });\n}\n\nfunction truncateId(id: string): string {\n  if (id.length <= 12) return id;\n  return `${id.slice(0, 6)}...${id.slice(-4)}`;\n}\n\nfunction getTimeElapsed(dateString: string): string {\n  const date = new Date(dateString);\n  const now = new Date();\n  const diffMs = now.getTime() - date.getTime();\n  const diffMins = Math.floor(diffMs / 60000);\n  const diffHours = Math.floor(diffMins / 60);\n  const diffDays = Math.floor(diffHours / 24);\n\n  if (diffDays > 0) return `${diffDays}d ago`;\n  if (diffHours > 0) return `${diffHours}h ago`;\n  if (diffMins > 0) return `${diffMins}m ago`;\n  return 'just now';\n}\n\nfunction isWithinPrivacyPeriod(withdrawalAvailableAt: string | undefined): boolean {\n  if (!withdrawalAvailableAt) return true;\n  return new Date(withdrawalAvailableAt) > new Date();\n}\n\n/**\n * Admin withdrawal queue display\n *\n * Shows deposits ready for withdrawal processing with action buttons.\n */\nexport function AdminWithdrawalQueue({\n  pageSize = 20,\n  refreshInterval = 0,\n  refreshSignal,\n  className = '',\n  onLoad,\n  onItemClick,\n  onWithdrawalProcessed,\n  onAllProcessed,\n}: AdminWithdrawalQueueProps) {\n  const {\n    listPendingWithdrawals,\n    processWithdrawal,\n    processAllWithdrawals,\n    isLoading,\n    error,\n    clearError,\n  } = useAdminDeposits();\n\n  const [items, setItems] = useState<AdminDepositItem[]>([]);\n  const [total, setTotal] = useState(0);\n  const [offset, setOffset] = useState(0);\n  const [loadError, setLoadError] = useState<string | null>(null);\n  const [sortField, setSortField] = useState<QueueSortField>('withdrawalAvailableAt');\n  const [sortOrder, setSortOrder] = useState<SortOrder>('asc');\n\n  const toggleSort = (field: QueueSortField) => {\n    if (sortField === field) {\n      setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc');\n    } else {\n      setSortField(field);\n      setSortOrder(field === 'withdrawalAvailableAt' ? 'asc' : 'desc');\n    }\n  };\n\n  const sortedItems = useMemo(() => {\n    return [...items].sort((a, b) => {\n      let aVal: string | number;\n      let bVal: string | number;\n\n      switch (sortField) {\n        case 'userId':\n          aVal = a.userId.toLowerCase();\n          bVal = b.userId.toLowerCase();\n          break;\n        case 'amountLamports':\n          aVal = a.amountLamports ?? 0;\n          bVal = b.amountLamports ?? 0;\n          break;\n        case 'withdrawalAvailableAt':\n          aVal = a.withdrawalAvailableAt ? new Date(a.withdrawalAvailableAt).getTime() : 0;\n          bVal = b.withdrawalAvailableAt ? new Date(b.withdrawalAvailableAt).getTime() : 0;\n          break;\n        default:\n          return 0;\n      }\n\n      if (aVal < bVal) return sortOrder === 'asc' ? -1 : 1;\n      if (aVal > bVal) return sortOrder === 'asc' ? 1 : -1;\n      return 0;\n    });\n  }, [items, sortField, sortOrder]);\n\n  // Processing state\n  const [processingId, setProcessingId] = useState<string | null>(null);\n  const [processingAll, setProcessingAll] = useState(false);\n  const [processResult, setProcessResult] = useState<{\n    type: 'success' | 'error';\n    message: string;\n  } | null>(null);\n\n  // Early withdrawal confirmation modal\n  const [earlyWithdrawalItem, setEarlyWithdrawalItem] = useState<AdminDepositItem | null>(null);\n\n  const fetchItems = useCallback(async () => {\n    try {\n      const result = await listPendingWithdrawals({ limit: pageSize, offset });\n      setItems(result.deposits);\n      setTotal(result.total);\n      onLoad?.(result);\n      setLoadError(null);\n    } catch (err) {\n      const message =\n        err && typeof err === 'object' && 'message' in err\n          ? String((err as { message: unknown }).message)\n          : 'Failed to load pending withdrawals';\n      setLoadError(message);\n    }\n  }, [pageSize, offset, listPendingWithdrawals, onLoad]);\n\n  // Reset offset when page size changes\n  useEffect(() => {\n    setOffset(0);\n  }, [pageSize]);\n\n  // Fetch on mount and when dependencies change\n  useEffect(() => {\n    fetchItems();\n  }, [fetchItems]);\n\n  useEffect(() => {\n    if (refreshSignal === undefined) return;\n    fetchItems();\n  }, [refreshSignal, fetchItems]);\n\n  // Auto-refresh\n  useEffect(() => {\n    if (refreshSignal !== undefined) return;\n    if (refreshInterval <= 0) return;\n\n    const interval = setInterval(fetchItems, refreshInterval);\n    return () => clearInterval(interval);\n  }, [refreshInterval, refreshSignal, fetchItems]);\n\n  // Clear result message after 5 seconds\n  useEffect(() => {\n    if (!processResult) return;\n    const timer = setTimeout(() => setProcessResult(null), 5000);\n    return () => clearTimeout(timer);\n  }, [processResult]);\n\n  const totalPages = Math.ceil(total / pageSize);\n  const currentPage = Math.floor(offset / pageSize) + 1;\n\n  const goToPage = (page: number) => {\n    const newOffset = (page - 1) * pageSize;\n    setOffset(Math.max(0, Math.min(newOffset, Math.max(0, total - 1))));\n  };\n\n  const handleProcessSingle = async (item: AdminDepositItem, force = false) => {\n    // Check if within privacy period and not forcing\n    if (!force && isWithinPrivacyPeriod(item.withdrawalAvailableAt)) {\n      setEarlyWithdrawalItem(item);\n      return;\n    }\n\n    setProcessingId(item.id);\n    setProcessResult(null);\n\n    try {\n      const result = await processWithdrawal(item.id, { force });\n      if (result.success) {\n        setProcessResult({\n          type: 'success',\n          message: `Withdrawal processed: ${result.txSignature?.slice(0, 12)}...`,\n        });\n        onWithdrawalProcessed?.(result);\n        // Refresh the list\n        await fetchItems();\n      } else {\n        setProcessResult({\n          type: 'error',\n          message: result.error || 'Failed to process withdrawal',\n        });\n      }\n    } catch (err) {\n      setProcessResult({\n        type: 'error',\n        message: err instanceof Error ? err.message : 'Failed to process withdrawal',\n      });\n    } finally {\n      setProcessingId(null);\n      setEarlyWithdrawalItem(null);\n    }\n  };\n\n  const handleProcessAll = async () => {\n    if (items.length === 0) return;\n\n    setProcessingAll(true);\n    setProcessResult(null);\n\n    try {\n      const result = await processAllWithdrawals();\n      if (result.totalSucceeded > 0) {\n        setProcessResult({\n          type: 'success',\n          message: `Processed ${result.totalSucceeded}/${result.totalProcessed} withdrawals`,\n        });\n      } else if (result.totalFailed > 0) {\n        setProcessResult({\n          type: 'error',\n          message: `Failed to process ${result.totalFailed} withdrawals`,\n        });\n      }\n      onAllProcessed?.(result);\n      // Refresh the list\n      await fetchItems();\n    } catch (err) {\n      setProcessResult({\n        type: 'error',\n        message: err instanceof Error ? err.message : 'Failed to process withdrawals',\n      });\n    } finally {\n      setProcessingAll(false);\n    }\n  };\n\n  // Feature disabled state\n  const errorMessage = loadError || error;\n  if (isFeatureDisabledError(errorMessage)) {\n    return <FeatureDisabledMessage feature=\"Privacy Cash\" className={className} />;\n  }\n\n  // Error state\n  if (errorMessage) {\n    return (\n      <div\n        className={`cedros-admin-withdrawal-queue cedros-admin-withdrawal-queue-error ${className}`}\n      >\n        <p className=\"cedros-admin-error\">{errorMessage}</p>\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-outline\"\n          onClick={() => {\n            clearError();\n            setLoadError(null);\n            fetchItems();\n          }}\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  // Loading state (initial load only)\n  if (isLoading && items.length === 0 && !processingId && !processingAll) {\n    return (\n      <div\n        className={`cedros-admin-withdrawal-queue cedros-admin-withdrawal-queue-loading ${className}`}\n      >\n        <span className=\"cedros-admin-loading-indicator\" />\n        <span className=\"cedros-admin-loading-text\">Loading withdrawal queue...</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`cedros-admin-withdrawal-queue ${className}`}>\n      {/* Early Withdrawal Confirmation Modal */}\n      {earlyWithdrawalItem && (\n        <div\n          className=\"cedros-admin-modal-overlay\"\n          onClick={() => setEarlyWithdrawalItem(null)}\n          onKeyDown={(e) => e.key === 'Escape' && setEarlyWithdrawalItem(null)}\n          role=\"dialog\"\n          aria-modal=\"true\"\n          aria-labelledby=\"early-withdrawal-title\"\n        >\n          <div\n            className=\"cedros-admin-modal cedros-admin-modal-warning\"\n            onClick={(e) => e.stopPropagation()}\n            onKeyDown={() => {}}\n            role=\"document\"\n          >\n            <h3 id=\"early-withdrawal-title\" className=\"cedros-admin-modal-title\">\n              Early Withdrawal Warning\n            </h3>\n            <div className=\"cedros-admin-modal-content\">\n              <p className=\"cedros-admin-modal-warning-text\">\n                <strong>This deposit is still within its privacy period.</strong>\n              </p>\n              <p>\n                Processing this withdrawal early may compromise user privacy. The privacy period\n                exists to provide plausible deniability for deposits.\n              </p>\n              <p className=\"cedros-admin-modal-details\">\n                User: {truncateId(earlyWithdrawalItem.userId)}\n                <br />\n                Amount: {formatAmount(earlyWithdrawalItem.amountLamports)}\n                <br />\n                Available at:{' '}\n                {earlyWithdrawalItem.withdrawalAvailableAt\n                  ? formatDate(earlyWithdrawalItem.withdrawalAvailableAt)\n                  : '—'}\n              </p>\n              <p>Are you sure you want to process this withdrawal early?</p>\n            </div>\n            <div className=\"cedros-admin-modal-actions\">\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-outline\"\n                onClick={() => setEarlyWithdrawalItem(null)}\n              >\n                Cancel\n              </button>\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-danger\"\n                onClick={() => handleProcessSingle(earlyWithdrawalItem, true)}\n                disabled={processingId === earlyWithdrawalItem.id}\n              >\n                {processingId === earlyWithdrawalItem.id ? 'Processing...' : 'Process Early'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Result message */}\n      {processResult && (\n        <div\n          className={`cedros-admin-result cedros-admin-result-${processResult.type}`}\n          role=\"status\"\n          aria-live=\"polite\"\n        >\n          {processResult.message}\n        </div>\n      )}\n\n      <div className=\"cedros-admin-withdrawal-queue-header\">\n        <h4 className=\"cedros-admin-withdrawal-queue-title\">Pending Withdrawals</h4>\n        <div className=\"cedros-admin-withdrawal-queue-actions\">\n          <span className=\"cedros-admin-queue-count\">{total} pending</span>\n          <button\n            type=\"button\"\n            className=\"cedros-admin__stats-bar-refresh\"\n            onClick={fetchItems}\n            disabled={isLoading || processingAll}\n            title=\"Refresh queue\"\n            aria-label=\"Refresh queue\"\n          >\n            {isLoading && !processingAll ? '...' : '↻'}\n          </button>\n          <button\n            type=\"button\"\n            className=\"cedros-button cedros-button-primary cedros-button-sm\"\n            onClick={handleProcessAll}\n            disabled={isLoading || processingAll || items.length === 0}\n            title=\"Process all ready withdrawals\"\n          >\n            {processingAll ? 'Processing...' : 'Process All'}\n          </button>\n        </div>\n      </div>\n\n      {items.length === 0 ? (\n        <div className=\"cedros-admin-empty\">\n          <p className=\"cedros-admin-empty-message\">No pending withdrawals.</p>\n        </div>\n      ) : (\n        <>\n          <div className=\"cedros-admin-withdrawal-table\">\n            <div className=\"cedros-admin-withdrawal-thead\">\n              <div className=\"cedros-admin-withdrawal-th\">\n                <button\n                  type=\"button\"\n                  className={`cedros-admin-sort-button ${sortField === 'userId' ? 'cedros-admin-sort-active' : ''}`}\n                  onClick={() => toggleSort('userId')}\n                  aria-label=\"Sort by user\"\n                >\n                  User{' '}\n                  <span className=\"cedros-admin-sort-icon\">\n                    {sortField === 'userId' ? (sortOrder === 'asc' ? '↑' : '↓') : '↕'}\n                  </span>\n                </button>\n              </div>\n              <div className=\"cedros-admin-withdrawal-th\">\n                <button\n                  type=\"button\"\n                  className={`cedros-admin-sort-button ${sortField === 'amountLamports' ? 'cedros-admin-sort-active' : ''}`}\n                  onClick={() => toggleSort('amountLamports')}\n                  aria-label=\"Sort by amount\"\n                >\n                  Amount{' '}\n                  <span className=\"cedros-admin-sort-icon\">\n                    {sortField === 'amountLamports' ? (sortOrder === 'asc' ? '↑' : '↓') : '↕'}\n                  </span>\n                </button>\n              </div>\n              <div className=\"cedros-admin-withdrawal-th\">\n                <button\n                  type=\"button\"\n                  className={`cedros-admin-sort-button ${sortField === 'withdrawalAvailableAt' ? 'cedros-admin-sort-active' : ''}`}\n                  onClick={() => toggleSort('withdrawalAvailableAt')}\n                  aria-label=\"Sort by ready since\"\n                >\n                  Ready Since{' '}\n                  <span className=\"cedros-admin-sort-icon\">\n                    {sortField === 'withdrawalAvailableAt'\n                      ? sortOrder === 'asc'\n                        ? '↑'\n                        : '↓'\n                      : '↕'}\n                  </span>\n                </button>\n              </div>\n              <div className=\"cedros-admin-withdrawal-th\">Waiting</div>\n              <div className=\"cedros-admin-withdrawal-th cedros-admin-withdrawal-th-action\">\n                Action\n              </div>\n            </div>\n            {sortedItems.map((item) => {\n              const withinPrivacyPeriod = isWithinPrivacyPeriod(item.withdrawalAvailableAt);\n              const isProcessing = processingId === item.id;\n\n              return (\n                <div\n                  key={item.id}\n                  className={`cedros-admin-withdrawal-row ${withinPrivacyPeriod ? 'cedros-admin-withdrawal-row-early' : ''}`}\n                  onClick={() => onItemClick?.(item)}\n                  onKeyDown={(e) => {\n                    if (e.key === 'Enter' || e.key === ' ') {\n                      e.preventDefault();\n                      onItemClick?.(item);\n                    }\n                  }}\n                  role={onItemClick ? 'button' : undefined}\n                  tabIndex={onItemClick ? 0 : undefined}\n                >\n                  <div className=\"cedros-admin-withdrawal-td\" title={item.userId}>\n                    {truncateId(item.userId)}\n                  </div>\n                  <div className=\"cedros-admin-withdrawal-td\">\n                    {formatAmount(item.amountLamports)}\n                  </div>\n                  <div className=\"cedros-admin-withdrawal-td\">\n                    {item.withdrawalAvailableAt ? formatDate(item.withdrawalAvailableAt) : '—'}\n                  </div>\n                  <div className=\"cedros-admin-withdrawal-td cedros-admin-withdrawal-waiting\">\n                    {item.withdrawalAvailableAt\n                      ? withinPrivacyPeriod\n                        ? 'In privacy period'\n                        : getTimeElapsed(item.withdrawalAvailableAt)\n                      : '—'}\n                  </div>\n                  <div className=\"cedros-admin-withdrawal-td cedros-admin-withdrawal-td-action\">\n                    <button\n                      type=\"button\"\n                      className={`cedros-button cedros-button-sm ${withinPrivacyPeriod ? 'cedros-button-warning' : 'cedros-button-primary'}`}\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleProcessSingle(item);\n                      }}\n                      disabled={isProcessing || processingAll}\n                      title={\n                        withinPrivacyPeriod\n                          ? 'Early withdrawal (requires confirmation)'\n                          : 'Process this withdrawal'\n                      }\n                    >\n                      {isProcessing ? '...' : withinPrivacyPeriod ? 'Early' : 'Process'}\n                    </button>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n\n          {totalPages > 1 && (\n            <div className=\"cedros-admin-pagination\">\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-outline cedros-button-sm\"\n                onClick={() => goToPage(currentPage - 1)}\n                disabled={currentPage <= 1}\n              >\n                Previous\n              </button>\n              <span className=\"cedros-admin-page-info\">\n                Page {currentPage} of {totalPages} ({total} total)\n              </span>\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-outline cedros-button-sm\"\n                onClick={() => goToPage(currentPage + 1)}\n                disabled={currentPage >= totalPages}\n              >\n                Next\n              </button>\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n","/**\n * Admin privacy period deposits component\n *\n * Shows deposits that are still in the privacy period (completed but not yet ready for withdrawal).\n * Requires system admin privileges.\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { useAdminDeposits } from '../../../hooks/useAdminDeposits';\nimport type { AdminDepositItem, AdminDepositListResponse } from '../../../types/deposit';\nimport { FeatureDisabledMessage } from './FeatureDisabledMessage';\nimport { isFeatureDisabledError } from './featureDisabled';\n\nexport interface AdminPrivacyPeriodDepositsProps {\n  /** Number of items per page (default: 20) */\n  pageSize?: number;\n  /** Auto-refresh interval in milliseconds (0 to disable) */\n  refreshInterval?: number;\n  /** External refresh signal from parent coordinator */\n  refreshSignal?: number;\n  /** Additional CSS classes */\n  className?: string;\n  /** Callback when list is loaded */\n  onLoad?: (response: AdminDepositListResponse) => void;\n  /** Callback when a deposit item is clicked */\n  onItemClick?: (item: AdminDepositItem) => void;\n}\n\nfunction formatAmount(lamports: number | null): string {\n  if (lamports === null || lamports === undefined) return '—';\n  const solAmount = lamports / 1_000_000_000;\n  return `${solAmount.toFixed(4)} SOL`;\n}\n\nfunction formatDate(dateString: string): string {\n  const date = new Date(dateString);\n  return date.toLocaleDateString(undefined, {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit',\n  });\n}\n\nfunction truncateId(id: string): string {\n  if (id.length <= 12) return id;\n  return `${id.slice(0, 6)}...${id.slice(-4)}`;\n}\n\nfunction getTimeRemaining(dateString: string): string {\n  const date = new Date(dateString);\n  const now = new Date();\n  const diffMs = date.getTime() - now.getTime();\n\n  if (diffMs <= 0) return 'Ready';\n\n  const diffMins = Math.floor(diffMs / 60000);\n  const diffHours = Math.floor(diffMins / 60);\n  const diffDays = Math.floor(diffHours / 24);\n\n  if (diffDays > 0) {\n    const remainingHours = diffHours % 24;\n    return remainingHours > 0 ? `${diffDays}d ${remainingHours}h` : `${diffDays}d`;\n  }\n  if (diffHours > 0) {\n    const remainingMins = diffMins % 60;\n    return remainingMins > 0 ? `${diffHours}h ${remainingMins}m` : `${diffHours}h`;\n  }\n  return `${diffMins}m`;\n}\n\n/**\n * Admin privacy period deposits display\n *\n * Shows deposits that are still in the privacy period (not yet available for withdrawal).\n */\nexport function AdminPrivacyPeriodDeposits({\n  pageSize = 20,\n  refreshInterval = 0,\n  refreshSignal,\n  className = '',\n  onLoad,\n  onItemClick,\n}: AdminPrivacyPeriodDepositsProps) {\n  const { listInPrivacyPeriod, isLoading, error, clearError } = useAdminDeposits();\n\n  const [items, setItems] = useState<AdminDepositItem[]>([]);\n  const [total, setTotal] = useState(0);\n  const [offset, setOffset] = useState(0);\n  const [loadError, setLoadError] = useState<string | null>(null);\n\n  const fetchItems = useCallback(async () => {\n    try {\n      const result = await listInPrivacyPeriod({ limit: pageSize, offset });\n      setItems(result.deposits);\n      setTotal(result.total);\n      onLoad?.(result);\n      setLoadError(null);\n    } catch (err) {\n      const message =\n        err && typeof err === 'object' && 'message' in err\n          ? String((err as { message: unknown }).message)\n          : 'Failed to load deposits';\n      setLoadError(message);\n    }\n  }, [pageSize, offset, listInPrivacyPeriod, onLoad]);\n\n  // Reset offset when page size changes\n  useEffect(() => {\n    setOffset(0);\n  }, [pageSize]);\n\n  // Fetch on mount and when dependencies change\n  useEffect(() => {\n    fetchItems();\n  }, [fetchItems]);\n\n  useEffect(() => {\n    if (refreshSignal === undefined) return;\n    fetchItems();\n  }, [refreshSignal, fetchItems]);\n\n  // Auto-refresh\n  useEffect(() => {\n    if (refreshSignal !== undefined) return;\n    if (refreshInterval <= 0) return;\n\n    const interval = setInterval(fetchItems, refreshInterval);\n    return () => clearInterval(interval);\n  }, [refreshInterval, refreshSignal, fetchItems]);\n\n  const totalPages = Math.ceil(total / pageSize);\n  const currentPage = Math.floor(offset / pageSize) + 1;\n\n  const goToPage = (page: number) => {\n    const newOffset = (page - 1) * pageSize;\n    setOffset(Math.max(0, Math.min(newOffset, Math.max(0, total - 1))));\n  };\n\n  // Feature disabled state\n  const errorMessage = loadError || error;\n  if (isFeatureDisabledError(errorMessage)) {\n    return <FeatureDisabledMessage feature=\"Privacy Cash\" className={className} />;\n  }\n\n  // Error state\n  if (errorMessage) {\n    return (\n      <div\n        className={`cedros-admin-privacy-deposits cedros-admin-privacy-deposits-error ${className}`}\n      >\n        <p className=\"cedros-admin-error\">{errorMessage}</p>\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-outline\"\n          onClick={() => {\n            clearError();\n            setLoadError(null);\n            fetchItems();\n          }}\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  // Loading state (initial load only)\n  if (isLoading && items.length === 0) {\n    return (\n      <div\n        className={`cedros-admin-privacy-deposits cedros-admin-privacy-deposits-loading ${className}`}\n      >\n        <span className=\"cedros-admin-loading-indicator\" />\n        <span className=\"cedros-admin-loading-text\">Loading deposits...</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`cedros-admin-privacy-deposits ${className}`}>\n      <div className=\"cedros-admin-privacy-deposits-header\">\n        <h4 className=\"cedros-admin-privacy-deposits-title\">In Privacy Period</h4>\n        <div className=\"cedros-admin-privacy-deposits-actions\">\n          <span className=\"cedros-admin-queue-count\">\n            {total} deposit{total !== 1 ? 's' : ''}\n          </span>\n          <button\n            type=\"button\"\n            className=\"cedros-admin__stats-bar-refresh\"\n            onClick={fetchItems}\n            disabled={isLoading}\n            title=\"Refresh list\"\n            aria-label=\"Refresh list\"\n          >\n            {isLoading ? '...' : '↻'}\n          </button>\n        </div>\n      </div>\n\n      {items.length === 0 ? (\n        <div className=\"cedros-admin-empty\">\n          <p className=\"cedros-admin-empty-message\">No deposits in privacy period.</p>\n        </div>\n      ) : (\n        <>\n          <div className=\"cedros-admin-privacy-table\">\n            <div className=\"cedros-admin-privacy-thead\">\n              <div className=\"cedros-admin-privacy-th\">\n                <button\n                  type=\"button\"\n                  className=\"cedros-admin-sort-button\"\n                  aria-label=\"Sort by user\"\n                >\n                  User <span className=\"cedros-admin-sort-icon\">↕</span>\n                </button>\n              </div>\n              <div className=\"cedros-admin-privacy-th\">\n                <button\n                  type=\"button\"\n                  className=\"cedros-admin-sort-button\"\n                  aria-label=\"Sort by amount\"\n                >\n                  Amount <span className=\"cedros-admin-sort-icon\">↕</span>\n                </button>\n              </div>\n              <div className=\"cedros-admin-privacy-th\">\n                <button\n                  type=\"button\"\n                  className=\"cedros-admin-sort-button\"\n                  aria-label=\"Sort by deposited\"\n                >\n                  Deposited <span className=\"cedros-admin-sort-icon\">↕</span>\n                </button>\n              </div>\n              <div className=\"cedros-admin-privacy-th\">\n                <button\n                  type=\"button\"\n                  className=\"cedros-admin-sort-button\"\n                  aria-label=\"Sort by ready in\"\n                >\n                  Ready In <span className=\"cedros-admin-sort-icon\">↕</span>\n                </button>\n              </div>\n            </div>\n            {items.map((item) => (\n              <div\n                key={item.id}\n                className=\"cedros-admin-privacy-row\"\n                onClick={() => onItemClick?.(item)}\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter' || e.key === ' ') {\n                    e.preventDefault();\n                    onItemClick?.(item);\n                  }\n                }}\n                role={onItemClick ? 'button' : undefined}\n                tabIndex={onItemClick ? 0 : undefined}\n              >\n                <div className=\"cedros-admin-privacy-td\" title={item.userId}>\n                  {truncateId(item.userId)}\n                </div>\n                <div className=\"cedros-admin-privacy-td\">{formatAmount(item.amountLamports)}</div>\n                <div className=\"cedros-admin-privacy-td\">\n                  {item.completedAt ? formatDate(item.completedAt) : '—'}\n                </div>\n                <div className=\"cedros-admin-privacy-td cedros-admin-privacy-remaining\">\n                  {item.withdrawalAvailableAt ? getTimeRemaining(item.withdrawalAvailableAt) : '—'}\n                </div>\n              </div>\n            ))}\n          </div>\n\n          {totalPages > 1 && (\n            <div className=\"cedros-admin-pagination\">\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-outline cedros-button-sm\"\n                onClick={() => goToPage(currentPage - 1)}\n                disabled={currentPage <= 1}\n              >\n                Previous\n              </button>\n              <span className=\"cedros-admin-page-info\">\n                Page {currentPage} of {totalPages} ({total} total)\n              </span>\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-outline cedros-button-sm\"\n                onClick={() => goToPage(currentPage + 1)}\n                disabled={currentPage >= totalPages}\n              >\n                Next\n              </button>\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n","/**\n * Admin withdrawal history component\n *\n * Shows deposits that have been fully withdrawn (processed).\n * Requires system admin privileges.\n */\n\nimport { useState, useEffect, useCallback, useMemo } from 'react';\nimport { useAdminDeposits } from '../../../hooks/useAdminDeposits';\nimport type { AdminDepositItem, AdminDepositListResponse } from '../../../types/deposit';\nimport { FeatureDisabledMessage } from './FeatureDisabledMessage';\nimport { isFeatureDisabledError } from './featureDisabled';\n\ntype WithdrawalSortField = 'userId' | 'amountLamports' | 'completedAt' | 'withdrawalTxSignature';\ntype SortOrder = 'asc' | 'desc';\n\nexport interface AdminWithdrawalHistoryProps {\n  /** Number of items per page (default: 20) */\n  pageSize?: number;\n  /** Auto-refresh interval in milliseconds (0 to disable) */\n  refreshInterval?: number;\n  /** External refresh signal from parent coordinator */\n  refreshSignal?: number;\n  /** Additional CSS classes */\n  className?: string;\n  /** Callback when list is loaded */\n  onLoad?: (response: AdminDepositListResponse) => void;\n  /** Callback when a withdrawal item is clicked */\n  onItemClick?: (item: AdminDepositItem) => void;\n}\n\nfunction formatAmount(lamports: number | null): string {\n  if (lamports === null || lamports === undefined) return '—';\n  const solAmount = lamports / 1_000_000_000;\n  return `${solAmount.toFixed(4)} SOL`;\n}\n\nfunction formatDate(dateString: string): string {\n  const date = new Date(dateString);\n  return date.toLocaleDateString(undefined, {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit',\n  });\n}\n\nfunction truncateSignature(sig: string): string {\n  if (sig.length <= 16) return sig;\n  return `${sig.slice(0, 8)}...${sig.slice(-6)}`;\n}\n\nfunction truncateId(id: string): string {\n  if (id.length <= 12) return id;\n  return `${id.slice(0, 6)}...${id.slice(-4)}`;\n}\n\n/**\n * Admin withdrawal history display\n *\n * Shows deposits that have been fully withdrawn.\n */\nexport function AdminWithdrawalHistory({\n  pageSize = 20,\n  refreshInterval = 0,\n  refreshSignal,\n  className = '',\n  onLoad,\n  onItemClick,\n}: AdminWithdrawalHistoryProps) {\n  const { listDeposits, isLoading, error, clearError } = useAdminDeposits();\n\n  const [items, setItems] = useState<AdminDepositItem[]>([]);\n  const [total, setTotal] = useState(0);\n  const [offset, setOffset] = useState(0);\n  const [loadError, setLoadError] = useState<string | null>(null);\n  const [sortField, setSortField] = useState<WithdrawalSortField>('completedAt');\n  const [sortOrder, setSortOrder] = useState<SortOrder>('desc');\n\n  const toggleSort = (field: WithdrawalSortField) => {\n    if (sortField === field) {\n      setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc');\n    } else {\n      setSortField(field);\n      setSortOrder('desc');\n    }\n  };\n\n  const sortedItems = useMemo(() => {\n    return [...items].sort((a, b) => {\n      let aVal: string | number;\n      let bVal: string | number;\n\n      switch (sortField) {\n        case 'userId':\n          aVal = a.userId.toLowerCase();\n          bVal = b.userId.toLowerCase();\n          break;\n        case 'amountLamports':\n          aVal = a.amountLamports ?? 0;\n          bVal = b.amountLamports ?? 0;\n          break;\n        case 'completedAt':\n          aVal = a.completedAt ? new Date(a.completedAt).getTime() : 0;\n          bVal = b.completedAt ? new Date(b.completedAt).getTime() : 0;\n          break;\n        case 'withdrawalTxSignature':\n          aVal = a.withdrawalTxSignature || '';\n          bVal = b.withdrawalTxSignature || '';\n          break;\n        default:\n          return 0;\n      }\n\n      if (aVal < bVal) return sortOrder === 'asc' ? -1 : 1;\n      if (aVal > bVal) return sortOrder === 'asc' ? 1 : -1;\n      return 0;\n    });\n  }, [items, sortField, sortOrder]);\n\n  const fetchItems = useCallback(async () => {\n    try {\n      const result = await listDeposits({ status: 'withdrawn', limit: pageSize, offset });\n      setItems(result.deposits);\n      setTotal(result.total);\n      onLoad?.(result);\n      setLoadError(null);\n    } catch (err) {\n      const message =\n        err && typeof err === 'object' && 'message' in err\n          ? String((err as { message: unknown }).message)\n          : 'Failed to load withdrawal history';\n      setLoadError(message);\n    }\n  }, [pageSize, offset, listDeposits, onLoad]);\n\n  // Reset offset when page size changes\n  useEffect(() => {\n    setOffset(0);\n  }, [pageSize]);\n\n  // Fetch on mount and when dependencies change\n  useEffect(() => {\n    fetchItems();\n  }, [fetchItems]);\n\n  useEffect(() => {\n    if (refreshSignal === undefined) return;\n    fetchItems();\n  }, [refreshSignal, fetchItems]);\n\n  // Auto-refresh\n  useEffect(() => {\n    if (refreshSignal !== undefined) return;\n    if (refreshInterval <= 0) return;\n\n    const interval = setInterval(fetchItems, refreshInterval);\n    return () => clearInterval(interval);\n  }, [refreshInterval, refreshSignal, fetchItems]);\n\n  const totalPages = Math.ceil(total / pageSize);\n  const currentPage = Math.floor(offset / pageSize) + 1;\n\n  const goToPage = (page: number) => {\n    const newOffset = (page - 1) * pageSize;\n    setOffset(Math.max(0, Math.min(newOffset, Math.max(0, total - 1))));\n  };\n\n  // Feature disabled state\n  const errorMessage = loadError || error;\n  if (isFeatureDisabledError(errorMessage)) {\n    return <FeatureDisabledMessage feature=\"Privacy Cash\" className={className} />;\n  }\n\n  // Error state\n  if (errorMessage) {\n    return (\n      <div\n        className={`cedros-admin-withdrawal-history cedros-admin-withdrawal-history-error ${className}`}\n      >\n        <p className=\"cedros-admin-error\">{errorMessage}</p>\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-outline\"\n          onClick={() => {\n            clearError();\n            setLoadError(null);\n            fetchItems();\n          }}\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  // Loading state (initial load only)\n  if (isLoading && items.length === 0) {\n    return (\n      <div\n        className={`cedros-admin-withdrawal-history cedros-admin-withdrawal-history-loading ${className}`}\n      >\n        <span className=\"cedros-admin-loading-indicator\" />\n        <span className=\"cedros-admin-loading-text\">Loading withdrawal history...</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`cedros-admin-withdrawal-history ${className}`}>\n      <div className=\"cedros-admin-withdrawal-history-header\">\n        <h4 className=\"cedros-admin-withdrawal-history-title\">Withdrawal History</h4>\n        <div className=\"cedros-admin-withdrawal-history-actions\">\n          <span className=\"cedros-admin-queue-count\">\n            {total} withdrawal{total !== 1 ? 's' : ''}\n          </span>\n          <button\n            type=\"button\"\n            className=\"cedros-admin__stats-bar-refresh\"\n            onClick={fetchItems}\n            disabled={isLoading}\n            title=\"Refresh list\"\n            aria-label=\"Refresh list\"\n          >\n            {isLoading ? '...' : '↻'}\n          </button>\n        </div>\n      </div>\n\n      {items.length === 0 ? (\n        <div className=\"cedros-admin-empty\">\n          <p className=\"cedros-admin-empty-message\">No withdrawals processed yet.</p>\n        </div>\n      ) : (\n        <>\n          <div className=\"cedros-admin-history-table\">\n            <div className=\"cedros-admin-history-thead\">\n              <div className=\"cedros-admin-history-th\">\n                <button\n                  type=\"button\"\n                  className={`cedros-admin-sort-button ${sortField === 'userId' ? 'cedros-admin-sort-active' : ''}`}\n                  onClick={() => toggleSort('userId')}\n                  aria-label=\"Sort by user\"\n                >\n                  User{' '}\n                  <span className=\"cedros-admin-sort-icon\">\n                    {sortField === 'userId' ? (sortOrder === 'asc' ? '↑' : '↓') : '↕'}\n                  </span>\n                </button>\n              </div>\n              <div className=\"cedros-admin-history-th\">\n                <button\n                  type=\"button\"\n                  className={`cedros-admin-sort-button ${sortField === 'amountLamports' ? 'cedros-admin-sort-active' : ''}`}\n                  onClick={() => toggleSort('amountLamports')}\n                  aria-label=\"Sort by amount\"\n                >\n                  Amount{' '}\n                  <span className=\"cedros-admin-sort-icon\">\n                    {sortField === 'amountLamports' ? (sortOrder === 'asc' ? '↑' : '↓') : '↕'}\n                  </span>\n                </button>\n              </div>\n              <div className=\"cedros-admin-history-th\">\n                <button\n                  type=\"button\"\n                  className={`cedros-admin-sort-button ${sortField === 'completedAt' ? 'cedros-admin-sort-active' : ''}`}\n                  onClick={() => toggleSort('completedAt')}\n                  aria-label=\"Sort by processed\"\n                >\n                  Processed{' '}\n                  <span className=\"cedros-admin-sort-icon\">\n                    {sortField === 'completedAt' ? (sortOrder === 'asc' ? '↑' : '↓') : '↕'}\n                  </span>\n                </button>\n              </div>\n              <div className=\"cedros-admin-history-th\">\n                <button\n                  type=\"button\"\n                  className={`cedros-admin-sort-button ${sortField === 'withdrawalTxSignature' ? 'cedros-admin-sort-active' : ''}`}\n                  onClick={() => toggleSort('withdrawalTxSignature')}\n                  aria-label=\"Sort by transaction\"\n                >\n                  Transaction{' '}\n                  <span className=\"cedros-admin-sort-icon\">\n                    {sortField === 'withdrawalTxSignature'\n                      ? sortOrder === 'asc'\n                        ? '↑'\n                        : '↓'\n                      : '↕'}\n                  </span>\n                </button>\n              </div>\n            </div>\n            {sortedItems.map((item) => (\n              <div\n                key={item.id}\n                className=\"cedros-admin-history-row\"\n                onClick={() => onItemClick?.(item)}\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter' || e.key === ' ') {\n                    e.preventDefault();\n                    onItemClick?.(item);\n                  }\n                }}\n                role={onItemClick ? 'button' : undefined}\n                tabIndex={onItemClick ? 0 : undefined}\n              >\n                <div className=\"cedros-admin-history-td\" title={item.userId}>\n                  {truncateId(item.userId)}\n                </div>\n                <div className=\"cedros-admin-history-td\">{formatAmount(item.amountLamports)}</div>\n                <div className=\"cedros-admin-history-td\">\n                  {item.completedAt ? formatDate(item.completedAt) : '—'}\n                </div>\n                <div className=\"cedros-admin-history-td\">\n                  {item.withdrawalTxSignature ? (\n                    <a\n                      href={`https://orbmarkets.io/tx/${item.withdrawalTxSignature}`}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"cedros-admin-tx-link\"\n                      onClick={(e) => e.stopPropagation()}\n                      title={item.withdrawalTxSignature}\n                    >\n                      {truncateSignature(item.withdrawalTxSignature)}\n                    </a>\n                  ) : (\n                    '—'\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n\n          {totalPages > 1 && (\n            <div className=\"cedros-admin-pagination\">\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-outline cedros-button-sm\"\n                onClick={() => goToPage(currentPage - 1)}\n                disabled={currentPage <= 1}\n              >\n                Previous\n              </button>\n              <span className=\"cedros-admin-page-info\">\n                Page {currentPage} of {totalPages} ({total} total)\n              </span>\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-outline cedros-button-sm\"\n                onClick={() => goToPage(currentPage + 1)}\n                disabled={currentPage >= totalPages}\n              >\n                Next\n              </button>\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n"],"names":["AdminWithdrawalStats","refreshInterval","refreshSignal","className","onLoad","getStats","isLoading","error","clearError","useAdminDeposits","stats","setStats","useState","loadError","setLoadError","fetchStats","useCallback","result","err","message","useEffect","interval","errorMessage","jsxs","jsx","StatsBar","formatAmount","lamports","formatDate","dateString","truncateId","id","getTimeElapsed","date","diffMs","diffMins","diffHours","diffDays","isWithinPrivacyPeriod","withdrawalAvailableAt","AdminWithdrawalQueue","pageSize","onItemClick","onWithdrawalProcessed","onAllProcessed","listPendingWithdrawals","processWithdrawal","processAllWithdrawals","items","setItems","total","setTotal","offset","setOffset","sortField","setSortField","sortOrder","setSortOrder","toggleSort","field","sortedItems","useMemo","b","aVal","bVal","processingId","setProcessingId","processingAll","setProcessingAll","processResult","setProcessResult","earlyWithdrawalItem","setEarlyWithdrawalItem","fetchItems","timer","totalPages","currentPage","goToPage","page","newOffset","handleProcessSingle","item","force","handleProcessAll","e","Fragment","withinPrivacyPeriod","isProcessing","getTimeRemaining","now","remainingHours","remainingMins","AdminPrivacyPeriodDeposits","listInPrivacyPeriod","truncateSignature","sig","AdminWithdrawalHistory","listDeposits","a"],"mappings":";;;;AAwBO,SAASA,GAAqB;AAAA,EACnC,iBAAAC,IAAkB;AAAA,EAClB,eAAAC;AAAA,EACA,WAAAC,IAAY;AAAA,EACZ,QAAAC;AACF,GAA8B;AAC5B,QAAM,EAAE,UAAAC,GAAU,WAAAC,GAAW,OAAAC,GAAO,YAAAC,EAAA,IAAeC,EAAA,GAE7C,CAACC,GAAOC,CAAQ,IAAIC,EAA2C,IAAI,GACnE,CAACC,GAAWC,CAAY,IAAIF,EAAwB,IAAI,GAExDG,IAAaC,EAAY,YAAY;AACzC,QAAI;AACF,YAAMC,IAAS,MAAMZ,EAAA;AACrB,MAAAM,EAASM,CAAM,GACfb,IAASa,CAAM,GACfH,EAAa,IAAI;AAAA,IACnB,SAASI,GAAK;AACZ,YAAMC,IACJD,KAAO,OAAOA,KAAQ,YAAY,aAAaA,IAC3C,OAAQA,EAA6B,OAAO,IAC5C;AACN,MAAAJ,EAAaK,CAAO;AAAA,IACtB;AAAA,EACF,GAAG,CAACd,GAAUD,CAAM,CAAC;AAErB,EAAAgB,EAAU,MAAM;AACd,IAAAL,EAAA;AAAA,EACF,GAAG,CAACA,CAAU,CAAC,GAEfK,EAAU,MAAM;AACd,IAAIlB,MAAkB,UACtBa,EAAA;AAAA,EACF,GAAG,CAACb,GAAea,CAAU,CAAC,GAE9BK,EAAU,MAAM;AAEd,QADIlB,MAAkB,UAClBD,KAAmB,EAAG;AAC1B,UAAMoB,IAAW,YAAYN,GAAYd,CAAe;AACxD,WAAO,MAAM,cAAcoB,CAAQ;AAAA,EACrC,GAAG,CAACpB,GAAiBC,GAAea,CAAU,CAAC;AAE/C,QAAMO,IAAeT,KAAaN;AAKlC,SAAIe,IAEA,gBAAAC,EAAC,OAAA,EAAI,WAAW,sBAAsBpB,CAAS,IAC7C,UAAA;AAAA,IAAA,gBAAAqB,EAAC,KAAA,EAAE,WAAU,sBAAsB,UAAAF,GAAa;AAAA,IAChD,gBAAAE;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,MAAK;AAAA,QACL,WAAU;AAAA,QACV,SAAS,MAAM;AACb,UAAAhB,EAAA,GACAM,EAAa,IAAI,GACjBC,EAAA;AAAA,QACF;AAAA,QACD,UAAA;AAAA,MAAA;AAAA,IAAA;AAAA,EAED,GACF,IAIAT,KAAa,CAACI,IAEd,gBAAAc,EAAC,OAAA,EAAI,WAAW,sBAAsBrB,CAAS,IAC7C,UAAA,gBAAAqB;AAAA,IAACC;AAAA,IAAA;AAAA,MACC,OAAO;AAAA,QACL,EAAE,OAAO,mBAAmB,OAAO,EAAA;AAAA,QACnC,EAAE,OAAO,oBAAoB,OAAO,EAAA;AAAA,QACpC,EAAE,OAAO,qBAAqB,OAAO,EAAA;AAAA,QACrC,EAAE,OAAO,oBAAoB,OAAO,SAAA;AAAA,MAAS;AAAA,MAE/C,WAAS;AAAA,IAAA;AAAA,EAAA,GAEb,IAICf,IAGH,gBAAAc,EAAC,OAAA,EAAI,WAAW,sBAAsBrB,CAAS,IAC7C,UAAA,gBAAAqB;AAAA,IAACC;AAAA,IAAA;AAAA,MACC,OAAO;AAAA,QACL,EAAE,OAAO,mBAAmB,OAAOf,EAAM,oBAAA;AAAA,QACzC,EAAE,OAAO,oBAAoB,OAAOA,EAAM,uBAAA;AAAA,QAC1C,EAAE,OAAO,qBAAqB,OAAOA,EAAM,wBAAwB,EAAA;AAAA,QACnE,EAAE,OAAO,oBAAoB,OAAOA,EAAM,uBAAuB,QAAQ,CAAC,KAAK,SAAA;AAAA,MAAS;AAAA,MAE1F,WAAAJ;AAAA,MACA,WAAWS;AAAA,IAAA;AAAA,EAAA,GAEf,IAdiB;AAgBrB;ACjFA,SAASW,GAAaC,GAAiC;AACrD,SAAIA,KAAa,OAAuC,MAEjD,IADWA,IAAW,KACT,QAAQ,CAAC,CAAC;AAChC;AAEA,SAASC,GAAWC,GAA4B;AAE9C,SADa,IAAI,KAAKA,CAAU,EACpB,mBAAmB,QAAW;AAAA,IACxC,MAAM;AAAA,IACN,OAAO;AAAA,IACP,KAAK;AAAA,IACL,MAAM;AAAA,IACN,QAAQ;AAAA,EAAA,CACT;AACH;AAEA,SAASC,GAAWC,GAAoB;AACtC,SAAIA,EAAG,UAAU,KAAWA,IACrB,GAAGA,EAAG,MAAM,GAAG,CAAC,CAAC,MAAMA,EAAG,MAAM,EAAE,CAAC;AAC5C;AAEA,SAASC,GAAeH,GAA4B;AAClD,QAAMI,IAAO,IAAI,KAAKJ,CAAU,GAE1BK,yBADU,KAAA,GACG,QAAA,IAAYD,EAAK,QAAA,GAC9BE,IAAW,KAAK,MAAMD,IAAS,GAAK,GACpCE,IAAY,KAAK,MAAMD,IAAW,EAAE,GACpCE,IAAW,KAAK,MAAMD,IAAY,EAAE;AAE1C,SAAIC,IAAW,IAAU,GAAGA,CAAQ,UAChCD,IAAY,IAAU,GAAGA,CAAS,UAClCD,IAAW,IAAU,GAAGA,CAAQ,UAC7B;AACT;AAEA,SAASG,GAAsBC,GAAoD;AACjF,SAAKA,IACE,IAAI,KAAKA,CAAqB,wBAAQ,KAAA,IADV;AAErC;AAOO,SAASC,GAAqB;AAAA,EACnC,UAAAC,IAAW;AAAA,EACX,iBAAAxC,IAAkB;AAAA,EAClB,eAAAC;AAAA,EACA,WAAAC,IAAY;AAAA,EACZ,QAAAC;AAAA,EACA,aAAAsC;AAAA,EACA,uBAAAC;AAAA,EACA,gBAAAC;AACF,GAA8B;AAC5B,QAAM;AAAA,IACJ,wBAAAC;AAAA,IACA,mBAAAC;AAAA,IACA,uBAAAC;AAAA,IACA,WAAAzC;AAAA,IACA,OAAAC;AAAA,IACA,YAAAC;AAAA,EAAA,IACEC,EAAA,GAEE,CAACuC,GAAOC,CAAQ,IAAIrC,EAA6B,CAAA,CAAE,GACnD,CAACsC,GAAOC,CAAQ,IAAIvC,EAAS,CAAC,GAC9B,CAACwC,GAAQC,CAAS,IAAIzC,EAAS,CAAC,GAChC,CAACC,GAAWC,CAAY,IAAIF,EAAwB,IAAI,GACxD,CAAC0C,GAAWC,CAAY,IAAI3C,EAAyB,uBAAuB,GAC5E,CAAC4C,GAAWC,CAAY,IAAI7C,EAAoB,KAAK,GAErD8C,IAAa,CAACC,MAA0B;AAC5C,IAAIL,MAAcK,IAChBF,EAAaD,MAAc,QAAQ,SAAS,KAAK,KAEjDD,EAAaI,CAAK,GAClBF,EAAaE,MAAU,0BAA0B,QAAQ,MAAM;AAAA,EAEnE,GAEMC,IAAcC,GAAQ,MACnB,CAAC,GAAGb,CAAK,EAAE,KAAK,CAAC,GAAGc,MAAM;AAC/B,QAAIC,GACAC;AAEJ,YAAQV,GAAA;AAAA,MACN,KAAK;AACH,QAAAS,IAAO,EAAE,OAAO,YAAA,GAChBC,IAAOF,EAAE,OAAO,YAAA;AAChB;AAAA,MACF,KAAK;AACH,QAAAC,IAAO,EAAE,kBAAkB,GAC3BC,IAAOF,EAAE,kBAAkB;AAC3B;AAAA,MACF,KAAK;AACH,QAAAC,IAAO,EAAE,wBAAwB,IAAI,KAAK,EAAE,qBAAqB,EAAE,YAAY,GAC/EC,IAAOF,EAAE,wBAAwB,IAAI,KAAKA,EAAE,qBAAqB,EAAE,YAAY;AAC/E;AAAA,MACF;AACE,eAAO;AAAA,IAAA;AAGX,WAAIC,IAAOC,IAAaR,MAAc,QAAQ,KAAK,IAC/CO,IAAOC,IAAaR,MAAc,QAAQ,IAAI,KAC3C;AAAA,EACT,CAAC,GACA,CAACR,GAAOM,GAAWE,CAAS,CAAC,GAG1B,CAACS,GAAcC,CAAe,IAAItD,EAAwB,IAAI,GAC9D,CAACuD,GAAeC,CAAgB,IAAIxD,EAAS,EAAK,GAClD,CAACyD,GAAeC,CAAgB,IAAI1D,EAGhC,IAAI,GAGR,CAAC2D,GAAqBC,CAAsB,IAAI5D,EAAkC,IAAI,GAEtF6D,IAAazD,EAAY,YAAY;AACzC,QAAI;AACF,YAAMC,IAAS,MAAM4B,EAAuB,EAAE,OAAOJ,GAAU,QAAAW,GAAQ;AACvE,MAAAH,EAAShC,EAAO,QAAQ,GACxBkC,EAASlC,EAAO,KAAK,GACrBb,IAASa,CAAM,GACfH,EAAa,IAAI;AAAA,IACnB,SAASI,GAAK;AACZ,YAAMC,IACJD,KAAO,OAAOA,KAAQ,YAAY,aAAaA,IAC3C,OAAQA,EAA6B,OAAO,IAC5C;AACN,MAAAJ,EAAaK,CAAO;AAAA,IACtB;AAAA,EACF,GAAG,CAACsB,GAAUW,GAAQP,GAAwBzC,CAAM,CAAC;AAGrD,EAAAgB,EAAU,MAAM;AACd,IAAAiC,EAAU,CAAC;AAAA,EACb,GAAG,CAACZ,CAAQ,CAAC,GAGbrB,EAAU,MAAM;AACd,IAAAqD,EAAA;AAAA,EACF,GAAG,CAACA,CAAU,CAAC,GAEfrD,EAAU,MAAM;AACd,IAAIlB,MAAkB,UACtBuE,EAAA;AAAA,EACF,GAAG,CAACvE,GAAeuE,CAAU,CAAC,GAG9BrD,EAAU,MAAM;AAEd,QADIlB,MAAkB,UAClBD,KAAmB,EAAG;AAE1B,UAAMoB,IAAW,YAAYoD,GAAYxE,CAAe;AACxD,WAAO,MAAM,cAAcoB,CAAQ;AAAA,EACrC,GAAG,CAACpB,GAAiBC,GAAeuE,CAAU,CAAC,GAG/CrD,EAAU,MAAM;AACd,QAAI,CAACiD,EAAe;AACpB,UAAMK,IAAQ,WAAW,MAAMJ,EAAiB,IAAI,GAAG,GAAI;AAC3D,WAAO,MAAM,aAAaI,CAAK;AAAA,EACjC,GAAG,CAACL,CAAa,CAAC;AAElB,QAAMM,IAAa,KAAK,KAAKzB,IAAQT,CAAQ,GACvCmC,IAAc,KAAK,MAAMxB,IAASX,CAAQ,IAAI,GAE9CoC,IAAW,CAACC,MAAiB;AACjC,UAAMC,KAAaD,IAAO,KAAKrC;AAC/B,IAAAY,EAAU,KAAK,IAAI,GAAG,KAAK,IAAI0B,GAAW,KAAK,IAAI,GAAG7B,IAAQ,CAAC,CAAC,CAAC,CAAC;AAAA,EACpE,GAEM8B,IAAsB,OAAOC,GAAwBC,IAAQ,OAAU;AAE3E,QAAI,CAACA,KAAS5C,GAAsB2C,EAAK,qBAAqB,GAAG;AAC/D,MAAAT,EAAuBS,CAAI;AAC3B;AAAA,IACF;AAEA,IAAAf,EAAgBe,EAAK,EAAE,GACvBX,EAAiB,IAAI;AAErB,QAAI;AACF,YAAMrD,IAAS,MAAM6B,EAAkBmC,EAAK,IAAI,EAAE,OAAAC,GAAO;AACzD,MAAIjE,EAAO,WACTqD,EAAiB;AAAA,QACf,MAAM;AAAA,QACN,SAAS,yBAAyBrD,EAAO,aAAa,MAAM,GAAG,EAAE,CAAC;AAAA,MAAA,CACnE,GACD0B,IAAwB1B,CAAM,GAE9B,MAAMwD,EAAA,KAENH,EAAiB;AAAA,QACf,MAAM;AAAA,QACN,SAASrD,EAAO,SAAS;AAAA,MAAA,CAC1B;AAAA,IAEL,SAASC,GAAK;AACZ,MAAAoD,EAAiB;AAAA,QACf,MAAM;AAAA,QACN,SAASpD,aAAe,QAAQA,EAAI,UAAU;AAAA,MAAA,CAC/C;AAAA,IACH,UAAA;AACE,MAAAgD,EAAgB,IAAI,GACpBM,EAAuB,IAAI;AAAA,IAC7B;AAAA,EACF,GAEMW,KAAmB,YAAY;AACnC,QAAInC,EAAM,WAAW,GAErB;AAAA,MAAAoB,EAAiB,EAAI,GACrBE,EAAiB,IAAI;AAErB,UAAI;AACF,cAAMrD,IAAS,MAAM8B,EAAA;AACrB,QAAI9B,EAAO,iBAAiB,IAC1BqD,EAAiB;AAAA,UACf,MAAM;AAAA,UACN,SAAS,aAAarD,EAAO,cAAc,IAAIA,EAAO,cAAc;AAAA,QAAA,CACrE,IACQA,EAAO,cAAc,KAC9BqD,EAAiB;AAAA,UACf,MAAM;AAAA,UACN,SAAS,qBAAqBrD,EAAO,WAAW;AAAA,QAAA,CACjD,GAEH2B,IAAiB3B,CAAM,GAEvB,MAAMwD,EAAA;AAAA,MACR,SAASvD,GAAK;AACZ,QAAAoD,EAAiB;AAAA,UACf,MAAM;AAAA,UACN,SAASpD,aAAe,QAAQA,EAAI,UAAU;AAAA,QAAA,CAC/C;AAAA,MACH,UAAA;AACE,QAAAkD,EAAiB,EAAK;AAAA,MACxB;AAAA;AAAA,EACF,GAGM9C,IAAeT,KAAaN;AAMlC,SAAIe,IAEA,gBAAAC;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,WAAW,qEAAqEpB,CAAS;AAAA,MAEzF,UAAA;AAAA,QAAA,gBAAAqB,EAAC,KAAA,EAAE,WAAU,sBAAsB,UAAAF,GAAa;AAAA,QAChD,gBAAAE;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,MAAK;AAAA,YACL,WAAU;AAAA,YACV,SAAS,MAAM;AACb,cAAAhB,EAAA,GACAM,EAAa,IAAI,GACjB2D,EAAA;AAAA,YACF;AAAA,YACD,UAAA;AAAA,UAAA;AAAA,QAAA;AAAA,MAED;AAAA,IAAA;AAAA,EAAA,IAMFnE,KAAa0C,EAAM,WAAW,KAAK,CAACiB,KAAgB,CAACE,IAErD,gBAAA5C;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,WAAW,uEAAuEpB,CAAS;AAAA,MAE3F,UAAA;AAAA,QAAA,gBAAAqB,EAAC,QAAA,EAAK,WAAU,iCAAA,CAAiC;AAAA,QACjD,gBAAAA,EAAC,QAAA,EAAK,WAAU,6BAA4B,UAAA,8BAAA,CAA2B;AAAA,MAAA;AAAA,IAAA;AAAA,EAAA,IAM3E,gBAAAD,EAAC,OAAA,EAAI,WAAW,iCAAiCpB,CAAS,IAEvD,UAAA;AAAA,IAAAoE,KACC,gBAAA/C;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,WAAU;AAAA,QACV,SAAS,MAAMgD,EAAuB,IAAI;AAAA,QAC1C,WAAW,CAACY,MAAMA,EAAE,QAAQ,YAAYZ,EAAuB,IAAI;AAAA,QACnE,MAAK;AAAA,QACL,cAAW;AAAA,QACX,mBAAgB;AAAA,QAEhB,UAAA,gBAAAjD;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,WAAU;AAAA,YACV,SAAS,CAAC6D,MAAMA,EAAE,gBAAA;AAAA,YAClB,WAAW,MAAM;AAAA,YAAC;AAAA,YAClB,MAAK;AAAA,YAEL,UAAA;AAAA,cAAA,gBAAA5D,EAAC,MAAA,EAAG,IAAG,0BAAyB,WAAU,4BAA2B,UAAA,4BAErE;AAAA,cACA,gBAAAD,EAAC,OAAA,EAAI,WAAU,8BACb,UAAA;AAAA,gBAAA,gBAAAC,EAAC,OAAE,WAAU,mCACX,UAAA,gBAAAA,EAAC,UAAA,EAAO,8DAAgD,EAAA,CAC1D;AAAA,gBACA,gBAAAA,EAAC,OAAE,UAAA,yIAAA,CAGH;AAAA,gBACA,gBAAAD,EAAC,KAAA,EAAE,WAAU,8BAA6B,UAAA;AAAA,kBAAA;AAAA,kBACjCO,GAAWyC,EAAoB,MAAM;AAAA,oCAC3C,MAAA,EAAG;AAAA,kBAAE;AAAA,kBACG7C,GAAa6C,EAAoB,cAAc;AAAA,oCACvD,MAAA,EAAG;AAAA,kBAAE;AAAA,kBACQ;AAAA,kBACbA,EAAoB,wBACjB3C,GAAW2C,EAAoB,qBAAqB,IACpD;AAAA,gBAAA,GACN;AAAA,gBACA,gBAAA/C,EAAC,OAAE,UAAA,0DAAA,CAAuD;AAAA,cAAA,GAC5D;AAAA,cACA,gBAAAD,EAAC,OAAA,EAAI,WAAU,8BACb,UAAA;AAAA,gBAAA,gBAAAC;AAAA,kBAAC;AAAA,kBAAA;AAAA,oBACC,MAAK;AAAA,oBACL,WAAU;AAAA,oBACV,SAAS,MAAMgD,EAAuB,IAAI;AAAA,oBAC3C,UAAA;AAAA,kBAAA;AAAA,gBAAA;AAAA,gBAGD,gBAAAhD;AAAA,kBAAC;AAAA,kBAAA;AAAA,oBACC,MAAK;AAAA,oBACL,WAAU;AAAA,oBACV,SAAS,MAAMwD,EAAoBT,GAAqB,EAAI;AAAA,oBAC5D,UAAUN,MAAiBM,EAAoB;AAAA,oBAE9C,UAAAN,MAAiBM,EAAoB,KAAK,kBAAkB;AAAA,kBAAA;AAAA,gBAAA;AAAA,cAC/D,EAAA,CACF;AAAA,YAAA;AAAA,UAAA;AAAA,QAAA;AAAA,MACF;AAAA,IAAA;AAAA,IAKHF,KACC,gBAAA7C;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,WAAW,2CAA2C6C,EAAc,IAAI;AAAA,QACxE,MAAK;AAAA,QACL,aAAU;AAAA,QAET,UAAAA,EAAc;AAAA,MAAA;AAAA,IAAA;AAAA,IAInB,gBAAA9C,EAAC,OAAA,EAAI,WAAU,wCACb,UAAA;AAAA,MAAA,gBAAAC,EAAC,MAAA,EAAG,WAAU,uCAAsC,UAAA,uBAAmB;AAAA,MACvE,gBAAAD,EAAC,OAAA,EAAI,WAAU,yCACb,UAAA;AAAA,QAAA,gBAAAA,EAAC,QAAA,EAAK,WAAU,4BAA4B,UAAA;AAAA,UAAA2B;AAAA,UAAM;AAAA,QAAA,GAAQ;AAAA,QAC1D,gBAAA1B;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,MAAK;AAAA,YACL,WAAU;AAAA,YACV,SAASiD;AAAA,YACT,UAAUnE,KAAa6D;AAAA,YACvB,OAAM;AAAA,YACN,cAAW;AAAA,YAEV,UAAA7D,KAAa,CAAC6D,IAAgB,QAAQ;AAAA,UAAA;AAAA,QAAA;AAAA,QAEzC,gBAAA3C;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,MAAK;AAAA,YACL,WAAU;AAAA,YACV,SAAS2D;AAAA,YACT,UAAU7E,KAAa6D,KAAiBnB,EAAM,WAAW;AAAA,YACzD,OAAM;AAAA,YAEL,cAAgB,kBAAkB;AAAA,UAAA;AAAA,QAAA;AAAA,MACrC,EAAA,CACF;AAAA,IAAA,GACF;AAAA,IAECA,EAAM,WAAW,IAChB,gBAAAxB,EAAC,SAAI,WAAU,sBACb,UAAA,gBAAAA,EAAC,KAAA,EAAE,WAAU,8BAA6B,UAAA,0BAAA,CAAuB,EAAA,CACnE,IAEA,gBAAAD,EAAA8D,GAAA,EACE,UAAA;AAAA,MAAA,gBAAA9D,EAAC,OAAA,EAAI,WAAU,iCACb,UAAA;AAAA,QAAA,gBAAAA,EAAC,OAAA,EAAI,WAAU,iCACb,UAAA;AAAA,UAAA,gBAAAC,EAAC,OAAA,EAAI,WAAU,8BACb,UAAA,gBAAAD;AAAA,YAAC;AAAA,YAAA;AAAA,cACC,MAAK;AAAA,cACL,WAAW,4BAA4B+B,MAAc,WAAW,6BAA6B,EAAE;AAAA,cAC/F,SAAS,MAAMI,EAAW,QAAQ;AAAA,cAClC,cAAW;AAAA,cACZ,UAAA;AAAA,gBAAA;AAAA,gBACM;AAAA,gBACL,gBAAAlC,EAAC,QAAA,EAAK,WAAU,0BACb,UAAA8B,MAAc,WAAYE,MAAc,QAAQ,MAAM,MAAO,IAAA,CAChE;AAAA,cAAA;AAAA,YAAA;AAAA,UAAA,GAEJ;AAAA,UACA,gBAAAhC,EAAC,OAAA,EAAI,WAAU,8BACb,UAAA,gBAAAD;AAAA,YAAC;AAAA,YAAA;AAAA,cACC,MAAK;AAAA,cACL,WAAW,4BAA4B+B,MAAc,mBAAmB,6BAA6B,EAAE;AAAA,cACvG,SAAS,MAAMI,EAAW,gBAAgB;AAAA,cAC1C,cAAW;AAAA,cACZ,UAAA;AAAA,gBAAA;AAAA,gBACQ;AAAA,gBACP,gBAAAlC,EAAC,QAAA,EAAK,WAAU,0BACb,UAAA8B,MAAc,mBAAoBE,MAAc,QAAQ,MAAM,MAAO,IAAA,CACxE;AAAA,cAAA;AAAA,YAAA;AAAA,UAAA,GAEJ;AAAA,UACA,gBAAAhC,EAAC,OAAA,EAAI,WAAU,8BACb,UAAA,gBAAAD;AAAA,YAAC;AAAA,YAAA;AAAA,cACC,MAAK;AAAA,cACL,WAAW,4BAA4B+B,MAAc,0BAA0B,6BAA6B,EAAE;AAAA,cAC9G,SAAS,MAAMI,EAAW,uBAAuB;AAAA,cACjD,cAAW;AAAA,cACZ,UAAA;AAAA,gBAAA;AAAA,gBACa;AAAA,gBACZ,gBAAAlC,EAAC,QAAA,EAAK,WAAU,0BACb,UAAA8B,MAAc,0BACXE,MAAc,QACZ,MACA,MACF,IAAA,CACN;AAAA,cAAA;AAAA,YAAA;AAAA,UAAA,GAEJ;AAAA,UACA,gBAAAhC,EAAC,OAAA,EAAI,WAAU,8BAA6B,UAAA,WAAO;AAAA,UACnD,gBAAAA,EAAC,OAAA,EAAI,WAAU,gEAA+D,UAAA,SAAA,CAE9E;AAAA,QAAA,GACF;AAAA,QACCoC,EAAY,IAAI,CAACqB,MAAS;AACzB,gBAAMK,IAAsBhD,GAAsB2C,EAAK,qBAAqB,GACtEM,IAAetB,MAAiBgB,EAAK;AAE3C,iBACE,gBAAA1D;AAAA,YAAC;AAAA,YAAA;AAAA,cAEC,WAAW,+BAA+B+D,IAAsB,sCAAsC,EAAE;AAAA,cACxG,SAAS,MAAM5C,IAAcuC,CAAI;AAAA,cACjC,WAAW,CAACG,MAAM;AAChB,iBAAIA,EAAE,QAAQ,WAAWA,EAAE,QAAQ,SACjCA,EAAE,eAAA,GACF1C,IAAcuC,CAAI;AAAA,cAEtB;AAAA,cACA,MAAMvC,IAAc,WAAW;AAAA,cAC/B,UAAUA,IAAc,IAAI;AAAA,cAE5B,UAAA;AAAA,gBAAA,gBAAAlB,EAAC,OAAA,EAAI,WAAU,8BAA6B,OAAOyD,EAAK,QACrD,UAAAnD,GAAWmD,EAAK,MAAM,EAAA,CACzB;AAAA,kCACC,OAAA,EAAI,WAAU,8BACZ,UAAAvD,GAAauD,EAAK,cAAc,GACnC;AAAA,gBACA,gBAAAzD,EAAC,OAAA,EAAI,WAAU,8BACZ,UAAAyD,EAAK,wBAAwBrD,GAAWqD,EAAK,qBAAqB,IAAI,IAAA,CACzE;AAAA,gBACA,gBAAAzD,EAAC,OAAA,EAAI,WAAU,8DACZ,UAAAyD,EAAK,wBACFK,IACE,sBACAtD,GAAeiD,EAAK,qBAAqB,IAC3C,IAAA,CACN;AAAA,gBACA,gBAAAzD,EAAC,OAAA,EAAI,WAAU,gEACb,UAAA,gBAAAA;AAAA,kBAAC;AAAA,kBAAA;AAAA,oBACC,MAAK;AAAA,oBACL,WAAW,kCAAkC8D,IAAsB,0BAA0B,uBAAuB;AAAA,oBACpH,SAAS,CAACF,MAAM;AACd,sBAAAA,EAAE,gBAAA,GACFJ,EAAoBC,CAAI;AAAA,oBAC1B;AAAA,oBACA,UAAUM,KAAgBpB;AAAA,oBAC1B,OACEmB,IACI,6CACA;AAAA,oBAGL,UAAAC,IAAe,QAAQD,IAAsB,UAAU;AAAA,kBAAA;AAAA,gBAAA,EAC1D,CACF;AAAA,cAAA;AAAA,YAAA;AAAA,YA7CKL,EAAK;AAAA,UAAA;AAAA,QAgDhB,CAAC;AAAA,MAAA,GACH;AAAA,MAECN,IAAa,KACZ,gBAAApD,EAAC,OAAA,EAAI,WAAU,2BACb,UAAA;AAAA,QAAA,gBAAAC;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,MAAK;AAAA,YACL,WAAU;AAAA,YACV,SAAS,MAAMqD,EAASD,IAAc,CAAC;AAAA,YACvC,UAAUA,KAAe;AAAA,YAC1B,UAAA;AAAA,UAAA;AAAA,QAAA;AAAA,QAGD,gBAAArD,EAAC,QAAA,EAAK,WAAU,0BAAyB,UAAA;AAAA,UAAA;AAAA,UACjCqD;AAAA,UAAY;AAAA,UAAKD;AAAA,UAAW;AAAA,UAAGzB;AAAA,UAAM;AAAA,QAAA,GAC7C;AAAA,QACA,gBAAA1B;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,MAAK;AAAA,YACL,WAAU;AAAA,YACV,SAAS,MAAMqD,EAASD,IAAc,CAAC;AAAA,YACvC,UAAUA,KAAeD;AAAA,YAC1B,UAAA;AAAA,UAAA;AAAA,QAAA;AAAA,MAED,EAAA,CACF;AAAA,IAAA,EAAA,CAEJ;AAAA,EAAA,GAEJ;AAEJ;ACxhBA,SAASjD,GAAaC,GAAiC;AACrD,SAAIA,KAAa,OAAuC,MAEjD,IADWA,IAAW,KACT,QAAQ,CAAC,CAAC;AAChC;AAEA,SAASC,GAAWC,GAA4B;AAE9C,SADa,IAAI,KAAKA,CAAU,EACpB,mBAAmB,QAAW;AAAA,IACxC,MAAM;AAAA,IACN,OAAO;AAAA,IACP,KAAK;AAAA,IACL,MAAM;AAAA,IACN,QAAQ;AAAA,EAAA,CACT;AACH;AAEA,SAASC,GAAWC,GAAoB;AACtC,SAAIA,EAAG,UAAU,KAAWA,IACrB,GAAGA,EAAG,MAAM,GAAG,CAAC,CAAC,MAAMA,EAAG,MAAM,EAAE,CAAC;AAC5C;AAEA,SAASyD,GAAiB3D,GAA4B;AACpD,QAAMI,IAAO,IAAI,KAAKJ,CAAU,GAC1B4D,wBAAU,KAAA,GACVvD,IAASD,EAAK,QAAA,IAAYwD,EAAI,QAAA;AAEpC,MAAIvD,KAAU,EAAG,QAAO;AAExB,QAAMC,IAAW,KAAK,MAAMD,IAAS,GAAK,GACpCE,IAAY,KAAK,MAAMD,IAAW,EAAE,GACpCE,IAAW,KAAK,MAAMD,IAAY,EAAE;AAE1C,MAAIC,IAAW,GAAG;AAChB,UAAMqD,IAAiBtD,IAAY;AACnC,WAAOsD,IAAiB,IAAI,GAAGrD,CAAQ,KAAKqD,CAAc,MAAM,GAAGrD,CAAQ;AAAA,EAC7E;AACA,MAAID,IAAY,GAAG;AACjB,UAAMuD,IAAgBxD,IAAW;AACjC,WAAOwD,IAAgB,IAAI,GAAGvD,CAAS,KAAKuD,CAAa,MAAM,GAAGvD,CAAS;AAAA,EAC7E;AACA,SAAO,GAAGD,CAAQ;AACpB;AAOO,SAASyD,GAA2B;AAAA,EACzC,UAAAnD,IAAW;AAAA,EACX,iBAAAxC,IAAkB;AAAA,EAClB,eAAAC;AAAA,EACA,WAAAC,IAAY;AAAA,EACZ,QAAAC;AAAA,EACA,aAAAsC;AACF,GAAoC;AAClC,QAAM,EAAE,qBAAAmD,GAAqB,WAAAvF,GAAW,OAAAC,GAAO,YAAAC,EAAA,IAAeC,EAAA,GAExD,CAACuC,GAAOC,CAAQ,IAAIrC,EAA6B,CAAA,CAAE,GACnD,CAACsC,GAAOC,CAAQ,IAAIvC,EAAS,CAAC,GAC9B,CAACwC,GAAQC,CAAS,IAAIzC,EAAS,CAAC,GAChC,CAACC,GAAWC,CAAY,IAAIF,EAAwB,IAAI,GAExD6D,IAAazD,EAAY,YAAY;AACzC,QAAI;AACF,YAAMC,IAAS,MAAM4E,EAAoB,EAAE,OAAOpD,GAAU,QAAAW,GAAQ;AACpE,MAAAH,EAAShC,EAAO,QAAQ,GACxBkC,EAASlC,EAAO,KAAK,GACrBb,IAASa,CAAM,GACfH,EAAa,IAAI;AAAA,IACnB,SAASI,GAAK;AACZ,YAAMC,IACJD,KAAO,OAAOA,KAAQ,YAAY,aAAaA,IAC3C,OAAQA,EAA6B,OAAO,IAC5C;AACN,MAAAJ,EAAaK,CAAO;AAAA,IACtB;AAAA,EACF,GAAG,CAACsB,GAAUW,GAAQyC,GAAqBzF,CAAM,CAAC;AAGlD,EAAAgB,EAAU,MAAM;AACd,IAAAiC,EAAU,CAAC;AAAA,EACb,GAAG,CAACZ,CAAQ,CAAC,GAGbrB,EAAU,MAAM;AACd,IAAAqD,EAAA;AAAA,EACF,GAAG,CAACA,CAAU,CAAC,GAEfrD,EAAU,MAAM;AACd,IAAIlB,MAAkB,UACtBuE,EAAA;AAAA,EACF,GAAG,CAACvE,GAAeuE,CAAU,CAAC,GAG9BrD,EAAU,MAAM;AAEd,QADIlB,MAAkB,UAClBD,KAAmB,EAAG;AAE1B,UAAMoB,IAAW,YAAYoD,GAAYxE,CAAe;AACxD,WAAO,MAAM,cAAcoB,CAAQ;AAAA,EACrC,GAAG,CAACpB,GAAiBC,GAAeuE,CAAU,CAAC;AAE/C,QAAME,IAAa,KAAK,KAAKzB,IAAQT,CAAQ,GACvCmC,IAAc,KAAK,MAAMxB,IAASX,CAAQ,IAAI,GAE9CoC,IAAW,CAACC,MAAiB;AACjC,UAAMC,KAAaD,IAAO,KAAKrC;AAC/B,IAAAY,EAAU,KAAK,IAAI,GAAG,KAAK,IAAI0B,GAAW,KAAK,IAAI,GAAG7B,IAAQ,CAAC,CAAC,CAAC,CAAC;AAAA,EACpE,GAGM5B,IAAeT,KAAaN;AAMlC,SAAIe,IAEA,gBAAAC;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,WAAW,qEAAqEpB,CAAS;AAAA,MAEzF,UAAA;AAAA,QAAA,gBAAAqB,EAAC,KAAA,EAAE,WAAU,sBAAsB,UAAAF,GAAa;AAAA,QAChD,gBAAAE;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,MAAK;AAAA,YACL,WAAU;AAAA,YACV,SAAS,MAAM;AACb,cAAAhB,EAAA,GACAM,EAAa,IAAI,GACjB2D,EAAA;AAAA,YACF;AAAA,YACD,UAAA;AAAA,UAAA;AAAA,QAAA;AAAA,MAED;AAAA,IAAA;AAAA,EAAA,IAMFnE,KAAa0C,EAAM,WAAW,IAE9B,gBAAAzB;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,WAAW,uEAAuEpB,CAAS;AAAA,MAE3F,UAAA;AAAA,QAAA,gBAAAqB,EAAC,QAAA,EAAK,WAAU,iCAAA,CAAiC;AAAA,QACjD,gBAAAA,EAAC,QAAA,EAAK,WAAU,6BAA4B,UAAA,sBAAA,CAAmB;AAAA,MAAA;AAAA,IAAA;AAAA,EAAA,IAMnE,gBAAAD,EAAC,OAAA,EAAI,WAAW,iCAAiCpB,CAAS,IACxD,UAAA;AAAA,IAAA,gBAAAoB,EAAC,OAAA,EAAI,WAAU,wCACb,UAAA;AAAA,MAAA,gBAAAC,EAAC,MAAA,EAAG,WAAU,uCAAsC,UAAA,qBAAiB;AAAA,MACrE,gBAAAD,EAAC,OAAA,EAAI,WAAU,yCACb,UAAA;AAAA,QAAA,gBAAAA,EAAC,QAAA,EAAK,WAAU,4BACb,UAAA;AAAA,UAAA2B;AAAA,UAAM;AAAA,UAASA,MAAU,IAAI,MAAM;AAAA,QAAA,GACtC;AAAA,QACA,gBAAA1B;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,MAAK;AAAA,YACL,WAAU;AAAA,YACV,SAASiD;AAAA,YACT,UAAUnE;AAAA,YACV,OAAM;AAAA,YACN,cAAW;AAAA,YAEV,cAAY,QAAQ;AAAA,UAAA;AAAA,QAAA;AAAA,MACvB,EAAA,CACF;AAAA,IAAA,GACF;AAAA,IAEC0C,EAAM,WAAW,IAChB,gBAAAxB,EAAC,SAAI,WAAU,sBACb,UAAA,gBAAAA,EAAC,KAAA,EAAE,WAAU,8BAA6B,UAAA,iCAAA,CAA8B,EAAA,CAC1E,IAEA,gBAAAD,EAAA8D,GAAA,EACE,UAAA;AAAA,MAAA,gBAAA9D,EAAC,OAAA,EAAI,WAAU,8BACb,UAAA;AAAA,QAAA,gBAAAA,EAAC,OAAA,EAAI,WAAU,8BACb,UAAA;AAAA,UAAA,gBAAAC,EAAC,OAAA,EAAI,WAAU,2BACb,UAAA,gBAAAD;AAAA,YAAC;AAAA,YAAA;AAAA,cACC,MAAK;AAAA,cACL,WAAU;AAAA,cACV,cAAW;AAAA,cACZ,UAAA;AAAA,gBAAA;AAAA,gBACM,gBAAAC,EAAC,QAAA,EAAK,WAAU,0BAAyB,UAAA,IAAA,CAAC;AAAA,cAAA;AAAA,YAAA;AAAA,UAAA,GAEnD;AAAA,UACA,gBAAAA,EAAC,OAAA,EAAI,WAAU,2BACb,UAAA,gBAAAD;AAAA,YAAC;AAAA,YAAA;AAAA,cACC,MAAK;AAAA,cACL,WAAU;AAAA,cACV,cAAW;AAAA,cACZ,UAAA;AAAA,gBAAA;AAAA,gBACQ,gBAAAC,EAAC,QAAA,EAAK,WAAU,0BAAyB,UAAA,IAAA,CAAC;AAAA,cAAA;AAAA,YAAA;AAAA,UAAA,GAErD;AAAA,UACA,gBAAAA,EAAC,OAAA,EAAI,WAAU,2BACb,UAAA,gBAAAD;AAAA,YAAC;AAAA,YAAA;AAAA,cACC,MAAK;AAAA,cACL,WAAU;AAAA,cACV,cAAW;AAAA,cACZ,UAAA;AAAA,gBAAA;AAAA,gBACW,gBAAAC,EAAC,QAAA,EAAK,WAAU,0BAAyB,UAAA,IAAA,CAAC;AAAA,cAAA;AAAA,YAAA;AAAA,UAAA,GAExD;AAAA,UACA,gBAAAA,EAAC,OAAA,EAAI,WAAU,2BACb,UAAA,gBAAAD;AAAA,YAAC;AAAA,YAAA;AAAA,cACC,MAAK;AAAA,cACL,WAAU;AAAA,cACV,cAAW;AAAA,cACZ,UAAA;AAAA,gBAAA;AAAA,gBACU,gBAAAC,EAAC,QAAA,EAAK,WAAU,0BAAyB,UAAA,IAAA,CAAC;AAAA,cAAA;AAAA,YAAA;AAAA,UAAA,EACrD,CACF;AAAA,QAAA,GACF;AAAA,QACCwB,EAAM,IAAI,CAACiC,MACV,gBAAA1D;AAAA,UAAC;AAAA,UAAA;AAAA,YAEC,WAAU;AAAA,YACV,SAAS,MAAMmB,IAAcuC,CAAI;AAAA,YACjC,WAAW,CAACG,MAAM;AAChB,eAAIA,EAAE,QAAQ,WAAWA,EAAE,QAAQ,SACjCA,EAAE,eAAA,GACF1C,IAAcuC,CAAI;AAAA,YAEtB;AAAA,YACA,MAAMvC,IAAc,WAAW;AAAA,YAC/B,UAAUA,IAAc,IAAI;AAAA,YAE5B,UAAA;AAAA,cAAA,gBAAAlB,EAAC,OAAA,EAAI,WAAU,2BAA0B,OAAOyD,EAAK,QAClD,UAAAnD,GAAWmD,EAAK,MAAM,EAAA,CACzB;AAAA,gCACC,OAAA,EAAI,WAAU,2BAA2B,UAAAvD,GAAauD,EAAK,cAAc,GAAE;AAAA,cAC5E,gBAAAzD,EAAC,OAAA,EAAI,WAAU,2BACZ,UAAAyD,EAAK,cAAcrD,GAAWqD,EAAK,WAAW,IAAI,IAAA,CACrD;AAAA,cACA,gBAAAzD,EAAC,OAAA,EAAI,WAAU,0DACZ,UAAAyD,EAAK,wBAAwBO,GAAiBP,EAAK,qBAAqB,IAAI,IAAA,CAC/E;AAAA,YAAA;AAAA,UAAA;AAAA,UArBKA,EAAK;AAAA,QAAA,CAuBb;AAAA,MAAA,GACH;AAAA,MAECN,IAAa,KACZ,gBAAApD,EAAC,OAAA,EAAI,WAAU,2BACb,UAAA;AAAA,QAAA,gBAAAC;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,MAAK;AAAA,YACL,WAAU;AAAA,YACV,SAAS,MAAMqD,EAASD,IAAc,CAAC;AAAA,YACvC,UAAUA,KAAe;AAAA,YAC1B,UAAA;AAAA,UAAA;AAAA,QAAA;AAAA,QAGD,gBAAArD,EAAC,QAAA,EAAK,WAAU,0BAAyB,UAAA;AAAA,UAAA;AAAA,UACjCqD;AAAA,UAAY;AAAA,UAAKD;AAAA,UAAW;AAAA,UAAGzB;AAAA,UAAM;AAAA,QAAA,GAC7C;AAAA,QACA,gBAAA1B;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,MAAK;AAAA,YACL,WAAU;AAAA,YACV,SAAS,MAAMqD,EAASD,IAAc,CAAC;AAAA,YACvC,UAAUA,KAAeD;AAAA,YAC1B,UAAA;AAAA,UAAA;AAAA,QAAA;AAAA,MAED,EAAA,CACF;AAAA,IAAA,EAAA,CAEJ;AAAA,EAAA,GAEJ;AAEJ;AC9QA,SAASjD,GAAaC,GAAiC;AACrD,SAAIA,KAAa,OAAuC,MAEjD,IADWA,IAAW,KACT,QAAQ,CAAC,CAAC;AAChC;AAEA,SAASC,GAAWC,GAA4B;AAE9C,SADa,IAAI,KAAKA,CAAU,EACpB,mBAAmB,QAAW;AAAA,IACxC,MAAM;AAAA,IACN,OAAO;AAAA,IACP,KAAK;AAAA,IACL,MAAM;AAAA,IACN,QAAQ;AAAA,EAAA,CACT;AACH;AAEA,SAASiE,GAAkBC,GAAqB;AAC9C,SAAIA,EAAI,UAAU,KAAWA,IACtB,GAAGA,EAAI,MAAM,GAAG,CAAC,CAAC,MAAMA,EAAI,MAAM,EAAE,CAAC;AAC9C;AAEA,SAASjE,GAAWC,GAAoB;AACtC,SAAIA,EAAG,UAAU,KAAWA,IACrB,GAAGA,EAAG,MAAM,GAAG,CAAC,CAAC,MAAMA,EAAG,MAAM,EAAE,CAAC;AAC5C;AAOO,SAASiE,GAAuB;AAAA,EACrC,UAAAvD,IAAW;AAAA,EACX,iBAAAxC,IAAkB;AAAA,EAClB,eAAAC;AAAA,EACA,WAAAC,IAAY;AAAA,EACZ,QAAAC;AAAA,EACA,aAAAsC;AACF,GAAgC;AAC9B,QAAM,EAAE,cAAAuD,GAAc,WAAA3F,GAAW,OAAAC,GAAO,YAAAC,EAAA,IAAeC,EAAA,GAEjD,CAACuC,GAAOC,CAAQ,IAAIrC,EAA6B,CAAA,CAAE,GACnD,CAACsC,GAAOC,CAAQ,IAAIvC,EAAS,CAAC,GAC9B,CAACwC,GAAQC,CAAS,IAAIzC,EAAS,CAAC,GAChC,CAACC,GAAWC,CAAY,IAAIF,EAAwB,IAAI,GACxD,CAAC0C,GAAWC,CAAY,IAAI3C,EAA8B,aAAa,GACvE,CAAC4C,GAAWC,CAAY,IAAI7C,EAAoB,MAAM,GAEtD8C,IAAa,CAACC,MAA+B;AACjD,IAAIL,MAAcK,IAChBF,EAAaD,MAAc,QAAQ,SAAS,KAAK,KAEjDD,EAAaI,CAAK,GAClBF,EAAa,MAAM;AAAA,EAEvB,GAEMG,IAAcC,GAAQ,MACnB,CAAC,GAAGb,CAAK,EAAE,KAAK,CAACkD,GAAGpC,MAAM;AAC/B,QAAIC,GACAC;AAEJ,YAAQV,GAAA;AAAA,MACN,KAAK;AACH,QAAAS,IAAOmC,EAAE,OAAO,YAAA,GAChBlC,IAAOF,EAAE,OAAO,YAAA;AAChB;AAAA,MACF,KAAK;AACH,QAAAC,IAAOmC,EAAE,kBAAkB,GAC3BlC,IAAOF,EAAE,kBAAkB;AAC3B;AAAA,MACF,KAAK;AACH,QAAAC,IAAOmC,EAAE,cAAc,IAAI,KAAKA,EAAE,WAAW,EAAE,YAAY,GAC3DlC,IAAOF,EAAE,cAAc,IAAI,KAAKA,EAAE,WAAW,EAAE,YAAY;AAC3D;AAAA,MACF,KAAK;AACH,QAAAC,IAAOmC,EAAE,yBAAyB,IAClClC,IAAOF,EAAE,yBAAyB;AAClC;AAAA,MACF;AACE,eAAO;AAAA,IAAA;AAGX,WAAIC,IAAOC,IAAaR,MAAc,QAAQ,KAAK,IAC/CO,IAAOC,IAAaR,MAAc,QAAQ,IAAI,KAC3C;AAAA,EACT,CAAC,GACA,CAACR,GAAOM,GAAWE,CAAS,CAAC,GAE1BiB,IAAazD,EAAY,YAAY;AACzC,QAAI;AACF,YAAMC,IAAS,MAAMgF,EAAa,EAAE,QAAQ,aAAa,OAAOxD,GAAU,QAAAW,GAAQ;AAClF,MAAAH,EAAShC,EAAO,QAAQ,GACxBkC,EAASlC,EAAO,KAAK,GACrBb,IAASa,CAAM,GACfH,EAAa,IAAI;AAAA,IACnB,SAASI,GAAK;AACZ,YAAMC,IACJD,KAAO,OAAOA,KAAQ,YAAY,aAAaA,IAC3C,OAAQA,EAA6B,OAAO,IAC5C;AACN,MAAAJ,EAAaK,CAAO;AAAA,IACtB;AAAA,EACF,GAAG,CAACsB,GAAUW,GAAQ6C,GAAc7F,CAAM,CAAC;AAG3C,EAAAgB,EAAU,MAAM;AACd,IAAAiC,EAAU,CAAC;AAAA,EACb,GAAG,CAACZ,CAAQ,CAAC,GAGbrB,EAAU,MAAM;AACd,IAAAqD,EAAA;AAAA,EACF,GAAG,CAACA,CAAU,CAAC,GAEfrD,EAAU,MAAM;AACd,IAAIlB,MAAkB,UACtBuE,EAAA;AAAA,EACF,GAAG,CAACvE,GAAeuE,CAAU,CAAC,GAG9BrD,EAAU,MAAM;AAEd,QADIlB,MAAkB,UAClBD,KAAmB,EAAG;AAE1B,UAAMoB,IAAW,YAAYoD,GAAYxE,CAAe;AACxD,WAAO,MAAM,cAAcoB,CAAQ;AAAA,EACrC,GAAG,CAACpB,GAAiBC,GAAeuE,CAAU,CAAC;AAE/C,QAAME,IAAa,KAAK,KAAKzB,IAAQT,CAAQ,GACvCmC,IAAc,KAAK,MAAMxB,IAASX,CAAQ,IAAI,GAE9CoC,IAAW,CAACC,MAAiB;AACjC,UAAMC,KAAaD,IAAO,KAAKrC;AAC/B,IAAAY,EAAU,KAAK,IAAI,GAAG,KAAK,IAAI0B,GAAW,KAAK,IAAI,GAAG7B,IAAQ,CAAC,CAAC,CAAC,CAAC;AAAA,EACpE,GAGM5B,IAAeT,KAAaN;AAMlC,SAAIe,IAEA,gBAAAC;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,WAAW,yEAAyEpB,CAAS;AAAA,MAE7F,UAAA;AAAA,QAAA,gBAAAqB,EAAC,KAAA,EAAE,WAAU,sBAAsB,UAAAF,GAAa;AAAA,QAChD,gBAAAE;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,MAAK;AAAA,YACL,WAAU;AAAA,YACV,SAAS,MAAM;AACb,cAAAhB,EAAA,GACAM,EAAa,IAAI,GACjB2D,EAAA;AAAA,YACF;AAAA,YACD,UAAA;AAAA,UAAA;AAAA,QAAA;AAAA,MAED;AAAA,IAAA;AAAA,EAAA,IAMFnE,KAAa0C,EAAM,WAAW,IAE9B,gBAAAzB;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,WAAW,2EAA2EpB,CAAS;AAAA,MAE/F,UAAA;AAAA,QAAA,gBAAAqB,EAAC,QAAA,EAAK,WAAU,iCAAA,CAAiC;AAAA,QACjD,gBAAAA,EAAC,QAAA,EAAK,WAAU,6BAA4B,UAAA,gCAAA,CAA6B;AAAA,MAAA;AAAA,IAAA;AAAA,EAAA,IAM7E,gBAAAD,EAAC,OAAA,EAAI,WAAW,mCAAmCpB,CAAS,IAC1D,UAAA;AAAA,IAAA,gBAAAoB,EAAC,OAAA,EAAI,WAAU,0CACb,UAAA;AAAA,MAAA,gBAAAC,EAAC,MAAA,EAAG,WAAU,yCAAwC,UAAA,sBAAkB;AAAA,MACxE,gBAAAD,EAAC,OAAA,EAAI,WAAU,2CACb,UAAA;AAAA,QAAA,gBAAAA,EAAC,QAAA,EAAK,WAAU,4BACb,UAAA;AAAA,UAAA2B;AAAA,UAAM;AAAA,UAAYA,MAAU,IAAI,MAAM;AAAA,QAAA,GACzC;AAAA,QACA,gBAAA1B;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,MAAK;AAAA,YACL,WAAU;AAAA,YACV,SAASiD;AAAA,YACT,UAAUnE;AAAA,YACV,OAAM;AAAA,YACN,cAAW;AAAA,YAEV,cAAY,QAAQ;AAAA,UAAA;AAAA,QAAA;AAAA,MACvB,EAAA,CACF;AAAA,IAAA,GACF;AAAA,IAEC0C,EAAM,WAAW,IAChB,gBAAAxB,EAAC,SAAI,WAAU,sBACb,UAAA,gBAAAA,EAAC,KAAA,EAAE,WAAU,8BAA6B,UAAA,gCAAA,CAA6B,EAAA,CACzE,IAEA,gBAAAD,EAAA8D,GAAA,EACE,UAAA;AAAA,MAAA,gBAAA9D,EAAC,OAAA,EAAI,WAAU,8BACb,UAAA;AAAA,QAAA,gBAAAA,EAAC,OAAA,EAAI,WAAU,8BACb,UAAA;AAAA,UAAA,gBAAAC,EAAC,OAAA,EAAI,WAAU,2BACb,UAAA,gBAAAD;AAAA,YAAC;AAAA,YAAA;AAAA,cACC,MAAK;AAAA,cACL,WAAW,4BAA4B+B,MAAc,WAAW,6BAA6B,EAAE;AAAA,cAC/F,SAAS,MAAMI,EAAW,QAAQ;AAAA,cAClC,cAAW;AAAA,cACZ,UAAA;AAAA,gBAAA;AAAA,gBACM;AAAA,gBACL,gBAAAlC,EAAC,QAAA,EAAK,WAAU,0BACb,UAAA8B,MAAc,WAAYE,MAAc,QAAQ,MAAM,MAAO,IAAA,CAChE;AAAA,cAAA;AAAA,YAAA;AAAA,UAAA,GAEJ;AAAA,UACA,gBAAAhC,EAAC,OAAA,EAAI,WAAU,2BACb,UAAA,gBAAAD;AAAA,YAAC;AAAA,YAAA;AAAA,cACC,MAAK;AAAA,cACL,WAAW,4BAA4B+B,MAAc,mBAAmB,6BAA6B,EAAE;AAAA,cACvG,SAAS,MAAMI,EAAW,gBAAgB;AAAA,cAC1C,cAAW;AAAA,cACZ,UAAA;AAAA,gBAAA;AAAA,gBACQ;AAAA,gBACP,gBAAAlC,EAAC,QAAA,EAAK,WAAU,0BACb,UAAA8B,MAAc,mBAAoBE,MAAc,QAAQ,MAAM,MAAO,IAAA,CACxE;AAAA,cAAA;AAAA,YAAA;AAAA,UAAA,GAEJ;AAAA,UACA,gBAAAhC,EAAC,OAAA,EAAI,WAAU,2BACb,UAAA,gBAAAD;AAAA,YAAC;AAAA,YAAA;AAAA,cACC,MAAK;AAAA,cACL,WAAW,4BAA4B+B,MAAc,gBAAgB,6BAA6B,EAAE;AAAA,cACpG,SAAS,MAAMI,EAAW,aAAa;AAAA,cACvC,cAAW;AAAA,cACZ,UAAA;AAAA,gBAAA;AAAA,gBACW;AAAA,gBACV,gBAAAlC,EAAC,QAAA,EAAK,WAAU,0BACb,UAAA8B,MAAc,gBAAiBE,MAAc,QAAQ,MAAM,MAAO,IAAA,CACrE;AAAA,cAAA;AAAA,YAAA;AAAA,UAAA,GAEJ;AAAA,UACA,gBAAAhC,EAAC,OAAA,EAAI,WAAU,2BACb,UAAA,gBAAAD;AAAA,YAAC;AAAA,YAAA;AAAA,cACC,MAAK;AAAA,cACL,WAAW,4BAA4B+B,MAAc,0BAA0B,6BAA6B,EAAE;AAAA,cAC9G,SAAS,MAAMI,EAAW,uBAAuB;AAAA,cACjD,cAAW;AAAA,cACZ,UAAA;AAAA,gBAAA;AAAA,gBACa;AAAA,gBACZ,gBAAAlC,EAAC,QAAA,EAAK,WAAU,0BACb,UAAA8B,MAAc,0BACXE,MAAc,QACZ,MACA,MACF,IAAA,CACN;AAAA,cAAA;AAAA,YAAA;AAAA,UAAA,EACF,CACF;AAAA,QAAA,GACF;AAAA,QACCI,EAAY,IAAI,CAACqB,MAChB,gBAAA1D;AAAA,UAAC;AAAA,UAAA;AAAA,YAEC,WAAU;AAAA,YACV,SAAS,MAAMmB,IAAcuC,CAAI;AAAA,YACjC,WAAW,CAACG,MAAM;AAChB,eAAIA,EAAE,QAAQ,WAAWA,EAAE,QAAQ,SACjCA,EAAE,eAAA,GACF1C,IAAcuC,CAAI;AAAA,YAEtB;AAAA,YACA,MAAMvC,IAAc,WAAW;AAAA,YAC/B,UAAUA,IAAc,IAAI;AAAA,YAE5B,UAAA;AAAA,cAAA,gBAAAlB,EAAC,OAAA,EAAI,WAAU,2BAA0B,OAAOyD,EAAK,QAClD,UAAAnD,GAAWmD,EAAK,MAAM,EAAA,CACzB;AAAA,gCACC,OAAA,EAAI,WAAU,2BAA2B,UAAAvD,GAAauD,EAAK,cAAc,GAAE;AAAA,cAC5E,gBAAAzD,EAAC,OAAA,EAAI,WAAU,2BACZ,UAAAyD,EAAK,cAAcrD,GAAWqD,EAAK,WAAW,IAAI,IAAA,CACrD;AAAA,cACA,gBAAAzD,EAAC,OAAA,EAAI,WAAU,2BACZ,YAAK,wBACJ,gBAAAA;AAAA,gBAAC;AAAA,gBAAA;AAAA,kBACC,MAAM,4BAA4ByD,EAAK,qBAAqB;AAAA,kBAC5D,QAAO;AAAA,kBACP,KAAI;AAAA,kBACJ,WAAU;AAAA,kBACV,SAAS,CAACG,MAAMA,EAAE,gBAAA;AAAA,kBAClB,OAAOH,EAAK;AAAA,kBAEX,UAAAa,GAAkBb,EAAK,qBAAqB;AAAA,gBAAA;AAAA,cAAA,IAG/C,IAAA,CAEJ;AAAA,YAAA;AAAA,UAAA;AAAA,UAlCKA,EAAK;AAAA,QAAA,CAoCb;AAAA,MAAA,GACH;AAAA,MAECN,IAAa,KACZ,gBAAApD,EAAC,OAAA,EAAI,WAAU,2BACb,UAAA;AAAA,QAAA,gBAAAC;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,MAAK;AAAA,YACL,WAAU;AAAA,YACV,SAAS,MAAMqD,EAASD,IAAc,CAAC;AAAA,YACvC,UAAUA,KAAe;AAAA,YAC1B,UAAA;AAAA,UAAA;AAAA,QAAA;AAAA,QAGD,gBAAArD,EAAC,QAAA,EAAK,WAAU,0BAAyB,UAAA;AAAA,UAAA;AAAA,UACjCqD;AAAA,UAAY;AAAA,UAAKD;AAAA,UAAW;AAAA,UAAGzB;AAAA,UAAM;AAAA,QAAA,GAC7C;AAAA,QACA,gBAAA1B;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,MAAK;AAAA,YACL,WAAU;AAAA,YACV,SAAS,MAAMqD,EAASD,IAAc,CAAC;AAAA,YACvC,UAAUA,KAAeD;AAAA,YAC1B,UAAA;AAAA,UAAA;AAAA,QAAA;AAAA,MAED,EAAA,CACF;AAAA,IAAA,EAAA,CAEJ;AAAA,EAAA,GAEJ;AAEJ;"}