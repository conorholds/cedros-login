"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const a=require("react/jsx-runtime"),e=require("react"),m=require("./AdminUserDetail-BzEIdNJh.cjs"),b=require("./StatsBar-DTUZCwDD.cjs"),U=require("./useSystemSettings-D9Cr7ZTl.cjs"),p=["email","google","apple","solana","webauthn","sso"],E={email:"Email Users",google:"Google Users",apple:"Apple Users",solana:"Solana Users",webauthn:"Passkey Users",sso:"SSO Provider Users"},y={email:"auth_email_enabled",google:"auth_google_enabled",apple:"auth_apple_enabled",solana:"auth_solana_enabled",webauthn:"auth_webauthn_enabled",sso:"feature_sso"};function I(){const{getStats:n}=m.useAdminUsers(),{fetchSettings:u,getValue:l}=U.useSystemSettings(),[r,c]=e.useState(null),[d,o]=e.useState(!1),[S,i]=e.useState(null),[f,_]=e.useState(!1);e.useEffect(()=>{f||(u(),_(!0))},[u,f]);const g=e.useCallback(s=>{const t=l(s);return t===void 0?!1:t==="true"||t==="1"},[l]),h=e.useCallback(async()=>{o(!0),i(null);try{const s=await n();c(s)}catch(s){i(s instanceof Error?s.message:"Failed to load user stats")}finally{o(!1)}},[n]);return e.useEffect(()=>{h()},[h]),{statsItems:e.useMemo(()=>{const s=[{label:"Total Users",value:r?.total??"â€”"}];return p.forEach(t=>{g(y[t])&&s.push({label:E[t],value:r?.authMethodCounts[t]??0})}),s},[r,g]),isLoading:d,error:S,refresh:h}}function j({pluginContext:n,pageSize:u=20}){const[l,r]=e.useState(null),{statsItems:c,isLoading:d,error:o,refresh:S}=I();return l?a.jsx("div",{className:"cedros-dashboard__section",children:a.jsx(m.AdminUserDetail,{userId:l.id,onBack:()=>r(null),currentUserId:n.userId})}):a.jsxs("div",{className:"cedros-dashboard__section",children:[a.jsx(b.StatsBar,{stats:c,isLoading:d,onRefresh:S}),o&&a.jsx("p",{className:"cedros-admin-error-inline",children:o}),a.jsx("p",{className:"cedros-dashboard__text-muted",children:"All registered users in the system. Requires system admin privileges."}),a.jsx(m.AdminUserList,{pageSize:u,currentUserId:n.userId,onUserClick:i=>r(i)})]})}exports.default=j;
