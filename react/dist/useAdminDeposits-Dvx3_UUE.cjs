"use strict";const n=require("react"),o=require("./apiClient-CTTKhsYb.cjs");function C(){const d=o.useCedrosLoginOptional(),[u,i]=n.useState(!1),[w,a]=n.useState(null),e=n.useMemo(()=>d?new o.ApiClient({baseUrl:d.config.serverUrl,timeoutMs:d.config.requestTimeout,retryAttempts:d.config.retryAttempts,getAccessToken:d._internal?.getAccessToken}):null,[d]),m=n.useCallback(()=>{a(null)},[]),f=n.useCallback(async r=>{if(!e)throw new Error("useAdminDeposits must be used within a CedrosLoginProvider");i(!0),a(null);try{const t=new URLSearchParams;r?.status&&t.set("status",r.status),r?.limit!==void 0&&t.set("limit",String(r.limit)),r?.offset!==void 0&&t.set("offset",String(r.offset));const s=t.toString(),l=s?`/admin/deposits?${s}`:"/admin/deposits";return await e.get(l)}catch(t){const s=o.handleApiError(t,"Failed to list deposits");throw a(s.message),s}finally{i(!1)}},[e]),h=n.useCallback(async()=>{if(!e)throw new Error("useAdminDeposits must be used within a CedrosLoginProvider");i(!0),a(null);try{return await e.get("/admin/deposits/stats")}catch(r){const t=o.handleApiError(r,"Failed to get deposit stats");throw a(t.message),t}finally{i(!1)}},[e]),p=n.useCallback(async r=>{if(!e)throw new Error("useAdminDeposits must be used within a CedrosLoginProvider");i(!0),a(null);try{const t=new URLSearchParams;r?.limit!==void 0&&t.set("limit",String(r.limit)),r?.offset!==void 0&&t.set("offset",String(r.offset));const s=t.toString(),l=s?`/admin/deposits/in-privacy-period?${s}`:"/admin/deposits/in-privacy-period";return await e.get(l)}catch(t){const s=o.handleApiError(t,"Failed to list deposits in privacy period");throw a(s.message),s}finally{i(!1)}},[e]),g=n.useCallback(async r=>{if(!e)throw new Error("useAdminDeposits must be used within a CedrosLoginProvider");i(!0),a(null);try{const t=new URLSearchParams;r?.limit!==void 0&&t.set("limit",String(r.limit)),r?.offset!==void 0&&t.set("offset",String(r.offset));const s=t.toString(),l=s?`/admin/withdrawals/pending?${s}`:"/admin/withdrawals/pending";return await e.get(l)}catch(t){const s=o.handleApiError(t,"Failed to list pending withdrawals");throw a(s.message),s}finally{i(!1)}},[e]),y=n.useCallback(async(r,t)=>{if(!e)throw new Error("useAdminDeposits must be used within a CedrosLoginProvider");i(!0),a(null);try{return await e.post(`/admin/withdrawals/${r}/process`,t??{})}catch(s){const l=o.handleApiError(s,"Failed to process withdrawal");throw a(l.message),l}finally{i(!1)}},[e]),E=n.useCallback(async()=>{if(!e)throw new Error("useAdminDeposits must be used within a CedrosLoginProvider");i(!0),a(null);try{return await e.post("/admin/withdrawals/process-all",{})}catch(r){const t=o.handleApiError(r,"Failed to process withdrawals");throw a(t.message),t}finally{i(!1)}},[e]),A=n.useCallback(async()=>{if(!e)throw new Error("useAdminDeposits must be used within a CedrosLoginProvider");i(!0),a(null);try{return await e.get("/admin/privacy/status")}catch(r){const t=o.handleApiError(r,"Failed to get privacy status");throw a(t.message),t}finally{i(!1)}},[e]),v=n.useCallback(async()=>{if(!e)throw new Error("useAdminDeposits must be used within a CedrosLoginProvider");i(!0),a(null);try{return await e.get("/admin/credits/stats")}catch(r){const t=o.handleApiError(r,"Failed to get credit stats");throw a(t.message),t}finally{i(!1)}},[e]);return{listDeposits:f,getStats:h,listInPrivacyPeriod:p,listPendingWithdrawals:g,processWithdrawal:y,processAllWithdrawals:E,getPrivacyStatus:A,getCreditStats:v,isLoading:u,error:w,clearError:m}}exports.useAdminDeposits=C;
