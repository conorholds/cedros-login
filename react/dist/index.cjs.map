{"version":3,"file":"index.cjs","sources":["../node_modules/@scure/base/lib/esm/index.js","../node_modules/@scure/bip39/esm/index.js","../node_modules/@scure/bip39/esm/wordlists/english.js","../src/crypto/bip39.ts","../src/components/LoginButton.tsx","../src/hooks/usePasswordReset.ts","../src/components/email/ForgotPasswordForm.tsx","../src/hooks/useAppleAuth.ts","../src/utils/deviceDetection.ts","../src/components/apple/AppleLoginButton.tsx","../src/utils/webauthnJson.ts","../src/hooks/useWebAuthn.ts","../src/components/webauthn/PasskeyLoginButton.tsx","../src/components/LoginForm.tsx","../src/components/shared/ErrorBoundary.tsx","../src/components/LoginModal.tsx","../src/components/email/ResetPasswordForm.tsx","../src/components/org/OrgAvatar.tsx","../src/components/org/OrgSelector.tsx","../src/components/org/icons.tsx","../src/components/org/OrgListView.tsx","../src/components/org/CreateOrgForm.tsx","../src/components/org/OrgSwitcher.tsx","../src/components/members/MemberList.tsx","../src/components/invites/InviteForm.tsx","../src/components/invites/InviteList.tsx","../src/components/sessions/SessionList.tsx","../src/components/wallet/RecoveryPhraseDisplay.tsx","../src/components/wallet/RecoveryPhraseInput.tsx","../src/components/wallet/CapabilityWarning.tsx","../src/hooks/useWalletDiscovery.ts","../src/hooks/useWalletEnrollment.ts","../src/components/wallet/WalletEnrollment.tsx","../src/hooks/useWalletSigning.ts","../src/components/wallet/PasskeyPrompt.tsx","../src/components/wallet/WalletUnlock.tsx","../src/hooks/useWalletRecovery.ts","../src/components/wallet/WalletRecovery.tsx","../src/components/wallet/WalletAddressRow.tsx","../src/components/wallet/WalletStatus.tsx","../src/components/wallet/WalletManager.tsx","../src/utils/systemSettingsApi.ts","../src/hooks/useSystemSettings.ts","../src/components/admin/SystemSettings.tsx","../src/utils/orgApi.ts","../src/hooks/useOrgs.ts","../src/utils/memberApi.ts","../src/hooks/useMembers.ts","../src/utils/inviteApi.ts","../src/hooks/useInvites.ts","../src/hooks/useCredits.ts","../src/hooks/useAdminDeposits.ts","../src/components/deposit/admin/AdminDepositStats.tsx","../src/components/deposit/admin/AdminDepositList.tsx","../src/components/deposit/admin/AdminWithdrawalQueue.tsx","../src/components/deposit/admin/AdminPrivacyPeriodDeposits.tsx","../src/components/deposit/admin/AdminWithdrawalHistory.tsx","../src/components/deposit/admin/PrivacySystemStatus.tsx","../src/utils/adminUserApi.ts","../src/hooks/useAdminUsers.ts","../src/components/admin/AdminUserList.tsx","../src/components/admin/AdminUserDetail.tsx","../src/components/admin/CedrosAdminDashboard.tsx","../node_modules/qrcode/lib/can-promise.js","../node_modules/qrcode/lib/core/utils.js","../node_modules/qrcode/lib/core/error-correction-level.js","../node_modules/qrcode/lib/core/bit-buffer.js","../node_modules/qrcode/lib/core/bit-matrix.js","../node_modules/qrcode/lib/core/alignment-pattern.js","../node_modules/qrcode/lib/core/finder-pattern.js","../node_modules/qrcode/lib/core/mask-pattern.js","../node_modules/qrcode/lib/core/error-correction-code.js","../node_modules/qrcode/lib/core/galois-field.js","../node_modules/qrcode/lib/core/polynomial.js","../node_modules/qrcode/lib/core/reed-solomon-encoder.js","../node_modules/qrcode/lib/core/version-check.js","../node_modules/qrcode/lib/core/regex.js","../node_modules/qrcode/lib/core/mode.js","../node_modules/qrcode/lib/core/version.js","../node_modules/qrcode/lib/core/format-info.js","../node_modules/qrcode/lib/core/numeric-data.js","../node_modules/qrcode/lib/core/alphanumeric-data.js","../node_modules/qrcode/lib/core/byte-data.js","../node_modules/qrcode/lib/core/kanji-data.js","../node_modules/dijkstrajs/dijkstra.js","../node_modules/qrcode/lib/core/segments.js","../node_modules/qrcode/lib/core/qrcode.js","../node_modules/qrcode/lib/renderer/utils.js","../node_modules/qrcode/lib/renderer/canvas.js","../node_modules/qrcode/lib/renderer/svg-tag.js","../node_modules/qrcode/lib/browser.js","../src/components/totp/QrCode.tsx","../src/hooks/useTotp.ts","../src/components/totp/TotpSetup.tsx","../src/components/totp/TotpSettings.tsx","../src/hooks/useDeposit.ts","../src/components/deposit/TokenSelector.tsx","../src/components/deposit/tierUtils.ts","../src/assets/tokens/sol.webp","../src/components/deposit/TieredAmountSlider.tsx","../src/components/deposit/DepositFlow.tsx","../src/assets/tokens/bonk.webp","../src/assets/tokens/cash.webp","../src/assets/tokens/eurc.webp","../src/assets/tokens/ore.webp","../src/assets/tokens/pyusd.webp","../src/assets/tokens/usdc.webp","../src/assets/tokens/usdh.svg","../src/assets/tokens/usd1.webp","../src/assets/tokens/usdt.svg","../src/components/deposit/tokens.ts","../src/components/deposit/CreditBalance.tsx","../src/components/deposit/History.tsx","../src/components/templates/FullPageLayout.tsx","../src/components/templates/SplitPageLayout.tsx","../src/utils/sessionApi.ts","../src/hooks/useSessions.ts","../src/hooks/useAuthorize.ts","../src/hooks/usePendingRecovery.ts","../src/hooks/useTransactionSigning.ts","../src/i18n/context.ts","../src/i18n/translations.ts","../src/i18n/I18nProvider.tsx","../src/i18n/useI18n.ts"],"sourcesContent":["/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nfunction isBytes(a) {\n    return a instanceof Uint8Array || (ArrayBuffer.isView(a) && a.constructor.name === 'Uint8Array');\n}\n/** Asserts something is Uint8Array. */\nfunction abytes(b, ...lengths) {\n    if (!isBytes(b))\n        throw new Error('Uint8Array expected');\n    if (lengths.length > 0 && !lengths.includes(b.length))\n        throw new Error('Uint8Array expected of length ' + lengths + ', got length=' + b.length);\n}\nfunction isArrayOf(isString, arr) {\n    if (!Array.isArray(arr))\n        return false;\n    if (arr.length === 0)\n        return true;\n    if (isString) {\n        return arr.every((item) => typeof item === 'string');\n    }\n    else {\n        return arr.every((item) => Number.isSafeInteger(item));\n    }\n}\n// no abytes: seems to have 10% slowdown. Why?!\nfunction afn(input) {\n    if (typeof input !== 'function')\n        throw new Error('function expected');\n    return true;\n}\nfunction astr(label, input) {\n    if (typeof input !== 'string')\n        throw new Error(`${label}: string expected`);\n    return true;\n}\nfunction anumber(n) {\n    if (!Number.isSafeInteger(n))\n        throw new Error(`invalid integer: ${n}`);\n}\nfunction aArr(input) {\n    if (!Array.isArray(input))\n        throw new Error('array expected');\n}\nfunction astrArr(label, input) {\n    if (!isArrayOf(true, input))\n        throw new Error(`${label}: array of strings expected`);\n}\nfunction anumArr(label, input) {\n    if (!isArrayOf(false, input))\n        throw new Error(`${label}: array of numbers expected`);\n}\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction chain(...args) {\n    const id = (a) => a;\n    // Wrap call in closure so JIT can inline calls\n    const wrap = (a, b) => (c) => a(b(c));\n    // Construct chain of args[-1].encode(args[-2].encode([...]))\n    const encode = args.map((x) => x.encode).reduceRight(wrap, id);\n    // Construct chain of args[0].decode(args[1].decode(...))\n    const decode = args.map((x) => x.decode).reduce(wrap, id);\n    return { encode, decode };\n}\n/**\n * Encodes integer radix representation to array of strings using alphabet and back.\n * Could also be array of strings.\n * @__NO_SIDE_EFFECTS__\n */\nfunction alphabet(letters) {\n    // mapping 1 to \"b\"\n    const lettersA = typeof letters === 'string' ? letters.split('') : letters;\n    const len = lettersA.length;\n    astrArr('alphabet', lettersA);\n    // mapping \"b\" to 1\n    const indexes = new Map(lettersA.map((l, i) => [l, i]));\n    return {\n        encode: (digits) => {\n            aArr(digits);\n            return digits.map((i) => {\n                if (!Number.isSafeInteger(i) || i < 0 || i >= len)\n                    throw new Error(`alphabet.encode: digit index outside alphabet \"${i}\". Allowed: ${letters}`);\n                return lettersA[i];\n            });\n        },\n        decode: (input) => {\n            aArr(input);\n            return input.map((letter) => {\n                astr('alphabet.decode', letter);\n                const i = indexes.get(letter);\n                if (i === undefined)\n                    throw new Error(`Unknown letter: \"${letter}\". Allowed: ${letters}`);\n                return i;\n            });\n        },\n    };\n}\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction join(separator = '') {\n    astr('join', separator);\n    return {\n        encode: (from) => {\n            astrArr('join.decode', from);\n            return from.join(separator);\n        },\n        decode: (to) => {\n            astr('join.decode', to);\n            return to.split(separator);\n        },\n    };\n}\n/**\n * Pad strings array so it has integer number of bits\n * @__NO_SIDE_EFFECTS__\n */\nfunction padding(bits, chr = '=') {\n    anumber(bits);\n    astr('padding', chr);\n    return {\n        encode(data) {\n            astrArr('padding.encode', data);\n            while ((data.length * bits) % 8)\n                data.push(chr);\n            return data;\n        },\n        decode(input) {\n            astrArr('padding.decode', input);\n            let end = input.length;\n            if ((end * bits) % 8)\n                throw new Error('padding: invalid, string should have whole number of bytes');\n            for (; end > 0 && input[end - 1] === chr; end--) {\n                const last = end - 1;\n                const byte = last * bits;\n                if (byte % 8 === 0)\n                    throw new Error('padding: invalid, string has too much padding');\n            }\n            return input.slice(0, end);\n        },\n    };\n}\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction normalize(fn) {\n    afn(fn);\n    return { encode: (from) => from, decode: (to) => fn(to) };\n}\n/**\n * Slow: O(n^2) time complexity\n */\nfunction convertRadix(data, from, to) {\n    // base 1 is impossible\n    if (from < 2)\n        throw new Error(`convertRadix: invalid from=${from}, base cannot be less than 2`);\n    if (to < 2)\n        throw new Error(`convertRadix: invalid to=${to}, base cannot be less than 2`);\n    aArr(data);\n    if (!data.length)\n        return [];\n    let pos = 0;\n    const res = [];\n    const digits = Array.from(data, (d) => {\n        anumber(d);\n        if (d < 0 || d >= from)\n            throw new Error(`invalid integer: ${d}`);\n        return d;\n    });\n    const dlen = digits.length;\n    while (true) {\n        let carry = 0;\n        let done = true;\n        for (let i = pos; i < dlen; i++) {\n            const digit = digits[i];\n            const fromCarry = from * carry;\n            const digitBase = fromCarry + digit;\n            if (!Number.isSafeInteger(digitBase) ||\n                fromCarry / from !== carry ||\n                digitBase - digit !== fromCarry) {\n                throw new Error('convertRadix: carry overflow');\n            }\n            const div = digitBase / to;\n            carry = digitBase % to;\n            const rounded = Math.floor(div);\n            digits[i] = rounded;\n            if (!Number.isSafeInteger(rounded) || rounded * to + carry !== digitBase)\n                throw new Error('convertRadix: carry overflow');\n            if (!done)\n                continue;\n            else if (!rounded)\n                pos = i;\n            else\n                done = false;\n        }\n        res.push(carry);\n        if (done)\n            break;\n    }\n    for (let i = 0; i < data.length - 1 && data[i] === 0; i++)\n        res.push(0);\n    return res.reverse();\n}\nconst gcd = (a, b) => (b === 0 ? a : gcd(b, a % b));\nconst radix2carry = /* @__NO_SIDE_EFFECTS__ */ (from, to) => from + (to - gcd(from, to));\nconst powers = /* @__PURE__ */ (() => {\n    let res = [];\n    for (let i = 0; i < 40; i++)\n        res.push(2 ** i);\n    return res;\n})();\n/**\n * Implemented with numbers, because BigInt is 5x slower\n */\nfunction convertRadix2(data, from, to, padding) {\n    aArr(data);\n    if (from <= 0 || from > 32)\n        throw new Error(`convertRadix2: wrong from=${from}`);\n    if (to <= 0 || to > 32)\n        throw new Error(`convertRadix2: wrong to=${to}`);\n    if (radix2carry(from, to) > 32) {\n        throw new Error(`convertRadix2: carry overflow from=${from} to=${to} carryBits=${radix2carry(from, to)}`);\n    }\n    let carry = 0;\n    let pos = 0; // bitwise position in current element\n    const max = powers[from];\n    const mask = powers[to] - 1;\n    const res = [];\n    for (const n of data) {\n        anumber(n);\n        if (n >= max)\n            throw new Error(`convertRadix2: invalid data word=${n} from=${from}`);\n        carry = (carry << from) | n;\n        if (pos + from > 32)\n            throw new Error(`convertRadix2: carry overflow pos=${pos} from=${from}`);\n        pos += from;\n        for (; pos >= to; pos -= to)\n            res.push(((carry >> (pos - to)) & mask) >>> 0);\n        const pow = powers[pos];\n        if (pow === undefined)\n            throw new Error('invalid carry');\n        carry &= pow - 1; // clean carry, otherwise it will cause overflow\n    }\n    carry = (carry << (to - pos)) & mask;\n    if (!padding && pos >= from)\n        throw new Error('Excess padding');\n    if (!padding && carry > 0)\n        throw new Error(`Non-zero padding: ${carry}`);\n    if (padding && pos > 0)\n        res.push(carry >>> 0);\n    return res;\n}\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction radix(num) {\n    anumber(num);\n    const _256 = 2 ** 8;\n    return {\n        encode: (bytes) => {\n            if (!isBytes(bytes))\n                throw new Error('radix.encode input should be Uint8Array');\n            return convertRadix(Array.from(bytes), _256, num);\n        },\n        decode: (digits) => {\n            anumArr('radix.decode', digits);\n            return Uint8Array.from(convertRadix(digits, num, _256));\n        },\n    };\n}\n/**\n * If both bases are power of same number (like `2**8 <-> 2**64`),\n * there is a linear algorithm. For now we have implementation for power-of-two bases only.\n * @__NO_SIDE_EFFECTS__\n */\nfunction radix2(bits, revPadding = false) {\n    anumber(bits);\n    if (bits <= 0 || bits > 32)\n        throw new Error('radix2: bits should be in (0..32]');\n    if (radix2carry(8, bits) > 32 || radix2carry(bits, 8) > 32)\n        throw new Error('radix2: carry overflow');\n    return {\n        encode: (bytes) => {\n            if (!isBytes(bytes))\n                throw new Error('radix2.encode input should be Uint8Array');\n            return convertRadix2(Array.from(bytes), 8, bits, !revPadding);\n        },\n        decode: (digits) => {\n            anumArr('radix2.decode', digits);\n            return Uint8Array.from(convertRadix2(digits, bits, 8, revPadding));\n        },\n    };\n}\nfunction unsafeWrapper(fn) {\n    afn(fn);\n    return function (...args) {\n        try {\n            return fn.apply(null, args);\n        }\n        catch (e) { }\n    };\n}\nfunction checksum(len, fn) {\n    anumber(len);\n    afn(fn);\n    return {\n        encode(data) {\n            if (!isBytes(data))\n                throw new Error('checksum.encode: input should be Uint8Array');\n            const sum = fn(data).slice(0, len);\n            const res = new Uint8Array(data.length + len);\n            res.set(data);\n            res.set(sum, data.length);\n            return res;\n        },\n        decode(data) {\n            if (!isBytes(data))\n                throw new Error('checksum.decode: input should be Uint8Array');\n            const payload = data.slice(0, -len);\n            const oldChecksum = data.slice(-len);\n            const newChecksum = fn(payload).slice(0, len);\n            for (let i = 0; i < len; i++)\n                if (newChecksum[i] !== oldChecksum[i])\n                    throw new Error('Invalid checksum');\n            return payload;\n        },\n    };\n}\n// prettier-ignore\nexport const utils = {\n    alphabet, chain, checksum, convertRadix, convertRadix2, radix, radix2, join, padding,\n};\n// RFC 4648 aka RFC 3548\n// ---------------------\n/**\n * base16 encoding from RFC 4648.\n * @example\n * ```js\n * base16.encode(Uint8Array.from([0x12, 0xab]));\n * // => '12AB'\n * ```\n */\nexport const base16 = chain(radix2(4), alphabet('0123456789ABCDEF'), join(''));\n/**\n * base32 encoding from RFC 4648. Has padding.\n * Use `base32nopad` for unpadded version.\n * Also check out `base32hex`, `base32hexnopad`, `base32crockford`.\n * @example\n * ```js\n * base32.encode(Uint8Array.from([0x12, 0xab]));\n * // => 'CKVQ===='\n * base32.decode('CKVQ====');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\nexport const base32 = chain(radix2(5), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZ234567'), padding(5), join(''));\n/**\n * base32 encoding from RFC 4648. No padding.\n * Use `base32` for padded version.\n * Also check out `base32hex`, `base32hexnopad`, `base32crockford`.\n * @example\n * ```js\n * base32nopad.encode(Uint8Array.from([0x12, 0xab]));\n * // => 'CKVQ'\n * base32nopad.decode('CKVQ');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\nexport const base32nopad = chain(radix2(5), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZ234567'), join(''));\n/**\n * base32 encoding from RFC 4648. Padded. Compared to ordinary `base32`, slightly different alphabet.\n * Use `base32hexnopad` for unpadded version.\n * @example\n * ```js\n * base32hex.encode(Uint8Array.from([0x12, 0xab]));\n * // => '2ALG===='\n * base32hex.decode('2ALG====');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\nexport const base32hex = chain(radix2(5), alphabet('0123456789ABCDEFGHIJKLMNOPQRSTUV'), padding(5), join(''));\n/**\n * base32 encoding from RFC 4648. No padding. Compared to ordinary `base32`, slightly different alphabet.\n * Use `base32hex` for padded version.\n * @example\n * ```js\n * base32hexnopad.encode(Uint8Array.from([0x12, 0xab]));\n * // => '2ALG'\n * base32hexnopad.decode('2ALG');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\nexport const base32hexnopad = chain(radix2(5), alphabet('0123456789ABCDEFGHIJKLMNOPQRSTUV'), join(''));\n/**\n * base32 encoding from RFC 4648. Doug Crockford's version.\n * https://www.crockford.com/base32.html\n * @example\n * ```js\n * base32crockford.encode(Uint8Array.from([0x12, 0xab]));\n * // => '2ANG'\n * base32crockford.decode('2ANG');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\nexport const base32crockford = chain(radix2(5), alphabet('0123456789ABCDEFGHJKMNPQRSTVWXYZ'), join(''), normalize((s) => s.toUpperCase().replace(/O/g, '0').replace(/[IL]/g, '1')));\n// Built-in base64 conversion https://caniuse.com/mdn-javascript_builtins_uint8array_frombase64\n// prettier-ignore\nconst hasBase64Builtin = /* @__PURE__ */ (() => typeof Uint8Array.from([]).toBase64 === 'function' &&\n    typeof Uint8Array.fromBase64 === 'function')();\nconst decodeBase64Builtin = (s, isUrl) => {\n    astr('base64', s);\n    const re = isUrl ? /^[A-Za-z0-9=_-]+$/ : /^[A-Za-z0-9=+/]+$/;\n    const alphabet = isUrl ? 'base64url' : 'base64';\n    if (s.length > 0 && !re.test(s))\n        throw new Error('invalid base64');\n    return Uint8Array.fromBase64(s, { alphabet, lastChunkHandling: 'strict' });\n};\n/**\n * base64 from RFC 4648. Padded.\n * Use `base64nopad` for unpadded version.\n * Also check out `base64url`, `base64urlnopad`.\n * Falls back to built-in function, when available.\n * @example\n * ```js\n * base64.encode(Uint8Array.from([0x12, 0xab]));\n * // => 'Eqs='\n * base64.decode('Eqs=');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\n// prettier-ignore\nexport const base64 = hasBase64Builtin ? {\n    encode(b) { abytes(b); return b.toBase64(); },\n    decode(s) { return decodeBase64Builtin(s, false); },\n} : chain(radix2(6), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'), padding(6), join(''));\n/**\n * base64 from RFC 4648. No padding.\n * Use `base64` for padded version.\n * @example\n * ```js\n * base64nopad.encode(Uint8Array.from([0x12, 0xab]));\n * // => 'Eqs'\n * base64nopad.decode('Eqs');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\nexport const base64nopad = chain(radix2(6), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'), join(''));\n/**\n * base64 from RFC 4648, using URL-safe alphabet. Padded.\n * Use `base64urlnopad` for unpadded version.\n * Falls back to built-in function, when available.\n * @example\n * ```js\n * base64url.encode(Uint8Array.from([0x12, 0xab]));\n * // => 'Eqs='\n * base64url.decode('Eqs=');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\n// prettier-ignore\nexport const base64url = hasBase64Builtin ? {\n    encode(b) { abytes(b); return b.toBase64({ alphabet: 'base64url' }); },\n    decode(s) { return decodeBase64Builtin(s, true); },\n} : chain(radix2(6), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'), padding(6), join(''));\n/**\n * base64 from RFC 4648, using URL-safe alphabet. No padding.\n * Use `base64url` for padded version.\n * @example\n * ```js\n * base64urlnopad.encode(Uint8Array.from([0x12, 0xab]));\n * // => 'Eqs'\n * base64urlnopad.decode('Eqs');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\nexport const base64urlnopad = chain(radix2(6), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'), join(''));\n// base58 code\n// -----------\nconst genBase58 = /* @__NO_SIDE_EFFECTS__ */ (abc) => chain(radix(58), alphabet(abc), join(''));\n/**\n * base58: base64 without ambigous characters +, /, 0, O, I, l.\n * Quadratic (O(n^2)) - so, can't be used on large inputs.\n * @example\n * ```js\n * base58.decode('01abcdef');\n * // => '3UhJW'\n * ```\n */\nexport const base58 = genBase58('123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz');\n/**\n * base58: flickr version. Check out `base58`.\n */\nexport const base58flickr = genBase58('123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ');\n/**\n * base58: XRP version. Check out `base58`.\n */\nexport const base58xrp = genBase58('rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz');\n// Data len (index) -> encoded block len\nconst XMR_BLOCK_LEN = [0, 2, 3, 5, 6, 7, 9, 10, 11];\n/**\n * base58: XMR version. Check out `base58`.\n * Done in 8-byte blocks (which equals 11 chars in decoding). Last (non-full) block padded with '1' to size in XMR_BLOCK_LEN.\n * Block encoding significantly reduces quadratic complexity of base58.\n */\nexport const base58xmr = {\n    encode(data) {\n        let res = '';\n        for (let i = 0; i < data.length; i += 8) {\n            const block = data.subarray(i, i + 8);\n            res += base58.encode(block).padStart(XMR_BLOCK_LEN[block.length], '1');\n        }\n        return res;\n    },\n    decode(str) {\n        let res = [];\n        for (let i = 0; i < str.length; i += 11) {\n            const slice = str.slice(i, i + 11);\n            const blockLen = XMR_BLOCK_LEN.indexOf(slice.length);\n            const block = base58.decode(slice);\n            for (let j = 0; j < block.length - blockLen; j++) {\n                if (block[j] !== 0)\n                    throw new Error('base58xmr: wrong padding');\n            }\n            res = res.concat(Array.from(block.slice(block.length - blockLen)));\n        }\n        return Uint8Array.from(res);\n    },\n};\n/**\n * Method, which creates base58check encoder.\n * Requires function, calculating sha256.\n */\nexport const createBase58check = (sha256) => chain(checksum(4, (data) => sha256(sha256(data))), base58);\n/**\n * Use `createBase58check` instead.\n * @deprecated\n */\nexport const base58check = createBase58check;\nconst BECH_ALPHABET = chain(alphabet('qpzry9x8gf2tvdw0s3jn54khce6mua7l'), join(''));\nconst POLYMOD_GENERATORS = [0x3b6a57b2, 0x26508e6d, 0x1ea119fa, 0x3d4233dd, 0x2a1462b3];\nfunction bech32Polymod(pre) {\n    const b = pre >> 25;\n    let chk = (pre & 0x1ffffff) << 5;\n    for (let i = 0; i < POLYMOD_GENERATORS.length; i++) {\n        if (((b >> i) & 1) === 1)\n            chk ^= POLYMOD_GENERATORS[i];\n    }\n    return chk;\n}\nfunction bechChecksum(prefix, words, encodingConst = 1) {\n    const len = prefix.length;\n    let chk = 1;\n    for (let i = 0; i < len; i++) {\n        const c = prefix.charCodeAt(i);\n        if (c < 33 || c > 126)\n            throw new Error(`Invalid prefix (${prefix})`);\n        chk = bech32Polymod(chk) ^ (c >> 5);\n    }\n    chk = bech32Polymod(chk);\n    for (let i = 0; i < len; i++)\n        chk = bech32Polymod(chk) ^ (prefix.charCodeAt(i) & 0x1f);\n    for (let v of words)\n        chk = bech32Polymod(chk) ^ v;\n    for (let i = 0; i < 6; i++)\n        chk = bech32Polymod(chk);\n    chk ^= encodingConst;\n    return BECH_ALPHABET.encode(convertRadix2([chk % powers[30]], 30, 5, false));\n}\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction genBech32(encoding) {\n    const ENCODING_CONST = encoding === 'bech32' ? 1 : 0x2bc830a3;\n    const _words = radix2(5);\n    const fromWords = _words.decode;\n    const toWords = _words.encode;\n    const fromWordsUnsafe = unsafeWrapper(fromWords);\n    function encode(prefix, words, limit = 90) {\n        astr('bech32.encode prefix', prefix);\n        if (isBytes(words))\n            words = Array.from(words);\n        anumArr('bech32.encode', words);\n        const plen = prefix.length;\n        if (plen === 0)\n            throw new TypeError(`Invalid prefix length ${plen}`);\n        const actualLength = plen + 7 + words.length;\n        if (limit !== false && actualLength > limit)\n            throw new TypeError(`Length ${actualLength} exceeds limit ${limit}`);\n        const lowered = prefix.toLowerCase();\n        const sum = bechChecksum(lowered, words, ENCODING_CONST);\n        return `${lowered}1${BECH_ALPHABET.encode(words)}${sum}`;\n    }\n    function decode(str, limit = 90) {\n        astr('bech32.decode input', str);\n        const slen = str.length;\n        if (slen < 8 || (limit !== false && slen > limit))\n            throw new TypeError(`invalid string length: ${slen} (${str}). Expected (8..${limit})`);\n        // don't allow mixed case\n        const lowered = str.toLowerCase();\n        if (str !== lowered && str !== str.toUpperCase())\n            throw new Error(`String must be lowercase or uppercase`);\n        const sepIndex = lowered.lastIndexOf('1');\n        if (sepIndex === 0 || sepIndex === -1)\n            throw new Error(`Letter \"1\" must be present between prefix and data only`);\n        const prefix = lowered.slice(0, sepIndex);\n        const data = lowered.slice(sepIndex + 1);\n        if (data.length < 6)\n            throw new Error('Data must be at least 6 characters long');\n        const words = BECH_ALPHABET.decode(data).slice(0, -6);\n        const sum = bechChecksum(prefix, words, ENCODING_CONST);\n        if (!data.endsWith(sum))\n            throw new Error(`Invalid checksum in ${str}: expected \"${sum}\"`);\n        return { prefix, words };\n    }\n    const decodeUnsafe = unsafeWrapper(decode);\n    function decodeToBytes(str) {\n        const { prefix, words } = decode(str, false);\n        return { prefix, words, bytes: fromWords(words) };\n    }\n    function encodeFromBytes(prefix, bytes) {\n        return encode(prefix, toWords(bytes));\n    }\n    return {\n        encode,\n        decode,\n        encodeFromBytes,\n        decodeToBytes,\n        decodeUnsafe,\n        fromWords,\n        fromWordsUnsafe,\n        toWords,\n    };\n}\n/**\n * bech32 from BIP 173. Operates on words.\n * For high-level, check out scure-btc-signer:\n * https://github.com/paulmillr/scure-btc-signer.\n */\nexport const bech32 = genBech32('bech32');\n/**\n * bech32m from BIP 350. Operates on words.\n * It was to mitigate `bech32` weaknesses.\n * For high-level, check out scure-btc-signer:\n * https://github.com/paulmillr/scure-btc-signer.\n */\nexport const bech32m = genBech32('bech32m');\n/**\n * UTF-8-to-byte decoder. Uses built-in TextDecoder / TextEncoder.\n * @example\n * ```js\n * const b = utf8.decode(\"hey\"); // => new Uint8Array([ 104, 101, 121 ])\n * const str = utf8.encode(b); // \"hey\"\n * ```\n */\nexport const utf8 = {\n    encode: (data) => new TextDecoder().decode(data),\n    decode: (str) => new TextEncoder().encode(str),\n};\n// Built-in hex conversion https://caniuse.com/mdn-javascript_builtins_uint8array_fromhex\n// prettier-ignore\nconst hasHexBuiltin = /* @__PURE__ */ (() => typeof Uint8Array.from([]).toHex === 'function' &&\n    typeof Uint8Array.fromHex === 'function')();\n// prettier-ignore\nconst hexBuiltin = {\n    encode(data) { abytes(data); return data.toHex(); },\n    decode(s) { astr('hex', s); return Uint8Array.fromHex(s); },\n};\n/**\n * hex string decoder. Uses built-in function, when available.\n * @example\n * ```js\n * const b = hex.decode(\"0102ff\"); // => new Uint8Array([ 1, 2, 255 ])\n * const str = hex.encode(b); // \"0102ff\"\n * ```\n */\nexport const hex = hasHexBuiltin\n    ? hexBuiltin\n    : chain(radix2(4), alphabet('0123456789abcdef'), join(''), normalize((s) => {\n        if (typeof s !== 'string' || s.length % 2 !== 0)\n            throw new TypeError(`hex.decode: expected string, got ${typeof s} with length ${s.length}`);\n        return s.toLowerCase();\n    }));\n// prettier-ignore\nconst CODERS = {\n    utf8, hex, base16, base32, base64, base64url, base58, base58xmr\n};\nconst coderTypeError = 'Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr';\n/** @deprecated */\nexport const bytesToString = (type, bytes) => {\n    if (typeof type !== 'string' || !CODERS.hasOwnProperty(type))\n        throw new TypeError(coderTypeError);\n    if (!isBytes(bytes))\n        throw new TypeError('bytesToString() expects Uint8Array');\n    return CODERS[type].encode(bytes);\n};\n/** @deprecated */\nexport const str = bytesToString; // as in python, but for bytes only\n/** @deprecated */\nexport const stringToBytes = (type, str) => {\n    if (!CODERS.hasOwnProperty(type))\n        throw new TypeError(coderTypeError);\n    if (typeof str !== 'string')\n        throw new TypeError('stringToBytes() expects string');\n    return CODERS[type].decode(str);\n};\n/** @deprecated */\nexport const bytes = stringToBytes;\n//# sourceMappingURL=index.js.map","/**\n * Audited & minimal JS implementation of\n * [BIP39 mnemonic phrases](https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki).\n * @module\n * @example\n```js\nimport * as bip39 from '@scure/bip39';\nimport { wordlist } from '@scure/bip39/wordlists/english';\nconst mn = bip39.generateMnemonic(wordlist);\nconsole.log(mn);\nconst ent = bip39.mnemonicToEntropy(mn, wordlist)\nbip39.entropyToMnemonic(ent, wordlist);\nbip39.validateMnemonic(mn, wordlist);\nawait bip39.mnemonicToSeed(mn, 'password');\nbip39.mnemonicToSeedSync(mn, 'password');\n\n// Wordlists\nimport { wordlist as czech } from '@scure/bip39/wordlists/czech';\nimport { wordlist as english } from '@scure/bip39/wordlists/english';\nimport { wordlist as french } from '@scure/bip39/wordlists/french';\nimport { wordlist as italian } from '@scure/bip39/wordlists/italian';\nimport { wordlist as japanese } from '@scure/bip39/wordlists/japanese';\nimport { wordlist as korean } from '@scure/bip39/wordlists/korean';\nimport { wordlist as portuguese } from '@scure/bip39/wordlists/portuguese';\nimport { wordlist as simplifiedChinese } from '@scure/bip39/wordlists/simplified-chinese';\nimport { wordlist as spanish } from '@scure/bip39/wordlists/spanish';\nimport { wordlist as traditionalChinese } from '@scure/bip39/wordlists/traditional-chinese';\n```\n */\n/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */\nimport { pbkdf2, pbkdf2Async } from '@noble/hashes/pbkdf2';\nimport { sha256, sha512 } from '@noble/hashes/sha2';\nimport { abytes, anumber, randomBytes } from '@noble/hashes/utils';\nimport { utils as baseUtils } from '@scure/base';\n// Japanese wordlist\nconst isJapanese = (wordlist) => wordlist[0] === '\\u3042\\u3044\\u3053\\u304f\\u3057\\u3093';\n// Normalization replaces equivalent sequences of characters\n// so that any two texts that are equivalent will be reduced\n// to the same sequence of code points, called the normal form of the original text.\n// https://tonsky.me/blog/unicode/#why-is-a----\nfunction nfkd(str) {\n    if (typeof str !== 'string')\n        throw new TypeError('invalid mnemonic type: ' + typeof str);\n    return str.normalize('NFKD');\n}\nfunction normalize(str) {\n    const norm = nfkd(str);\n    const words = norm.split(' ');\n    if (![12, 15, 18, 21, 24].includes(words.length))\n        throw new Error('Invalid mnemonic');\n    return { nfkd: norm, words };\n}\nfunction aentropy(ent) {\n    abytes(ent, 16, 20, 24, 28, 32);\n}\n/**\n * Generate x random words. Uses Cryptographically-Secure Random Number Generator.\n * @param wordlist imported wordlist for specific language\n * @param strength mnemonic strength 128-256 bits\n * @example\n * generateMnemonic(wordlist, 128)\n * // 'legal winner thank year wave sausage worth useful legal winner thank yellow'\n */\nexport function generateMnemonic(wordlist, strength = 128) {\n    anumber(strength);\n    if (strength % 32 !== 0 || strength > 256)\n        throw new TypeError('Invalid entropy');\n    return entropyToMnemonic(randomBytes(strength / 8), wordlist);\n}\nconst calcChecksum = (entropy) => {\n    // Checksum is ent.length/4 bits long\n    const bitsLeft = 8 - entropy.length / 4;\n    // Zero rightmost \"bitsLeft\" bits in byte\n    // For example: bitsLeft=4 val=10111101 -> 10110000\n    return new Uint8Array([(sha256(entropy)[0] >> bitsLeft) << bitsLeft]);\n};\nfunction getCoder(wordlist) {\n    if (!Array.isArray(wordlist) || wordlist.length !== 2048 || typeof wordlist[0] !== 'string')\n        throw new Error('Wordlist: expected array of 2048 strings');\n    wordlist.forEach((i) => {\n        if (typeof i !== 'string')\n            throw new Error('wordlist: non-string element: ' + i);\n    });\n    return baseUtils.chain(baseUtils.checksum(1, calcChecksum), baseUtils.radix2(11, true), baseUtils.alphabet(wordlist));\n}\n/**\n * Reversible: Converts mnemonic string to raw entropy in form of byte array.\n * @param mnemonic 12-24 words\n * @param wordlist imported wordlist for specific language\n * @example\n * const mnem = 'legal winner thank year wave sausage worth useful legal winner thank yellow';\n * mnemonicToEntropy(mnem, wordlist)\n * // Produces\n * new Uint8Array([\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f,\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f\n * ])\n */\nexport function mnemonicToEntropy(mnemonic, wordlist) {\n    const { words } = normalize(mnemonic);\n    const entropy = getCoder(wordlist).decode(words);\n    aentropy(entropy);\n    return entropy;\n}\n/**\n * Reversible: Converts raw entropy in form of byte array to mnemonic string.\n * @param entropy byte array\n * @param wordlist imported wordlist for specific language\n * @returns 12-24 words\n * @example\n * const ent = new Uint8Array([\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f,\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f\n * ]);\n * entropyToMnemonic(ent, wordlist);\n * // 'legal winner thank year wave sausage worth useful legal winner thank yellow'\n */\nexport function entropyToMnemonic(entropy, wordlist) {\n    aentropy(entropy);\n    const words = getCoder(wordlist).encode(entropy);\n    return words.join(isJapanese(wordlist) ? '\\u3000' : ' ');\n}\n/**\n * Validates mnemonic for being 12-24 words contained in `wordlist`.\n */\nexport function validateMnemonic(mnemonic, wordlist) {\n    try {\n        mnemonicToEntropy(mnemonic, wordlist);\n    }\n    catch (e) {\n        return false;\n    }\n    return true;\n}\nconst psalt = (passphrase) => nfkd('mnemonic' + passphrase);\n/**\n * Irreversible: Uses KDF to derive 64 bytes of key data from mnemonic + optional password.\n * @param mnemonic 12-24 words\n * @param passphrase string that will additionally protect the key\n * @returns 64 bytes of key data\n * @example\n * const mnem = 'legal winner thank year wave sausage worth useful legal winner thank yellow';\n * await mnemonicToSeed(mnem, 'password');\n * // new Uint8Array([...64 bytes])\n */\nexport function mnemonicToSeed(mnemonic, passphrase = '') {\n    return pbkdf2Async(sha512, normalize(mnemonic).nfkd, psalt(passphrase), { c: 2048, dkLen: 64 });\n}\n/**\n * Irreversible: Uses KDF to derive 64 bytes of key data from mnemonic + optional password.\n * @param mnemonic 12-24 words\n * @param passphrase string that will additionally protect the key\n * @returns 64 bytes of key data\n * @example\n * const mnem = 'legal winner thank year wave sausage worth useful legal winner thank yellow';\n * mnemonicToSeedSync(mnem, 'password');\n * // new Uint8Array([...64 bytes])\n */\nexport function mnemonicToSeedSync(mnemonic, passphrase = '') {\n    return pbkdf2(sha512, normalize(mnemonic).nfkd, psalt(passphrase), { c: 2048, dkLen: 64 });\n}\n","export const wordlist = `abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo`.split('\\n');\n","/**\n * BIP-39 mnemonic encoding/decoding using @scure/bip39\n *\n * Used to encode Share C as a human-readable recovery phrase.\n *\n * Security:\n * - Uses the official BIP-39 English wordlist\n * - 12 words = 128 bits of entropy (16 bytes)\n * - Matches standard Solana wallet format (Phantom, Solflare, etc.)\n * - Includes checksum for error detection\n */\n\nimport {\n  generateMnemonic,\n  mnemonicToEntropy,\n  entropyToMnemonic,\n  validateMnemonic,\n} from '@scure/bip39';\nimport { wordlist } from '@scure/bip39/wordlists/english';\nimport type { Seed, ShamirShare } from './types';\nimport { toSeed, toShamirShare } from './types';\n\n/** Number of words in recovery phrase (12 = 128 bits, standard Solana format) */\nexport const MNEMONIC_WORD_COUNT = 12;\n\n/**\n * Encode a Shamir share as a BIP-39 mnemonic phrase\n *\n * @param share - 16-byte share to encode\n * @returns Array of 12 mnemonic words\n */\nexport function shareToMnemonic(share: ShamirShare): string[] {\n  if (share.length !== 16) {\n    throw new Error(`Invalid share length: expected 16, got ${share.length}`);\n  }\n\n  // entropyToMnemonic expects Uint8Array\n  const mnemonic = entropyToMnemonic(share, wordlist);\n  const words = mnemonic.split(' ');\n\n  if (words.length !== MNEMONIC_WORD_COUNT) {\n    throw new Error(`Unexpected word count: expected ${MNEMONIC_WORD_COUNT}, got ${words.length}`);\n  }\n\n  return words;\n}\n\n/**\n * Decode a BIP-39 mnemonic phrase back to a Shamir share\n *\n * @param words - Array of 12 mnemonic words\n * @returns 16-byte share\n * @throws Error if mnemonic is invalid\n */\nexport function mnemonicToShare(words: string[]): ShamirShare {\n  if (words.length !== MNEMONIC_WORD_COUNT) {\n    throw new Error(`Invalid word count: expected ${MNEMONIC_WORD_COUNT}, got ${words.length}`);\n  }\n\n  const mnemonic = words.join(' ').toLowerCase().trim();\n\n  // Validate mnemonic checksum\n  if (!validateMnemonic(mnemonic, wordlist)) {\n    throw new Error('Invalid recovery phrase: checksum mismatch');\n  }\n\n  // Convert back to entropy (our share)\n  const entropy = mnemonicToEntropy(mnemonic, wordlist);\n\n  if (entropy.length !== 16) {\n    throw new Error(`Invalid entropy length: expected 16, got ${entropy.length}`);\n  }\n\n  return toShamirShare(entropy);\n}\n\n/**\n * Encode a 16-byte seed as a BIP-39 mnemonic phrase\n *\n * This is used for the recovery phrase which encodes the FULL SEED\n * (not a Shamir share) to allow complete wallet recovery.\n *\n * @param seed - 16-byte seed to encode\n * @returns Array of 12 mnemonic words\n */\nexport function seedToMnemonic(seed: Seed): string[] {\n  if (seed.length !== 16) {\n    throw new Error(`Invalid seed length: expected 16, got ${seed.length}`);\n  }\n\n  const mnemonic = entropyToMnemonic(seed, wordlist);\n  const words = mnemonic.split(' ');\n\n  if (words.length !== MNEMONIC_WORD_COUNT) {\n    throw new Error(`Unexpected word count: expected ${MNEMONIC_WORD_COUNT}, got ${words.length}`);\n  }\n\n  return words;\n}\n\n/**\n * Decode a BIP-39 mnemonic phrase back to a seed\n *\n * This is used during recovery to restore the full wallet seed.\n *\n * @param words - Array of 12 mnemonic words\n * @returns 16-byte seed\n * @throws Error if mnemonic is invalid\n */\nexport function mnemonicToSeed(words: string[]): Seed {\n  if (words.length !== MNEMONIC_WORD_COUNT) {\n    throw new Error(`Invalid word count: expected ${MNEMONIC_WORD_COUNT}, got ${words.length}`);\n  }\n\n  const mnemonic = words.join(' ').toLowerCase().trim();\n\n  if (!validateMnemonic(mnemonic, wordlist)) {\n    throw new Error('Invalid recovery phrase: checksum mismatch');\n  }\n\n  const entropy = mnemonicToEntropy(mnemonic, wordlist);\n\n  if (entropy.length !== 16) {\n    throw new Error(`Invalid entropy length: expected 16, got ${entropy.length}`);\n  }\n\n  return toSeed(entropy);\n}\n\n/**\n * Validate a mnemonic phrase without decoding\n *\n * @param words - Array of words to validate\n * @returns true if valid BIP-39 mnemonic\n */\nexport function isValidMnemonic(words: string[]): boolean {\n  if (words.length !== MNEMONIC_WORD_COUNT) {\n    return false;\n  }\n\n  const mnemonic = words.join(' ').toLowerCase().trim();\n  return validateMnemonic(mnemonic, wordlist);\n}\n\n/**\n * Check if a single word is in the BIP-39 wordlist\n *\n * @param word - Word to check\n * @returns true if word is in the wordlist\n */\nexport function isValidWord(word: string): boolean {\n  return wordlist.includes(word.toLowerCase().trim());\n}\n\n/**\n * Get word suggestions for autocomplete\n *\n * @param prefix - Partial word input\n * @param limit - Maximum number of suggestions\n * @returns Array of matching words from wordlist\n */\nexport function getWordSuggestions(prefix: string, limit: number = 5): string[] {\n  const normalizedPrefix = prefix.toLowerCase().trim();\n\n  if (normalizedPrefix.length === 0) {\n    return [];\n  }\n\n  return wordlist.filter((word) => word.startsWith(normalizedPrefix)).slice(0, limit);\n}\n\n/**\n * Generate a random mnemonic for testing purposes\n *\n * WARNING: Do not use this for actual wallet generation.\n * Use the proper enrollment flow which generates a seed and splits it.\n *\n * @returns Array of 12 random words\n */\nexport function generateRandomMnemonic(): string[] {\n  const mnemonic = generateMnemonic(wordlist, 128);\n  return mnemonic.split(' ');\n}\n\n/**\n * Format mnemonic words for display (groups of 4)\n *\n * @param words - Array of mnemonic words\n * @returns Array of word groups\n */\nexport function formatMnemonicForDisplay(words: string[]): string[][] {\n  const groups: string[][] = [];\n  for (let i = 0; i < words.length; i += 4) {\n    groups.push(words.slice(i, i + 4));\n  }\n  return groups;\n}\n\n/**\n * Parse user input into word array, handling various formats\n *\n * @param input - User input (space/comma/newline separated)\n * @returns Array of normalized words\n */\nexport function parseMnemonicInput(input: string): string[] {\n  return input\n    .toLowerCase()\n    .replace(/[,\\n\\r\\t]+/g, ' ') // Replace separators with space\n    .split(/\\s+/) // Split on whitespace\n    .map((w) => w.trim())\n    .filter((w) => w.length > 0);\n}\n\n/**\n * Securely wipe mnemonic array\n *\n * @security CRYPTO-2: This is BEST-EFFORT only. JavaScript strings are immutable\n * and the original word values WILL persist in memory until garbage collected.\n * See secureWipe.ts wipeString() for details on JS string wiping limitations.\n *\n * @param words - Array of words to wipe\n */\nexport function wipeMnemonic(words: string[]): void {\n  // Replace all words with empty strings (best-effort - see CRYPTO-2)\n  for (let i = 0; i < words.length; i++) {\n    words[i] = '';\n  }\n  words.length = 0;\n}\n\n/**\n * Get the BIP-39 wordlist for UI purposes (e.g., validation indicators)\n *\n * @returns Copy of the wordlist\n */\nexport function getWordlist(): readonly string[] {\n  return wordlist;\n}\n\n/**\n * Calculate the index of a word in the wordlist\n *\n * @param word - Word to look up\n * @returns Index (0-2047) or -1 if not found\n */\nexport function getWordIndex(word: string): number {\n  return wordlist.indexOf(word.toLowerCase().trim());\n}\n","import { useState, useCallback, useRef, useEffect, useMemo } from 'react';\nimport { useAuth } from '../hooks/useAuth';\nimport { LoadingSpinner } from './shared/LoadingSpinner';\nimport { sanitizeImageUrl } from '../utils/sanitization';\n\nexport interface MenuItemConfig {\n  /** Label to display */\n  label: string;\n  /** Click handler */\n  onClick: () => void;\n  /** Optional icon element */\n  icon?: React.ReactNode;\n}\n\nexport interface LoginButtonProps {\n  className?: string;\n  variant?: 'default' | 'outline' | 'ghost';\n  size?: 'sm' | 'md' | 'lg';\n  children?: React.ReactNode;\n  /** Custom menu items to show above \"Sign out\" */\n  menuItems?: MenuItemConfig[];\n  /** Hide the default \"Sign out\" item (default: false) */\n  hideSignOut?: boolean;\n}\n\n/**\n * Login button that opens the login modal when clicked.\n * Shows user info when authenticated.\n */\nexport function LoginButton({\n  className = '',\n  variant = 'default',\n  size = 'md',\n  children,\n  menuItems = [],\n  hideSignOut = false,\n}: LoginButtonProps) {\n  const { user, isAuthenticated, isLoading, openLoginModal, logout } = useAuth();\n  // L-08: State for keyboard-accessible dropdown\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n  const [focusedIndex, setFocusedIndex] = useState(-1);\n  const menuRef = useRef<HTMLDivElement>(null);\n  const buttonRef = useRef<HTMLButtonElement>(null);\n\n  // Build list of all menu items (custom items + sign out)\n  // Memoize to avoid recreating array on every render (fixes react-hooks/exhaustive-deps warning)\n  const allMenuItems = useMemo(\n    () => [...menuItems, ...(hideSignOut ? [] : [{ label: 'Sign out', onClick: logout }])],\n    [menuItems, hideSignOut, logout]\n  );\n\n  // L-08: Close menu on outside click or Escape\n  useEffect(() => {\n    if (!isMenuOpen) return;\n\n    const handleClickOutside = (e: MouseEvent) => {\n      if (menuRef.current && !menuRef.current.contains(e.target as Node)) {\n        setIsMenuOpen(false);\n        setFocusedIndex(-1);\n      }\n    };\n\n    const handleEscape = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        setIsMenuOpen(false);\n        setFocusedIndex(-1);\n        buttonRef.current?.focus();\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    document.addEventListener('keydown', handleEscape);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n      document.removeEventListener('keydown', handleEscape);\n    };\n  }, [isMenuOpen]);\n\n  // L-08: Keyboard navigation for menu\n  const handleMenuKeyDown = useCallback(\n    (e: React.KeyboardEvent) => {\n      if (!isMenuOpen || allMenuItems.length === 0) return;\n\n      switch (e.key) {\n        case 'ArrowDown':\n          e.preventDefault();\n          setFocusedIndex((i) => (i + 1) % allMenuItems.length);\n          break;\n        case 'ArrowUp':\n          e.preventDefault();\n          setFocusedIndex((i) => (i - 1 + allMenuItems.length) % allMenuItems.length);\n          break;\n        case 'Home':\n          e.preventDefault();\n          setFocusedIndex(0);\n          break;\n        case 'End':\n          e.preventDefault();\n          setFocusedIndex(allMenuItems.length - 1);\n          break;\n        case 'Enter':\n        case ' ':\n          if (focusedIndex >= 0) {\n            e.preventDefault();\n            allMenuItems[focusedIndex].onClick();\n            setIsMenuOpen(false);\n            setFocusedIndex(-1);\n          }\n          break;\n      }\n    },\n    [isMenuOpen, focusedIndex, allMenuItems]\n  );\n\n  const toggleMenu = useCallback(() => {\n    if (allMenuItems.length === 0) return;\n    setIsMenuOpen((open) => !open);\n    setFocusedIndex(-1);\n  }, [allMenuItems.length]);\n\n  const sizeClasses = {\n    sm: 'cedros-button-sm',\n    md: 'cedros-button-md',\n    lg: 'cedros-button-lg',\n  };\n\n  const variantClasses = {\n    default: 'cedros-button-primary',\n    outline: 'cedros-button-outline',\n    ghost: 'cedros-button-ghost',\n  };\n\n  if (isLoading) {\n    return (\n      <button\n        type=\"button\"\n        className={`cedros-button ${variantClasses[variant]} ${sizeClasses[size]} ${className}`}\n        disabled\n      >\n        <LoadingSpinner size=\"sm\" />\n      </button>\n    );\n  }\n\n  if (isAuthenticated && user) {\n    const displayName = user.name || user.email || 'User';\n    // COMP-07: Cache sanitized URL to avoid double-call and ensure consistent validation\n    const sanitizedPicture = sanitizeImageUrl(user.picture);\n    return (\n      // L-08: Added keyboard handler and ref for accessibility\n      <div className=\"cedros-user-menu\" ref={menuRef} onKeyDown={handleMenuKeyDown}>\n        {/* M-13: Added ARIA attributes for accessibility */}\n        <button\n          ref={buttonRef}\n          type=\"button\"\n          className={`cedros-button cedros-user-button ${sizeClasses[size]} ${className}`}\n          aria-haspopup=\"menu\"\n          aria-expanded={isMenuOpen}\n          aria-label={`User menu for ${displayName}`}\n          onClick={toggleMenu}\n        >\n          {sanitizedPicture ? (\n            <img\n              src={sanitizedPicture}\n              alt={displayName}\n              className=\"cedros-user-avatar\"\n              referrerPolicy=\"no-referrer\"\n              crossOrigin=\"anonymous\"\n            />\n          ) : (\n            <div className=\"cedros-user-avatar-placeholder\">\n              {(displayName[0] || '?').toUpperCase()}\n            </div>\n          )}\n          <span className=\"cedros-user-name\">{displayName}</span>\n        </button>\n        {/* M-13: Added role=\"menu\" for ARIA menu pattern */}\n        {/* L-08: Show/hide controlled by state, keyboard navigable */}\n        {isMenuOpen && (\n          <div className=\"cedros-dropdown cedros-dropdown-open\" role=\"menu\">\n            {menuItems.map((item, index) => (\n              <button\n                key={index}\n                type=\"button\"\n                className={`cedros-dropdown-item ${focusedIndex === index ? 'cedros-dropdown-item-focused' : ''}`}\n                role=\"menuitem\"\n                tabIndex={focusedIndex === index ? 0 : -1}\n                onClick={() => {\n                  item.onClick();\n                  setIsMenuOpen(false);\n                }}\n              >\n                {item.icon && <span className=\"cedros-dropdown-icon\">{item.icon}</span>}\n                {item.label}\n              </button>\n            ))}\n            {menuItems.length > 0 && !hideSignOut && (\n              <div className=\"cedros-dropdown-divider\" role=\"separator\" />\n            )}\n            {!hideSignOut && (\n              <button\n                type=\"button\"\n                className={`cedros-dropdown-item cedros-dropdown-item-danger ${focusedIndex === menuItems.length ? 'cedros-dropdown-item-focused' : ''}`}\n                role=\"menuitem\"\n                tabIndex={focusedIndex === menuItems.length ? 0 : -1}\n                onClick={() => {\n                  logout();\n                  setIsMenuOpen(false);\n                }}\n              >\n                Sign out\n              </button>\n            )}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <button\n      type=\"button\"\n      className={`cedros-button ${variantClasses[variant]} ${sizeClasses[size]} ${className}`}\n      onClick={openLoginModal}\n    >\n      {children || 'Sign in'}\n    </button>\n  );\n}\n","import { useState, useCallback, useMemo } from 'react';\nimport { useCedrosLogin } from '../context/useCedrosLogin';\nimport { validateEmail } from '../utils/validation';\nimport { useRateLimiter } from './useRateLimiter';\nimport { ApiClient, handleApiError } from '../utils/apiClient';\nimport type { AuthError } from '../types';\n\nexport interface UsePasswordResetReturn {\n  forgotPassword: (email: string) => Promise<void>;\n  resetPassword: (token: string, newPassword: string) => Promise<void>;\n  isLoading: boolean;\n  isSuccess: boolean;\n  error: AuthError | null;\n  clearError: () => void;\n  reset: () => void;\n  /** Number of remaining attempts before rate limiting */\n  remainingAttempts: number;\n}\n\n/**\n * Hook for password reset functionality.\n *\n * @example\n * ```tsx\n * function ForgotPasswordForm() {\n *   const { forgotPassword, isLoading, isSuccess, error } = usePasswordReset();\n *\n *   const handleSubmit = async (e) => {\n *     e.preventDefault();\n *     await forgotPassword(email);\n *   };\n *\n *   if (isSuccess) {\n *     return <p>Check your email for reset instructions</p>;\n *   }\n * }\n * ```\n */\nexport function usePasswordReset(): UsePasswordResetReturn {\n  const { config } = useCedrosLogin();\n  const [isLoading, setIsLoading] = useState(false);\n  const [isSuccess, setIsSuccess] = useState(false);\n  const [error, setError] = useState<AuthError | null>(null);\n\n  // M-08: Use ApiClient for consistent error handling and timeout/retry\n  const apiClient = useMemo(\n    () =>\n      new ApiClient({\n        baseUrl: config.serverUrl,\n        timeoutMs: config.requestTimeout,\n        retryAttempts: config.retryAttempts,\n      }),\n    [config.serverUrl, config.requestTimeout, config.retryAttempts]\n  );\n\n  // Rate limiter for password reset attempts (3 attempts per 5 minutes)\n  const { checkLimit, getRemainingAttempts } = useRateLimiter({\n    maxAttempts: 3,\n    windowMs: 300000,\n  });\n\n  const forgotPassword = useCallback(\n    async (email: string): Promise<void> => {\n      // Validate email format before API call\n      if (!validateEmail(email)) {\n        const validationError: AuthError = {\n          code: 'VALIDATION_ERROR',\n          message: 'Please enter a valid email address',\n        };\n        setError(validationError);\n        throw validationError;\n      }\n\n      // Check rate limit before API call\n      try {\n        checkLimit();\n      } catch (err) {\n        const rateLimitError: AuthError = {\n          code: 'RATE_LIMITED',\n          message: err instanceof Error ? err.message : 'Too many attempts',\n        };\n        setError(rateLimitError);\n        throw rateLimitError;\n      }\n\n      setIsLoading(true);\n      setError(null);\n      setIsSuccess(false);\n\n      try {\n        // M-08: Use ApiClient for consistent error handling\n        await apiClient.post('/forgot-password', { email });\n        setIsSuccess(true);\n      } catch (err) {\n        const authError = handleApiError(err, 'Failed to send reset email');\n        setError(authError);\n        throw authError;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient, checkLimit]\n  );\n\n  const resetPassword = useCallback(\n    async (token: string, newPassword: string): Promise<void> => {\n      setIsLoading(true);\n      setError(null);\n      setIsSuccess(false);\n\n      try {\n        // M-08: Use ApiClient for consistent error handling\n        await apiClient.post('/reset-password', { token, newPassword });\n        setIsSuccess(true);\n      } catch (err) {\n        const authError = handleApiError(err, 'Failed to reset password');\n        setError(authError);\n        throw authError;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const clearError = useCallback(() => setError(null), []);\n\n  const reset = useCallback(() => {\n    setError(null);\n    setIsSuccess(false);\n    setIsLoading(false);\n  }, []);\n\n  return {\n    forgotPassword,\n    resetPassword,\n    isLoading,\n    isSuccess,\n    error,\n    clearError,\n    reset,\n    remainingAttempts: getRemainingAttempts(),\n  };\n}\n","import { useState, useId, type FormEvent } from 'react';\nimport { usePasswordReset } from '../../hooks/usePasswordReset';\nimport { ErrorMessage } from '../shared/ErrorMessage';\nimport { LoadingSpinner } from '../shared/LoadingSpinner';\n\nexport interface ForgotPasswordFormProps {\n  onSuccess?: () => void;\n  onCancel?: () => void;\n  className?: string;\n}\n\n/**\n * Form for requesting a password reset email.\n *\n * @example\n * ```tsx\n * <ForgotPasswordForm\n *   onSuccess={() => console.log('Email sent!')}\n *   onCancel={() => setShowForgotPassword(false)}\n * />\n * ```\n */\nexport function ForgotPasswordForm({\n  onSuccess,\n  onCancel,\n  className = '',\n}: ForgotPasswordFormProps) {\n  const [email, setEmail] = useState('');\n  const { forgotPassword, isLoading, isSuccess, error, clearError } = usePasswordReset();\n  const emailId = useId();\n\n  const handleSubmit = async (e: FormEvent) => {\n    e.preventDefault();\n    try {\n      await forgotPassword(email);\n      onSuccess?.();\n    } catch {\n      // Error is already set in the hook\n    }\n  };\n\n  if (isSuccess) {\n    return (\n      <div className={`cedros-forgot-password-success ${className}`}>\n        <svg\n          className=\"cedros-success-icon\"\n          width=\"48\"\n          height=\"48\"\n          viewBox=\"0 0 48 48\"\n          fill=\"none\"\n          aria-hidden=\"true\"\n        >\n          <circle cx=\"24\" cy=\"24\" r=\"22\" stroke=\"currentColor\" strokeWidth=\"2\" />\n          <path\n            d=\"M14 24l7 7 13-13\"\n            stroke=\"currentColor\"\n            strokeWidth=\"2\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n          />\n        </svg>\n        <h3 className=\"cedros-success-title\">Check your email</h3>\n        <p className=\"cedros-success-message\">\n          If an account exists for <strong>{email}</strong>, you will receive a password reset link\n          shortly.\n        </p>\n        {onCancel && (\n          <button\n            type=\"button\"\n            className=\"cedros-button cedros-button-md cedros-button-outline\"\n            onClick={onCancel}\n          >\n            Back to login\n          </button>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <form className={`cedros-forgot-password-form ${className}`} onSubmit={handleSubmit}>\n      <div className=\"cedros-form-header\">\n        <h3 className=\"cedros-form-title\">Forgot password?</h3>\n        <p className=\"cedros-form-subtitle\">\n          Enter your email address and we&apos;ll send you a link to reset your password.\n        </p>\n      </div>\n\n      <ErrorMessage error={error} onDismiss={clearError} />\n\n      <div className=\"cedros-form-field\">\n        <label htmlFor={emailId} className=\"cedros-label\">\n          Email address\n        </label>\n        <input\n          id={emailId}\n          type=\"email\"\n          className=\"cedros-input\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          placeholder=\"you@example.com\"\n          required\n          autoComplete=\"email\"\n          disabled={isLoading}\n        />\n      </div>\n\n      <div className=\"cedros-form-actions\">\n        <button\n          type=\"submit\"\n          className=\"cedros-button cedros-button-md cedros-button-primary cedros-button-full\"\n          disabled={isLoading || !email}\n        >\n          {isLoading ? (\n            <>\n              <LoadingSpinner size=\"sm\" />\n              Sending...\n            </>\n          ) : (\n            'Send reset link'\n          )}\n        </button>\n\n        {onCancel && (\n          <button\n            type=\"button\"\n            className=\"cedros-button cedros-button-md cedros-button-ghost cedros-button-full\"\n            onClick={onCancel}\n            disabled={isLoading}\n          >\n            Back to login\n          </button>\n        )}\n      </div>\n    </form>\n  );\n}\n","import { useState, useCallback, useEffect, useRef, useMemo } from 'react';\nimport { useCedrosLogin } from '../context/useCedrosLogin';\nimport { ApiClient, handleApiError } from '../utils/apiClient';\nimport type { AuthResponse, AuthError } from '../types';\n\n// Module-level singleton for Apple Sign In script loading\n// Prevents race conditions when multiple components mount simultaneously\nconst scriptLoader = {\n  loading: false,\n  loaded: false,\n  error: null as Error | null,\n  callbacks: [] as Array<{ resolve: () => void; reject: (err: Error) => void }>,\n\n  load(): Promise<void> {\n    if (this.loaded) {\n      return Promise.resolve();\n    }\n\n    if (this.loading) {\n      return new Promise((resolve, reject) => {\n        this.callbacks.push({ resolve, reject });\n      });\n    }\n\n    this.loading = true;\n    return new Promise((resolve, reject) => {\n      this.callbacks.push({ resolve, reject });\n\n      const existingScript = document.getElementById('apple-signin-script');\n      if (existingScript) {\n        if (window.AppleID) {\n          this.loaded = true;\n          this.loading = false;\n          this.callbacks.forEach((cb) => cb.resolve());\n          this.callbacks = [];\n        } else {\n          existingScript.addEventListener('load', () => {\n            this.loaded = true;\n            this.loading = false;\n            this.callbacks.forEach((cb) => cb.resolve());\n            this.callbacks = [];\n          });\n        }\n        return;\n      }\n\n      const script = document.createElement('script');\n      script.src =\n        'https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js';\n      script.async = true;\n      script.defer = true;\n      script.id = 'apple-signin-script';\n\n      script.onload = () => {\n        this.loaded = true;\n        this.loading = false;\n        this.callbacks.forEach((cb) => cb.resolve());\n        this.callbacks = [];\n      };\n\n      script.onerror = () => {\n        this.loading = false;\n        // M-03: Remove failed script from DOM to allow retry on next load() call.\n        // Without removal, retry finds existingScript and waits for a load event\n        // that will never fire on an already-failed script.\n        script.remove();\n        const error = new Error('Failed to load Apple Sign In script');\n        this.callbacks.forEach((cb) => cb.reject(error));\n        this.callbacks = [];\n      };\n\n      document.head.appendChild(script);\n    });\n  },\n};\n\nexport interface UseAppleAuthReturn {\n  signIn: () => Promise<AuthResponse>;\n  isLoading: boolean;\n  isInitialized: boolean;\n  error: AuthError | null;\n  clearError: () => void;\n}\n\n/**\n * Hook for Apple Sign In authentication.\n *\n * @example\n * ```tsx\n * function AppleButton() {\n *   const { signIn, isLoading, isInitialized, error } = useAppleAuth();\n *\n *   return (\n *     <button onClick={signIn} disabled={!isInitialized || isLoading}>\n *       {isLoading ? 'Signing in...' : 'Sign in with Apple'}\n *     </button>\n *   );\n * }\n * ```\n */\nexport function useAppleAuth(): UseAppleAuthReturn {\n  const { config, _internal } = useCedrosLogin();\n  const [isLoading, setIsLoading] = useState(false);\n  const [isInitialized, setIsInitialized] = useState(false);\n  const [error, setError] = useState<AuthError | null>(null);\n\n  const configRef = useRef(config);\n\n  const apiClient = useMemo(\n    () =>\n      new ApiClient({\n        baseUrl: config.serverUrl,\n        timeoutMs: config.requestTimeout,\n        retryAttempts: config.retryAttempts,\n      }),\n    [config.serverUrl, config.requestTimeout, config.retryAttempts]\n  );\n\n  useEffect(() => {\n    configRef.current = config;\n  }, [config]);\n\n  // Initialize Apple Sign In SDK\n  useEffect(() => {\n    if (!config.appleClientId) {\n      return;\n    }\n\n    let isMounted = true;\n\n    const initializeAppleSignIn = () => {\n      if (!isMounted) return;\n\n      try {\n        window.AppleID?.auth?.init({\n          clientId: config.appleClientId!,\n          scope: 'name email',\n          redirectURI: window.location.origin,\n          usePopup: true,\n        });\n\n        if (isMounted) {\n          setIsInitialized(true);\n        }\n      } catch {\n        if (isMounted) {\n          setError({\n            code: 'SERVER_ERROR',\n            message: 'Failed to initialize Apple Sign In',\n          });\n        }\n      }\n    };\n\n    scriptLoader\n      .load()\n      .then(() => {\n        if (isMounted) {\n          initializeAppleSignIn();\n        }\n      })\n      .catch(() => {\n        if (isMounted) {\n          setError({\n            code: 'SERVER_ERROR',\n            message: 'Failed to load Apple Sign In',\n          });\n        }\n      });\n\n    return () => {\n      isMounted = false;\n    };\n  }, [config.appleClientId]);\n\n  const signIn = useCallback(async (): Promise<AuthResponse> => {\n    if (!config.appleClientId) {\n      const err: AuthError = {\n        code: 'VALIDATION_ERROR',\n        message: 'Apple Client ID not configured',\n      };\n      setError(err);\n      throw err;\n    }\n\n    if (!isInitialized) {\n      const err: AuthError = {\n        code: 'VALIDATION_ERROR',\n        message: 'Apple Sign In not initialized',\n      };\n      setError(err);\n      throw err;\n    }\n\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      // Trigger Apple Sign In popup\n      const response = await window.AppleID!.auth!.signIn();\n\n      // Apple returns authorization with id_token\n      const idToken = response.authorization?.id_token;\n      if (!idToken) {\n        throw new Error('No ID token received from Apple');\n      }\n\n      // Apple only provides user info on first sign-in\n      // The name comes from response.user (if available)\n      const userName = response.user?.name\n        ? `${response.user.name.firstName || ''} ${response.user.name.lastName || ''}`.trim()\n        : undefined;\n\n      // Send to our backend\n      const data = await apiClient.post<AuthResponse>('/apple', {\n        idToken,\n        name: userName || undefined,\n      });\n\n      configRef.current.callbacks?.onLoginSuccess?.(data.user, 'apple');\n      _internal?.handleLoginSuccess(data.user, data.tokens);\n      setIsLoading(false);\n      return data;\n    } catch (err) {\n      // Check if user cancelled\n      const appleError = err as { error?: string };\n      if (appleError.error === 'popup_closed_by_user') {\n        const authError: AuthError = {\n          code: 'SERVER_ERROR',\n          message: 'Apple Sign In was cancelled',\n        };\n        setError(authError);\n        setIsLoading(false);\n        throw authError;\n      }\n\n      const authError = handleApiError(err, 'Apple sign-in failed');\n      setError(authError);\n      setIsLoading(false);\n      throw authError;\n    }\n  }, [config.appleClientId, isInitialized, apiClient, _internal]);\n\n  const clearError = useCallback(() => setError(null), []);\n\n  return {\n    signIn,\n    isLoading,\n    isInitialized,\n    error,\n    clearError,\n  };\n}\n\n// Type declaration for Apple Sign In JS SDK\ndeclare global {\n  interface Window {\n    AppleID?: {\n      auth?: {\n        init: (config: {\n          clientId: string;\n          scope: string;\n          redirectURI: string;\n          usePopup?: boolean;\n        }) => void;\n        signIn: () => Promise<{\n          authorization?: {\n            id_token?: string;\n            code?: string;\n          };\n          user?: {\n            email?: string;\n            name?: {\n              firstName?: string;\n              lastName?: string;\n            };\n          };\n        }>;\n      };\n    };\n  }\n}\n","/**\n * Device detection utilities\n */\n\n/**\n * Detects if the current device is an Apple device (macOS, iOS, iPadOS).\n * Apple Sign In is most useful on Apple devices where users have Apple ID readily available.\n *\n * @returns true if running on an Apple device\n *\n * @example\n * ```tsx\n * if (isAppleDevice()) {\n *   // Show Apple Sign In button\n * }\n * ```\n */\nexport function isAppleDevice(): boolean {\n  if (typeof window === 'undefined' || typeof navigator === 'undefined') {\n    return false;\n  }\n\n  const userAgent = navigator.userAgent.toLowerCase();\n  const platform = (navigator.platform || '').toLowerCase();\n\n  // Check for iOS devices (iPhone, iPad, iPod)\n  if (/iphone|ipad|ipod/.test(userAgent)) {\n    return true;\n  }\n\n  // Check for macOS\n  if (platform.includes('mac') || /macintosh/.test(userAgent)) {\n    return true;\n  }\n\n  // Check for iPad on iOS 13+ (reports as MacIntel but has touch)\n  if (platform === 'macintel' && navigator.maxTouchPoints > 1) {\n    return true;\n  }\n\n  return false;\n}\n","import { useState } from 'react';\nimport { useAppleAuth } from '../../hooks/useAppleAuth';\nimport { LoadingSpinner } from '../shared/LoadingSpinner';\nimport { isAppleDevice } from '../../utils/deviceDetection';\n\nexport interface AppleLoginButtonProps {\n  onSuccess?: () => void;\n  onError?: (error: Error) => void;\n  className?: string;\n  variant?: 'default' | 'outline';\n  size?: 'sm' | 'md' | 'lg';\n  disabled?: boolean;\n  /**\n   * Hide the button on non-Apple devices (macOS, iOS, iPadOS).\n   * When true (default), button only renders on Apple devices.\n   * When false, button always renders regardless of device.\n   * @default true\n   */\n  hideOnNonApple?: boolean;\n}\n\n/**\n * Apple Sign In button\n *\n * Requires `appleClientId` to be configured in CedrosLoginProvider.\n *\n * @example\n * ```tsx\n * <AppleLoginButton\n *   onSuccess={() => console.log('Logged in!')}\n *   onError={(err) => console.error(err)}\n * />\n * ```\n */\nexport function AppleLoginButton({\n  onSuccess,\n  onError,\n  className = '',\n  variant = 'default',\n  size = 'md',\n  disabled = false,\n  hideOnNonApple = true,\n}: AppleLoginButtonProps) {\n  const { signIn, isLoading, isInitialized } = useAppleAuth();\n\n  // Detect Apple device on initial render (lazy initializer avoids re-detection)\n  const [isApple] = useState(() => isAppleDevice());\n\n  // Hide button on non-Apple devices if hideOnNonApple is true\n  if (hideOnNonApple && !isApple) {\n    return null;\n  }\n\n  const handleClick = async () => {\n    try {\n      await signIn();\n      onSuccess?.();\n    } catch (err) {\n      const error = err instanceof Error ? err : new Error(String(err));\n      onError?.(error);\n    }\n  };\n\n  const sizeClasses = {\n    sm: 'cedros-button-sm',\n    md: 'cedros-button-md',\n    lg: 'cedros-button-lg',\n  };\n\n  const variantClasses = {\n    default: 'cedros-button-apple',\n    outline: 'cedros-button-apple-outline',\n  };\n\n  return (\n    <button\n      type=\"button\"\n      className={`cedros-button ${variantClasses[variant]} ${sizeClasses[size]} ${className}`}\n      onClick={handleClick}\n      disabled={disabled || !isInitialized || isLoading}\n      aria-label=\"Sign in with Apple\"\n    >\n      {isLoading ? (\n        <LoadingSpinner size=\"sm\" />\n      ) : (\n        <svg\n          className=\"cedros-button-icon\"\n          width=\"18\"\n          height=\"18\"\n          viewBox=\"0 0 24 24\"\n          fill=\"currentColor\"\n          aria-hidden=\"true\"\n        >\n          <path d=\"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z\" />\n        </svg>\n      )}\n      <span>Continue with Apple</span>\n    </button>\n  );\n}\n","// Minimal WebAuthn JSON helpers (no external deps).\n//\n// WebAuthn request/response objects contain ArrayBuffers, which can't be sent\n// over JSON. Server endpoints in this repo expose options with base64url fields\n// and expect credentials back with base64url fields.\n\ntype Base64UrlString = string;\n\nfunction assert(condition: unknown, message: string): asserts condition {\n  if (!condition) throw new Error(message);\n}\n\nfunction normalizeBase64Url(input: string): string {\n  // Browser encoders may return base64url without padding.\n  return input.replace(/-/g, '+').replace(/_/g, '/');\n}\n\nexport function base64UrlToArrayBuffer(b64url: Base64UrlString): ArrayBuffer {\n  assert(typeof b64url === 'string' && b64url.length > 0, 'Expected base64url string');\n  const base64 = normalizeBase64Url(b64url);\n  const padded = base64 + '='.repeat((4 - (base64.length % 4)) % 4);\n  const binary = atob(padded);\n  const bytes = new Uint8Array(binary.length);\n  for (let i = 0; i < binary.length; i++) bytes[i] = binary.charCodeAt(i);\n  return bytes.buffer;\n}\n\nexport function arrayBufferToBase64Url(buffer: ArrayBuffer): Base64UrlString {\n  const bytes = new Uint8Array(buffer);\n  let binary = '';\n  for (let i = 0; i < bytes.length; i++) binary += String.fromCharCode(bytes[i]);\n  const base64 = btoa(binary);\n  return base64.replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+$/g, '');\n}\n\nfunction mapCredentialDescriptor(desc: unknown): PublicKeyCredentialDescriptor {\n  assert(typeof desc === 'object' && desc !== null, 'Invalid credential descriptor');\n  const d = desc as Record<string, unknown>;\n  assert(typeof d.type === 'string', 'Invalid credential descriptor type');\n  assert(typeof d.id === 'string', 'Invalid credential descriptor id');\n\n  return {\n    type: d.type as PublicKeyCredentialType,\n    id: base64UrlToArrayBuffer(d.id as string),\n    transports: Array.isArray(d.transports) ? (d.transports as AuthenticatorTransport[]) : undefined,\n  };\n}\n\nexport type ServerCreationOptions = {\n  publicKey: Record<string, unknown>;\n};\n\nexport function parseCreationOptionsFromServer(\n  options: ServerCreationOptions\n): PublicKeyCredentialCreationOptions {\n  assert(options && typeof options === 'object', 'Missing creation options');\n  const publicKey = options.publicKey as Record<string, unknown>;\n  assert(publicKey && typeof publicKey === 'object', 'Missing creation options.publicKey');\n\n  assert(typeof publicKey.challenge === 'string', 'Missing creation challenge');\n  assert(typeof publicKey.rp === 'object' && publicKey.rp !== null, 'Missing rp');\n  assert(typeof publicKey.user === 'object' && publicKey.user !== null, 'Missing user');\n\n  const rp = publicKey.rp as Record<string, unknown>;\n  const user = publicKey.user as Record<string, unknown>;\n\n  assert(typeof rp.name === 'string', 'Missing rp.name');\n  assert(typeof user.id === 'string', 'Missing user.id');\n  assert(typeof user.name === 'string', 'Missing user.name');\n  assert(typeof user.displayName === 'string', 'Missing user.displayName');\n\n  const exclude = Array.isArray(publicKey.excludeCredentials)\n    ? (publicKey.excludeCredentials as unknown[]).map(mapCredentialDescriptor)\n    : undefined;\n\n  const pubKeyCredParams = Array.isArray(publicKey.pubKeyCredParams)\n    ? (publicKey.pubKeyCredParams as Array<{ type: string; alg: number }>).map((p) => ({\n        type: p.type as PublicKeyCredentialType,\n        alg: p.alg,\n      }))\n    : [];\n\n  return {\n    challenge: base64UrlToArrayBuffer(publicKey.challenge as string),\n    rp: {\n      name: rp.name as string,\n      id: typeof rp.id === 'string' ? (rp.id as string) : undefined,\n    },\n    user: {\n      id: base64UrlToArrayBuffer(user.id as string),\n      name: user.name as string,\n      displayName: user.displayName as string,\n    },\n    pubKeyCredParams,\n    timeout: typeof publicKey.timeout === 'number' ? (publicKey.timeout as number) : undefined,\n    attestation: typeof publicKey.attestation === 'string' ? (publicKey.attestation as AttestationConveyancePreference) : undefined,\n    authenticatorSelection:\n      typeof publicKey.authenticatorSelection === 'object' && publicKey.authenticatorSelection !== null\n        ? (publicKey.authenticatorSelection as AuthenticatorSelectionCriteria)\n        : undefined,\n    excludeCredentials: exclude,\n    extensions:\n      typeof publicKey.extensions === 'object' && publicKey.extensions !== null\n        ? (publicKey.extensions as AuthenticationExtensionsClientInputs)\n        : undefined,\n  };\n}\n\nexport type ServerRequestOptions = {\n  publicKey: Record<string, unknown>;\n};\n\nexport function parseRequestOptionsFromServer(\n  options: ServerRequestOptions\n): PublicKeyCredentialRequestOptions {\n  assert(options && typeof options === 'object', 'Missing request options');\n  const publicKey = options.publicKey as Record<string, unknown>;\n  assert(publicKey && typeof publicKey === 'object', 'Missing request options.publicKey');\n\n  assert(typeof publicKey.challenge === 'string', 'Missing request challenge');\n\n  const allow = Array.isArray(publicKey.allowCredentials)\n    ? (publicKey.allowCredentials as unknown[]).map(mapCredentialDescriptor)\n    : undefined;\n\n  return {\n    challenge: base64UrlToArrayBuffer(publicKey.challenge as string),\n    rpId: typeof publicKey.rpId === 'string' ? (publicKey.rpId as string) : undefined,\n    timeout: typeof publicKey.timeout === 'number' ? (publicKey.timeout as number) : undefined,\n    userVerification:\n      typeof publicKey.userVerification === 'string'\n        ? (publicKey.userVerification as UserVerificationRequirement)\n        : undefined,\n    allowCredentials: allow,\n    extensions:\n      typeof publicKey.extensions === 'object' && publicKey.extensions !== null\n        ? (publicKey.extensions as AuthenticationExtensionsClientInputs)\n        : undefined,\n  };\n}\n\nexport type PublicKeyCredentialJSON = {\n  id: string;\n  rawId: string;\n  type: string;\n  authenticatorAttachment?: string;\n  clientExtensionResults?: AuthenticationExtensionsClientOutputs;\n  response: Record<string, unknown>;\n};\n\nexport function credentialToServerJson(cred: PublicKeyCredential): PublicKeyCredentialJSON {\n  const rawId = arrayBufferToBase64Url(cred.rawId);\n  const response = cred.response as AuthenticatorResponse;\n\n  const common = {\n    clientDataJSON: arrayBufferToBase64Url(response.clientDataJSON),\n  };\n\n  const responseJson: Record<string, unknown> = { ...common };\n\n  // Registration\n  if ('attestationObject' in response) {\n    const att = response as AuthenticatorAttestationResponse;\n    responseJson.attestationObject = arrayBufferToBase64Url(att.attestationObject);\n    if (typeof att.getTransports === 'function') {\n      try {\n        responseJson.transports = att.getTransports();\n      } catch {\n        // ignore\n      }\n    }\n  }\n\n  // Authentication\n  if ('authenticatorData' in response) {\n    const asr = response as AuthenticatorAssertionResponse;\n    responseJson.authenticatorData = arrayBufferToBase64Url(asr.authenticatorData);\n    responseJson.signature = arrayBufferToBase64Url(asr.signature);\n    if (asr.userHandle) {\n      responseJson.userHandle = arrayBufferToBase64Url(asr.userHandle);\n    }\n  }\n\n  return {\n    id: cred.id,\n    rawId,\n    type: cred.type,\n    authenticatorAttachment: cred.authenticatorAttachment ?? undefined,\n    clientExtensionResults: cred.getClientExtensionResults?.() ?? {},\n    response: responseJson,\n  };\n}\n","import { useCallback, useMemo, useState } from 'react';\nimport { useCedrosLogin } from '../context/useCedrosLogin';\nimport { ApiClient, handleApiError } from '../utils/apiClient';\nimport type { AuthError, AuthResponse } from '../types';\nimport {\n  credentialToServerJson,\n  parseCreationOptionsFromServer,\n  parseRequestOptionsFromServer,\n} from '../utils/webauthnJson';\n\ntype WebAuthnOptionsResponse = {\n  challengeId: string;\n  options: {\n    publicKey: Record<string, unknown>;\n  };\n};\n\nexport interface UseWebAuthnReturn {\n  isSupported: boolean;\n  isLoading: boolean;\n  error: AuthError | null;\n  clearError: () => void;\n\n  /** Start a server-managed WebAuthn authentication ceremony (login). */\n  authenticatePasskey: (params?: { email?: string }) => Promise<AuthResponse>;\n  /** Register a new passkey for the currently authenticated user. */\n  registerPasskey: (params?: { label?: string }) => Promise<{ credentialId: string; label?: string }>;\n}\n\nfunction isWebAuthnAvailable(): boolean {\n  if (typeof window !== 'undefined') {\n    const hostname = window.location?.hostname;\n    const isLocalhost = hostname === 'localhost' || hostname === '127.0.0.1' || hostname?.endsWith('.localhost');\n    const isSecure = (window as unknown as { isSecureContext?: boolean }).isSecureContext === true;\n    if (!isSecure && !isLocalhost) {\n      return false;\n    }\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof window.PublicKeyCredential !== 'undefined' &&\n    typeof navigator !== 'undefined' &&\n    typeof navigator.credentials !== 'undefined'\n  );\n}\n\nfunction mapWebAuthnDomError(err: unknown): AuthError | null {\n  if (!(err instanceof Error)) return null;\n  // DOMExceptions inherit from Error in modern browsers.\n  const name = err.name;\n\n  // User cancelled, dismissed, timed out, or no available credential.\n  if (name === 'NotAllowedError') {\n    return { code: 'SERVER_ERROR', message: 'Passkey operation was cancelled or timed out' };\n  }\n\n  // Common for trying to create a credential that already exists (or unusable state).\n  if (name === 'InvalidStateError') {\n    return { code: 'VALIDATION_ERROR', message: 'Passkey is not available for this operation' };\n  }\n\n  // Thrown for non-secure contexts, or RP ID / origin mismatches.\n  if (name === 'SecurityError') {\n    return {\n      code: 'VALIDATION_ERROR',\n      message:\n        'Passkeys require HTTPS and a correctly configured relying party (WEBAUTHN_RP_ID / WEBAUTHN_RP_ORIGIN)',\n    };\n  }\n\n  return null;\n}\n\n/**\n * Server-managed WebAuthn (passkey) authentication + registration.\n *\n * - Login: /webauthn/auth/options -> navigator.credentials.get -> /webauthn/auth/verify\n * - Registration: /webauthn/register/options -> navigator.credentials.create -> /webauthn/register/verify\n */\nexport function useWebAuthn(): UseWebAuthnReturn {\n  const { config, _internal } = useCedrosLogin();\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<AuthError | null>(null);\n\n  const apiClient = useMemo(\n    () =>\n      new ApiClient({\n        baseUrl: config.serverUrl,\n        timeoutMs: config.requestTimeout,\n        retryAttempts: config.retryAttempts,\n        // Needed for authenticated registration endpoints when cookie auth is disabled\n        getAccessToken: _internal?.getAccessToken,\n      }),\n    [_internal?.getAccessToken, config.serverUrl, config.requestTimeout, config.retryAttempts]\n  );\n\n  const clearError = useCallback(() => setError(null), []);\n\n  const isSupported = isWebAuthnAvailable();\n\n  const authenticatePasskey = useCallback(\n    async (params?: { email?: string }): Promise<AuthResponse> => {\n      if (!isSupported) {\n        const err: AuthError = {\n          code: 'VALIDATION_ERROR',\n          message: 'Passkeys are not supported in this browser',\n        };\n        setError(err);\n        throw err;\n      }\n\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        const optionsResponse = await apiClient.post<WebAuthnOptionsResponse>(\n          '/webauthn/auth/options',\n          { email: params?.email }\n        );\n\n        const publicKey = parseRequestOptionsFromServer(optionsResponse.options);\n\n        const assertion = (await navigator.credentials.get({\n          publicKey,\n        })) as PublicKeyCredential | null;\n\n        if (!assertion) {\n          throw new Error('Passkey authentication returned no credential');\n        }\n\n        const data = await apiClient.post<AuthResponse>('/webauthn/auth/verify', {\n          challengeId: optionsResponse.challengeId,\n          credential: credentialToServerJson(assertion),\n        });\n\n        config.callbacks?.onLoginSuccess?.(data.user, 'webauthn');\n        _internal?.handleLoginSuccess(data.user, data.tokens);\n\n        return data;\n      } catch (err) {\n        const domMapped = mapWebAuthnDomError(err);\n        const authError = domMapped ?? handleApiError(err, 'Passkey sign-in failed');\n        setError(authError);\n        throw authError;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient, config.callbacks, _internal, isSupported]\n  );\n\n  const registerPasskey = useCallback(\n    async (params?: { label?: string }): Promise<{ credentialId: string; label?: string }> => {\n      if (!isSupported) {\n        const err: AuthError = {\n          code: 'VALIDATION_ERROR',\n          message: 'Passkeys are not supported in this browser',\n        };\n        setError(err);\n        throw err;\n      }\n\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        const optionsResponse = await apiClient.post<WebAuthnOptionsResponse>(\n          '/webauthn/register/options',\n          {}\n        );\n\n        const publicKey = parseCreationOptionsFromServer(optionsResponse.options);\n\n        const created = (await navigator.credentials.create({\n          publicKey,\n        })) as PublicKeyCredential | null;\n\n        if (!created) {\n          throw new Error('Passkey registration returned no credential');\n        }\n\n        const result = await apiClient.post<{ success: boolean; credentialId: string; label?: string }>(\n          '/webauthn/register/verify',\n          {\n            challengeId: optionsResponse.challengeId,\n            credential: credentialToServerJson(created),\n            label: params?.label,\n          }\n        );\n\n        if (!result.success) {\n          throw new Error('Passkey registration failed');\n        }\n\n        return { credentialId: result.credentialId, label: result.label };\n      } catch (err) {\n        const domMapped = mapWebAuthnDomError(err);\n        const authError = domMapped ?? handleApiError(err, 'Passkey registration failed');\n        setError(authError);\n        throw authError;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient, isSupported]\n  );\n\n  return {\n    isSupported,\n    isLoading,\n    error,\n    clearError,\n    authenticatePasskey,\n    registerPasskey,\n  };\n}\n","import type { ReactNode } from 'react';\nimport { useWebAuthn } from '../../hooks/useWebAuthn';\n\nexport interface PasskeyLoginButtonProps {\n  onSuccess?: () => void;\n  className?: string;\n  children?: ReactNode;\n  disabled?: boolean;\n}\n\nexport function PasskeyLoginButton({\n  onSuccess,\n  className = '',\n  children,\n  disabled,\n}: PasskeyLoginButtonProps) {\n  const { authenticatePasskey, isLoading, isSupported } = useWebAuthn();\n\n  const isDisabled = disabled || !isSupported || isLoading;\n\n  return (\n    <button\n      type=\"button\"\n      className={`cedros-button cedros-button-social ${className}`}\n      onClick={async () => {\n        await authenticatePasskey();\n        onSuccess?.();\n      }}\n      disabled={isDisabled}\n      aria-disabled={isDisabled}\n    >\n      <span className=\"cedros-social-icon\" aria-hidden=\"true\">\n        <PasskeyIcon />\n      </span>\n      <span>{children ?? (isLoading ? 'Continuing...' : 'Continue with Passkey')}</span>\n    </button>\n  );\n}\n\nfunction PasskeyIcon() {\n  return (\n    <svg\n      width=\"20\"\n      height=\"20\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.5\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <path d=\"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4\" />\n      <path d=\"M14 13.12c0 2.38 0 6.38-1 8.88\" />\n      <path d=\"M17.29 21.02c.12-.6.43-2.3.5-3.02\" />\n      <path d=\"M2 12a10 10 0 0 1 18-6\" />\n      <path d=\"M2 16h.01\" />\n      <path d=\"M21.8 16c.2-2 .131-5.354 0-6\" />\n      <path d=\"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2\" />\n      <path d=\"M8.65 22c.21-.66.45-1.32.57-2\" />\n      <path d=\"M9 6.8a6 6 0 0 1 9 5.2v2\" />\n    </svg>\n  );\n}\n","import { useState, useCallback, useEffect } from 'react';\nimport { useCedrosLogin } from '../context/useCedrosLogin';\nimport { EmailLoginForm } from './email/EmailLoginForm';\nimport { EmailRegisterForm } from './email/EmailRegisterForm';\nimport { ForgotPasswordForm } from './email/ForgotPasswordForm';\nimport { GoogleLoginButton } from './google/GoogleLoginButton';\nimport { AppleLoginButton } from './apple/AppleLoginButton';\nimport { SolanaLoginButton } from './solana/SolanaLoginButton';\nimport { PasskeyLoginButton } from './webauthn/PasskeyLoginButton';\nimport { detectSolanaWallets } from '../utils/walletDetection';\nimport { isAppleDevice } from '../utils/deviceDetection';\n\ntype TabValue = 'login' | 'register';\ntype ViewState = 'form' | 'forgotPassword';\nconst TABS: TabValue[] = ['login', 'register'];\n\nexport interface LoginFormProps {\n  onSuccess?: () => void;\n  className?: string;\n  defaultTab?: 'login' | 'register';\n}\n\n/**\n * Combined login form with all enabled auth methods\n */\nexport function LoginForm({ onSuccess, className = '', defaultTab = 'login' }: LoginFormProps) {\n  const { config } = useCedrosLogin();\n  const [activeTab, setActiveTab] = useState<TabValue>(defaultTab);\n  const [viewState, setViewState] = useState<ViewState>('form');\n  // Detect wallets on initial render and re-check on window load/focus\n  const [hasWallets, setHasWallets] = useState(() => detectSolanaWallets());\n  const [isApple] = useState(() => isAppleDevice());\n\n  useEffect(() => {\n    const updateWallets = () => setHasWallets(detectSolanaWallets());\n    updateWallets();\n    window.addEventListener('load', updateWallets);\n    window.addEventListener('focus', updateWallets);\n    return () => {\n      window.removeEventListener('load', updateWallets);\n      window.removeEventListener('focus', updateWallets);\n    };\n  }, []);\n\n  // Get forgot password mode from config (only show link in 'reset' mode - instantLink is handled inline)\n  const forgotPasswordMode = config.forms?.forgotPassword?.mode ?? 'reset';\n\n  // UI-04: Handle Arrow key navigation for tabs (ARIA tabs pattern)\n  const handleTabKeyDown = useCallback(\n    (e: React.KeyboardEvent<HTMLButtonElement>) => {\n      const currentIndex = TABS.indexOf(activeTab);\n      let newIndex = currentIndex;\n\n      switch (e.key) {\n        case 'ArrowLeft':\n        case 'ArrowUp':\n          // Move to previous tab (wrapping to end)\n          newIndex = currentIndex === 0 ? TABS.length - 1 : currentIndex - 1;\n          break;\n        case 'ArrowRight':\n        case 'ArrowDown':\n          // Move to next tab (wrapping to start)\n          newIndex = currentIndex === TABS.length - 1 ? 0 : currentIndex + 1;\n          break;\n        case 'Home':\n          newIndex = 0;\n          break;\n        case 'End':\n          newIndex = TABS.length - 1;\n          break;\n        default:\n          return; // Don't prevent default for other keys\n      }\n\n      e.preventDefault();\n      const newTab = TABS[newIndex];\n      setActiveTab(newTab);\n      // Focus the new tab button\n      const newButton = document.getElementById(`cedros-tab-${newTab}`);\n      newButton?.focus();\n    },\n    [activeTab]\n  );\n\n  const features = config.features ?? {\n    email: true,\n    google: true,\n    apple: true,\n    solana: true,\n    webauthn: true,\n  };\n  const showEmail = features.email !== false;\n  const showGoogle = features.google !== false && config.googleClientId;\n  // Only show Apple button if feature enabled, clientId configured, AND on Apple device\n  const showApple = features.apple !== false && config.appleClientId && isApple;\n  // Only show Solana button if feature enabled AND wallets are installed\n  const showSolana = features.solana !== false && hasWallets;\n  const showPasskey = features.webauthn !== false;\n\n  const showDivider = showEmail && (showGoogle || showApple || showSolana || showPasskey);\n\n  // Show forgot password form\n  if (viewState === 'forgotPassword') {\n    return (\n      <div className={`cedros-login-form ${className}`}>\n        <ForgotPasswordForm onCancel={() => setViewState('form')} />\n      </div>\n    );\n  }\n\n  return (\n    <div className={`cedros-login-form ${className}`}>\n      {/* Social login buttons */}\n      {(showPasskey || showGoogle || showApple || showSolana) && (\n        <div className=\"cedros-social-buttons\">\n          {showPasskey && <PasskeyLoginButton onSuccess={onSuccess} />}\n          {showGoogle && <GoogleLoginButton onSuccess={onSuccess} />}\n          {showApple && <AppleLoginButton onSuccess={onSuccess} />}\n          {showSolana && <SolanaLoginButton onSuccess={onSuccess} />}\n        </div>\n      )}\n\n      {/* Divider */}\n      {showDivider && (\n        <div className=\"cedros-divider\">\n          <span>Or continue with</span>\n        </div>\n      )}\n\n      {/* Email forms */}\n      {showEmail && (\n        <>\n          {/* Tabs */}\n          <div className=\"cedros-tabs\" role=\"tablist\" aria-label=\"Authentication method\">\n            <button\n              type=\"button\"\n              role=\"tab\"\n              id=\"cedros-tab-login\"\n              className={`cedros-tab ${activeTab === 'login' ? 'cedros-tab-active' : ''}`}\n              onClick={() => setActiveTab('login')}\n              onKeyDown={handleTabKeyDown}\n              aria-selected={activeTab === 'login'}\n              aria-controls=\"cedros-tabpanel-login\"\n              tabIndex={activeTab === 'login' ? 0 : -1}\n            >\n              Sign in\n            </button>\n            <button\n              type=\"button\"\n              role=\"tab\"\n              id=\"cedros-tab-register\"\n              className={`cedros-tab ${activeTab === 'register' ? 'cedros-tab-active' : ''}`}\n              onClick={() => setActiveTab('register')}\n              onKeyDown={handleTabKeyDown}\n              aria-selected={activeTab === 'register'}\n              aria-controls=\"cedros-tabpanel-register\"\n              tabIndex={activeTab === 'register' ? 0 : -1}\n            >\n              Sign up\n            </button>\n          </div>\n\n          {/* Tab panels */}\n          <div\n            role=\"tabpanel\"\n            id={`cedros-tabpanel-${activeTab}`}\n            aria-labelledby={`cedros-tab-${activeTab}`}\n          >\n            {activeTab === 'login' ? (\n              <EmailLoginForm\n                onSuccess={onSuccess}\n                onSwitchToRegister={() => setActiveTab('register')}\n                onForgotPassword={\n                  forgotPasswordMode === 'reset' ? () => setViewState('forgotPassword') : undefined\n                }\n              />\n            ) : (\n              <EmailRegisterForm\n                onSuccess={onSuccess}\n                onSwitchToLogin={() => setActiveTab('login')}\n              />\n            )}\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n","import { Component, type ReactNode, type ErrorInfo } from 'react';\n\nexport interface ErrorBoundaryProps {\n  /** Child components to render */\n  children: ReactNode;\n  /** Custom fallback UI to show when an error occurs */\n  fallback?: ReactNode;\n  /** Callback when an error is caught */\n  onError?: (error: Error, errorInfo: ErrorInfo) => void;\n  /** Whether to show error details (useful for development) */\n  showDetails?: boolean;\n}\n\ninterface ErrorBoundaryState {\n  hasError: boolean;\n  error: Error | null;\n  errorInfo: ErrorInfo | null;\n}\n\n/**\n * Error Boundary component that catches JavaScript errors in child components.\n * Prevents the entire app from crashing and shows a fallback UI.\n *\n * @example\n * ```tsx\n * <ErrorBoundary\n *   fallback={<div>Something went wrong</div>}\n *   onError={(error) => logError(error)}\n * >\n *   <LoginForm />\n * </ErrorBoundary>\n * ```\n */\nexport class ErrorBoundary extends Component<ErrorBoundaryProps, ErrorBoundaryState> {\n  constructor(props: ErrorBoundaryProps) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null,\n      errorInfo: null,\n    };\n  }\n\n  static getDerivedStateFromError(error: Error): Partial<ErrorBoundaryState> {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo): void {\n    this.setState({ errorInfo });\n\n    // Log error to console in development\n    if (process.env.NODE_ENV === 'development') {\n      console.error('[Cedros Login] Error caught by ErrorBoundary:', error);\n      console.error('[Cedros Login] Component stack:', errorInfo.componentStack);\n    }\n\n    // Call optional error callback\n    this.props.onError?.(error, errorInfo);\n  }\n\n  handleRetry = (): void => {\n    this.setState({\n      hasError: false,\n      error: null,\n      errorInfo: null,\n    });\n  };\n\n  render(): ReactNode {\n    const { hasError, error, errorInfo } = this.state;\n    const { children, fallback, showDetails = false } = this.props;\n\n    if (hasError) {\n      // Custom fallback provided\n      if (fallback) {\n        return fallback;\n      }\n\n      // Default fallback UI\n      return (\n        <div className=\"cedros-error-boundary\" role=\"alert\" aria-live=\"assertive\">\n          <div className=\"cedros-error-boundary-content\">\n            <svg\n              className=\"cedros-error-boundary-icon\"\n              width=\"48\"\n              height=\"48\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              aria-hidden=\"true\"\n            >\n              <circle cx=\"12\" cy=\"12\" r=\"10\" />\n              <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\" />\n              <line x1=\"12\" y1=\"16\" x2=\"12.01\" y2=\"16\" />\n            </svg>\n\n            <h2 className=\"cedros-error-boundary-title\">Something went wrong</h2>\n\n            <p className=\"cedros-error-boundary-message\">\n              We encountered an unexpected error. Please try again.\n            </p>\n\n            {showDetails && error && (\n              <details className=\"cedros-error-boundary-details\">\n                <summary>Error details</summary>\n                <pre>\n                  {error.toString()}\n                  {errorInfo?.componentStack}\n                </pre>\n              </details>\n            )}\n\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-primary\"\n              onClick={this.handleRetry}\n            >\n              Try again\n            </button>\n          </div>\n        </div>\n      );\n    }\n\n    return children;\n  }\n}\n","import { useEffect, useRef } from 'react';\nimport { useCedrosLogin } from '../context/useCedrosLogin';\nimport { LoginForm } from './LoginForm';\nimport { ErrorBoundary } from './shared/ErrorBoundary';\n\nexport interface LoginModalProps {\n  className?: string;\n  title?: string;\n}\n\n/**\n * Modal containing the login form.\n * Controlled by the CedrosLoginProvider context.\n */\nexport function LoginModal({ className = '', title = 'Sign in to your account' }: LoginModalProps) {\n  const { isModalOpen, closeModal } = useCedrosLogin();\n  const modalRef = useRef<HTMLDivElement>(null);\n  const previousActiveElement = useRef<Element | null>(null);\n\n  // C-03: Use ref to avoid closeModal in effect dependencies\n  // Prevents event listener leak when closeModal identity changes\n  const closeModalRef = useRef(closeModal);\n  useEffect(() => {\n    closeModalRef.current = closeModal;\n  }, [closeModal]);\n\n  // Handle escape key and focus trapping\n  useEffect(() => {\n    if (!isModalOpen) return;\n\n    // Store currently focused element\n    previousActiveElement.current = document.activeElement;\n\n    // Focus the modal\n    modalRef.current?.focus();\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        closeModalRef.current();\n      }\n\n      // Focus trap\n      if (e.key === 'Tab' && modalRef.current) {\n        const focusableElements = modalRef.current.querySelectorAll<HTMLElement>(\n          'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n        );\n        const firstElement = focusableElements[0];\n        const lastElement = focusableElements[focusableElements.length - 1];\n\n        if (e.shiftKey && document.activeElement === firstElement) {\n          e.preventDefault();\n          lastElement?.focus();\n        } else if (!e.shiftKey && document.activeElement === lastElement) {\n          e.preventDefault();\n          firstElement?.focus();\n        }\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n\n    // Prevent body scroll\n    const previousOverflow = document.body.style.overflow;\n    document.body.style.overflow = 'hidden';\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n      document.body.style.overflow = previousOverflow;\n\n      // Restore focus\n      if (previousActiveElement.current instanceof HTMLElement) {\n        previousActiveElement.current.focus();\n      }\n    };\n  }, [isModalOpen]);\n\n  if (!isModalOpen) return null;\n\n  const handleBackdropClick = (e: React.MouseEvent) => {\n    if (e.target === e.currentTarget) {\n      closeModal();\n    }\n  };\n\n  return (\n    <div\n      className={`cedros-modal-backdrop ${className}`}\n      onClick={handleBackdropClick}\n      role=\"presentation\"\n    >\n      <div\n        ref={modalRef}\n        className=\"cedros-modal\"\n        role=\"dialog\"\n        aria-modal=\"true\"\n        aria-labelledby=\"cedros-modal-title\"\n        tabIndex={-1}\n      >\n        <div className=\"cedros-modal-header\">\n          <h2 id=\"cedros-modal-title\" className=\"cedros-modal-title\">\n            {title}\n          </h2>\n          <button\n            type=\"button\"\n            className=\"cedros-modal-close\"\n            onClick={closeModal}\n            aria-label=\"Close\"\n          >\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\">\n              <path\n                d=\"M18 6L6 18M6 6l12 12\"\n                stroke=\"currentColor\"\n                strokeWidth=\"2\"\n                strokeLinecap=\"round\"\n              />\n            </svg>\n          </button>\n        </div>\n        {/* M-06: ErrorBoundary catches rendering errors in login form */}\n        <div className=\"cedros-modal-content\">\n          <ErrorBoundary>\n            <LoginForm onSuccess={closeModal} />\n          </ErrorBoundary>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, type FormEvent } from 'react';\nimport { usePasswordReset } from '../../hooks/usePasswordReset';\nimport { PasswordInput } from './PasswordInput';\nimport { ErrorMessage } from '../shared/ErrorMessage';\nimport { LoadingSpinner } from '../shared/LoadingSpinner';\nimport { validatePassword } from '../../utils/validation';\nimport type { PasswordValidation } from '../../types';\n\nexport interface ResetPasswordFormProps {\n  token: string;\n  onSuccess?: () => void;\n  onLoginClick?: () => void;\n  className?: string;\n}\n\n/**\n * Form for resetting password using a reset token.\n *\n * @example\n * ```tsx\n * // Get token from URL params\n * const token = new URLSearchParams(location.search).get('token');\n *\n * <ResetPasswordForm\n *   token={token}\n *   onSuccess={() => navigate('/login')}\n *   onLoginClick={() => navigate('/login')}\n * />\n * ```\n */\nexport function ResetPasswordForm({\n  token,\n  onSuccess,\n  onLoginClick,\n  className = '',\n}: ResetPasswordFormProps) {\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [validation, setValidation] = useState<PasswordValidation | null>(null);\n  const { resetPassword, isLoading, isSuccess, error, clearError } = usePasswordReset();\n\n  const passwordsMatch = password === confirmPassword;\n  const isValid = validation?.isValid && passwordsMatch && password.length > 0;\n\n  const handleSubmit = async (e: FormEvent) => {\n    e.preventDefault();\n    if (!isValid) return;\n\n    try {\n      await resetPassword(token, password);\n      onSuccess?.();\n    } catch {\n      // Error is already set in the hook\n    }\n  };\n\n  if (isSuccess) {\n    return (\n      <div className={`cedros-reset-password-success ${className}`}>\n        <svg\n          className=\"cedros-success-icon\"\n          width=\"48\"\n          height=\"48\"\n          viewBox=\"0 0 48 48\"\n          fill=\"none\"\n          aria-hidden=\"true\"\n        >\n          <circle cx=\"24\" cy=\"24\" r=\"22\" stroke=\"currentColor\" strokeWidth=\"2\" />\n          <path\n            d=\"M14 24l7 7 13-13\"\n            stroke=\"currentColor\"\n            strokeWidth=\"2\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n          />\n        </svg>\n        <h3 className=\"cedros-success-title\">Password reset successful</h3>\n        <p className=\"cedros-success-message\">\n          Your password has been reset. You can now log in with your new password.\n        </p>\n        {onLoginClick && (\n          <button\n            type=\"button\"\n            className=\"cedros-button cedros-button-md cedros-button-primary\"\n            onClick={onLoginClick}\n          >\n            Go to login\n          </button>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <form className={`cedros-reset-password-form ${className}`} onSubmit={handleSubmit}>\n      <div className=\"cedros-form-header\">\n        <h3 className=\"cedros-form-title\">Reset your password</h3>\n        <p className=\"cedros-form-subtitle\">Enter your new password below.</p>\n      </div>\n\n      <ErrorMessage error={error} onDismiss={clearError} />\n\n      <div className=\"cedros-form-field\">\n        <PasswordInput\n          label=\"New password\"\n          value={password}\n          onChange={(e) => {\n            setPassword(e.target.value);\n            setValidation(validatePassword(e.target.value));\n          }}\n          showStrengthMeter\n          onValidationChange={setValidation}\n          disabled={isLoading}\n          autoComplete=\"new-password\"\n          error={\n            validation && !validation.isValid\n              ? Object.values(validation.errors).find(Boolean)\n              : undefined\n          }\n        />\n      </div>\n\n      <div className=\"cedros-form-field\">\n        <PasswordInput\n          label=\"Confirm password\"\n          value={confirmPassword}\n          onChange={(e) => setConfirmPassword(e.target.value)}\n          disabled={isLoading}\n          autoComplete=\"new-password\"\n          error={confirmPassword && !passwordsMatch ? 'Passwords do not match' : undefined}\n        />\n      </div>\n\n      <div className=\"cedros-form-actions\">\n        <button\n          type=\"submit\"\n          className=\"cedros-button cedros-button-md cedros-button-primary cedros-button-full\"\n          disabled={isLoading || !isValid}\n        >\n          {isLoading ? (\n            <>\n              <LoadingSpinner size=\"sm\" />\n              Resetting...\n            </>\n          ) : (\n            'Reset password'\n          )}\n        </button>\n\n        {onLoginClick && (\n          <button\n            type=\"button\"\n            className=\"cedros-button cedros-button-md cedros-button-ghost cedros-button-full\"\n            onClick={onLoginClick}\n            disabled={isLoading}\n          >\n            Back to login\n          </button>\n        )}\n      </div>\n    </form>\n  );\n}\n","/**\n * Organization avatar component\n *\n * Extracted from OrgSwitcher.tsx (F-02)\n */\nimport type { OrgWithMembership } from '../../types';\nimport { sanitizeImageUrl } from '../../utils/sanitization';\n\nexport interface OrgAvatarProps {\n  org: OrgWithMembership;\n  size?: 'sm' | 'lg';\n  className?: string;\n}\n\nexport function OrgAvatar({ org, size = 'lg', className = '' }: OrgAvatarProps) {\n  const sanitizedLogoUrl = sanitizeImageUrl(org.logoUrl);\n  const sizeClass = size === 'lg' ? 'cedros-org-avatar-lg' : '';\n  const imageClassName = ['cedros-org-avatar', sizeClass, className].filter(Boolean).join(' ');\n  const placeholderClassName = ['cedros-org-avatar-placeholder', sizeClass, className]\n    .filter(Boolean)\n    .join(' ');\n  if (sanitizedLogoUrl) {\n    return (\n      <img\n        src={sanitizedLogoUrl}\n        alt={org.name}\n        className={imageClassName}\n        referrerPolicy=\"no-referrer\"\n      />\n    );\n  }\n\n  return <div className={placeholderClassName}>{org.name[0]?.toUpperCase() || '?'}</div>;\n}\n","import { useCallback, useState, useRef, useEffect } from 'react';\nimport type { OrgWithMembership } from '../../types';\nimport { LoadingSpinner } from '../shared/LoadingSpinner';\nimport { OrgAvatar } from './OrgAvatar';\n\nexport interface OrgSelectorProps {\n  /** List of organizations to display */\n  orgs: OrgWithMembership[];\n  /** Currently active organization */\n  activeOrg: OrgWithMembership | null;\n  /** Loading state */\n  isLoading?: boolean;\n  /** Callback when organization is selected */\n  onSelect: (orgId: string) => void;\n  /** Callback when \"Create organization\" is clicked */\n  onCreateClick?: () => void;\n  /** Additional CSS class */\n  className?: string;\n  /** Placeholder when no orgs */\n  placeholder?: string;\n}\n\n/**\n * Dropdown selector for switching between organizations.\n *\n * ## A11Y-02: Keyboard Navigation Limitation\n *\n * Currently supports:\n * - Tab/Shift+Tab: Move focus between trigger and items\n * - Escape: Close dropdown\n * - Enter/Space: Select focused item\n *\n * TODO: Implement arrow key navigation for better accessibility:\n * - ArrowUp/ArrowDown: Navigate between items in the list\n * - Home/End: Jump to first/last item\n * - Type-ahead: Focus item starting with typed character\n *\n * See WAI-ARIA Listbox Pattern for reference implementation.\n *\n * @example\n * ```tsx\n * function Header() {\n *   const { orgs, activeOrg, switchOrg } = useOrgs();\n *\n *   return (\n *     <OrgSelector\n *       orgs={orgs}\n *       activeOrg={activeOrg}\n *       onSelect={switchOrg}\n *       onCreateClick={() => setShowCreateModal(true)}\n *     />\n *   );\n * }\n * ```\n */\nexport function OrgSelector({\n  orgs,\n  activeOrg,\n  isLoading = false,\n  onSelect,\n  onCreateClick,\n  className = '',\n  placeholder = 'Select organization',\n}: OrgSelectorProps) {\n  const [isOpen, setIsOpen] = useState(false);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  // Close on escape key\n  useEffect(() => {\n    const handleEscape = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        setIsOpen(false);\n      }\n    };\n\n    if (isOpen) {\n      document.addEventListener('keydown', handleEscape);\n      return () => document.removeEventListener('keydown', handleEscape);\n    }\n  }, [isOpen]);\n\n  const handleSelect = useCallback(\n    (orgId: string) => {\n      onSelect(orgId);\n      setIsOpen(false);\n    },\n    [onSelect]\n  );\n\n  const handleCreateClick = useCallback(() => {\n    setIsOpen(false);\n    onCreateClick?.();\n  }, [onCreateClick]);\n\n  const toggleDropdown = useCallback(() => {\n    setIsOpen((prev) => !prev);\n  }, []);\n\n  if (isLoading) {\n    return (\n      <div\n        className={`cedros-org-selector cedros-org-selector-loading ${className}`}\n        aria-busy=\"true\"\n        aria-live=\"polite\"\n      >\n        <LoadingSpinner size=\"sm\" />\n        <span>Loading...</span>\n      </div>\n    );\n  }\n\n  return (\n    <div ref={dropdownRef} className={`cedros-org-selector ${className}`}>\n      <button\n        type=\"button\"\n        className=\"cedros-org-selector-trigger\"\n        onClick={toggleDropdown}\n        aria-haspopup=\"listbox\"\n        aria-expanded={isOpen}\n      >\n        {activeOrg ? (\n          <>\n            <OrgAvatar org={activeOrg} size=\"sm\" />\n            <span className=\"cedros-org-selector-name\">{activeOrg.name}</span>\n            <RoleBadge role={activeOrg.membership.role} />\n          </>\n        ) : (\n          <span className=\"cedros-org-selector-placeholder\">{placeholder}</span>\n        )}\n        <ChevronIcon isOpen={isOpen} />\n      </button>\n\n      {isOpen && (\n        <div className=\"cedros-org-selector-dropdown\" role=\"listbox\">\n          {orgs.length === 0 ? (\n            <div className=\"cedros-org-selector-empty\">No organizations</div>\n          ) : (\n            <ul className=\"cedros-org-selector-list\">\n              {orgs.map((org) => (\n                <li key={org.id}>\n                  <button\n                    type=\"button\"\n                    className={`cedros-org-selector-item ${\n                      org.id === activeOrg?.id ? 'cedros-org-selector-item-active' : ''\n                    }`}\n                    onClick={() => handleSelect(org.id)}\n                    role=\"option\"\n                    aria-selected={org.id === activeOrg?.id}\n                  >\n                    <OrgAvatar org={org} size=\"sm\" />\n                    <span className=\"cedros-org-selector-item-name\">{org.name}</span>\n                    <RoleBadge role={org.membership.role} />\n                    {org.id === activeOrg?.id && <CheckIcon />}\n                  </button>\n                </li>\n              ))}\n            </ul>\n          )}\n\n          {onCreateClick && (\n            <>\n              <div className=\"cedros-org-selector-divider\" />\n              <button\n                type=\"button\"\n                className=\"cedros-org-selector-create\"\n                onClick={handleCreateClick}\n              >\n                <PlusIcon />\n                <span>Create organization</span>\n              </button>\n            </>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\n// Helper components\nfunction RoleBadge({ role }: { role: string }) {\n  return <span className={`cedros-org-role cedros-org-role-${role}`}>{role}</span>;\n}\n\nfunction ChevronIcon({ isOpen }: { isOpen: boolean }) {\n  return (\n    <svg\n      className={`cedros-org-chevron ${isOpen ? 'cedros-org-chevron-open' : ''}`}\n      width=\"16\"\n      height=\"16\"\n      viewBox=\"0 0 16 16\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M4 6L8 10L12 6\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.5\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </svg>\n  );\n}\n\nfunction CheckIcon() {\n  return (\n    <svg\n      className=\"cedros-org-check\"\n      width=\"16\"\n      height=\"16\"\n      viewBox=\"0 0 16 16\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M3 8L6 11L13 4\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.5\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </svg>\n  );\n}\n\nfunction PlusIcon() {\n  return (\n    <svg\n      className=\"cedros-org-plus\"\n      width=\"16\"\n      height=\"16\"\n      viewBox=\"0 0 16 16\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M8 3V13M3 8H13\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.5\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </svg>\n  );\n}\n","/**\n * Icon components for organization UI\n *\n * Extracted from OrgSwitcher.tsx (F-02)\n */\n\nexport function CloseIcon() {\n  return (\n    <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        d=\"M5 5L15 15M15 5L5 15\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.5\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </svg>\n  );\n}\n\nexport function CheckIcon() {\n  return (\n    <svg\n      className=\"cedros-org-check\"\n      width=\"20\"\n      height=\"20\"\n      viewBox=\"0 0 20 20\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M4 10L8 14L16 5\"\n        stroke=\"currentColor\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </svg>\n  );\n}\n\nexport function PlusIcon() {\n  return (\n    <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        d=\"M10 4V16M4 10H16\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.5\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </svg>\n  );\n}\n","/**\n * Organization list view component\n *\n * Extracted from OrgSwitcher.tsx (F-02)\n */\nimport type { OrgWithMembership } from '../../types';\nimport { LoadingSpinner } from '../shared/LoadingSpinner';\nimport { OrgAvatar } from './OrgAvatar';\nimport { CheckIcon, PlusIcon } from './icons';\n\nexport interface OrgListViewProps {\n  orgs: OrgWithMembership[];\n  activeOrg: OrgWithMembership | null;\n  isLoading: boolean;\n  onSelect: (orgId: string) => void;\n  onCreateClick?: () => void;\n}\n\nexport function OrgListView({\n  orgs,\n  activeOrg,\n  isLoading,\n  onSelect,\n  onCreateClick,\n}: OrgListViewProps) {\n  if (isLoading) {\n    return (\n      <div className=\"cedros-org-switcher-loading\">\n        <LoadingSpinner />\n        <span>Loading organizations...</span>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {orgs.length === 0 ? (\n        <div className=\"cedros-org-switcher-empty\">\n          <p>You don't belong to any organizations yet.</p>\n        </div>\n      ) : (\n        <ul className=\"cedros-org-switcher-list\">\n          {orgs.map((org) => (\n            <li key={org.id}>\n              <button\n                type=\"button\"\n                className={`cedros-org-switcher-item ${\n                  org.id === activeOrg?.id ? 'cedros-org-switcher-item-active' : ''\n                }`}\n                onClick={() => onSelect(org.id)}\n              >\n                <OrgAvatar org={org} />\n                <div className=\"cedros-org-switcher-item-content\">\n                  <span className=\"cedros-org-switcher-item-name\">{org.name}</span>\n                  <span className=\"cedros-org-switcher-item-slug\">@{org.slug}</span>\n                </div>\n                <div className=\"cedros-org-switcher-item-meta\">\n                  <span className={`cedros-org-role cedros-org-role-${org.membership.role}`}>\n                    {org.membership.role}\n                  </span>\n                  {org.isPersonal && <span className=\"cedros-org-personal-badge\">Personal</span>}\n                </div>\n                {org.id === activeOrg?.id && <CheckIcon />}\n              </button>\n            </li>\n          ))}\n        </ul>\n      )}\n\n      {onCreateClick && (\n        <button type=\"button\" className=\"cedros-org-switcher-create\" onClick={onCreateClick}>\n          <PlusIcon />\n          <span>Create new organization</span>\n        </button>\n      )}\n    </>\n  );\n}\n","/**\n * Create organization form component\n *\n * Extracted from OrgSwitcher.tsx (F-02)\n */\nimport { useState, useCallback } from 'react';\nimport type { CreateOrgRequest } from '../../types';\nimport { LoadingSpinner } from '../shared/LoadingSpinner';\nimport { ErrorMessage } from '../shared/ErrorMessage';\n\nexport interface CreateOrgFormProps {\n  isLoading: boolean;\n  onSubmit: (data: CreateOrgRequest) => Promise<void>;\n  onCancel: () => void;\n}\n\nexport function CreateOrgForm({ isLoading, onSubmit, onCancel }: CreateOrgFormProps) {\n  const [name, setName] = useState('');\n  const [slug, setSlug] = useState('');\n  const [formError, setFormError] = useState<string | null>(null);\n\n  // Auto-generate slug from name\n  const handleNameChange = useCallback((value: string) => {\n    setName(value);\n    // Generate slug: lowercase, replace spaces with hyphens, remove special chars\n    const generatedSlug = value\n      .toLowerCase()\n      .replace(/\\s+/g, '-')\n      .replace(/[^a-z0-9-]/g, '')\n      .substring(0, 50);\n    setSlug(generatedSlug);\n  }, []);\n\n  const handleSubmit = useCallback(\n    async (event: React.FormEvent) => {\n      event.preventDefault();\n      setFormError(null);\n\n      if (!name.trim()) {\n        setFormError('Organization name is required');\n        return;\n      }\n\n      if (!slug.trim()) {\n        setFormError('Organization slug is required');\n        return;\n      }\n\n      try {\n        await onSubmit({ name: name.trim(), slug: slug.trim() });\n      } catch (err) {\n        setFormError((err as Error).message || 'Failed to create organization');\n      }\n    },\n    [name, slug, onSubmit]\n  );\n\n  return (\n    <form className=\"cedros-org-create-form\" onSubmit={handleSubmit}>\n      {formError && <ErrorMessage error={formError} />}\n\n      <div className=\"cedros-form-group\">\n        <label htmlFor=\"org-name\" className=\"cedros-form-label\">\n          Organization Name\n        </label>\n        <input\n          id=\"org-name\"\n          type=\"text\"\n          className=\"cedros-form-input\"\n          value={name}\n          onChange={(e) => handleNameChange(e.target.value)}\n          placeholder=\"My Organization\"\n          maxLength={255}\n          disabled={isLoading}\n          autoFocus\n        />\n      </div>\n\n      <div className=\"cedros-form-group\">\n        <label htmlFor=\"org-slug\" className=\"cedros-form-label\">\n          URL Slug\n        </label>\n        <div className=\"cedros-form-input-prefix\">\n          <span className=\"cedros-form-prefix\">@</span>\n          <input\n            id=\"org-slug\"\n            type=\"text\"\n            className=\"cedros-form-input\"\n            value={slug}\n            onChange={(e) => setSlug(e.target.value.toLowerCase())}\n            placeholder=\"my-organization\"\n            maxLength={100}\n            pattern=\"[a-z0-9-]+\"\n            disabled={isLoading}\n          />\n        </div>\n        <span className=\"cedros-form-hint\">Only lowercase letters, numbers, and hyphens</span>\n      </div>\n\n      <div className=\"cedros-form-actions\">\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-outline\"\n          onClick={onCancel}\n          disabled={isLoading}\n        >\n          Cancel\n        </button>\n        <button\n          type=\"submit\"\n          className=\"cedros-button cedros-button-primary\"\n          disabled={isLoading || !name.trim() || !slug.trim()}\n        >\n          {isLoading ? <LoadingSpinner size=\"sm\" /> : 'Create Organization'}\n        </button>\n      </div>\n    </form>\n  );\n}\n","/**\n * Organization switcher modal component\n *\n * Refactored to extract sub-components (F-02):\n * - CreateOrgForm -> ./CreateOrgForm.tsx\n * - OrgListView -> ./OrgListView.tsx\n * - OrgAvatar -> ./OrgAvatar.tsx\n * - Icons -> ./icons.tsx\n */\nimport { useState, useCallback, useEffect, useRef } from 'react';\nimport type { OrgWithMembership, CreateOrgRequest, DisplayError } from '../../types';\nimport { ErrorMessage } from '../shared/ErrorMessage';\nimport { OrgListView } from './OrgListView';\nimport { CreateOrgForm } from './CreateOrgForm';\nimport { CloseIcon } from './icons';\n\nexport interface OrgSwitcherProps {\n  /** Whether the modal is open */\n  isOpen: boolean;\n  /** Callback to close the modal */\n  onClose: () => void;\n  /** List of organizations */\n  orgs: OrgWithMembership[];\n  /** Currently active organization */\n  activeOrg: OrgWithMembership | null;\n  /** Loading state */\n  isLoading?: boolean;\n  /** Error message */\n  error?: DisplayError;\n  /** Callback when organization is selected */\n  onSelect: (orgId: string) => void;\n  /** Callback when new organization is created */\n  onCreate?: (data: CreateOrgRequest) => Promise<void>;\n  /** Additional CSS class */\n  className?: string;\n}\n\ntype ViewMode = 'list' | 'create';\n\n/**\n * Modal for switching organizations and creating new ones.\n *\n * @example\n * ```tsx\n * function App() {\n *   const [isOpen, setIsOpen] = useState(false);\n *   const { orgs, activeOrg, switchOrg, createOrg } = useOrgs();\n *\n *   return (\n *     <>\n *       <button onClick={() => setIsOpen(true)}>Switch org</button>\n *       <OrgSwitcher\n *         isOpen={isOpen}\n *         onClose={() => setIsOpen(false)}\n *         orgs={orgs}\n *         activeOrg={activeOrg}\n *         onSelect={switchOrg}\n *         onCreate={createOrg}\n *       />\n *     </>\n *   );\n * }\n * ```\n */\nexport function OrgSwitcher({\n  isOpen,\n  onClose,\n  orgs,\n  activeOrg,\n  isLoading = false,\n  error,\n  onSelect,\n  onCreate,\n  className = '',\n}: OrgSwitcherProps) {\n  // Render null when closed - inner content unmounts, resetting state naturally\n  if (!isOpen) return null;\n\n  return (\n    <OrgSwitcherModal\n      onClose={onClose}\n      orgs={orgs}\n      activeOrg={activeOrg}\n      isLoading={isLoading}\n      error={error}\n      onSelect={onSelect}\n      onCreate={onCreate}\n      className={className}\n    />\n  );\n}\n\n// Inner modal component - unmounts when modal closes, resetting viewMode state\nfunction OrgSwitcherModal({\n  onClose,\n  orgs,\n  activeOrg,\n  isLoading = false,\n  error,\n  onSelect,\n  onCreate,\n  className,\n}: Omit<OrgSwitcherProps, 'isOpen'>) {\n  const [viewMode, setViewMode] = useState<ViewMode>('list');\n  const modalRef = useRef<HTMLDivElement>(null);\n  // UI-05: Store previously focused element for restoration\n  const previousFocusRef = useRef<HTMLElement | null>(null);\n\n  // UI-05: Focus trap and restoration\n  useEffect(() => {\n    // Save currently focused element\n    previousFocusRef.current = document.activeElement as HTMLElement;\n\n    // Focus the close button when modal opens\n    const closeButton = modalRef.current?.querySelector<HTMLElement>('.cedros-modal-close');\n    closeButton?.focus();\n\n    return () => {\n      // Restore focus when modal closes\n      previousFocusRef.current?.focus();\n    };\n  }, []);\n\n  // Close on escape key - runs unconditionally since component only mounts when modal is open\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        onClose();\n        return;\n      }\n\n      // UI-05: Focus trap - Tab/Shift+Tab within modal\n      if (event.key === 'Tab' && modalRef.current) {\n        const focusableElements = modalRef.current.querySelectorAll<HTMLElement>(\n          'button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=\"-1\"])'\n        );\n        const firstElement = focusableElements[0];\n        const lastElement = focusableElements[focusableElements.length - 1];\n\n        if (event.shiftKey) {\n          // Shift+Tab: wrap from first to last\n          if (document.activeElement === firstElement) {\n            event.preventDefault();\n            lastElement?.focus();\n          }\n        } else {\n          // Tab: wrap from last to first\n          if (document.activeElement === lastElement) {\n            event.preventDefault();\n            firstElement?.focus();\n          }\n        }\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [onClose]);\n\n  // Handle backdrop click\n  const handleBackdropClick = useCallback(\n    (event: React.MouseEvent) => {\n      if (event.target === event.currentTarget) {\n        onClose();\n      }\n    },\n    [onClose]\n  );\n\n  const handleSelect = useCallback(\n    (orgId: string) => {\n      onSelect(orgId);\n      onClose();\n    },\n    [onSelect, onClose]\n  );\n\n  const handleCreate = useCallback(\n    async (data: CreateOrgRequest) => {\n      await onCreate?.(data);\n      onClose();\n    },\n    [onCreate, onClose]\n  );\n\n  return (\n    <div className=\"cedros-modal-backdrop\" onClick={handleBackdropClick}>\n      <div\n        ref={modalRef}\n        className={`cedros-modal cedros-org-switcher ${className}`}\n        role=\"dialog\"\n        aria-modal=\"true\"\n        aria-labelledby=\"org-switcher-title\"\n      >\n        <div className=\"cedros-modal-header\">\n          <h2 id=\"org-switcher-title\" className=\"cedros-modal-title\">\n            {viewMode === 'list' ? 'Switch Organization' : 'Create Organization'}\n          </h2>\n          <button type=\"button\" className=\"cedros-modal-close\" onClick={onClose} aria-label=\"Close\">\n            <CloseIcon />\n          </button>\n        </div>\n\n        <div className=\"cedros-modal-body\">\n          {error && <ErrorMessage error={error} />}\n\n          {viewMode === 'list' ? (\n            <OrgListView\n              orgs={orgs}\n              activeOrg={activeOrg}\n              isLoading={isLoading}\n              onSelect={handleSelect}\n              onCreateClick={onCreate ? () => setViewMode('create') : undefined}\n            />\n          ) : (\n            <CreateOrgForm\n              isLoading={isLoading}\n              onSubmit={handleCreate}\n              onCancel={() => setViewMode('list')}\n            />\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, useCallback } from 'react';\nimport type { Member, OrgRole, DisplayError } from '../../types';\nimport { LoadingSpinner } from '../shared/LoadingSpinner';\nimport { ErrorMessage } from '../shared/ErrorMessage';\nimport { sanitizeImageUrl } from '../../utils/sanitization';\n\nexport interface MemberListProps {\n  /** List of members to display */\n  members: Member[];\n  /** Current user's ID (to prevent self-actions) */\n  currentUserId?: string;\n  /** Loading state */\n  isLoading?: boolean;\n  /** Error message */\n  error?: DisplayError;\n  /** Whether the current user can manage members */\n  canManage?: boolean;\n  /** Whether the current user can change roles */\n  canChangeRoles?: boolean;\n  /** Callback when role is updated */\n  onUpdateRole?: (userId: string, role: OrgRole) => Promise<void>;\n  /** Callback when member is removed */\n  onRemove?: (userId: string) => Promise<void>;\n  /** Additional CSS class */\n  className?: string;\n}\n\nconst ROLE_OPTIONS: OrgRole[] = ['owner', 'admin', 'member', 'viewer'];\n\n/**\n * Display and manage organization members.\n *\n * @example\n * ```tsx\n * function TeamMembers() {\n *   const { activeOrg, hasPermission } = useOrgs();\n *   const { members, isLoading, error, updateMemberRole, removeMember } = useMembers(activeOrg?.id);\n *   const { user } = useAuth();\n *\n *   return (\n *     <MemberList\n *       members={members}\n *       currentUserId={user?.id}\n *       isLoading={isLoading}\n *       error={error?.message}\n *       canManage={hasPermission('member:remove')}\n *       canChangeRoles={hasPermission('member:role_change')}\n *       onUpdateRole={updateMemberRole}\n *       onRemove={removeMember}\n *     />\n *   );\n * }\n * ```\n */\nexport function MemberList({\n  members,\n  currentUserId,\n  isLoading = false,\n  error,\n  canManage = false,\n  canChangeRoles = false,\n  onUpdateRole,\n  onRemove,\n  className = '',\n}: MemberListProps) {\n  if (isLoading && members.length === 0) {\n    return (\n      <div className={`cedros-member-list cedros-member-list-loading ${className}`}>\n        <LoadingSpinner />\n        <span>Loading members...</span>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className={`cedros-member-list ${className}`}>\n        <ErrorMessage error={error} />\n      </div>\n    );\n  }\n\n  if (members.length === 0) {\n    return (\n      <div className={`cedros-member-list cedros-member-list-empty ${className}`}>\n        <p>No members found.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`cedros-member-list ${className}`}>\n      <table className=\"cedros-member-table\">\n        <thead>\n          <tr>\n            <th>Member</th>\n            <th>Role</th>\n            <th>Joined</th>\n            {(canManage || canChangeRoles) && <th>Actions</th>}\n          </tr>\n        </thead>\n        <tbody>\n          {members.map((member) => (\n            <MemberRow\n              key={member.id}\n              member={member}\n              isCurrentUser={member.userId === currentUserId}\n              canManage={canManage}\n              canChangeRoles={canChangeRoles}\n              onUpdateRole={onUpdateRole}\n              onRemove={onRemove}\n            />\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\n// Member row component\ninterface MemberRowProps {\n  member: Member;\n  isCurrentUser: boolean;\n  canManage: boolean;\n  canChangeRoles: boolean;\n  onUpdateRole?: (userId: string, role: OrgRole) => Promise<void>;\n  onRemove?: (userId: string) => Promise<void>;\n}\n\nfunction MemberRow({\n  member,\n  isCurrentUser,\n  canManage,\n  canChangeRoles,\n  onUpdateRole,\n  onRemove,\n}: MemberRowProps) {\n  const [isUpdating, setIsUpdating] = useState(false);\n  const [selectedRole, setSelectedRole] = useState<OrgRole>(member.role);\n\n  const handleRoleChange = useCallback(\n    async (newRole: OrgRole) => {\n      if (!onUpdateRole || newRole === member.role) return;\n\n      setIsUpdating(true);\n      try {\n        await onUpdateRole(member.userId, newRole);\n        setSelectedRole(newRole);\n      } catch {\n        // Revert on error\n        setSelectedRole(member.role);\n      } finally {\n        setIsUpdating(false);\n      }\n    },\n    [member.userId, member.role, onUpdateRole]\n  );\n\n  const handleRemove = useCallback(async () => {\n    if (!onRemove) return;\n\n    const confirmed = window.confirm(\n      `Are you sure you want to remove ${member.user.name || member.user.email} from this organization?`\n    );\n    if (!confirmed) return;\n\n    setIsUpdating(true);\n    try {\n      await onRemove(member.userId);\n    } finally {\n      setIsUpdating(false);\n    }\n  }, [member.userId, member.user.name, member.user.email, onRemove]);\n\n  const isOwner = member.role === 'owner';\n  const canModify = !isCurrentUser && !isOwner;\n\n  return (\n    <tr className={`cedros-member-row ${isCurrentUser ? 'cedros-member-row-current' : ''}`}>\n      <td className=\"cedros-member-info\">\n        <MemberAvatar user={member.user} />\n        <div className=\"cedros-member-details\">\n          <span className=\"cedros-member-name\">\n            {member.user.name || 'Unknown'}\n            {isCurrentUser && <span className=\"cedros-member-you\">(you)</span>}\n          </span>\n          <span className=\"cedros-member-email\">{member.user.email}</span>\n        </div>\n      </td>\n      <td className=\"cedros-member-role\">\n        {canChangeRoles && canModify && onUpdateRole ? (\n          <select\n            value={selectedRole}\n            onChange={(e) => handleRoleChange(e.target.value as OrgRole)}\n            disabled={isUpdating}\n            className=\"cedros-role-select\"\n          >\n            {ROLE_OPTIONS.map((role) => (\n              <option key={role} value={role}>\n                {role.charAt(0).toUpperCase() + role.slice(1)}\n              </option>\n            ))}\n          </select>\n        ) : (\n          <span className={`cedros-role-badge cedros-role-badge-${member.role}`}>\n            {member.role.charAt(0).toUpperCase() + member.role.slice(1)}\n          </span>\n        )}\n      </td>\n      <td className=\"cedros-member-joined\">{formatDate(member.joinedAt)}</td>\n      {(canManage || canChangeRoles) && (\n        <td className=\"cedros-member-actions\">\n          {canManage && canModify && onRemove && (\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-danger cedros-button-sm\"\n              onClick={handleRemove}\n              disabled={isUpdating}\n              aria-label={`Remove ${member.user.name || member.user.email}`}\n            >\n              {isUpdating ? <LoadingSpinner size=\"sm\" /> : 'Remove'}\n            </button>\n          )}\n        </td>\n      )}\n    </tr>\n  );\n}\n\n// Helper components\nfunction MemberAvatar({ user }: { user: Member['user'] }) {\n  // COMP-06: Cache sanitized URL and verify before use (blocks dangerous protocols)\n  const sanitizedPicture = sanitizeImageUrl(user.picture);\n  if (sanitizedPicture) {\n    return (\n      <img\n        src={sanitizedPicture}\n        alt={user.name || user.email || 'Member'}\n        className=\"cedros-member-avatar\"\n        referrerPolicy=\"no-referrer\"\n      />\n    );\n  }\n\n  const initial = (user.name?.[0] || user.email?.[0] || '?').toUpperCase();\n  return <div className=\"cedros-member-avatar-placeholder\">{initial}</div>;\n}\n\nfunction formatDate(dateString: string): string {\n  const date = new Date(dateString);\n  return date.toLocaleDateString(undefined, {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n  });\n}\n","import { useState, useCallback, useEffect, useRef } from 'react';\nimport type { OrgRole, DisplayError } from '../../types';\nimport { LoadingSpinner } from '../shared/LoadingSpinner';\nimport { ErrorMessage } from '../shared/ErrorMessage';\nimport { validateEmail } from '../../utils/validation';\n\ntype InviteRole = Exclude<OrgRole, 'owner'>;\n\nexport interface InviteFormProps {\n  /** Callback when invite is submitted */\n  onSubmit: (email: string, role: InviteRole) => Promise<void>;\n  /** Loading state */\n  isLoading?: boolean;\n  /** Error message */\n  error?: DisplayError;\n  /** Available roles for invite (default: admin, member, viewer) */\n  availableRoles?: InviteRole[];\n  /** Default role for new invites */\n  defaultRole?: InviteRole;\n  /** Additional CSS class */\n  className?: string;\n}\n\nconst DEFAULT_ROLES: InviteRole[] = ['admin', 'member', 'viewer'];\n\n/**\n * Form for inviting new members to an organization.\n *\n * @example\n * ```tsx\n * function InviteManager() {\n *   const { activeOrg } = useOrgs();\n *   const { createInvite, isLoading, error } = useInvites(activeOrg?.id);\n *\n *   return (\n *     <InviteForm\n *       onSubmit={createInvite}\n *       isLoading={isLoading}\n *       error={error?.message}\n *       defaultRole=\"member\"\n *     />\n *   );\n * }\n * ```\n */\nexport function InviteForm({\n  onSubmit,\n  isLoading = false,\n  error,\n  availableRoles = DEFAULT_ROLES,\n  defaultRole = 'member',\n  className = '',\n}: InviteFormProps) {\n  const [email, setEmail] = useState('');\n  const [role, setRole] = useState<InviteRole>(defaultRole);\n  const [formError, setFormError] = useState<string | null>(null);\n  const [success, setSuccess] = useState(false);\n  const successTimerRef = useRef<number | null>(null);\n  // UI-03: Track mounted state to prevent state updates after unmount\n  const isMountedRef = useRef(true);\n\n  useEffect(() => {\n    isMountedRef.current = true;\n    return () => {\n      isMountedRef.current = false;\n      if (successTimerRef.current !== null) {\n        window.clearTimeout(successTimerRef.current);\n        successTimerRef.current = null;\n      }\n    };\n  }, []);\n\n  const handleSubmit = useCallback(\n    async (e: React.FormEvent) => {\n      e.preventDefault();\n      setFormError(null);\n      setSuccess(false);\n\n      const trimmedEmail = email.trim();\n\n      if (!trimmedEmail) {\n        setFormError('Email is required');\n        return;\n      }\n\n      if (!validateEmail(trimmedEmail)) {\n        setFormError('Please enter a valid email address');\n        return;\n      }\n\n      try {\n        await onSubmit(trimmedEmail, role);\n        setEmail('');\n        setRole(defaultRole);\n        setSuccess(true);\n        // Clear success message after 3 seconds\n        if (successTimerRef.current !== null) {\n          window.clearTimeout(successTimerRef.current);\n        }\n        successTimerRef.current = window.setTimeout(() => {\n          // UI-03: Check mounted before state update to prevent memory leak warnings\n          if (isMountedRef.current) {\n            setSuccess(false);\n          }\n          successTimerRef.current = null;\n        }, 3000);\n      } catch {\n        // H-05: Error handling is delegated to parent component.\n        // Parent's onSubmit throws -> parent catches -> sets error prop -> ErrorMessage displays it.\n        // This pattern allows the parent to control error display and retry logic.\n      }\n    },\n    [email, role, defaultRole, onSubmit]\n  );\n\n  return (\n    <form className={`cedros-invite-form ${className}`} onSubmit={handleSubmit}>\n      {(error || formError) && <ErrorMessage error={formError ?? error ?? null} />}\n\n      {success && (\n        <div className=\"cedros-invite-success\" role=\"status\">\n          <CheckIcon />\n          <span>Invitation sent successfully!</span>\n        </div>\n      )}\n\n      <div className=\"cedros-invite-form-row\">\n        <div className=\"cedros-form-group cedros-invite-email-group\">\n          <label htmlFor=\"invite-email\" className=\"cedros-form-label\">\n            Email Address\n          </label>\n          <input\n            id=\"invite-email\"\n            type=\"email\"\n            className=\"cedros-form-input\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            placeholder=\"colleague@example.com\"\n            disabled={isLoading}\n            autoComplete=\"email\"\n          />\n        </div>\n\n        <div className=\"cedros-form-group cedros-invite-role-group\">\n          <label htmlFor=\"invite-role\" className=\"cedros-form-label\">\n            Role\n          </label>\n          <select\n            id=\"invite-role\"\n            className=\"cedros-form-select\"\n            value={role}\n            onChange={(e) => setRole(e.target.value as InviteRole)}\n            disabled={isLoading}\n          >\n            {availableRoles.map((r) => (\n              <option key={r} value={r}>\n                {r.charAt(0).toUpperCase() + r.slice(1)}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        <button\n          type=\"submit\"\n          className=\"cedros-button cedros-button-primary cedros-invite-submit\"\n          disabled={isLoading || !email.trim()}\n        >\n          {isLoading ? <LoadingSpinner size=\"sm\" /> : 'Send Invite'}\n        </button>\n      </div>\n\n      <p className=\"cedros-form-hint\">\n        The invited user will receive an email with a link to join your organization.\n      </p>\n    </form>\n  );\n}\n\nfunction CheckIcon() {\n  return (\n    <svg\n      className=\"cedros-invite-check\"\n      width=\"16\"\n      height=\"16\"\n      viewBox=\"0 0 16 16\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M3 8L6 11L13 5\"\n        stroke=\"currentColor\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </svg>\n  );\n}\n","import { useState, useCallback, useEffect, useRef } from 'react';\nimport type { Invite, DisplayError } from '../../types';\nimport { LoadingSpinner } from '../shared/LoadingSpinner';\nimport { ErrorMessage } from '../shared/ErrorMessage';\n\nexport interface InviteListProps {\n  /** List of pending invites */\n  invites: Invite[];\n  /** Loading state */\n  isLoading?: boolean;\n  /** Error message */\n  error?: DisplayError;\n  /** Whether the current user can manage invites */\n  canManage?: boolean;\n  /** Callback when invite is cancelled */\n  onCancel?: (inviteId: string) => Promise<void>;\n  /** Callback when invite is resent */\n  onResend?: (inviteId: string) => Promise<void>;\n  /** Additional CSS class */\n  className?: string;\n}\n\n/**\n * Display and manage pending organization invites.\n *\n * @example\n * ```tsx\n * function PendingInvites() {\n *   const { activeOrg, hasPermission } = useOrgs();\n *   const { invites, isLoading, error, cancelInvite, resendInvite } = useInvites(activeOrg?.id);\n *\n *   return (\n *     <InviteList\n *       invites={invites}\n *       isLoading={isLoading}\n *       error={error?.message}\n *       canManage={hasPermission('invite:cancel')}\n *       onCancel={cancelInvite}\n *       onResend={resendInvite}\n *     />\n *   );\n * }\n * ```\n */\nexport function InviteList({\n  invites,\n  isLoading = false,\n  error,\n  canManage = false,\n  onCancel,\n  onResend,\n  className = '',\n}: InviteListProps) {\n  if (isLoading && invites.length === 0) {\n    return (\n      <div className={`cedros-invite-list cedros-invite-list-loading ${className}`}>\n        <LoadingSpinner />\n        <span>Loading invites...</span>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className={`cedros-invite-list ${className}`}>\n        <ErrorMessage error={error} />\n      </div>\n    );\n  }\n\n  if (invites.length === 0) {\n    return (\n      <div className={`cedros-invite-list cedros-invite-list-empty ${className}`}>\n        <p>No pending invites.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`cedros-invite-list ${className}`}>\n      <ul className=\"cedros-invite-items\">\n        {invites.map((invite) => (\n          <InviteItem\n            key={invite.id}\n            invite={invite}\n            canManage={canManage}\n            onCancel={onCancel}\n            onResend={onResend}\n          />\n        ))}\n      </ul>\n    </div>\n  );\n}\n\n// Invite item component\ninterface InviteItemProps {\n  invite: Invite;\n  canManage: boolean;\n  onCancel?: (inviteId: string) => Promise<void>;\n  onResend?: (inviteId: string) => Promise<void>;\n}\n\nfunction InviteItem({ invite, canManage, onCancel, onResend }: InviteItemProps) {\n  const [isUpdating, setIsUpdating] = useState(false);\n  const [resendSuccess, setResendSuccess] = useState(false);\n  const resendTimerRef = useRef<number | null>(null);\n\n  const isExpired = new Date(invite.expiresAt) < new Date();\n\n  const handleCancel = useCallback(async () => {\n    if (!onCancel) return;\n\n    const confirmed = window.confirm(\n      `Are you sure you want to cancel the invite for ${invite.email}?`\n    );\n    if (!confirmed) return;\n\n    setIsUpdating(true);\n    try {\n      await onCancel(invite.id);\n    } finally {\n      setIsUpdating(false);\n    }\n  }, [invite.id, invite.email, onCancel]);\n\n  const handleResend = useCallback(async () => {\n    if (!onResend) return;\n\n    setIsUpdating(true);\n    setResendSuccess(false);\n    try {\n      await onResend(invite.id);\n      setResendSuccess(true);\n      if (resendTimerRef.current !== null) {\n        window.clearTimeout(resendTimerRef.current);\n      }\n      resendTimerRef.current = window.setTimeout(() => {\n        setResendSuccess(false);\n        resendTimerRef.current = null;\n      }, 3000);\n    } finally {\n      setIsUpdating(false);\n    }\n  }, [invite.id, onResend]);\n\n  useEffect(() => {\n    return () => {\n      if (resendTimerRef.current !== null) {\n        window.clearTimeout(resendTimerRef.current);\n        resendTimerRef.current = null;\n      }\n    };\n  }, []);\n\n  return (\n    <li className={`cedros-invite-item ${isExpired ? 'cedros-invite-item-expired' : ''}`}>\n      <div className=\"cedros-invite-item-info\">\n        <div className=\"cedros-invite-item-main\">\n          <span className=\"cedros-invite-item-email\">{invite.email}</span>\n          <span className={`cedros-role-badge cedros-role-badge-${invite.role}`}>\n            {invite.role.charAt(0).toUpperCase() + invite.role.slice(1)}\n          </span>\n          {isExpired && <span className=\"cedros-invite-expired-badge\">Expired</span>}\n        </div>\n        <div className=\"cedros-invite-item-meta\">\n          <span className=\"cedros-invite-item-date\">\n            {/* TYPE-05: invitedByName removed - backend doesn't populate it */}\n            Invited {formatDate(invite.createdAt)}\n          </span>\n          {!isExpired && (\n            <span className=\"cedros-invite-item-expires\">\n              Expires {formatRelativeTime(invite.expiresAt)}\n            </span>\n          )}\n        </div>\n      </div>\n\n      {canManage && (\n        <div className=\"cedros-invite-item-actions\">\n          {resendSuccess && <span className=\"cedros-invite-resend-success\">Sent!</span>}\n          {onResend && !isExpired && (\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-outline cedros-button-sm\"\n              onClick={handleResend}\n              disabled={isUpdating}\n              aria-label={`Resend invite to ${invite.email}`}\n            >\n              {isUpdating ? <LoadingSpinner size=\"sm\" /> : 'Resend'}\n            </button>\n          )}\n          {onCancel && (\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-danger cedros-button-sm\"\n              onClick={handleCancel}\n              disabled={isUpdating}\n              aria-label={`Cancel invite for ${invite.email}`}\n            >\n              Cancel\n            </button>\n          )}\n        </div>\n      )}\n    </li>\n  );\n}\n\n// Helper functions\nfunction formatDate(dateString: string): string {\n  const date = new Date(dateString);\n  return date.toLocaleDateString(undefined, {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n  });\n}\n\nfunction formatRelativeTime(dateString: string): string {\n  const date = new Date(dateString);\n  const now = new Date();\n  const diffMs = date.getTime() - now.getTime();\n  const diffDays = Math.ceil(diffMs / (1000 * 60 * 60 * 24));\n\n  if (diffDays < 0) {\n    return 'expired';\n  } else if (diffDays === 0) {\n    return 'today';\n  } else if (diffDays === 1) {\n    return 'tomorrow';\n  } else if (diffDays < 7) {\n    return `in ${diffDays} days`;\n  } else {\n    return formatDate(dateString);\n  }\n}\n","import { useState, useCallback, useEffect, useRef, useMemo } from 'react';\nimport type { Session, DisplayError } from '../../types';\nimport { LoadingSpinner } from '../shared/LoadingSpinner';\nimport { ErrorMessage } from '../shared/ErrorMessage';\n\nexport interface SessionListProps {\n  /** List of active sessions */\n  sessions: Session[];\n  /** Loading state */\n  isLoading?: boolean;\n  /** Error message */\n  error?: DisplayError;\n  /** Callback to revoke all other sessions */\n  onRevokeAll?: () => Promise<void>;\n  /** Additional CSS class */\n  className?: string;\n}\n\n/**\n * Display active sessions and allow revoking all other sessions.\n *\n * @example\n * ```tsx\n * function SecuritySettings() {\n *   const { sessions, isLoading, error, revokeAllSessions } = useSessions();\n *\n *   return (\n *     <SessionList\n *       sessions={sessions}\n *       isLoading={isLoading}\n *       error={error?.message}\n *       onRevokeAll={revokeAllSessions}\n *     />\n *   );\n * }\n * ```\n */\nexport function SessionList({\n  sessions,\n  isLoading = false,\n  error,\n  onRevokeAll,\n  className = '',\n}: SessionListProps) {\n  const [isRevoking, setIsRevoking] = useState(false);\n  const [revokeSuccess, setRevokeSuccess] = useState(false);\n  const revokeTimerRef = useRef<number | null>(null);\n\n  // PERF-05: Memoize filtered count to avoid O(n) filter on every render.\n  // This count is used in the button text and handleRevokeAll callback.\n  const otherSessionCount = useMemo(() => sessions.filter((s) => !s.isCurrent).length, [sessions]);\n\n  const handleRevokeAll = useCallback(async () => {\n    if (!onRevokeAll) return;\n\n    // M-09: Recalculate count inside handler to avoid stale closure.\n    // If sessions change between callback creation and confirm dialog,\n    // we want the confirm message to show the current count.\n    const currentOtherCount = sessions.filter((s) => !s.isCurrent).length;\n    if (currentOtherCount === 0) return;\n\n    const confirmed = window.confirm(\n      `Are you sure you want to sign out of ${currentOtherCount} other device(s)? This will log you out everywhere except this browser.`\n    );\n    if (!confirmed) return;\n\n    setIsRevoking(true);\n    setRevokeSuccess(false);\n\n    try {\n      await onRevokeAll();\n      setRevokeSuccess(true);\n      if (revokeTimerRef.current !== null) {\n        window.clearTimeout(revokeTimerRef.current);\n      }\n      revokeTimerRef.current = window.setTimeout(() => {\n        setRevokeSuccess(false);\n        revokeTimerRef.current = null;\n      }, 3000);\n    } finally {\n      setIsRevoking(false);\n    }\n  }, [onRevokeAll, sessions]);\n\n  useEffect(() => {\n    return () => {\n      if (revokeTimerRef.current !== null) {\n        window.clearTimeout(revokeTimerRef.current);\n        revokeTimerRef.current = null;\n      }\n    };\n  }, []);\n\n  if (isLoading && sessions.length === 0) {\n    return (\n      <div className={`cedros-session-list cedros-session-list-loading ${className}`}>\n        <LoadingSpinner />\n        <span>Loading sessions...</span>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className={`cedros-session-list ${className}`}>\n        <ErrorMessage error={error} />\n      </div>\n    );\n  }\n\n  if (sessions.length === 0) {\n    return (\n      <div className={`cedros-session-list cedros-session-list-empty ${className}`}>\n        <p>No active sessions found.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`cedros-session-list ${className}`}>\n      {revokeSuccess && (\n        <div className=\"cedros-session-success\" role=\"status\">\n          <CheckIcon />\n          <span>All other sessions have been revoked.</span>\n        </div>\n      )}\n\n      <ul className=\"cedros-session-items\">\n        {sessions.map((session) => (\n          <SessionItem key={session.id} session={session} />\n        ))}\n      </ul>\n\n      {onRevokeAll && otherSessionCount > 0 && (\n        <div className=\"cedros-session-actions\">\n          <button\n            type=\"button\"\n            className=\"cedros-button cedros-button-danger\"\n            onClick={handleRevokeAll}\n            disabled={isRevoking}\n          >\n            {isRevoking ? (\n              <>\n                <LoadingSpinner size=\"sm\" />\n                <span>Signing out...</span>\n              </>\n            ) : (\n              `Sign out of ${otherSessionCount} other device${otherSessionCount > 1 ? 's' : ''}`\n            )}\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n\n// Session item component\nfunction SessionItem({ session }: { session: Session }) {\n  const browserInfo = parseUserAgent(session.userAgent);\n  const isExpiringSoon = isSessionExpiringSoon(session.expiresAt);\n\n  return (\n    <li className={`cedros-session-item ${session.isCurrent ? 'cedros-session-item-current' : ''}`}>\n      <div className=\"cedros-session-item-icon\">\n        <DeviceIcon userAgent={session.userAgent} />\n      </div>\n      <div className=\"cedros-session-item-info\">\n        <div className=\"cedros-session-item-main\">\n          <span className=\"cedros-session-item-device\">\n            {browserInfo.browser} on {browserInfo.os}\n          </span>\n          {session.isCurrent && (\n            <span className=\"cedros-session-current-badge\">Current session</span>\n          )}\n        </div>\n        <div className=\"cedros-session-item-meta\">\n          {session.ipAddress && (\n            <span className=\"cedros-session-item-ip\">IP: {session.ipAddress}</span>\n          )}\n          <span className=\"cedros-session-item-created\">\n            Started {formatRelativeTime(session.createdAt)}\n          </span>\n          {isExpiringSoon && <span className=\"cedros-session-expiring\">Expires soon</span>}\n        </div>\n      </div>\n    </li>\n  );\n}\n\n// Helper functions\ninterface BrowserInfo {\n  browser: string;\n  os: string;\n}\n\nfunction parseUserAgent(userAgent?: string): BrowserInfo {\n  if (!userAgent) {\n    return { browser: 'Unknown browser', os: 'Unknown device' };\n  }\n\n  // Simple browser detection\n  let browser = 'Unknown browser';\n  if (userAgent.includes('Chrome') && !userAgent.includes('Edg')) {\n    browser = 'Chrome';\n  } else if (userAgent.includes('Safari') && !userAgent.includes('Chrome')) {\n    browser = 'Safari';\n  } else if (userAgent.includes('Firefox')) {\n    browser = 'Firefox';\n  } else if (userAgent.includes('Edg')) {\n    browser = 'Edge';\n  }\n\n  // Simple OS detection\n  let os = 'Unknown device';\n  if (userAgent.includes('Windows')) {\n    os = 'Windows';\n  } else if (userAgent.includes('Mac')) {\n    os = 'macOS';\n  } else if (userAgent.includes('Linux')) {\n    os = 'Linux';\n  } else if (userAgent.includes('iPhone') || userAgent.includes('iPad')) {\n    os = 'iOS';\n  } else if (userAgent.includes('Android')) {\n    os = 'Android';\n  }\n\n  return { browser, os };\n}\n\nfunction formatRelativeTime(dateString: string): string {\n  const date = new Date(dateString);\n  const now = new Date();\n  const diffMs = now.getTime() - date.getTime();\n  const diffMins = Math.floor(diffMs / (1000 * 60));\n  const diffHours = Math.floor(diffMs / (1000 * 60 * 60));\n  const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\n\n  if (diffMins < 1) {\n    return 'just now';\n  } else if (diffMins < 60) {\n    return `${diffMins} minute${diffMins > 1 ? 's' : ''} ago`;\n  } else if (diffHours < 24) {\n    return `${diffHours} hour${diffHours > 1 ? 's' : ''} ago`;\n  } else if (diffDays < 7) {\n    return `${diffDays} day${diffDays > 1 ? 's' : ''} ago`;\n  } else {\n    return date.toLocaleDateString(undefined, {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n    });\n  }\n}\n\nfunction isSessionExpiringSoon(expiresAt: string): boolean {\n  const expires = new Date(expiresAt);\n  const now = new Date();\n  const hourInMs = 60 * 60 * 1000;\n  return expires.getTime() - now.getTime() < hourInMs;\n}\n\n// Icon components\nfunction DeviceIcon({ userAgent }: { userAgent?: string }) {\n  const isMobile =\n    userAgent?.includes('iPhone') || userAgent?.includes('iPad') || userAgent?.includes('Android');\n\n  if (isMobile) {\n    return (\n      <svg\n        className=\"cedros-session-device-icon\"\n        width=\"24\"\n        height=\"24\"\n        viewBox=\"0 0 24 24\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <rect x=\"5\" y=\"2\" width=\"14\" height=\"20\" rx=\"2\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n        <circle cx=\"12\" cy=\"18\" r=\"1\" fill=\"currentColor\" />\n      </svg>\n    );\n  }\n\n  return (\n    <svg\n      className=\"cedros-session-device-icon\"\n      width=\"24\"\n      height=\"24\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <rect x=\"2\" y=\"4\" width=\"20\" height=\"14\" rx=\"2\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n      <path d=\"M8 21H16\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" />\n      <path d=\"M12 18V21\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n    </svg>\n  );\n}\n\nfunction CheckIcon() {\n  return (\n    <svg\n      className=\"cedros-session-check\"\n      width=\"16\"\n      height=\"16\"\n      viewBox=\"0 0 16 16\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M3 8L6 11L13 5\"\n        stroke=\"currentColor\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </svg>\n  );\n}\n","/**\n * Component to display BIP-39 recovery phrase\n *\n * Shows 12 words in a grid format with copy functionality.\n * Includes security warnings about storing the phrase safely.\n */\n\nimport { useState, useCallback, useRef, useEffect } from 'react';\nimport { formatMnemonicForDisplay } from '../../crypto';\n\nexport interface RecoveryPhraseDisplayProps {\n  /** Array of 12 mnemonic words */\n  words: string[];\n  /** Callback when user confirms they've saved the phrase */\n  onConfirm: () => void;\n  /** Optional class name */\n  className?: string;\n}\n\n/**\n * Display recovery phrase with security warnings\n */\nexport function RecoveryPhraseDisplay({\n  words,\n  onConfirm,\n  className = '',\n}: RecoveryPhraseDisplayProps) {\n  const [copied, setCopied] = useState(false);\n  const [confirmed, setConfirmed] = useState(false);\n  const copyTimerRef = useRef<number | null>(null);\n\n  const wordGroups = formatMnemonicForDisplay(words);\n\n  const handleCopy = useCallback(async () => {\n    try {\n      await navigator.clipboard.writeText(words.join(' '));\n      setCopied(true);\n      if (copyTimerRef.current !== null) {\n        window.clearTimeout(copyTimerRef.current);\n      }\n      copyTimerRef.current = window.setTimeout(() => setCopied(false), 2000);\n    } catch {\n      // Clipboard API not available\n    }\n  }, [words]);\n\n  useEffect(() => {\n    return () => {\n      if (copyTimerRef.current !== null) {\n        window.clearTimeout(copyTimerRef.current);\n        copyTimerRef.current = null;\n      }\n    };\n  }, []);\n\n  // COMP-02: The `confirmed` check is defense-in-depth - button is disabled when\n  // !confirmed, but check guards against CSS/JS injection enabling the button\n  const handleConfirm = useCallback(() => {\n    if (confirmed) {\n      onConfirm();\n    }\n  }, [confirmed, onConfirm]);\n\n  return (\n    <div className={`cedros-recovery-phrase-display ${className}`}>\n      <div className=\"cedros-recovery-header\">\n        <h3 className=\"cedros-recovery-title\">Recovery Phrase</h3>\n        <p className=\"cedros-recovery-warning\">\n          Write down these 12 words in order and store them securely. This is the only way to\n          recover your wallet if you lose access.\n        </p>\n      </div>\n\n      <div className=\"cedros-recovery-grid\">\n        {wordGroups.map((group, groupIndex) => (\n          <div key={groupIndex} className=\"cedros-word-group\">\n            {group.map((word, wordIndex) => {\n              const number = groupIndex * 4 + wordIndex + 1;\n              return (\n                <div key={number} className=\"cedros-word-item\">\n                  <span className=\"cedros-word-number\">{number}.</span>\n                  <span className=\"cedros-word-text\">{word}</span>\n                </div>\n              );\n            })}\n          </div>\n        ))}\n      </div>\n\n      <button\n        type=\"button\"\n        className=\"cedros-button cedros-button-secondary cedros-copy-btn\"\n        onClick={handleCopy}\n      >\n        {copied ? 'Copied!' : 'Copy to Clipboard'}\n      </button>\n\n      <div className=\"cedros-recovery-security\">\n        <div className=\"cedros-warning-box\">\n          <svg\n            className=\"cedros-warning-icon\"\n            width=\"20\"\n            height=\"20\"\n            viewBox=\"0 0 20 20\"\n            fill=\"none\"\n            aria-hidden=\"true\"\n          >\n            <path\n              d=\"M10 6v4m0 4h.01M19 10a9 9 0 11-18 0 9 9 0 0118 0z\"\n              stroke=\"currentColor\"\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n            />\n          </svg>\n          <div className=\"cedros-warning-content\">\n            <strong>Security Warning</strong>\n            <ul>\n              <li>Never share this phrase with anyone</li>\n              <li>Store it offline in a secure location</li>\n              <li>Anyone with this phrase can access your wallet</li>\n              <li>Cedros cannot recover this phrase for you</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"cedros-recovery-confirm\">\n        <label className=\"cedros-checkbox-label\">\n          <input\n            type=\"checkbox\"\n            checked={confirmed}\n            onChange={(e) => setConfirmed(e.target.checked)}\n            className=\"cedros-checkbox\"\n          />\n          <span>I have written down and securely stored my recovery phrase</span>\n        </label>\n\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-primary\"\n          onClick={handleConfirm}\n          disabled={!confirmed}\n        >\n          Continue\n        </button>\n      </div>\n    </div>\n  );\n}\n","/**\n * Component for entering BIP-39 recovery phrase\n *\n * Provides input fields for 12 words with validation and autocomplete.\n */\n\nimport { useState, useCallback, useId, useRef, useEffect } from 'react';\nimport {\n  isValidWord,\n  getWordSuggestions,\n  parseMnemonicInput,\n  isValidMnemonic,\n  MNEMONIC_WORD_COUNT,\n} from '../../crypto';\n\nexport interface RecoveryPhraseInputProps {\n  /** Callback when valid phrase is entered */\n  onSubmit: (words: string[]) => void;\n  /** Callback to cancel */\n  onCancel?: () => void;\n  /** Whether submission is in progress */\n  isSubmitting?: boolean;\n  /** Error message to display */\n  error?: string;\n  /** Optional class name */\n  className?: string;\n}\n\n/**\n * Input form for recovery phrase\n */\nexport function RecoveryPhraseInput({\n  onSubmit,\n  onCancel,\n  isSubmitting = false,\n  error,\n  className = '',\n}: RecoveryPhraseInputProps) {\n  const [words, setWords] = useState<string[]>(Array(MNEMONIC_WORD_COUNT).fill(''));\n  const [activeIndex, setActiveIndex] = useState<number | null>(null);\n  const [suggestions, setSuggestions] = useState<string[]>([]);\n  const [validationError, setValidationError] = useState<string | null>(null);\n  const inputId = useId();\n  const suggestionsTimerRef = useRef<number | null>(null);\n\n  const handleWordChange = useCallback(\n    (index: number, value: string) => {\n      const newWords = [...words];\n      newWords[index] = value.toLowerCase().trim();\n      setWords(newWords);\n\n      // Update suggestions\n      if (value.length > 0) {\n        const newSuggestions = getWordSuggestions(value, 5);\n        setSuggestions(newSuggestions);\n      } else {\n        setSuggestions([]);\n      }\n\n      // Clear validation error while typing\n      setValidationError(null);\n    },\n    [words]\n  );\n\n  const handleWordFocus = useCallback((index: number) => {\n    setActiveIndex(index);\n    setSuggestions([]);\n  }, []);\n\n  const handleWordBlur = useCallback(\n    (index: number) => {\n      // Validate word on blur\n      const word = words[index];\n      if (word && !isValidWord(word)) {\n        setValidationError(`Word ${index + 1} is not in the wordlist`);\n      }\n\n      // Clear suggestions after a delay (allows clicking suggestions)\n      if (suggestionsTimerRef.current !== null) {\n        window.clearTimeout(suggestionsTimerRef.current);\n      }\n      suggestionsTimerRef.current = window.setTimeout(() => {\n        if (activeIndex === index) {\n          setSuggestions([]);\n        }\n      }, 200);\n    },\n    [words, activeIndex]\n  );\n\n  useEffect(() => {\n    return () => {\n      if (suggestionsTimerRef.current !== null) {\n        window.clearTimeout(suggestionsTimerRef.current);\n        suggestionsTimerRef.current = null;\n      }\n    };\n  }, []);\n\n  const handleSuggestionClick = useCallback(\n    (suggestion: string) => {\n      if (activeIndex !== null) {\n        const newWords = [...words];\n        newWords[activeIndex] = suggestion;\n        setWords(newWords);\n        setSuggestions([]);\n\n        // Move to next input\n        const nextInput = document.querySelector<HTMLInputElement>(\n          `[data-word-index=\"${activeIndex + 1}\"]`\n        );\n        nextInput?.focus();\n      }\n    },\n    [activeIndex, words]\n  );\n\n  const handlePaste = useCallback((e: React.ClipboardEvent) => {\n    const pastedText = e.clipboardData.getData('text');\n    const parsedWords = parseMnemonicInput(pastedText);\n\n    if (parsedWords.length === MNEMONIC_WORD_COUNT) {\n      e.preventDefault();\n      setWords(parsedWords);\n      setValidationError(null);\n    }\n  }, []);\n\n  const handleSubmit = useCallback(\n    (e: React.FormEvent) => {\n      e.preventDefault();\n\n      // Validate all words are filled\n      const emptyCount = words.filter((w) => !w).length;\n      if (emptyCount > 0) {\n        setValidationError(`Please enter all ${MNEMONIC_WORD_COUNT} words`);\n        return;\n      }\n\n      // Validate each word is in wordlist\n      const invalidWords = words\n        .map((w, i) => ({ word: w, index: i + 1 }))\n        .filter(({ word }) => !isValidWord(word));\n\n      if (invalidWords.length > 0) {\n        setValidationError(`Invalid words: ${invalidWords.map((w) => `#${w.index}`).join(', ')}`);\n        return;\n      }\n\n      // Validate checksum\n      if (!isValidMnemonic(words)) {\n        setValidationError('Invalid recovery phrase - please check your words');\n        return;\n      }\n\n      onSubmit(words);\n    },\n    [words, onSubmit]\n  );\n\n  const displayError = error || validationError;\n\n  return (\n    <form\n      className={`cedros-recovery-phrase-input ${className}`}\n      onSubmit={handleSubmit}\n      onPaste={handlePaste}\n    >\n      <div className=\"cedros-recovery-input-header\">\n        <h3 className=\"cedros-recovery-input-title\">Enter Recovery Phrase</h3>\n        <p className=\"cedros-recovery-input-description\">\n          Enter your 12-word recovery phrase. You can paste the entire phrase at once.\n        </p>\n      </div>\n\n      <div className=\"cedros-word-inputs\">\n        {Array.from({ length: MNEMONIC_WORD_COUNT }, (_, index) => (\n          <div key={index} className=\"cedros-word-input-wrapper\">\n            <label className=\"cedros-word-label\">{index + 1}.</label>\n            <input\n              type=\"text\"\n              className={`cedros-word-input ${\n                words[index] && !isValidWord(words[index])\n                  ? 'cedros-word-invalid'\n                  : words[index] && isValidWord(words[index])\n                    ? 'cedros-word-valid'\n                    : ''\n              }`}\n              value={words[index]}\n              onChange={(e) => handleWordChange(index, e.target.value)}\n              onFocus={() => handleWordFocus(index)}\n              onBlur={() => handleWordBlur(index)}\n              data-word-index={index}\n              autoComplete=\"off\"\n              autoCapitalize=\"none\"\n              spellCheck={false}\n              disabled={isSubmitting}\n              aria-label={`Word ${index + 1}`}\n            />\n          </div>\n        ))}\n      </div>\n\n      {activeIndex !== null && suggestions.length > 0 && (\n        <div className=\"cedros-suggestions\" role=\"listbox\" id={`${inputId}-suggestions`}>\n          {suggestions.map((suggestion) => (\n            <button\n              key={suggestion}\n              type=\"button\"\n              className=\"cedros-suggestion\"\n              onClick={() => handleSuggestionClick(suggestion)}\n              role=\"option\"\n            >\n              {suggestion}\n            </button>\n          ))}\n        </div>\n      )}\n\n      {displayError && (\n        <p className=\"cedros-input-error\" role=\"alert\">\n          {displayError}\n        </p>\n      )}\n\n      <div className=\"cedros-recovery-input-actions\">\n        {onCancel && (\n          <button\n            type=\"button\"\n            className=\"cedros-button cedros-button-secondary\"\n            onClick={onCancel}\n            disabled={isSubmitting}\n          >\n            Cancel\n          </button>\n        )}\n        <button\n          type=\"submit\"\n          className=\"cedros-button cedros-button-primary\"\n          disabled={isSubmitting}\n        >\n          {isSubmitting ? 'Recovering...' : 'Recover Wallet'}\n        </button>\n      </div>\n    </form>\n  );\n}\n","/**\n * Component to display warnings about missing crypto capabilities\n */\n\nimport { getMissingCapabilitiesMessage, getBrowserSupportInfo } from '../../crypto';\nimport type { CryptoCapabilities } from '../../crypto';\n\nexport interface CapabilityWarningProps {\n  /** Capability check results */\n  capabilities: CryptoCapabilities;\n  /** Optional class name */\n  className?: string;\n}\n\n/**\n * Warning display for missing capabilities\n */\nexport function CapabilityWarning({ capabilities, className = '' }: CapabilityWarningProps) {\n  if (capabilities.allSupported) {\n    return null;\n  }\n\n  const message = getMissingCapabilitiesMessage(capabilities);\n  const browserInfo = getBrowserSupportInfo();\n\n  return (\n    <div className={`cedros-capability-warning ${className}`} role=\"alert\">\n      <div className=\"cedros-warning-header\">\n        <svg\n          className=\"cedros-warning-icon\"\n          width=\"24\"\n          height=\"24\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          aria-hidden=\"true\"\n        >\n          <path\n            d=\"M12 9v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n            stroke=\"currentColor\"\n            strokeWidth=\"2\"\n            strokeLinecap=\"round\"\n          />\n        </svg>\n        <h3 className=\"cedros-warning-title\">Wallet Feature Unavailable</h3>\n      </div>\n\n      <p className=\"cedros-warning-message\">{message}</p>\n\n      <div className=\"cedros-capability-details\">\n        <h4>Browser Compatibility</h4>\n        <p>\n          Detected: {browserInfo.browser} {browserInfo.version}\n          {browserInfo.likelySupported ? ' (likely supported)' : ' (may not be supported)'}\n        </p>\n\n        <h4>Required Features</h4>\n        <ul className=\"cedros-capability-list\">\n          <li className={capabilities.webCrypto ? 'cedros-cap-ok' : 'cedros-cap-missing'}>\n            Web Crypto API: {capabilities.webCrypto ? 'Available' : 'Missing'}\n          </li>\n          <li className={capabilities.aesGcm ? 'cedros-cap-ok' : 'cedros-cap-missing'}>\n            AES-GCM Encryption: {capabilities.aesGcm ? 'Available' : 'Missing'}\n          </li>\n          <li className={capabilities.hkdf ? 'cedros-cap-ok' : 'cedros-cap-missing'}>\n            HKDF Key Derivation: {capabilities.hkdf ? 'Available' : 'Missing'}\n          </li>\n          <li className={capabilities.webAuthn ? 'cedros-cap-ok' : 'cedros-cap-missing'}>\n            WebAuthn/Passkeys: {capabilities.webAuthn ? 'Available' : 'Missing'}\n          </li>\n          <li className={capabilities.webAuthnPrf ? 'cedros-cap-ok' : 'cedros-cap-missing'}>\n            WebAuthn PRF Extension: {capabilities.webAuthnPrf ? 'Available' : 'Missing'}\n          </li>\n          <li className={capabilities.argon2 ? 'cedros-cap-ok' : 'cedros-cap-missing'}>\n            Argon2 Password Hashing: {capabilities.argon2 ? 'Available' : 'Missing'}\n          </li>\n        </ul>\n      </div>\n\n      <div className=\"cedros-capability-help\">\n        <h4>Recommended Browsers</h4>\n        <ul>\n          <li>Chrome 116+ on Windows, macOS, or Android</li>\n          <li>Safari 17+ on macOS or iOS</li>\n          <li>Edge 116+ on Windows</li>\n        </ul>\n        <p className=\"cedros-capability-note\">\n          A platform authenticator (Touch ID, Face ID, or Windows Hello) is required.\n        </p>\n      </div>\n    </div>\n  );\n}\n","/**\n * Hook to fetch wallet discovery config from server\n *\n * Fetches wallet configuration from the discovery endpoint to determine\n * recovery mode and other wallet settings.\n */\n\nimport { useState, useEffect, useCallback, useMemo } from 'react';\nimport { useCedrosLoginOptional } from '../context/useCedrosLogin';\nimport { ApiClient } from '../utils/apiClient';\nimport type { WalletDiscoveryConfig, WalletRecoveryMode } from '../types/wallet';\n\n/** Discovery endpoint response */\ninterface DiscoveryResponse {\n  wallet?: {\n    enabled: boolean;\n    recoveryMode: string;\n    unlockTtlSeconds: number;\n  };\n}\n\nconst VALID_RECOVERY_MODES: WalletRecoveryMode[] = ['share_c_only', 'full_seed', 'none'];\n\nfunction normalizeRecoveryMode(mode: string | undefined): WalletRecoveryMode {\n  if (!mode) return 'share_c_only';\n  return VALID_RECOVERY_MODES.includes(mode as WalletRecoveryMode)\n    ? (mode as WalletRecoveryMode)\n    : 'share_c_only';\n}\n\n/** Return type for useWalletDiscovery hook */\nexport interface UseWalletDiscoveryReturn {\n  /** Whether wallet feature is enabled on server */\n  walletEnabled: boolean;\n  /** Recovery mode: share_c_only or full_seed */\n  recoveryMode: WalletRecoveryMode;\n  /** Session unlock TTL in seconds */\n  unlockTtlSeconds: number;\n  /** Whether config is still loading */\n  isLoading: boolean;\n  /** Error message if fetch failed */\n  error: string | null;\n  /** Refetch the config */\n  refetch: () => Promise<void>;\n}\n\n/** Default return value when outside provider context */\nconst DEFAULT_RETURN: UseWalletDiscoveryReturn = {\n  walletEnabled: false,\n  recoveryMode: 'share_c_only',\n  unlockTtlSeconds: 900,\n  isLoading: false,\n  error: null,\n  refetch: async () => {},\n};\n\n/**\n * Hook to fetch wallet discovery configuration from server\n *\n * Automatically fetches on mount and caches the result.\n * Default values are used if fetch fails or wallet is not enabled.\n * Returns defaults when used outside CedrosLoginProvider.\n */\nexport function useWalletDiscovery(): UseWalletDiscoveryReturn {\n  const context = useCedrosLoginOptional();\n\n  const [walletConfig, setWalletConfig] = useState<WalletDiscoveryConfig | null>(null);\n  const [isLoading, setIsLoading] = useState(!!context);\n  const [error, setError] = useState<string | null>(null);\n\n  const apiClient = useMemo(() => {\n    if (!context) return null;\n    return new ApiClient({\n      baseUrl: context.config.serverUrl,\n      timeoutMs: context.config.requestTimeout,\n      retryAttempts: context.config.retryAttempts,\n    });\n  }, [context]);\n\n  const fetchConfig = useCallback(async () => {\n    if (!apiClient) return;\n\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const response = await apiClient.get<DiscoveryResponse>('/discovery');\n\n      if (response.wallet) {\n        setWalletConfig({\n          enabled: response.wallet.enabled,\n          recoveryMode: normalizeRecoveryMode(response.wallet.recoveryMode),\n          unlockTtlSeconds: response.wallet.unlockTtlSeconds,\n        });\n      } else {\n        // Wallet not configured on server\n        setWalletConfig({\n          enabled: false,\n          recoveryMode: 'share_c_only',\n          unlockTtlSeconds: 900,\n        });\n      }\n    } catch (err) {\n      const message = err instanceof Error ? err.message : 'Failed to fetch wallet config';\n      setError(message);\n      // Use defaults on error\n      setWalletConfig({\n        enabled: false,\n        recoveryMode: 'share_c_only',\n        unlockTtlSeconds: 900,\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  }, [apiClient]);\n\n  useEffect(() => {\n    if (apiClient) {\n      fetchConfig();\n    }\n  }, [apiClient, fetchConfig]);\n\n  // Return defaults when outside provider\n  if (!context) {\n    return DEFAULT_RETURN;\n  }\n\n  return {\n    walletEnabled: walletConfig?.enabled ?? false,\n    recoveryMode: walletConfig?.recoveryMode ?? 'share_c_only',\n    unlockTtlSeconds: walletConfig?.unlockTtlSeconds ?? 900,\n    isLoading,\n    error,\n    refetch: fetchConfig,\n  };\n}\n","/**\n * Hook for wallet enrollment flow (server-side signing)\n *\n * Orchestrates the complete enrollment process:\n * 1. Generate 32-byte seed\n * 2. Split into 3 Shamir shares\n * 3. Encrypt Share A with password/PIN or passkey PRF\n * 4. Derive Solana public key from seed\n * 5. Upload encrypted Share A + plaintext Share B to server\n * 6. Display recovery phrase (Share C or full seed based on config)\n *\n * Recovery modes:\n * - share_c_only: User gets Share C. Recovery within app only (not portable).\n * - full_seed: User gets full seed. Can use wallet elsewhere (portable).\n *\n * Share B is sent as plaintext (SSS math protects it - 1 share reveals nothing).\n * Passkey PRF is used only for passkey auth method. Server combines shares for signing.\n *\n * H-03: Security Note - Recovery Phrase Visibility\n * The recovery phrase is stored in React state during the 'showing_recovery' step.\n * This is intentional - the user MUST see the phrase to back it up. The phrase:\n * - Is visible in React DevTools during enrollment\n * - Is cleared from state when the component unmounts or enrollment completes\n * - Byte arrays (seed, shares) are securely wiped via sensitiveData ref\n * - String mnemonics cannot be securely wiped (JS string immutability)\n */\n\nimport { useState, useCallback, useRef, useEffect } from 'react';\nimport { useCedrosLogin } from '../context/useCedrosLogin';\nimport {\n  generateSeed,\n  generateArgon2Salt,\n  generatePrfSalt,\n  splitSecret,\n  argon2DeriveInWorker,\n  aesGcmEncryptToBase64,\n  uint8ArrayToBase64,\n  authenticateWithDiscoverablePrf,\n  registerPasskeyWithPrf,\n  deriveKeyFromPrf,\n  getPublicKeyFromSeed,\n  publicKeyToBase58,\n  seedToMnemonic,\n  shareToMnemonic,\n  wipeAll,\n  toEncryptionKey,\n  toShamirShare,\n  DEFAULT_KDF_PARAMS,\n} from '../crypto';\nimport { useWalletMaterial } from './useWalletMaterial';\nimport { useWalletDiscovery } from './useWalletDiscovery';\nimport type {\n  UseWalletEnrollmentReturn,\n  EnrollmentState,\n  WalletEnrollRequest,\n  ShareAAuthMethod,\n} from '../types/wallet';\n\n/**\n * Hook for wallet enrollment\n *\n * Supports auth methods:\n * - password: User sets a wallet password (Argon2id KDF)\n * - passkey: Uses passkey PRF extension\n */\nexport function useWalletEnrollment(): UseWalletEnrollmentReturn {\n  const { user } = useCedrosLogin();\n  const { enroll } = useWalletMaterial();\n  const { recoveryMode } = useWalletDiscovery();\n\n  const [state, setState] = useState<EnrollmentState>({ step: 'idle' });\n  const [isEnrolling, setIsEnrolling] = useState(false);\n\n  // Store sensitive data for cleanup\n  const sensitiveData = useRef<Uint8Array[]>([]);\n\n  const cleanup = useCallback(() => {\n    wipeAll(...sensitiveData.current);\n    sensitiveData.current = [];\n  }, []);\n\n  useEffect(() => {\n    return () => {\n      cleanup();\n    };\n  }, [cleanup]);\n\n  /**\n   * Core enrollment logic shared by all auth methods\n   */\n  const doEnrollment = useCallback(\n    async (\n      authMethod: ShareAAuthMethod,\n      encryptionKey: Uint8Array,\n      kdfSalt?: Uint8Array,\n      prfSalt?: string\n    ): Promise<void> => {\n      // Step 1: Generate seed\n      setState({ step: 'generating_seed' });\n      const seed = generateSeed();\n      sensitiveData.current.push(seed);\n\n      // Step 2: Split into shares\n      setState({ step: 'splitting_shares' });\n      const { shareA, shareB, shareC } = splitSecret(seed);\n      sensitiveData.current.push(shareA, shareB, shareC);\n\n      // Step 3: Encrypt Share A\n      setState({ step: 'encrypting_shares' });\n      const encryptedA = await aesGcmEncryptToBase64(shareA, toEncryptionKey(encryptionKey));\n\n      // Step 4: Derive Solana public key\n      const publicKey = getPublicKeyFromSeed(seed);\n      const solanaPubkey = publicKeyToBase58(publicKey);\n\n      // Step 5: Upload to server\n      setState({ step: 'uploading' });\n\n      const request: WalletEnrollRequest = {\n        solanaPubkey,\n        shareAAuthMethod: authMethod,\n        shareACiphertext: encryptedA.ciphertext,\n        shareANonce: encryptedA.nonce,\n        // Share B is now plaintext (SSS math protects it)\n        shareB: uint8ArrayToBase64(shareB),\n      };\n\n      // Add auth-method-specific fields\n      if (authMethod === 'password') {\n        if (!kdfSalt) throw new Error('KDF salt required for password method');\n        request.shareAKdfSalt = uint8ArrayToBase64(kdfSalt);\n        request.shareAKdfParams = DEFAULT_KDF_PARAMS;\n      }\n\n      if (authMethod === 'passkey' && prfSalt) {\n        request.prfSalt = prfSalt;\n      }\n\n      await enroll(request);\n\n      // Step 6: Show recovery phrase based on recovery mode\n      // - share_c_only: Show Share C (app-locked, not portable)\n      // - full_seed: Show full seed (portable to other wallets)\n      // - none: Skip recovery phrase entirely (Privacy Cash mode)\n      if (recoveryMode === 'none') {\n        // No recovery option - go straight to complete\n        cleanup();\n        setState({\n          step: 'complete',\n          solanaPubkey,\n        });\n      } else {\n        const recoveryPhrase =\n          recoveryMode === 'full_seed'\n            ? seedToMnemonic(seed)\n            : shareToMnemonic(toShamirShare(shareC));\n\n        setState({\n          step: 'showing_recovery',\n          recoveryPhrase,\n          solanaPubkey,\n        });\n      }\n    },\n    [enroll, recoveryMode, cleanup]\n  );\n\n  /**\n   * Start enrollment with password (email users)\n   * Uses user's login password for Share A encryption\n   */\n  const startEnrollmentWithPassword = useCallback(\n    async (password: string): Promise<void> => {\n      if (!user) {\n        setState({ step: 'error', error: 'User not authenticated' });\n        return;\n      }\n\n      setIsEnrolling(true);\n      cleanup();\n\n      try {\n        // Derive key from password using Argon2id\n        const salt = generateArgon2Salt();\n        const key = await argon2DeriveInWorker(password, salt, DEFAULT_KDF_PARAMS);\n        sensitiveData.current.push(key);\n\n        await doEnrollment('password', key, salt);\n      } catch (err) {\n        setState({\n          step: 'error',\n          error: err instanceof Error ? err.message : 'Enrollment failed',\n        });\n      } finally {\n        setIsEnrolling(false);\n      }\n    },\n    [user, cleanup, doEnrollment]\n  );\n\n  /**\n   * Start enrollment with passkey PRF\n   * Uses WebAuthn PRF extension for Share A encryption\n   */\n  const startEnrollmentWithPasskey = useCallback(async (): Promise<void> => {\n    if (!user) {\n      setState({ step: 'error', error: 'User not authenticated' });\n      return;\n    }\n\n    setIsEnrolling(true);\n    cleanup();\n\n    try {\n      // Generate PRF salt\n      const prfSalt = generatePrfSalt();\n      const prfSaltBase64 = uint8ArrayToBase64(prfSalt);\n\n      // Register passkey with PRF; fallback to authenticate if credential exists\n      setState({ step: 'registering_passkey' });\n      let prfOutput: Uint8Array;\n      try {\n        const userIdBytes = new TextEncoder().encode(user.id);\n        const displayName = user.name ?? user.email ?? 'User';\n        const userName = user.email ?? user.id;\n        const registration = await registerPasskeyWithPrf(\n          userIdBytes,\n          userName,\n          displayName,\n          prfSalt\n        );\n        prfOutput = registration.prfOutput;\n      } catch (err) {\n        const error = err as DOMException;\n        if (error?.name !== 'InvalidStateError') {\n          throw err;\n        }\n        const prfResult = await authenticateWithDiscoverablePrf(prfSaltBase64);\n        prfOutput = prfResult.prfOutput;\n      }\n      sensitiveData.current.push(prfOutput);\n\n      // Derive key from PRF output\n      const key = await deriveKeyFromPrf(prfOutput, prfSalt);\n      sensitiveData.current.push(key);\n\n      await doEnrollment('passkey', key, undefined, prfSaltBase64);\n    } catch (err) {\n      setState({\n        step: 'error',\n        error: err instanceof Error ? err.message : 'Enrollment failed',\n      });\n    } finally {\n      setIsEnrolling(false);\n    }\n  }, [user, cleanup, doEnrollment]);\n\n  const confirmRecoveryPhrase = useCallback(() => {\n    // User confirmed they saved the recovery phrase\n    const solanaPubkey = state.solanaPubkey;\n    cleanup();\n\n    setState({\n      step: 'complete',\n      solanaPubkey,\n    });\n  }, [state.solanaPubkey, cleanup]);\n\n  const cancel = useCallback(() => {\n    cleanup();\n    setState({ step: 'idle' });\n    setIsEnrolling(false);\n  }, [cleanup]);\n\n  return {\n    state,\n    startEnrollmentWithPassword,\n    startEnrollmentWithPasskey,\n    confirmRecoveryPhrase,\n    cancel,\n    isEnrolling,\n  };\n}\n","/**\n * Wallet enrollment wizard component (server-side signing)\n *\n * Guides user through the complete wallet enrollment process:\n * 1. Choose authentication method (password/passkey)\n * 2. Enter credentials for Share A encryption\n * 3. Display and confirm recovery phrase\n *\n * Share B is stored as plaintext on the server (SSS math protects it).\n */\n\nimport { useState, useCallback, useEffect } from 'react';\nimport { useCedrosLogin } from '../../context/useCedrosLogin';\nimport { useWalletEnrollment } from '../../hooks/useWalletEnrollment';\nimport { PasswordInput } from '../email/PasswordInput';\nimport { RecoveryPhraseDisplay } from './RecoveryPhraseDisplay';\nimport type { ShareAAuthMethod } from '../../types/wallet';\n\nexport interface WalletEnrollmentProps {\n  /** Callback when enrollment completes */\n  onComplete?: (solanaPubkey: string) => void;\n  /** Callback to cancel enrollment */\n  onCancel?: () => void;\n  /** Optional class name */\n  className?: string;\n  /** Force a specific auth method (otherwise auto-detected) */\n  forceAuthMethod?: ShareAAuthMethod;\n}\n\n/**\n * Wallet enrollment wizard\n */\nexport function WalletEnrollment({\n  onComplete,\n  onCancel,\n  className = '',\n  forceAuthMethod,\n}: WalletEnrollmentProps) {\n  const { user } = useCedrosLogin();\n  const {\n    state,\n    startEnrollmentWithPassword,\n    startEnrollmentWithPasskey,\n    confirmRecoveryPhrase,\n    cancel,\n    isEnrolling,\n  } = useWalletEnrollment();\n\n  // Determine default auth method based on user type\n  const getDefaultAuthMethod = (): ShareAAuthMethod => {\n    if (forceAuthMethod) return forceAuthMethod;\n    return 'password';\n  };\n\n  const [authMethod, setAuthMethod] = useState<ShareAAuthMethod>(getDefaultAuthMethod);\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [passwordError, setPasswordError] = useState<string | null>(null);\n\n  // MAINT-02: Update authMethod when user changes (e.g., different login)\n  useEffect(() => {\n    setAuthMethod(getDefaultAuthMethod());\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [user?.id, forceAuthMethod]);\n\n  const handlePasswordSubmit = useCallback(\n    async (e: React.FormEvent) => {\n      e.preventDefault();\n\n      // Validate passwords match\n      if (password !== confirmPassword) {\n        setPasswordError('Passwords do not match');\n        return;\n      }\n\n      // Validate password strength (minimum 8 characters)\n      if (password.length < 8) {\n        setPasswordError('Password must be at least 8 characters');\n        return;\n      }\n\n      setPasswordError(null);\n      await startEnrollmentWithPassword(password);\n    },\n    [password, confirmPassword, startEnrollmentWithPassword]\n  );\n\n  const handlePasskeySubmit = useCallback(async () => {\n    await startEnrollmentWithPasskey();\n  }, [startEnrollmentWithPasskey]);\n\n  const handleRecoveryConfirm = useCallback(() => {\n    confirmRecoveryPhrase();\n    if (state.solanaPubkey) {\n      onComplete?.(state.solanaPubkey);\n    }\n  }, [confirmRecoveryPhrase, state.solanaPubkey, onComplete]);\n\n  const handleCancel = useCallback(() => {\n    cancel();\n    onCancel?.();\n  }, [cancel, onCancel]);\n\n  // Show loading/progress indicator during enrollment steps\n  // A11Y-03: aria-busy indicates async operation in progress\n  if (state.step === 'generating_seed' || state.step === 'splitting_shares') {\n    return (\n      <div className={`cedros-wallet-enrollment ${className}`} aria-busy=\"true\">\n        <div className=\"cedros-enrollment-progress\" role=\"status\" aria-live=\"polite\">\n          <div className=\"cedros-spinner\" aria-hidden=\"true\" />\n          <p>Generating secure wallet...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (state.step === 'encrypting_shares') {\n    return (\n      <div className={`cedros-wallet-enrollment ${className}`} aria-busy=\"true\">\n        <div className=\"cedros-enrollment-progress\" role=\"status\" aria-live=\"polite\">\n          <div className=\"cedros-spinner\" aria-hidden=\"true\" />\n          <p>Encrypting wallet shares...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (state.step === 'registering_passkey') {\n    return (\n      <div className={`cedros-wallet-enrollment ${className}`} aria-busy=\"true\">\n        <div className=\"cedros-enrollment-progress\" role=\"status\" aria-live=\"polite\">\n          <div className=\"cedros-passkey-prompt\">\n            <svg\n              className=\"cedros-passkey-icon\"\n              width=\"48\"\n              height=\"48\"\n              viewBox=\"0 0 48 48\"\n              fill=\"none\"\n              aria-hidden=\"true\"\n            >\n              <rect\n                x=\"8\"\n                y=\"16\"\n                width=\"32\"\n                height=\"24\"\n                rx=\"4\"\n                stroke=\"currentColor\"\n                strokeWidth=\"2\"\n              />\n              <circle cx=\"24\" cy=\"28\" r=\"4\" stroke=\"currentColor\" strokeWidth=\"2\" />\n              <path d=\"M24 32v4\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" />\n            </svg>\n            <h3>Authenticate with Passkey</h3>\n            <p>Follow your browser's prompt to use your passkey.</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (state.step === 'uploading') {\n    return (\n      <div className={`cedros-wallet-enrollment ${className}`} aria-busy=\"true\">\n        <div className=\"cedros-enrollment-progress\" role=\"status\" aria-live=\"polite\">\n          <div className=\"cedros-spinner\" aria-hidden=\"true\" />\n          <p>Saving wallet...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (state.step === 'showing_recovery' && state.recoveryPhrase) {\n    return (\n      <div className={`cedros-wallet-enrollment ${className}`}>\n        <RecoveryPhraseDisplay words={state.recoveryPhrase} onConfirm={handleRecoveryConfirm} />\n      </div>\n    );\n  }\n\n  if (state.step === 'complete') {\n    return (\n      <div className={`cedros-wallet-enrollment ${className}`}>\n        <div className=\"cedros-enrollment-complete\">\n          <svg\n            className=\"cedros-success-icon\"\n            width=\"48\"\n            height=\"48\"\n            viewBox=\"0 0 48 48\"\n            fill=\"none\"\n            aria-hidden=\"true\"\n          >\n            <circle cx=\"24\" cy=\"24\" r=\"20\" stroke=\"currentColor\" strokeWidth=\"2\" />\n            <path\n              d=\"M16 24l6 6 12-12\"\n              stroke=\"currentColor\"\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n            />\n          </svg>\n          <h3>Wallet Created!</h3>\n          <p className=\"cedros-pubkey\">\n            <strong>Address:</strong> {state.solanaPubkey}\n          </p>\n          <p>Your non-custodial Solana wallet is ready to use.</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (state.step === 'error') {\n    return (\n      <div className={`cedros-wallet-enrollment ${className}`}>\n        <div className=\"cedros-enrollment-error\">\n          <svg\n            className=\"cedros-error-icon\"\n            width=\"48\"\n            height=\"48\"\n            viewBox=\"0 0 48 48\"\n            fill=\"none\"\n            aria-hidden=\"true\"\n          >\n            <circle cx=\"24\" cy=\"24\" r=\"20\" stroke=\"currentColor\" strokeWidth=\"2\" />\n            <path\n              d=\"M24 16v12m0 6h.01\"\n              stroke=\"currentColor\"\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n            />\n          </svg>\n          <h3>Enrollment Failed</h3>\n          <p className=\"cedros-error-message\">{state.error}</p>\n          <div className=\"cedros-error-actions\">\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-secondary\"\n              onClick={handleCancel}\n            >\n              Cancel\n            </button>\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-primary\"\n              onClick={() => cancel()}\n            >\n              Try Again\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Default: credential entry form\n  return (\n    <div className={`cedros-wallet-enrollment ${className}`}>\n      <div className=\"cedros-enrollment-header\">\n        <h2>Create Wallet</h2>\n        <p>Secure your wallet with a {authMethod === 'passkey' ? 'passkey' : 'password'}.</p>\n      </div>\n\n      {/* Auth method selector (only show if not forced) */}\n      {!forceAuthMethod && (\n        <div className=\"cedros-auth-method-selector\">\n          <label className=\"cedros-radio-label\">\n            <input\n              type=\"radio\"\n              name=\"authMethod\"\n              value=\"password\"\n              checked={authMethod === 'password'}\n              onChange={() => setAuthMethod('password')}\n              disabled={isEnrolling}\n            />\n            <span>Password</span>\n          </label>\n          <label className=\"cedros-radio-label\">\n            <input\n              type=\"radio\"\n              name=\"authMethod\"\n              value=\"passkey\"\n              checked={authMethod === 'passkey'}\n              onChange={() => setAuthMethod('passkey')}\n              disabled={isEnrolling}\n            />\n            <span>Passkey</span>\n          </label>\n        </div>\n      )}\n\n      {/* Password form */}\n      {authMethod === 'password' && (\n        <form onSubmit={handlePasswordSubmit} className=\"cedros-enrollment-form\">\n          <PasswordInput\n            label=\"Password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            showStrengthMeter\n            disabled={isEnrolling}\n            required\n            minLength={8}\n            placeholder=\"Enter a strong password\"\n          />\n\n          <PasswordInput\n            label=\"Confirm Password\"\n            value={confirmPassword}\n            onChange={(e) => setConfirmPassword(e.target.value)}\n            error={passwordError ?? undefined}\n            disabled={isEnrolling}\n            required\n            minLength={8}\n            placeholder=\"Confirm your password\"\n          />\n\n          <div className=\"cedros-password-info\">\n            <p>This password will be used to sign transactions.</p>\n          </div>\n\n          <div className=\"cedros-enrollment-actions\">\n            {onCancel && (\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-secondary\"\n                onClick={handleCancel}\n                disabled={isEnrolling}\n              >\n                Cancel\n              </button>\n            )}\n            <button\n              type=\"submit\"\n              className=\"cedros-button cedros-button-primary\"\n              disabled={isEnrolling || !password || !confirmPassword}\n            >\n              {isEnrolling ? 'Creating...' : 'Continue'}\n            </button>\n          </div>\n        </form>\n      )}\n\n      {/* Passkey form */}\n      {authMethod === 'passkey' && (\n        <div className=\"cedros-enrollment-form\">\n          <div className=\"cedros-passkey-info\">\n            <svg\n              className=\"cedros-passkey-icon\"\n              width=\"48\"\n              height=\"48\"\n              viewBox=\"0 0 48 48\"\n              fill=\"none\"\n              aria-hidden=\"true\"\n            >\n              <rect\n                x=\"8\"\n                y=\"16\"\n                width=\"32\"\n                height=\"24\"\n                rx=\"4\"\n                stroke=\"currentColor\"\n                strokeWidth=\"2\"\n              />\n              <circle cx=\"24\" cy=\"28\" r=\"4\" stroke=\"currentColor\" strokeWidth=\"2\" />\n              <path d=\"M24 32v4\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" />\n            </svg>\n            <p>Use your passkey (Touch ID, Face ID, or Windows Hello) to secure your wallet.</p>\n            <p>You'll use the same passkey to sign transactions.</p>\n          </div>\n\n          <div className=\"cedros-enrollment-actions\">\n            {onCancel && (\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-secondary\"\n                onClick={handleCancel}\n                disabled={isEnrolling}\n              >\n                Cancel\n              </button>\n            )}\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-primary\"\n              onClick={handlePasskeySubmit}\n              disabled={isEnrolling}\n            >\n              {isEnrolling ? 'Creating...' : 'Use Passkey'}\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","/**\n * Hook for wallet transaction signing (server-side signing)\n *\n * Signing happens server-side:\n * - User provides unlock credential (password/PIN/passkey PRF)\n * - Server decrypts Share A, combines with Share B, signs, wipes\n * - Client just sends credential and transaction, receives signature\n */\n\nimport { useState, useCallback } from 'react';\nimport { useCedrosLogin } from '../context/useCedrosLogin';\nimport { useWalletMaterial } from './useWalletMaterial';\nimport { authenticateWithDiscoverablePrf, base64ToUint8Array, uint8ArrayToBase64 } from '../crypto';\nimport type { UseWalletSigningReturn, UnlockCredential } from '../types/wallet';\nimport { toCredentialRequest } from '../utils/unlockCredential';\n\n/**\n * Hook for wallet transaction signing\n *\n * Usage:\n * ```tsx\n * const { signTransaction, isSigning, error } = useWalletSigning();\n *\n * // Sign with password\n * const signature = await signTransaction(txBytes, { type: 'password', password: 'xxx' });\n *\n * // Sign with PIN\n * const signature = await signTransaction(txBytes, { type: 'password', password: 'secret' });\n *\n * // Sign with passkey (PRF)\n * const signature = await signTransaction(txBytes, { type: 'prfOutput', prfOutput: 'base64...' });\n * ```\n */\nexport function useWalletSigning(): UseWalletSigningReturn {\n  const { user } = useCedrosLogin();\n  const { signTransaction: apiSignTransaction } = useWalletMaterial();\n\n  const [isSigning, setIsSigning] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  /**\n   * Sign a transaction with the wallet\n   *\n   * @param transaction - Transaction bytes to sign\n   * @param credential - Unlock credential (password, PIN, or PRF output)\n   * @returns Ed25519 signature (64 bytes)\n   */\n  const signTransaction = useCallback(\n    async (transaction: Uint8Array, credential?: UnlockCredential): Promise<Uint8Array> => {\n      if (!user) {\n        const msg = 'User not authenticated';\n        setError(msg);\n        throw new Error(msg);\n      }\n\n      setIsSigning(true);\n      setError(null);\n\n      try {\n        const request = {\n          transaction: uint8ArrayToBase64(transaction),\n          ...(credential ? { credential: toCredentialRequest(credential) } : {}),\n        };\n\n        const response = await apiSignTransaction(request);\n\n        // Decode signature from base64\n        return base64ToUint8Array(response.signature);\n      } catch (err) {\n        const msg = err instanceof Error ? err.message : 'Signing failed';\n        setError(msg);\n        throw err;\n      } finally {\n        setIsSigning(false);\n      }\n    },\n    [user, apiSignTransaction]\n  );\n\n  const clearError = useCallback(() => setError(null), []);\n\n  return {\n    signTransaction,\n    isSigning,\n    error,\n    clearError,\n  };\n}\n\n/**\n * Helper hook to get PRF output for passkey signing\n *\n * This handles the WebAuthn PRF flow and returns a credential\n * that can be used with useWalletSigning.\n */\nexport function usePasskeySigning() {\n  const { getMaterial } = useWalletMaterial();\n  const [isAuthenticating, setIsAuthenticating] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  /**\n   * Get PRF output from passkey for wallet signing\n   *\n   * @returns UnlockCredential with PRF output, or null if cancelled\n   */\n  const getPasskeyCredential = useCallback(async (): Promise<UnlockCredential | null> => {\n    setIsAuthenticating(true);\n    setError(null);\n\n    try {\n      // Get wallet material to get PRF salt\n      const material = await getMaterial();\n      if (!material) {\n        throw new Error('No wallet enrolled');\n      }\n\n      if (material.shareAAuthMethod !== 'passkey') {\n        throw new Error('Wallet is not configured for passkey authentication');\n      }\n\n      if (!material.prfSalt) {\n        throw new Error('No PRF salt configured for wallet');\n      }\n\n      // Authenticate with passkey and get PRF output\n      const result = await authenticateWithDiscoverablePrf(material.prfSalt);\n\n      return {\n        type: 'prfOutput',\n        prfOutput: uint8ArrayToBase64(result.prfOutput),\n      };\n    } catch (err) {\n      // User cancelled or error occurred\n      const msg = err instanceof Error ? err.message : 'Passkey authentication failed';\n      setError(msg);\n      return null;\n    } finally {\n      setIsAuthenticating(false);\n    }\n  }, [getMaterial]);\n\n  const clearError = useCallback(() => setError(null), []);\n\n  return {\n    getPasskeyCredential,\n    isAuthenticating,\n    error,\n    clearError,\n  };\n}\n","/**\n * Passkey prompt component for WebAuthn interactions\n *\n * Provides visual feedback during WebAuthn ceremonies:\n * - Registration of new passkeys\n * - Authentication with existing passkeys\n * - PRF extension operations\n */\n\nimport { useCallback } from 'react';\n\nexport interface PasskeyPromptProps {\n  /** Type of WebAuthn operation */\n  mode: 'register' | 'authenticate';\n  /** Whether the operation is in progress */\n  isLoading?: boolean;\n  /** Error message if operation failed */\n  error?: string;\n  /** Callback to trigger the operation */\n  onPrompt?: () => void;\n  /** Callback to retry after error */\n  onRetry?: () => void;\n  /** Callback to cancel the operation */\n  onCancel?: () => void;\n  /** Optional custom title */\n  title?: string;\n  /** Optional custom description */\n  description?: string;\n  /** Additional CSS classes */\n  className?: string;\n}\n\n/**\n * WebAuthn passkey interaction prompt\n *\n * Displays appropriate UI and messaging for passkey operations.\n */\nexport function PasskeyPrompt({\n  mode,\n  isLoading = false,\n  error,\n  onPrompt,\n  onRetry,\n  onCancel,\n  title,\n  description,\n  className = '',\n}: PasskeyPromptProps) {\n  const handlePrompt = useCallback(() => {\n    if (!isLoading) {\n      onPrompt?.();\n    }\n  }, [isLoading, onPrompt]);\n\n  const handleRetry = useCallback(() => {\n    onRetry?.();\n  }, [onRetry]);\n\n  const defaultTitle = mode === 'register' ? 'Set Up Passkey' : 'Verify with Passkey';\n\n  const defaultDescription =\n    mode === 'register'\n      ? 'Create a passkey to securely encrypt your wallet on this device. You will use your fingerprint, face, or device PIN.'\n      : 'Use your passkey to unlock your wallet. You will be prompted for biometric verification.';\n\n  return (\n    <div className={`cedros-passkey-prompt ${className}`}>\n      <div className=\"cedros-passkey-icon\">\n        {isLoading ? <LoadingSpinner /> : error ? <ErrorIcon /> : <PasskeyIcon />}\n      </div>\n\n      <h3 className=\"cedros-passkey-title\">{title ?? defaultTitle}</h3>\n\n      <p className=\"cedros-passkey-description\">{description ?? defaultDescription}</p>\n\n      {error && (\n        <div className=\"cedros-passkey-error\" role=\"alert\">\n          <p>{error}</p>\n        </div>\n      )}\n\n      <div className=\"cedros-passkey-actions\">\n        {error ? (\n          <>\n            {onRetry && (\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-primary\"\n                onClick={handleRetry}\n              >\n                Try Again\n              </button>\n            )}\n            {onCancel && (\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-secondary\"\n                onClick={onCancel}\n              >\n                Cancel\n              </button>\n            )}\n          </>\n        ) : (\n          <>\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-primary\"\n              onClick={handlePrompt}\n              disabled={isLoading}\n            >\n              {isLoading ? (\n                <>\n                  <span className=\"cedros-button-spinner\" aria-hidden=\"true\" />\n                  Waiting for passkey...\n                </>\n              ) : mode === 'register' ? (\n                'Create Passkey'\n              ) : (\n                'Use Passkey'\n              )}\n            </button>\n            {onCancel && !isLoading && (\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-secondary\"\n                onClick={onCancel}\n              >\n                Cancel\n              </button>\n            )}\n          </>\n        )}\n      </div>\n\n      {isLoading && (\n        <p className=\"cedros-passkey-hint\">\n          Follow the prompts on your device to {mode === 'register' ? 'create' : 'verify'} your\n          passkey.\n        </p>\n      )}\n    </div>\n  );\n}\n\n/** Fingerprint icon for passkey */\nfunction PasskeyIcon() {\n  return (\n    <svg\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.5\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      aria-hidden=\"true\"\n    >\n      <path d=\"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4\" />\n      <path d=\"M14 13.12c0 2.38 0 6.38-1 8.88\" />\n      <path d=\"M17.29 21.02c.12-.6.43-2.3.5-3.02\" />\n      <path d=\"M2 12a10 10 0 0 1 18-6\" />\n      <path d=\"M2 16h.01\" />\n      <path d=\"M21.8 16c.2-2 .131-5.354 0-6\" />\n      <path d=\"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2\" />\n      <path d=\"M8.65 22c.21-.66.45-1.32.57-2\" />\n      <path d=\"M9 6.8a6 6 0 0 1 9 5.2v2\" />\n    </svg>\n  );\n}\n\n/** Loading spinner icon */\nfunction LoadingSpinner() {\n  return (\n    <svg viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\" className=\"cedros-spinner\">\n      <circle cx=\"12\" cy=\"12\" r=\"9\" stroke=\"currentColor\" strokeWidth=\"2\" opacity=\"0.25\" />\n      <path d=\"M12 3a9 9 0 0 1 9 9\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" />\n    </svg>\n  );\n}\n\n/** Error icon */\nfunction ErrorIcon() {\n  return (\n    <svg\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      aria-hidden=\"true\"\n    >\n      <circle cx=\"12\" cy=\"12\" r=\"10\" />\n      <path d=\"M12 8v4M12 16h.01\" />\n    </svg>\n  );\n}\n","/**\n * Wallet unlock component (v2 - server-side signing)\n *\n * Provides the UI for unlocking an enrolled wallet.\n * User enters their credential (password or passkey),\n * server validates and caches the derived key for session signing.\n *\n * No client-side share reconstruction - server handles everything.\n */\n\nimport { useState, useCallback, useEffect } from 'react';\nimport type { FormEvent } from 'react';\nimport { useWalletMaterial } from '../../hooks/useWalletMaterial';\nimport { usePasskeySigning } from '../../hooks/useWalletSigning';\nimport { useCedrosLogin } from '../../context/useCedrosLogin';\nimport { PasskeyPrompt } from './PasskeyPrompt';\nimport { LoadingSpinner } from '../shared/LoadingSpinner';\nimport { PasswordInput } from '../email/PasswordInput';\nimport type { ShareAAuthMethod, UnlockCredential } from '../../types/wallet';\n\nexport interface WalletUnlockProps {\n  /** Callback when wallet is successfully unlocked */\n  onUnlock?: () => void;\n  /** Callback when unlock is cancelled */\n  onCancel?: () => void;\n  /** Whether to show the cancel button */\n  showCancel?: boolean;\n  /** The wallet's auth method (if known) */\n  authMethod?: ShareAAuthMethod;\n  /** Additional CSS classes */\n  className?: string;\n}\n\ntype UnlockPhase = 'idle' | 'credential' | 'unlocking' | 'unlocked' | 'error';\n\n/**\n * Wallet unlock form\n *\n * Simple single-credential flow:\n * - Password users: Enter password\n * - Passkey users: Authenticate with passkey\n *\n * Server validates credential and caches derived key for session signing.\n */\nexport function WalletUnlock({\n  onUnlock,\n  onCancel,\n  showCancel = true,\n  authMethod: propAuthMethod,\n  className = '',\n}: WalletUnlockProps) {\n  useCedrosLogin(); // Ensure user is authenticated\n  const { unlock, getMaterial, isLoading } = useWalletMaterial();\n  const { getPasskeyCredential, isAuthenticating } = usePasskeySigning();\n\n  const [phase, setPhase] = useState<UnlockPhase>('idle');\n  const [authMethod, setAuthMethod] = useState<ShareAAuthMethod | null>(propAuthMethod ?? null);\n  const [credential, setCredential] = useState('');\n  const [error, setError] = useState<string | null>(null);\n\n  // MAINT-01: Sync authMethod state when prop changes\n  useEffect(() => {\n    if (propAuthMethod !== undefined) {\n      setAuthMethod(propAuthMethod);\n    }\n  }, [propAuthMethod]);\n\n  // Determine credential type based on auth method\n  const isPasswordAuth = authMethod === 'password';\n  const isPasskeyAuth = authMethod === 'passkey';\n\n  // Start the unlock flow - fetch material to get auth method\n  const startUnlock = useCallback(async () => {\n    setPhase('credential');\n    setError(null);\n\n    if (!authMethod) {\n      try {\n        const material = await getMaterial();\n        if (material) {\n          setAuthMethod(material.shareAAuthMethod);\n        } else {\n          setError('No wallet enrolled');\n          setPhase('error');\n        }\n      } catch (err) {\n        setError(err instanceof Error ? err.message : 'Failed to get wallet info');\n        setPhase('error');\n      }\n    }\n  }, [authMethod, getMaterial]);\n\n  // Handle credential submission\n  const handleSubmit = useCallback(\n    async (e: FormEvent) => {\n      e.preventDefault();\n      setError(null);\n      setPhase('unlocking');\n\n      try {\n        let unlockCredential: UnlockCredential;\n\n        if (isPasswordAuth) {\n          unlockCredential = { type: 'password', password: credential };\n        } else {\n          throw new Error('Invalid auth method');\n        }\n\n        await unlock(unlockCredential);\n        setPhase('unlocked');\n        onUnlock?.();\n      } catch (err) {\n        setError(err instanceof Error ? err.message : 'Failed to unlock wallet');\n        setPhase('error');\n      }\n    },\n    [isPasswordAuth, credential, unlock, onUnlock]\n  );\n\n  // Handle passkey authentication\n  const handlePasskeyUnlock = useCallback(async () => {\n    setError(null);\n    setPhase('unlocking');\n\n    try {\n      const passkeyCredential = await getPasskeyCredential();\n      if (!passkeyCredential) {\n        setPhase('credential');\n        return;\n      }\n\n      await unlock(passkeyCredential);\n      setPhase('unlocked');\n      onUnlock?.();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to unlock wallet');\n      setPhase('error');\n    }\n  }, [getPasskeyCredential, unlock, onUnlock]);\n\n  // Handle cancel\n  const handleCancel = useCallback(() => {\n    setCredential('');\n    setPhase('idle');\n    setError(null);\n    onCancel?.();\n  }, [onCancel]);\n\n  // Retry from error state\n  const handleRetry = useCallback(() => {\n    setCredential('');\n    setPhase('credential');\n    setError(null);\n  }, []);\n\n  const isProcessing = isLoading || isAuthenticating;\n\n  // Render based on phase\n  const renderContent = () => {\n    switch (phase) {\n      case 'idle':\n        return (\n          <div className=\"cedros-wallet-unlock-idle\">\n            <div className=\"cedros-wallet-unlock-icon\">\n              <LockIcon />\n            </div>\n            <h3 className=\"cedros-wallet-unlock-title\">Wallet Locked</h3>\n            <p className=\"cedros-wallet-unlock-description\">\n              Unlock your wallet to sign transactions.\n            </p>\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-primary\"\n              onClick={startUnlock}\n            >\n              Unlock Wallet\n            </button>\n          </div>\n        );\n\n      case 'credential':\n        // Password form\n        if (isPasswordAuth) {\n          return (\n            <form className=\"cedros-wallet-unlock-form\" onSubmit={handleSubmit}>\n              <h3 className=\"cedros-wallet-unlock-title\">Enter Password</h3>\n              <p className=\"cedros-wallet-unlock-description\">\n                Enter your wallet password to unlock.\n              </p>\n\n              <PasswordInput\n                label=\"Password\"\n                value={credential}\n                onChange={(e) => setCredential(e.target.value)}\n                disabled={isProcessing}\n                autoComplete=\"current-password\"\n                error={error ?? undefined}\n              />\n\n              <div className=\"cedros-wallet-unlock-actions\">\n                <button\n                  type=\"submit\"\n                  className=\"cedros-button cedros-button-primary\"\n                  disabled={isProcessing || credential.length === 0}\n                >\n                  {isProcessing ? 'Unlocking...' : 'Unlock'}\n                </button>\n                {showCancel && (\n                  <button\n                    type=\"button\"\n                    className=\"cedros-button cedros-button-secondary\"\n                    onClick={handleCancel}\n                    disabled={isProcessing}\n                  >\n                    Cancel\n                  </button>\n                )}\n              </div>\n            </form>\n          );\n        }\n\n        // Passkey authentication\n        if (isPasskeyAuth) {\n          return (\n            <div className=\"cedros-wallet-unlock-passkey\">\n              <h3 className=\"cedros-wallet-unlock-title\">Verify with Passkey</h3>\n              <p className=\"cedros-wallet-unlock-description\">\n                Use your passkey to unlock your wallet.\n              </p>\n\n              <PasskeyPrompt\n                mode=\"authenticate\"\n                isLoading={isProcessing}\n                error={error ?? undefined}\n                onPrompt={handlePasskeyUnlock}\n                onRetry={handlePasskeyUnlock}\n                onCancel={showCancel ? handleCancel : undefined}\n              />\n            </div>\n          );\n        }\n\n        // Loading auth method\n        return (\n          <div className=\"cedros-wallet-unlock-loading\">\n            <LoadingSpinner size=\"xl\" />\n            <p>Loading wallet info...</p>\n          </div>\n        );\n\n      case 'unlocking':\n        return (\n          <div className=\"cedros-wallet-unlock-progress\">\n            <div className=\"cedros-wallet-unlock-icon\">\n              <LoadingSpinner size=\"xl\" />\n            </div>\n            <h3 className=\"cedros-wallet-unlock-title\">Unlocking Wallet</h3>\n            <p className=\"cedros-wallet-unlock-description\">Verifying your credentials...</p>\n          </div>\n        );\n\n      case 'unlocked':\n        return (\n          <div className=\"cedros-wallet-unlock-success\">\n            <div className=\"cedros-wallet-unlock-icon\">\n              <SuccessIcon />\n            </div>\n            <h3 className=\"cedros-wallet-unlock-title\">Wallet Unlocked</h3>\n            <p className=\"cedros-wallet-unlock-description\">\n              Your wallet is ready to sign transactions.\n            </p>\n          </div>\n        );\n\n      case 'error':\n        return (\n          <div className=\"cedros-wallet-unlock-error\">\n            <div className=\"cedros-wallet-unlock-icon\">\n              <ErrorIcon />\n            </div>\n            <h3 className=\"cedros-wallet-unlock-title\">Unlock Failed</h3>\n            <p className=\"cedros-wallet-unlock-description\">\n              {error ?? 'Failed to unlock wallet. Please try again.'}\n            </p>\n            <div className=\"cedros-wallet-unlock-actions\">\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-primary\"\n                onClick={handleRetry}\n              >\n                Try Again\n              </button>\n              {showCancel && (\n                <button\n                  type=\"button\"\n                  className=\"cedros-button cedros-button-secondary\"\n                  onClick={handleCancel}\n                >\n                  Cancel\n                </button>\n              )}\n            </div>\n          </div>\n        );\n    }\n  };\n\n  return <div className={`cedros-wallet-unlock ${className}`}>{renderContent()}</div>;\n}\n\n// Icon components\nfunction LockIcon() {\n  return (\n    <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\" fill=\"none\" aria-hidden=\"true\">\n      <rect\n        x=\"10\"\n        y=\"22\"\n        width=\"28\"\n        height=\"20\"\n        rx=\"4\"\n        stroke=\"currentColor\"\n        strokeWidth=\"2\"\n        fill=\"var(--cedros-muted, #f3f4f6)\"\n      />\n      <path d=\"M16 22V16a8 8 0 1 1 16 0v6\" stroke=\"currentColor\" strokeWidth=\"2\" fill=\"none\" />\n      <circle cx=\"24\" cy=\"32\" r=\"3\" fill=\"currentColor\" />\n    </svg>\n  );\n}\n\nfunction SuccessIcon() {\n  return (\n    <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\" fill=\"none\" aria-hidden=\"true\">\n      <circle\n        cx=\"24\"\n        cy=\"24\"\n        r=\"20\"\n        stroke=\"var(--cedros-success, #22c55e)\"\n        strokeWidth=\"2\"\n        fill=\"var(--cedros-success-light, #dcfce7)\"\n      />\n      <path\n        d=\"M16 24l6 6 10-10\"\n        stroke=\"var(--cedros-success, #22c55e)\"\n        strokeWidth=\"3\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        fill=\"none\"\n      />\n    </svg>\n  );\n}\n\nfunction ErrorIcon() {\n  return (\n    <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\" fill=\"none\" aria-hidden=\"true\">\n      <circle\n        cx=\"24\"\n        cy=\"24\"\n        r=\"20\"\n        stroke=\"var(--cedros-destructive, #ef4444)\"\n        strokeWidth=\"2\"\n        fill=\"var(--cedros-destructive-light, #fee2e2)\"\n      />\n      <path\n        d=\"M24 16v10M24 30v2\"\n        stroke=\"var(--cedros-destructive, #ef4444)\"\n        strokeWidth=\"3\"\n        strokeLinecap=\"round\"\n      />\n    </svg>\n  );\n}\n","/**\n * Hook for wallet recovery flow\n *\n * Handles recovery using the BIP-39 mnemonic (recovery phrase):\n *\n * Two recovery modes supported:\n * - full_seed: User enters 12-word full seed mnemonic (portable to other wallets)\n * - share_c_only: User enters 12-word Share C mnemonic (app-locked recovery)\n *\n * Recovery flow:\n * 1. User enters 12-word recovery phrase\n * 2. Validate and decode to seed (or Share C  fetch Share B  combine)\n * 3. Re-derive Solana pubkey (proves ownership)\n * 4. Re-split seed into new Shamir shares\n * 5. Encrypt Share A with new credential\n * 6. Send to server (pubkey match verifies ownership)\n */\n\nimport { useState, useCallback, useRef, useEffect } from 'react';\nimport {\n  mnemonicToSeed,\n  mnemonicToShare,\n  isValidMnemonic,\n  combineShares,\n  splitSecret,\n  generateArgon2Salt,\n  generatePrfSalt,\n  argon2DeriveInWorker,\n  authenticateWithDiscoverablePrf,\n  deriveKeyFromPrf,\n  aesGcmEncryptToBase64,\n  getPublicKeyFromSeed,\n  publicKeyToBase58,\n  wipeAll,\n  toEncryptionKey,\n  toShamirShare,\n  DEFAULT_KDF_PARAMS,\n  base64ToUint8Array,\n  uint8ArrayToBase64,\n  type Seed,\n  type Argon2Salt,\n} from '../crypto';\nimport { useWalletMaterial } from './useWalletMaterial';\nimport { useWalletDiscovery } from './useWalletDiscovery';\nimport type {\n  UseWalletRecoveryReturn,\n  RecoveryState,\n  WalletRecoverRequest,\n  ShareAAuthMethod,\n} from '../types/wallet';\n\n/**\n * Hook for wallet recovery\n *\n * Supports two recovery modes based on server config:\n * - full_seed: User enters the full 12-word seed phrase (portable)\n * - share_c_only: User enters 12-word Share C phrase, server provides Share B (app-locked)\n */\nexport function useWalletRecovery(): UseWalletRecoveryReturn {\n  const { recover, getShareBForRecovery } = useWalletMaterial();\n  const { recoveryMode } = useWalletDiscovery();\n\n  const [state, setState] = useState<RecoveryState>({ step: 'idle' });\n  const [isRecovering, setIsRecovering] = useState(false);\n\n  // Store sensitive data for cleanup\n  const sensitiveData = useRef<Uint8Array[]>([]);\n\n  const cleanup = useCallback(() => {\n    wipeAll(...sensitiveData.current);\n    sensitiveData.current = [];\n  }, []);\n\n  useEffect(() => {\n    return () => {\n      cleanup();\n    };\n  }, [cleanup]);\n\n  /**\n   * Start and complete recovery in one step\n   *\n   * @param words - 12-word recovery phrase (full seed or Share C based on mode)\n   * @param method - New auth method (password or passkey)\n   * @param credential - New password (ignored for passkey)\n   */\n  const startRecovery = useCallback(\n    async (words: string[], method: ShareAAuthMethod, credential: string): Promise<void> => {\n      setIsRecovering(true);\n      cleanup();\n\n      try {\n        // Step 1: Validate mnemonic\n        setState({ step: 'validating' });\n\n        if (!isValidMnemonic(words)) {\n          throw new Error('Invalid recovery phrase. Please check your words.');\n        }\n\n        let seed: Seed;\n\n        if (recoveryMode === 'share_c_only') {\n          // Share C mode: decode to Share C, fetch Share B, combine\n          const shareC = mnemonicToShare(words);\n          sensitiveData.current.push(shareC);\n\n          // Send Share C to server to get Share B\n          const shareCBase64 = uint8ArrayToBase64(shareC);\n          const response = await getShareBForRecovery({ shareC: shareCBase64 });\n\n          // Decode Share B from response\n          const shareB = base64ToUint8Array(response.shareB);\n          sensitiveData.current.push(shareB);\n\n          // Combine Share B + Share C to reconstruct seed\n          seed = combineShares(toShamirShare(shareB), toShamirShare(shareC));\n          sensitiveData.current.push(seed);\n        } else {\n          // Full seed mode: decode mnemonic directly to seed\n          seed = mnemonicToSeed(words);\n          sensitiveData.current.push(seed);\n        }\n\n        // Step 3: Derive Solana pubkey (proves ownership when server verifies match)\n        const publicKey = getPublicKeyFromSeed(seed);\n        const solanaPubkey = publicKeyToBase58(publicKey);\n\n        // Step 4: Re-split seed into new shares\n        const { shareA, shareB } = splitSecret(seed);\n        sensitiveData.current.push(shareA, shareB);\n\n        // Step 5: Encrypt Share A with new credential\n        setState({ step: 'encrypting' });\n\n        let encryptionKey: Uint8Array;\n        let kdfSalt: Argon2Salt | undefined;\n        let prfSaltBase64: string | undefined;\n\n        if (method === 'passkey') {\n          // Passkey method: authenticate and derive key from PRF\n          const prfSalt = generatePrfSalt();\n          prfSaltBase64 = uint8ArrayToBase64(prfSalt);\n\n          const prfResult = await authenticateWithDiscoverablePrf(prfSaltBase64);\n          sensitiveData.current.push(prfResult.prfOutput);\n\n          encryptionKey = await deriveKeyFromPrf(prfResult.prfOutput, prfSalt);\n          sensitiveData.current.push(encryptionKey);\n        } else {\n          // Password method: derive key with Argon2id\n          kdfSalt = generateArgon2Salt();\n          encryptionKey = await argon2DeriveInWorker(credential, kdfSalt, DEFAULT_KDF_PARAMS);\n          sensitiveData.current.push(encryptionKey);\n        }\n\n        const encryptedA = await aesGcmEncryptToBase64(shareA, toEncryptionKey(encryptionKey));\n\n        // Step 6: Build request and send to server\n        setState({ step: 'uploading' });\n\n        const request: WalletRecoverRequest = {\n          solanaPubkey,\n          shareAAuthMethod: method,\n          shareACiphertext: encryptedA.ciphertext,\n          shareANonce: encryptedA.nonce,\n          shareB: uint8ArrayToBase64(shareB),\n        };\n\n        // Add method-specific fields\n        if (method === 'password') {\n          request.shareAKdfSalt = uint8ArrayToBase64(kdfSalt!);\n          request.shareAKdfParams = DEFAULT_KDF_PARAMS;\n        }\n\n        if (method === 'passkey') {\n          request.prfSalt = prfSaltBase64;\n        }\n\n        await recover(request);\n\n        // Success\n        cleanup();\n        setState({ step: 'complete' });\n      } catch (err) {\n        cleanup();\n        setState({\n          step: 'error',\n          error: err instanceof Error ? err.message : 'Recovery failed',\n        });\n      } finally {\n        setIsRecovering(false);\n      }\n    },\n    [recover, getShareBForRecovery, recoveryMode, cleanup]\n  );\n\n  const cancel = useCallback(() => {\n    cleanup();\n    setState({ step: 'idle' });\n    setIsRecovering(false);\n  }, [cleanup]);\n\n  return {\n    state,\n    startRecovery,\n    cancel,\n    isRecovering,\n  };\n}\n","/**\n * Wallet recovery wizard component\n *\n * Guides users through wallet recovery using their BIP-39 recovery phrase:\n * 1. Enter 12-word recovery phrase\n * 2. Choose new auth method (password/passkey)\n * 3. Enter new credential\n * 4. Submit to re-encrypt and replace wallet material\n */\n\nimport { useState, useCallback } from 'react';\nimport type { FormEvent } from 'react';\nimport { useWalletRecovery } from '../../hooks/useWalletRecovery';\nimport { RecoveryPhraseInput } from './RecoveryPhraseInput';\nimport type { ShareAAuthMethod } from '../../types/wallet';\n\nexport interface WalletRecoveryProps {\n  /** Callback when recovery completes successfully */\n  onComplete?: () => void;\n  /** Callback when user cancels recovery */\n  onCancel?: () => void;\n  /** Additional CSS classes */\n  className?: string;\n  /** Default auth method (optional) */\n  defaultAuthMethod?: ShareAAuthMethod;\n}\n\n/**\n * Wallet recovery wizard\n *\n * Two-phase flow:\n * 1. Enter recovery phrase\n * 2. Enter new credential (password/passkey)\n */\nexport function WalletRecovery({\n  onComplete,\n  onCancel,\n  className = '',\n  defaultAuthMethod = 'password',\n}: WalletRecoveryProps) {\n  const { state, startRecovery, cancel, isRecovering } = useWalletRecovery();\n\n  // Phase 1: Recovery phrase\n  const [words, setWords] = useState<string[]>([]);\n  const [phraseValidated, setPhraseValidated] = useState(false);\n\n  // Phase 2: New credential\n  const [authMethod, setAuthMethod] = useState<ShareAAuthMethod>(defaultAuthMethod);\n  const [credential, setCredential] = useState('');\n  const [confirmCredential, setConfirmCredential] = useState('');\n  const [credentialError, setCredentialError] = useState<string | null>(null);\n\n  // Handle phrase submission (phase 1 complete)\n  const handlePhraseSubmit = useCallback((submittedWords: string[]) => {\n    setWords(submittedWords);\n    setPhraseValidated(true);\n  }, []);\n\n  // Handle credential submission (phase 2 complete)\n  const handleCredentialSubmit = useCallback(\n    async (e: FormEvent) => {\n      e.preventDefault();\n      setCredentialError(null);\n\n      // Passkey doesn't need confirmation\n      if (authMethod !== 'passkey') {\n        if (credential !== confirmCredential) {\n          setCredentialError('Passwords do not match');\n          return;\n        }\n\n        if (authMethod === 'password' && credential.length < 8) {\n          setCredentialError('Password must be at least 8 characters');\n          return;\n        }\n      }\n\n      await startRecovery(words, authMethod, credential);\n    },\n    [words, authMethod, credential, confirmCredential, startRecovery]\n  );\n\n  // Handle cancel\n  const handleCancel = useCallback(() => {\n    cancel();\n    setWords([]);\n    setPhraseValidated(false);\n    setCredential('');\n    setConfirmCredential('');\n    onCancel?.();\n  }, [cancel, onCancel]);\n\n  // Handle back to phrase entry\n  const handleBack = useCallback(() => {\n    setPhraseValidated(false);\n    setCredential('');\n    setConfirmCredential('');\n  }, []);\n\n  // Handle completion\n  const handleComplete = useCallback(() => {\n    onComplete?.();\n  }, [onComplete]);\n\n  // Render based on state\n  if (state.step === 'validating' || state.step === 'encrypting' || state.step === 'uploading') {\n    return (\n      <div className={`cedros-wallet-recovery ${className}`}>\n        <div className=\"cedros-wallet-recovery-progress\">\n          <div className=\"cedros-wallet-recovery-icon\">\n            <LoadingSpinner />\n          </div>\n          <h3 className=\"cedros-wallet-recovery-title\">\n            {state.step === 'validating' && 'Validating Recovery Phrase'}\n            {state.step === 'encrypting' && 'Encrypting Wallet'}\n            {state.step === 'uploading' && 'Saving to Server'}\n          </h3>\n          <p className=\"cedros-wallet-recovery-description\">\n            {state.step === 'validating' && 'Checking your recovery phrase...'}\n            {state.step === 'encrypting' && 'Securing your wallet with new encryption...'}\n            {state.step === 'uploading' && 'Uploading encrypted wallet data...'}\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  if (state.step === 'complete') {\n    return (\n      <div className={`cedros-wallet-recovery ${className}`}>\n        <div className=\"cedros-wallet-recovery-success\">\n          <div className=\"cedros-wallet-recovery-icon\">\n            <SuccessIcon />\n          </div>\n          <h3 className=\"cedros-wallet-recovery-title\">Wallet Recovered</h3>\n          <p className=\"cedros-wallet-recovery-description\">\n            Your wallet has been successfully recovered and secured with your new{' '}\n            {authMethod === 'passkey' ? 'passkey' : 'password'}.\n          </p>\n          <div className=\"cedros-wallet-recovery-actions\">\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-primary\"\n              onClick={handleComplete}\n            >\n              Done\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (state.step === 'error') {\n    return (\n      <div className={`cedros-wallet-recovery ${className}`}>\n        <div className=\"cedros-wallet-recovery-error\">\n          <div className=\"cedros-wallet-recovery-icon\">\n            <ErrorIcon />\n          </div>\n          <h3 className=\"cedros-wallet-recovery-title\">Recovery Failed</h3>\n          <p className=\"cedros-wallet-recovery-description\">\n            {state.error ?? 'An error occurred during recovery. Please try again.'}\n          </p>\n          <div className=\"cedros-wallet-recovery-actions\">\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-primary\"\n              onClick={handleCancel}\n            >\n              Start Over\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Phase 1: Enter recovery phrase\n  if (!phraseValidated) {\n    return (\n      <div className={`cedros-wallet-recovery ${className}`}>\n        <div className=\"cedros-wallet-recovery-phrase\">\n          <div className=\"cedros-wallet-recovery-header\">\n            <h3 className=\"cedros-wallet-recovery-title\">Recover Your Wallet</h3>\n            <p className=\"cedros-wallet-recovery-description\">\n              Enter your 12-word recovery phrase to restore your wallet.\n            </p>\n          </div>\n\n          <RecoveryPhraseInput\n            onSubmit={handlePhraseSubmit}\n            onCancel={handleCancel}\n            isSubmitting={false}\n          />\n        </div>\n      </div>\n    );\n  }\n\n  // Phase 2: Enter new credential\n  return (\n    <div className={`cedros-wallet-recovery ${className}`}>\n      <form className=\"cedros-wallet-recovery-credential\" onSubmit={handleCredentialSubmit}>\n        <div className=\"cedros-wallet-recovery-header\">\n          <h3 className=\"cedros-wallet-recovery-title\">Set New Security</h3>\n          <p className=\"cedros-wallet-recovery-description\">\n            Choose how to secure your recovered wallet.\n          </p>\n        </div>\n\n        {/* Auth method selector */}\n        <div className=\"cedros-auth-method-selector\">\n          <label className=\"cedros-radio-label\">\n            <input\n              type=\"radio\"\n              name=\"authMethod\"\n              value=\"password\"\n              checked={authMethod === 'password'}\n              onChange={() => setAuthMethod('password')}\n              disabled={isRecovering}\n            />\n            <span>Password</span>\n          </label>\n          <label className=\"cedros-radio-label\">\n            <input\n              type=\"radio\"\n              name=\"authMethod\"\n              value=\"passkey\"\n              checked={authMethod === 'passkey'}\n              onChange={() => setAuthMethod('passkey')}\n              disabled={isRecovering}\n            />\n            <span>Passkey</span>\n          </label>\n        </div>\n\n        {/* Password input */}\n        {authMethod === 'password' && (\n          <>\n            <div className=\"cedros-password-input\">\n              <label htmlFor=\"recovery-password\" className=\"cedros-label\">\n                New Password\n              </label>\n              <input\n                id=\"recovery-password\"\n                type=\"password\"\n                className=\"cedros-input\"\n                value={credential}\n                onChange={(e) => setCredential(e.target.value)}\n                disabled={isRecovering}\n                minLength={8}\n                placeholder=\"Enter a strong password\"\n              />\n            </div>\n            <div className=\"cedros-password-input\">\n              <label htmlFor=\"recovery-password-confirm\" className=\"cedros-label\">\n                Confirm Password\n              </label>\n              <input\n                id=\"recovery-password-confirm\"\n                type=\"password\"\n                className=\"cedros-input\"\n                value={confirmCredential}\n                onChange={(e) => setConfirmCredential(e.target.value)}\n                disabled={isRecovering}\n                aria-invalid={credentialError ? 'true' : undefined}\n                placeholder=\"Confirm your password\"\n              />\n              {credentialError && (\n                <p className=\"cedros-input-error\" role=\"alert\">\n                  {credentialError}\n                </p>\n              )}\n            </div>\n          </>\n        )}\n\n        {/* Passkey info */}\n        {authMethod === 'passkey' && (\n          <div className=\"cedros-passkey-info\">\n            <PasskeyIcon />\n            <p>Use your passkey (Touch ID, Face ID, or Windows Hello) to secure your wallet.</p>\n          </div>\n        )}\n\n        <div className=\"cedros-wallet-recovery-actions\">\n          <button\n            type=\"button\"\n            className=\"cedros-button cedros-button-secondary\"\n            onClick={handleBack}\n            disabled={isRecovering}\n          >\n            Back\n          </button>\n          <button\n            type=\"submit\"\n            className=\"cedros-button cedros-button-primary\"\n            disabled={\n              isRecovering ||\n              (authMethod !== 'passkey' &&\n                (credential.length === 0 || confirmCredential.length === 0))\n            }\n          >\n            {isRecovering ? 'Recovering...' : 'Recover Wallet'}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n\n// Icon components\nfunction LoadingSpinner() {\n  return (\n    <svg\n      width=\"48\"\n      height=\"48\"\n      viewBox=\"0 0 48 48\"\n      fill=\"none\"\n      aria-hidden=\"true\"\n      className=\"cedros-spinner\"\n    >\n      <circle\n        cx=\"24\"\n        cy=\"24\"\n        r=\"20\"\n        stroke=\"var(--cedros-muted, #e5e7eb)\"\n        strokeWidth=\"3\"\n        fill=\"none\"\n      />\n      <path\n        d=\"M24 4a20 20 0 0 1 20 20\"\n        stroke=\"var(--cedros-primary, #6366f1)\"\n        strokeWidth=\"3\"\n        strokeLinecap=\"round\"\n        fill=\"none\"\n      />\n    </svg>\n  );\n}\n\nfunction SuccessIcon() {\n  return (\n    <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\" fill=\"none\" aria-hidden=\"true\">\n      <circle\n        cx=\"24\"\n        cy=\"24\"\n        r=\"20\"\n        stroke=\"var(--cedros-success, #22c55e)\"\n        strokeWidth=\"2\"\n        fill=\"var(--cedros-success-light, #dcfce7)\"\n      />\n      <path\n        d=\"M16 24l6 6 10-10\"\n        stroke=\"var(--cedros-success, #22c55e)\"\n        strokeWidth=\"3\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        fill=\"none\"\n      />\n    </svg>\n  );\n}\n\nfunction ErrorIcon() {\n  return (\n    <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\" fill=\"none\" aria-hidden=\"true\">\n      <circle\n        cx=\"24\"\n        cy=\"24\"\n        r=\"20\"\n        stroke=\"var(--cedros-destructive, #ef4444)\"\n        strokeWidth=\"2\"\n        fill=\"var(--cedros-destructive-light, #fee2e2)\"\n      />\n      <path\n        d=\"M24 16v10M24 30v2\"\n        stroke=\"var(--cedros-destructive, #ef4444)\"\n        strokeWidth=\"3\"\n        strokeLinecap=\"round\"\n      />\n    </svg>\n  );\n}\n\nfunction PasskeyIcon() {\n  return (\n    <svg\n      className=\"cedros-passkey-icon\"\n      width=\"48\"\n      height=\"48\"\n      viewBox=\"0 0 48 48\"\n      fill=\"none\"\n      aria-hidden=\"true\"\n    >\n      <rect x=\"8\" y=\"16\" width=\"32\" height=\"24\" rx=\"4\" stroke=\"currentColor\" strokeWidth=\"2\" />\n      <circle cx=\"24\" cy=\"28\" r=\"4\" stroke=\"currentColor\" strokeWidth=\"2\" />\n      <path d=\"M24 32v4\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" />\n    </svg>\n  );\n}\n","import { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { useCedrosLoginOptional } from '../../context/useCedrosLogin';\n\nexport interface WalletAddressRowProps {\n  address: string;\n  label?: string;\n  showCopy?: boolean;\n  showExplorerLink?: boolean;\n  /** If address is long, show a truncated preview with a reveal toggle. */\n  allowReveal?: boolean;\n  className?: string;\n}\n\nexport function WalletAddressRow({\n  address,\n  label = 'Wallet Address',\n  showCopy = true,\n  showExplorerLink = true,\n  allowReveal = true,\n  className = '',\n}: WalletAddressRowProps) {\n  const context = useCedrosLoginOptional();\n  const [copied, setCopied] = useState(false);\n  const [copyError, setCopyError] = useState<string | null>(null);\n  const [revealFull, setRevealFull] = useState(false);\n  const copyTimerRef = useRef<number | null>(null);\n\n  const network = context?.config.solana?.network ?? 'mainnet-beta';\n  const explorerHref = useMemo(() => {\n    const base = `https://explorer.solana.com/address/${address}`;\n    if (network === 'mainnet-beta') return base;\n    return `${base}?cluster=${encodeURIComponent(network)}`;\n  }, [address, network]);\n\n  const isTruncatable = allowReveal && address.length > 18;\n\n  const displayAddress = useMemo(() => {\n    if (!isTruncatable || revealFull) return address;\n    return `${address.slice(0, 8)}...${address.slice(-8)}`;\n  }, [address, isTruncatable, revealFull]);\n\n  const handleCopy = useCallback(async () => {\n    try {\n      setCopyError(null);\n      await navigator.clipboard.writeText(address);\n      setCopied(true);\n\n      if (copyTimerRef.current !== null) {\n        window.clearTimeout(copyTimerRef.current);\n      }\n      copyTimerRef.current = window.setTimeout(() => {\n        setCopied(false);\n        copyTimerRef.current = null;\n      }, 2000);\n    } catch (err) {\n      setCopied(false);\n      setCopyError(err instanceof Error ? err.message : 'Copy failed');\n    }\n  }, [address]);\n\n  useEffect(() => {\n    return () => {\n      if (copyTimerRef.current !== null) {\n        window.clearTimeout(copyTimerRef.current);\n        copyTimerRef.current = null;\n      }\n    };\n  }, []);\n\n  return (\n    <div className={`cedros-wallet-address-row ${className}`}>\n      <div className=\"cedros-wallet-address-row-header\">\n        <span className=\"cedros-wallet-status-pubkey-label\">{label}</span>\n        <div className=\"cedros-wallet-address-row-actions\">\n          {isTruncatable && (\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-sm cedros-button-ghost\"\n              onClick={() => setRevealFull((v) => !v)}\n              aria-label={revealFull ? 'Hide full wallet address' : 'Show full wallet address'}\n            >\n              {revealFull ? (\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\">\n                  <path\n                    d=\"M3 3l18 18\"\n                    stroke=\"currentColor\"\n                    strokeWidth=\"2\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                  />\n                  <path\n                    d=\"M10.7 10.7a3 3 0 0 0 4.24 4.24\"\n                    stroke=\"currentColor\"\n                    strokeWidth=\"2\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                  />\n                  <path\n                    d=\"M9.88 5.09A10.94 10.94 0 0 1 12 5c5 0 9.27 3.11 11 7-0.55 1.23-1.32 2.33-2.27 3.25\"\n                    stroke=\"currentColor\"\n                    strokeWidth=\"2\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                  />\n                  <path\n                    d=\"M6.61 6.61C4.4 7.9 2.74 9.8 1 12c1.73 3.89 6 7 11 7 1.14 0 2.25-0.16 3.3-0.46\"\n                    stroke=\"currentColor\"\n                    strokeWidth=\"2\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                  />\n                </svg>\n              ) : (\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\">\n                  <path\n                    d=\"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12Z\"\n                    stroke=\"currentColor\"\n                    strokeWidth=\"2\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                  />\n                  <path\n                    d=\"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z\"\n                    stroke=\"currentColor\"\n                    strokeWidth=\"2\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                  />\n                </svg>\n              )}\n            </button>\n          )}\n          {showExplorerLink && (\n            <a\n              className=\"cedros-button cedros-button-sm cedros-button-ghost\"\n              href={explorerHref}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n            >\n              Explorer\n            </a>\n          )}\n          {showCopy && (\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-sm cedros-button-outline\"\n              onClick={handleCopy}\n              aria-label=\"Copy wallet address\"\n            >\n              {copied ? 'Copied' : 'Copy'}\n            </button>\n          )}\n        </div>\n      </div>\n      <code className=\"cedros-wallet-status-pubkey-value\" title={address}>\n        {displayAddress}\n      </code>\n      {copyError && (\n        <p className=\"cedros-input-hint\" role=\"status\">\n          {copyError}\n        </p>\n      )}\n    </div>\n  );\n}\n","/**\n * Wallet status indicator component\n *\n * Displays the current state of the user's wallet:\n * - Loading: Checking wallet status\n * - Not enrolled: No wallet created yet\n * - Enrolled (locked): Wallet exists but needs unlock\n * - Enrolled (unlocked): Wallet ready for transactions\n * - Error: Something went wrong\n *\n * Supports two modes:\n * - Uncontrolled (default): Gets status from useWallet() hook\n * - Controlled: Accepts status/publicKey props (useful for stories/demos)\n */\n\nimport { useWallet } from '../../hooks/useWallet';\nimport type { WalletStatus as WalletStatusType } from '../../types/wallet';\nimport { WalletAddressRow } from './WalletAddressRow';\n\nexport interface WalletStatusProps {\n  /** Controlled mode: Override wallet status (for demos/stories) */\n  status?: WalletStatusType;\n  /** Controlled mode: Override public key display */\n  publicKey?: string;\n  /** Controlled mode: Override lock state */\n  onLock?: () => void;\n  /** Callback when user wants to create a wallet */\n  onEnroll?: () => void;\n  /** Callback when user wants to unlock wallet */\n  onUnlock?: () => void;\n  /** Callback when user wants to recover wallet */\n  onRecover?: () => void;\n  /** Whether to show action buttons */\n  showActions?: boolean;\n  /** Compact display mode */\n  compact?: boolean;\n  /** Additional CSS classes */\n  className?: string;\n}\n\n/**\n * Wallet status indicator\n *\n * Shows current wallet state with optional action buttons.\n * Pass `status` prop to use in controlled mode (bypasses hook).\n */\nexport function WalletStatus({\n  status: controlledStatus,\n  publicKey: controlledPubkey,\n  onLock: _onLock,\n  onEnroll,\n  onUnlock,\n  onRecover,\n  showActions = true,\n  compact = false,\n  className = '',\n}: WalletStatusProps) {\n  // onLock reserved for future use\n  void _onLock;\n  // Use controlled mode if status prop is provided, otherwise use hook\n  const isControlled = controlledStatus !== undefined;\n  const wallet = useWallet();\n\n  const status = isControlled ? controlledStatus : wallet.status;\n  const solanaPubkey = isControlled ? (controlledPubkey ?? null) : wallet.solanaPubkey;\n  const error = isControlled ? null : wallet.error;\n  const refresh = isControlled ? () => {} : wallet.refresh;\n  const clearError = isControlled ? () => {} : wallet.clearError;\n\n  const statusConfig = getStatusConfig(status, error);\n\n  if (compact) {\n    return (\n      <div className={`cedros-wallet-status cedros-wallet-status-compact ${className}`}>\n        <span\n          className={`cedros-wallet-status-dot cedros-wallet-status-${statusConfig.color}`}\n          title={statusConfig.label}\n        />\n        <span className=\"cedros-wallet-status-label\">{statusConfig.label}</span>\n        {solanaPubkey && (\n          <span className=\"cedros-wallet-status-pubkey\" title={solanaPubkey}>\n            {truncatePubkey(solanaPubkey)}\n          </span>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className={`cedros-wallet-status ${className}`}>\n      <div className=\"cedros-wallet-status-header\">\n        <div\n          className={`cedros-wallet-status-icon cedros-wallet-status-icon-${statusConfig.color}`}\n        >\n          <StatusIcon status={status} />\n        </div>\n        <div className=\"cedros-wallet-status-info\">\n          <h4 className=\"cedros-wallet-status-title\">{statusConfig.title}</h4>\n          <p className=\"cedros-wallet-status-description\">{statusConfig.description}</p>\n        </div>\n      </div>\n\n      {solanaPubkey && (\n        <div className=\"cedros-wallet-status-pubkey-full\">\n          <WalletAddressRow address={solanaPubkey} />\n        </div>\n      )}\n\n      {error && (\n        <div className=\"cedros-wallet-status-error-box\" role=\"alert\">\n          <p>{error}</p>\n          <button\n            type=\"button\"\n            className=\"cedros-button cedros-button-sm cedros-button-secondary\"\n            onClick={clearError}\n          >\n            Dismiss\n          </button>\n        </div>\n      )}\n\n      {showActions && (\n        <div className=\"cedros-wallet-status-actions\">\n          {status === 'not_enrolled' && onEnroll && (\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-primary cedros-button-sm\"\n              onClick={onEnroll}\n            >\n              Create Wallet\n            </button>\n          )}\n\n          {status === 'enrolled_locked' && onUnlock && (\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-primary cedros-button-sm\"\n              onClick={onUnlock}\n            >\n              Unlock Wallet\n            </button>\n          )}\n\n          {(status === 'not_enrolled' || status === 'error') && onRecover && (\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-outline cedros-button-sm\"\n              onClick={onRecover}\n            >\n              Recover Wallet\n            </button>\n          )}\n\n          {status === 'error' && (\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-outline cedros-button-sm\"\n              onClick={refresh}\n            >\n              Retry\n            </button>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\ninterface StatusConfig {\n  label: string;\n  title: string;\n  description: string;\n  color: 'loading' | 'success' | 'warning' | 'error' | 'muted';\n}\n\nfunction getStatusConfig(status: WalletStatusType, error: string | null): StatusConfig {\n  switch (status) {\n    case 'loading':\n      return {\n        label: 'Loading',\n        title: 'Checking Wallet',\n        description: 'Verifying wallet status...',\n        color: 'loading',\n      };\n\n    case 'not_enrolled':\n      return {\n        label: 'Not Set Up',\n        title: 'No Wallet',\n        description: 'Create a wallet to start using Solana.',\n        color: 'muted',\n      };\n\n    case 'enrolled_locked':\n      return {\n        label: 'Locked',\n        title: 'Wallet Locked',\n        description: 'Unlock your wallet to sign transactions.',\n        color: 'warning',\n      };\n\n    case 'enrolled_unlocked':\n    case 'unlocked':\n      return {\n        label: 'Ready',\n        title: 'Wallet Ready',\n        description: 'Your wallet is unlocked and ready to use.',\n        color: 'success',\n      };\n\n    case 'error':\n    default:\n      return {\n        label: 'Error',\n        title: 'Wallet Error',\n        description: error ?? 'An error occurred with your wallet.',\n        color: 'error',\n      };\n  }\n}\n\nfunction truncatePubkey(pubkey: string): string {\n  if (pubkey.length <= 12) return pubkey;\n  return `${pubkey.slice(0, 4)}...${pubkey.slice(-4)}`;\n}\n\nfunction StatusIcon({ status }: { status: WalletStatusType }) {\n  switch (status) {\n    case 'loading':\n      return (\n        <svg viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\" className=\"cedros-spinner\">\n          <circle cx=\"12\" cy=\"12\" r=\"9\" stroke=\"currentColor\" strokeWidth=\"2\" opacity=\"0.25\" />\n          <path\n            d=\"M12 3a9 9 0 0 1 9 9\"\n            stroke=\"currentColor\"\n            strokeWidth=\"2\"\n            strokeLinecap=\"round\"\n          />\n        </svg>\n      );\n\n    case 'not_enrolled':\n      // Plus icon (add wallet)\n      return (\n        <svg\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n          aria-hidden=\"true\"\n        >\n          <circle cx=\"12\" cy=\"12\" r=\"10\" />\n          <path d=\"M8 12h8M12 8v8\" />\n        </svg>\n      );\n\n    case 'enrolled_locked':\n      // Lock icon\n      return (\n        <svg\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n          aria-hidden=\"true\"\n        >\n          <rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" ry=\"2\" />\n          <path d=\"M7 11V7a5 5 0 0 1 10 0v4\" />\n        </svg>\n      );\n\n    case 'enrolled_unlocked':\n    case 'unlocked':\n      // Check icon\n      return (\n        <svg\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2.5\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n          aria-hidden=\"true\"\n        >\n          <path d=\"M20 6L9 17l-5-5\" />\n        </svg>\n      );\n\n    case 'error':\n      // Alert triangle icon\n      return (\n        <svg\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n          aria-hidden=\"true\"\n        >\n          <path d=\"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3\" />\n          <path d=\"M12 9v4M12 17h.01\" />\n        </svg>\n      );\n\n    default:\n      return null;\n  }\n}\n","import { useCallback, useMemo, useState } from 'react';\nimport { useWallet } from '../../hooks/useWallet';\nimport { WalletEnrollment } from './WalletEnrollment';\nimport { WalletRecovery } from './WalletRecovery';\nimport { WalletStatus } from './WalletStatus';\nimport { WalletUnlock } from './WalletUnlock';\n\ntype WalletManagerView = 'status' | 'enroll' | 'unlock' | 'recover_intro' | 'recover';\n\nexport interface WalletManagerProps {\n  className?: string;\n  showActions?: boolean;\n}\n\n/**\n * Orchestrates embedded wallet flows in one cohesive surface:\n * status -> enroll/unlock/recover.\n */\nexport function WalletManager({ className = '', showActions = true }: WalletManagerProps) {\n  const wallet = useWallet();\n\n  const [view, setView] = useState<WalletManagerView>('status');\n\n  const header = useMemo(() => {\n    switch (view) {\n      case 'enroll':\n        return { title: 'Create Wallet', description: 'Set up your embedded wallet.' };\n      case 'unlock':\n        return { title: 'Unlock Wallet', description: 'Unlock to sign transactions.' };\n      case 'recover_intro':\n      case 'recover':\n        return {\n          title: 'Recover Wallet',\n          description: 'Restore access using your recovery phrase.',\n        };\n      case 'status':\n      default:\n        return null;\n    }\n  }, [view]);\n\n  const handleBackToStatus = useCallback(() => setView('status'), []);\n\n  const handleEnrollComplete = useCallback(async () => {\n    setView('status');\n    await wallet.refresh();\n  }, [wallet]);\n\n  const handleUnlockComplete = useCallback(async () => {\n    setView('status');\n    await wallet.refresh();\n  }, [wallet]);\n\n  const handleRecoverComplete = useCallback(async () => {\n    setView('status');\n    await wallet.refresh();\n  }, [wallet]);\n\n  return (\n    <div className={`cedros-wallet-manager ${className}`}>\n      {view !== 'status' && header && (\n        <div className=\"cedros-wallet-manager-header\">\n          <div className=\"cedros-wallet-manager-header-text\">\n            <h3 className=\"cedros-wallet-manager-title\">{header.title}</h3>\n            <p className=\"cedros-wallet-manager-subtitle\">{header.description}</p>\n          </div>\n          <button\n            type=\"button\"\n            className=\"cedros-button cedros-button-sm cedros-button-ghost\"\n            onClick={handleBackToStatus}\n          >\n            Back\n          </button>\n        </div>\n      )}\n\n      {view === 'status' && (\n        <WalletStatus\n          onEnroll={() => setView('enroll')}\n          onUnlock={() => setView('unlock')}\n          onRecover={() => setView('recover_intro')}\n          showActions={showActions}\n        />\n      )}\n\n      {view === 'enroll' && (\n        <WalletEnrollment\n          onComplete={() => {\n            void handleEnrollComplete();\n          }}\n          onCancel={handleBackToStatus}\n        />\n      )}\n\n      {view === 'unlock' && (\n        <WalletUnlock\n          onUnlock={() => {\n            void handleUnlockComplete();\n          }}\n          onCancel={handleBackToStatus}\n        />\n      )}\n\n      {view === 'recover_intro' && (\n        <div className=\"cedros-wallet-manager-intro\">\n          <div className=\"cedros-wallet-manager-intro-card\">\n            <h4 className=\"cedros-wallet-manager-intro-title\">Before you start</h4>\n            <ul className=\"cedros-wallet-manager-intro-list\">\n              <li>Youll need your 12-word recovery phrase.</li>\n              <li>Youll set a new password or passkey for this wallet.</li>\n              <li>If youre on a shared device, avoid copying the phrase into other apps.</li>\n            </ul>\n            <div className=\"cedros-wallet-manager-intro-actions\">\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-primary\"\n                onClick={() => setView('recover')}\n              >\n                Start recovery\n              </button>\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-secondary\"\n                onClick={handleBackToStatus}\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {view === 'recover' && (\n        <WalletRecovery\n          onComplete={() => {\n            void handleRecoverComplete();\n          }}\n          onCancel={handleBackToStatus}\n        />\n      )}\n    </div>\n  );\n}\n","import type {\n  ListSystemSettingsResponse,\n  UpdateSettingRequest,\n  UpdateSystemSettingsResponse,\n} from '../types';\nimport { ApiClient, handleApiError } from './apiClient';\n\n/**\n * API client for system settings operations (admin only)\n */\nexport class SystemSettingsApiClient {\n  private client: ApiClient;\n\n  constructor(\n    baseUrl: string,\n    timeoutMs?: number,\n    retryAttempts?: number,\n    getAccessToken?: () => string | null\n  ) {\n    this.client = new ApiClient({ baseUrl, timeoutMs, retryAttempts, getAccessToken });\n  }\n\n  /**\n   * Get all system settings grouped by category\n   * Requires system admin privileges\n   */\n  async getSettings(): Promise<ListSystemSettingsResponse> {\n    try {\n      return await this.client.get<ListSystemSettingsResponse>('/admin/settings');\n    } catch (error) {\n      throw handleApiError(error, 'Failed to fetch system settings');\n    }\n  }\n\n  /**\n   * Update one or more system settings\n   * Requires system admin privileges\n   */\n  async updateSettings(settings: UpdateSettingRequest[]): Promise<UpdateSystemSettingsResponse> {\n    try {\n      return await this.client.patch<UpdateSystemSettingsResponse>('/admin/settings', {\n        settings,\n      });\n    } catch (error) {\n      throw handleApiError(error, 'Failed to update system settings');\n    }\n  }\n}\n","import { useState, useCallback, useMemo, useRef } from 'react';\nimport type { SystemSetting, UpdateSettingRequest, UseSystemSettingsReturn } from '../types';\nimport { useCedrosLogin } from '../context/useCedrosLogin';\nimport { SystemSettingsApiClient } from '../utils/systemSettingsApi';\n\n/**\n * Hook for managing system settings (admin only).\n *\n * Provides CRUD operations for system-wide configuration settings\n * stored in the database. Only accessible to system administrators.\n *\n * @example\n * ```tsx\n * function SystemSettingsPanel() {\n *   const {\n *     settings,\n *     isLoading,\n *     error,\n *     fetchSettings,\n *     updateSettings,\n *     getValue,\n *   } = useSystemSettings();\n *\n *   useEffect(() => {\n *     fetchSettings();\n *   }, [fetchSettings]);\n *\n *   const handleSave = async () => {\n *     await updateSettings([\n *       { key: 'privacy_period_secs', value: '1209600' },\n *     ]);\n *   };\n *\n *   return (\n *     <div>\n *       {Object.entries(settings).map(([category, items]) => (\n *         <section key={category}>\n *           <h3>{category}</h3>\n *           {items.map(item => (\n *             <div key={item.key}>\n *               {item.key}: {item.value}\n *             </div>\n *           ))}\n *         </section>\n *       ))}\n *     </div>\n *   );\n * }\n * ```\n */\nexport function useSystemSettings(): UseSystemSettingsReturn {\n  const { config, authState, _internal } = useCedrosLogin();\n\n  const [settings, setSettings] = useState<Record<string, SystemSetting[]>>({});\n  const [isLoading, setIsLoading] = useState(false);\n  const [isUpdating, setIsUpdating] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n  const requestIdRef = useRef(0);\n\n  const apiClient = useMemo(\n    () =>\n      new SystemSettingsApiClient(\n        config.serverUrl,\n        config.requestTimeout,\n        config.retryAttempts,\n        _internal?.getAccessToken\n      ),\n    [config.serverUrl, config.requestTimeout, config.retryAttempts, _internal]\n  );\n\n  // Use ref to avoid apiClient in callback dependencies\n  const apiClientRef = useRef(apiClient);\n  apiClientRef.current = apiClient;\n\n  const fetchSettings = useCallback(async () => {\n    if (authState !== 'authenticated') {\n      setSettings({});\n      return;\n    }\n\n    setIsLoading(true);\n    setError(null);\n    const requestId = ++requestIdRef.current;\n\n    try {\n      const response = await apiClientRef.current.getSettings();\n      if (requestId !== requestIdRef.current) return;\n      setSettings(response.settings);\n    } catch (err) {\n      if (requestId !== requestIdRef.current) return;\n      setError(err instanceof Error ? err : new Error('Failed to fetch settings'));\n    } finally {\n      if (requestId === requestIdRef.current) {\n        setIsLoading(false);\n      }\n    }\n  }, [authState]);\n\n  const updateSettings = useCallback(\n    async (updates: UpdateSettingRequest[]): Promise<void> => {\n      if (authState !== 'authenticated') {\n        throw new Error('Not authenticated');\n      }\n\n      setIsUpdating(true);\n      setError(null);\n\n      try {\n        await apiClientRef.current.updateSettings(updates);\n        // Refresh settings after update\n        await fetchSettings();\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error('Failed to update settings');\n        setError(error);\n        throw error;\n      } finally {\n        setIsUpdating(false);\n      }\n    },\n    [authState, fetchSettings]\n  );\n\n  const getValue = useCallback(\n    (key: string): string | undefined => {\n      for (const categorySettings of Object.values(settings)) {\n        const found = categorySettings.find((s) => s.key === key);\n        if (found) return found.value;\n      }\n      return undefined;\n    },\n    [settings]\n  );\n\n  return {\n    settings,\n    isLoading,\n    isUpdating,\n    error,\n    fetchSettings,\n    updateSettings,\n    getValue,\n  };\n}\n","import { useState, useCallback, useEffect, useMemo } from 'react';\nimport type { SystemSetting, UpdateSettingRequest, SettingMeta } from '../../types';\nimport { LoadingSpinner } from '../shared/LoadingSpinner';\nimport { ErrorMessage } from '../shared/ErrorMessage';\nimport { useSystemSettings } from '../../hooks/useSystemSettings';\n\n// =============================================================================\n// DURATION UTILITIES\n// =============================================================================\n\ninterface DurationParts {\n  days: number;\n  hours: number;\n  minutes: number;\n  seconds: number;\n}\n\nfunction secondsToDuration(totalSeconds: number): DurationParts {\n  const days = Math.floor(totalSeconds / 86400);\n  const hours = Math.floor((totalSeconds % 86400) / 3600);\n  const minutes = Math.floor((totalSeconds % 3600) / 60);\n  const seconds = totalSeconds % 60;\n  return { days, hours, minutes, seconds };\n}\n\nfunction formatDuration(totalSeconds: number): string {\n  const { days, hours, minutes } = secondsToDuration(totalSeconds);\n  const parts: string[] = [];\n  if (days > 0) parts.push(`${days}d`);\n  if (hours > 0) parts.push(`${hours}h`);\n  if (minutes > 0) parts.push(`${minutes}m`);\n  if (parts.length === 0) parts.push(`${totalSeconds}s`);\n  return parts.join(' ');\n}\n\n// =============================================================================\n// SETTING METADATA - Rich descriptions and input configuration\n// =============================================================================\n\nconst SETTING_METADATA: Record<string, SettingMeta> = {\n  // Privacy settings\n  privacy_period_secs: {\n    key: 'privacy_period_secs',\n    label: 'Privacy Period',\n    description:\n      'How long deposits are held before withdrawal to provide timing privacy. Longer periods provide better privacy but delay user access to funds.',\n    inputType: 'duration',\n    min: 0,\n    presets: [\n      { label: 'Disabled', value: '0' },\n      { label: '1 hour', value: '3600' },\n      { label: '6 hours', value: '21600' },\n      { label: '24 hours', value: '86400' },\n      { label: '7 days', value: '604800' },\n      { label: '14 days', value: '1209600' },\n      { label: '30 days', value: '2592000' },\n    ],\n    warningThreshold: {\n      below: 3600,\n      message: 'Very short privacy periods may not provide adequate timing protection.',\n    },\n  },\n\n  // Withdrawal worker settings\n  withdrawal_poll_interval_secs: {\n    key: 'withdrawal_poll_interval_secs',\n    label: 'Worker Poll Interval',\n    description:\n      'How often the withdrawal worker checks for deposits ready to process. Lower values process faster but increase server load.',\n    inputType: 'duration',\n    min: 60,\n    presets: [\n      { label: '1 minute', value: '60' },\n      { label: '5 minutes', value: '300' },\n      { label: '15 minutes', value: '900' },\n      { label: '1 hour', value: '3600' },\n      { label: '6 hours', value: '21600' },\n    ],\n    warningThreshold: {\n      below: 60,\n      message: 'Polling more than once per minute may cause excessive load.',\n    },\n  },\n  withdrawal_batch_size: {\n    key: 'withdrawal_batch_size',\n    label: 'Batch Size',\n    description:\n      'Maximum number of withdrawals to process in a single batch. Higher values improve throughput but may cause timeouts.',\n    inputType: 'select',\n    min: 1,\n    max: 100,\n    presets: [\n      { label: '1 (Sequential)', value: '1' },\n      { label: '5', value: '5' },\n      { label: '10 (Recommended)', value: '10' },\n      { label: '25', value: '25' },\n      { label: '50', value: '50' },\n      { label: '100 (Max)', value: '100' },\n    ],\n  },\n  withdrawal_timeout_secs: {\n    key: 'withdrawal_timeout_secs',\n    label: 'Transaction Timeout',\n    description:\n      'How long to wait for a withdrawal transaction to confirm before considering it failed.',\n    inputType: 'duration',\n    min: 30,\n    presets: [\n      { label: '30 seconds', value: '30' },\n      { label: '1 minute', value: '60' },\n      { label: '2 minutes', value: '120' },\n      { label: '5 minutes', value: '300' },\n    ],\n    warningThreshold: {\n      below: 30,\n      message: 'Very short timeouts may cause premature failure on slow networks.',\n    },\n  },\n  withdrawal_max_retries: {\n    key: 'withdrawal_max_retries',\n    label: 'Max Retries',\n    description:\n      'Number of times to retry a failed withdrawal before marking it as permanently failed.',\n    inputType: 'select',\n    min: 0,\n    max: 10,\n    presets: [\n      { label: '0 (No retries)', value: '0' },\n      { label: '1', value: '1' },\n      { label: '3 (Recommended)', value: '3' },\n      { label: '5', value: '5' },\n      { label: '10', value: '10' },\n    ],\n  },\n  withdrawal_percentage: {\n    key: 'withdrawal_percentage',\n    label: 'Withdrawal Percentage',\n    description:\n      'Percentage of ready funds to withdraw each cycle. Lower values spread withdrawals over time for better privacy.',\n    inputType: 'percentage',\n    min: 1,\n    max: 100,\n    step: 5,\n    presets: [\n      { label: '25%', value: '25' },\n      { label: '50%', value: '50' },\n      { label: '75%', value: '75' },\n      { label: '100% (All at once)', value: '100' },\n    ],\n    warningThreshold: {\n      above: 75,\n      message:\n        'High percentages may reduce timing privacy by processing most withdrawals together.',\n    },\n  },\n  partial_withdrawal_count: {\n    key: 'partial_withdrawal_count',\n    label: 'Partial Withdrawals',\n    description:\n      'Maximum partial withdrawals per batch. Partial withdrawals add noise to timing analysis. Set to 0 to disable.',\n    inputType: 'select',\n    min: 0,\n    presets: [\n      { label: 'Disabled', value: '0' },\n      { label: '1', value: '1' },\n      { label: '3', value: '3' },\n      { label: '5', value: '5' },\n      { label: '10', value: '10' },\n    ],\n  },\n  partial_withdrawal_min_lamports: {\n    key: 'partial_withdrawal_min_lamports',\n    label: 'Min Balance for Partial',\n    description:\n      'Minimum account balance (in lamports) required before partial withdrawals are considered. 1 SOL = 1,000,000,000 lamports.',\n    inputType: 'select',\n    min: 0,\n    presets: [\n      { label: '0.1 SOL', value: '100000000' },\n      { label: '0.5 SOL', value: '500000000' },\n      { label: '1 SOL', value: '1000000000' },\n      { label: '5 SOL', value: '5000000000' },\n      { label: '10 SOL', value: '10000000000' },\n    ],\n  },\n\n  // Rate limit settings\n  rate_limit_auth: {\n    key: 'rate_limit_auth',\n    label: 'Auth Request Limit',\n    description:\n      'Maximum authentication attempts (login, register, password reset) per IP per window. Protects against brute force attacks.',\n    inputType: 'select',\n    min: 1,\n    unit: 'requests',\n    presets: [\n      { label: '5 (Strict)', value: '5' },\n      { label: '10 (Recommended)', value: '10' },\n      { label: '20', value: '20' },\n      { label: '50 (Permissive)', value: '50' },\n    ],\n    warningThreshold: {\n      above: 20,\n      message: 'High auth limits may allow brute force attempts.',\n    },\n  },\n  rate_limit_general: {\n    key: 'rate_limit_general',\n    label: 'General Request Limit',\n    description: 'Maximum general API requests per IP per window. Affects all non-auth endpoints.',\n    inputType: 'select',\n    min: 1,\n    unit: 'requests',\n    presets: [\n      { label: '30', value: '30' },\n      { label: '60 (Recommended)', value: '60' },\n      { label: '120', value: '120' },\n      { label: '300', value: '300' },\n    ],\n  },\n  rate_limit_credit: {\n    key: 'rate_limit_credit',\n    label: 'Credit Request Limit',\n    description:\n      'Maximum credit/balance check requests per IP per window. Higher for apps that poll balance frequently.',\n    inputType: 'select',\n    min: 1,\n    unit: 'requests',\n    presets: [\n      { label: '10', value: '10' },\n      { label: '30 (Recommended)', value: '30' },\n      { label: '60', value: '60' },\n      { label: '120', value: '120' },\n    ],\n  },\n  rate_limit_window: {\n    key: 'rate_limit_window',\n    label: 'Rate Limit Window',\n    description:\n      'Time window for rate limiting. All limits above are \"per window\". Shorter windows are stricter.',\n    inputType: 'duration',\n    min: 1,\n    presets: [\n      { label: '30 seconds', value: '30' },\n      { label: '1 minute', value: '60' },\n      { label: '5 minutes', value: '300' },\n      { label: '15 minutes', value: '900' },\n    ],\n  },\n\n  // Deposit settings\n  deposit_quick_action_tokens: {\n    key: 'deposit_quick_action_tokens',\n    label: 'Quick Action Tokens',\n    description:\n      'Comma-separated token symbols shown as quick action buttons. First token is the default.',\n    inputType: 'tokenSymbolList',\n  },\n  deposit_custom_tokens: {\n    key: 'deposit_custom_tokens',\n    label: 'Custom Dropdown Tokens',\n    description:\n      'Comma-separated token symbols shown in the \"Custom\" dropdown. Leave empty to show all.',\n    inputType: 'tokenSymbolList',\n  },\n  deposit_custom_tokens_json: {\n    key: 'deposit_custom_tokens_json',\n    label: 'Custom Token Definitions',\n    description:\n      'Add tokens beyond the built-in list. Define symbol, mint address, decimals, and logo URL.',\n    inputType: 'tokenList',\n  },\n};\n\n/** Category display metadata */\nconst CATEGORY_METADATA: Record<string, { label: string; description: string; icon: string }> = {\n  privacy: {\n    label: 'Privacy Settings',\n    description:\n      'Control the privacy period for deposits. Longer periods provide better timing privacy but delay fund availability.',\n    icon: '',\n  },\n  withdrawal: {\n    label: 'Withdrawal Worker',\n    description:\n      'Configure how the automated withdrawal processor handles pending withdrawals. These settings affect throughput and privacy.',\n    icon: '',\n  },\n  rate_limit: {\n    label: 'Rate Limiting',\n    description:\n      'Protect the system from abuse by limiting request rates. Balance security with user experience.',\n    icon: '',\n  },\n  deposit: {\n    label: 'Deposit Settings',\n    description: 'Configure token lists and deposit flow display options.',\n    icon: '',\n  },\n};\n\n// =============================================================================\n// COMPONENT PROPS\n// =============================================================================\n\nexport interface SystemSettingsProps {\n  /** Whether to show section descriptions */\n  showDescriptions?: boolean;\n  /** Additional CSS class */\n  className?: string;\n  /** Callback when settings are saved */\n  onSave?: () => void;\n}\n\n// =============================================================================\n// MAIN COMPONENT\n// =============================================================================\n\n/**\n * System settings management component for administrators.\n *\n * Features:\n * - Duration inputs with human-readable display\n * - Percentage sliders\n * - Preset dropdown selectors\n * - Warning indicators for extreme values\n * - Rich descriptions for each setting\n */\nexport function SystemSettings({\n  showDescriptions = true,\n  className = '',\n  onSave,\n}: SystemSettingsProps) {\n  const { settings, isLoading, isUpdating, error, fetchSettings, updateSettings } =\n    useSystemSettings();\n\n  const [edits, setEdits] = useState<Record<string, string>>({});\n  const [saveError, setSaveError] = useState<string | null>(null);\n  const [saveSuccess, setSaveSuccess] = useState(false);\n\n  useEffect(() => {\n    fetchSettings();\n  }, [fetchSettings]);\n\n  // Clear success message after 3 seconds\n  useEffect(() => {\n    if (saveSuccess) {\n      const timer = setTimeout(() => setSaveSuccess(false), 3000);\n      return () => clearTimeout(timer);\n    }\n  }, [saveSuccess]);\n\n  const handleChange = useCallback((key: string, value: string) => {\n    setEdits((prev) => ({ ...prev, [key]: value }));\n    setSaveError(null);\n    setSaveSuccess(false);\n  }, []);\n\n  const handleSave = useCallback(async () => {\n    const updates: UpdateSettingRequest[] = Object.entries(edits).map(([key, value]) => ({\n      key,\n      value,\n    }));\n\n    if (updates.length === 0) return;\n\n    try {\n      await updateSettings(updates);\n      setEdits({});\n      setSaveError(null);\n      setSaveSuccess(true);\n      onSave?.();\n    } catch (err) {\n      setSaveError(err instanceof Error ? err.message : 'Failed to save settings');\n    }\n  }, [edits, updateSettings, onSave]);\n\n  const handleReset = useCallback(() => {\n    setEdits({});\n    setSaveError(null);\n    setSaveSuccess(false);\n  }, []);\n\n  const hasChanges = Object.keys(edits).length > 0;\n  const changeCount = Object.keys(edits).length;\n\n  if (isLoading && Object.keys(settings).length === 0) {\n    return (\n      <div className={`cedros-system-settings cedros-system-settings-loading ${className}`}>\n        <LoadingSpinner />\n        <span>Loading settings...</span>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className={`cedros-system-settings ${className}`}>\n        <ErrorMessage error={error.message} />\n      </div>\n    );\n  }\n\n  const categories = Object.keys(settings).sort();\n\n  if (categories.length === 0) {\n    return (\n      <div className={`cedros-system-settings cedros-system-settings-empty ${className}`}>\n        <p>No system settings found.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`cedros-system-settings ${className}`}>\n      {saveError && <ErrorMessage error={saveError} />}\n      {saveSuccess && <div className=\"cedros-settings-success\">Settings saved successfully.</div>}\n\n      {categories.map((category) => (\n        <SettingsSection\n          key={category}\n          category={category}\n          settings={settings[category]}\n          edits={edits}\n          showDescription={showDescriptions}\n          onChange={handleChange}\n        />\n      ))}\n\n      <div className=\"cedros-system-settings-actions\">\n        {hasChanges && (\n          <span className=\"cedros-settings-change-count\">\n            {changeCount} unsaved change{changeCount !== 1 ? 's' : ''}\n          </span>\n        )}\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-secondary\"\n          onClick={handleReset}\n          disabled={!hasChanges || isUpdating}\n        >\n          Reset\n        </button>\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-primary\"\n          onClick={handleSave}\n          disabled={!hasChanges || isUpdating}\n        >\n          {isUpdating ? <LoadingSpinner size=\"sm\" /> : 'Save Changes'}\n        </button>\n      </div>\n    </div>\n  );\n}\n\n// =============================================================================\n// SETTINGS SECTION\n// =============================================================================\n\ninterface SettingsSectionProps {\n  category: string;\n  settings: SystemSetting[];\n  edits: Record<string, string>;\n  showDescription: boolean;\n  onChange: (key: string, value: string) => void;\n}\n\nfunction SettingsSection({\n  category,\n  settings,\n  edits,\n  showDescription,\n  onChange,\n}: SettingsSectionProps) {\n  const meta = CATEGORY_METADATA[category] || {\n    label: category,\n    description: '',\n    icon: '',\n  };\n\n  return (\n    <section className=\"cedros-settings-section\">\n      <div className=\"cedros-settings-section-header\">\n        <span className=\"cedros-settings-section-icon\">{meta.icon}</span>\n        <div>\n          <h3 className=\"cedros-settings-section-title\">{meta.label}</h3>\n          {showDescription && meta.description && (\n            <p className=\"cedros-settings-section-description\">{meta.description}</p>\n          )}\n        </div>\n      </div>\n\n      <div className=\"cedros-settings-grid\">\n        {settings.map((setting) => (\n          <SettingRow\n            key={setting.key}\n            setting={setting}\n            editValue={edits[setting.key]}\n            onChange={onChange}\n          />\n        ))}\n      </div>\n    </section>\n  );\n}\n\n// =============================================================================\n// SETTING ROW\n// =============================================================================\n\ninterface SettingRowProps {\n  setting: SystemSetting;\n  editValue?: string;\n  onChange: (key: string, value: string) => void;\n}\n\nfunction SettingRow({ setting, editValue, onChange }: SettingRowProps) {\n  const meta = SETTING_METADATA[setting.key];\n  const currentValue = editValue ?? setting.value;\n  const hasChange = editValue !== undefined && editValue !== setting.value;\n\n  // Check for warnings\n  const warning = useMemo(() => {\n    if (!meta?.warningThreshold) return null;\n    const numValue = parseInt(currentValue, 10);\n    if (isNaN(numValue)) return null;\n    const { above, below, message } = meta.warningThreshold;\n    if (above !== undefined && numValue > above) return message;\n    if (below !== undefined && numValue < below) return message;\n    return null;\n  }, [currentValue, meta?.warningThreshold]);\n\n  if (!meta) {\n    // Fallback for unknown settings\n    return (\n      <div className={`cedros-setting-row ${hasChange ? 'cedros-setting-row-changed' : ''}`}>\n        <div className=\"cedros-setting-label\">\n          <span className=\"cedros-setting-name\">{setting.key}</span>\n          {setting.description && (\n            <span className=\"cedros-setting-description\">{setting.description}</span>\n          )}\n        </div>\n        <div className=\"cedros-setting-input-wrapper\">\n          <input\n            type=\"text\"\n            value={currentValue}\n            onChange={(e) => onChange(setting.key, e.target.value)}\n            className=\"cedros-setting-input\"\n          />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={`cedros-setting-row ${hasChange ? 'cedros-setting-row-changed' : ''} ${warning ? 'cedros-setting-row-warning' : ''}`}\n    >\n      <div className=\"cedros-setting-label\">\n        <span className=\"cedros-setting-name\">{meta.label}</span>\n        <span className=\"cedros-setting-description\">{meta.description}</span>\n      </div>\n\n      <div className=\"cedros-setting-control\">\n        {meta.inputType === 'duration' && (\n          <DurationInput\n            value={currentValue}\n            onChange={(value) => onChange(setting.key, value)}\n            presets={meta.presets}\n            min={meta.min}\n          />\n        )}\n\n        {meta.inputType === 'percentage' && (\n          <PercentageInput\n            value={currentValue}\n            onChange={(value) => onChange(setting.key, value)}\n            min={meta.min ?? 1}\n            max={meta.max ?? 100}\n            step={meta.step ?? 5}\n            presets={meta.presets}\n          />\n        )}\n\n        {meta.inputType === 'select' && (\n          <SelectInput\n            value={currentValue}\n            onChange={(value) => onChange(setting.key, value)}\n            presets={meta.presets ?? []}\n            unit={meta.unit}\n          />\n        )}\n\n        {meta.inputType === 'number' && (\n          <NumberInput\n            value={currentValue}\n            onChange={(value) => onChange(setting.key, value)}\n            min={meta.min}\n            max={meta.max}\n            unit={meta.unit}\n          />\n        )}\n\n        {meta.inputType === 'tokenList' && (\n          <TokenListInput value={currentValue} onChange={(value) => onChange(setting.key, value)} />\n        )}\n\n        {meta.inputType === 'text' && (\n          <input\n            type=\"text\"\n            value={currentValue}\n            onChange={(e) => onChange(setting.key, e.target.value)}\n            className=\"cedros-setting-input\"\n            placeholder={meta.label}\n          />\n        )}\n\n        {meta.inputType === 'tokenSymbolList' && (\n          <TokenSymbolListInput\n            value={currentValue}\n            onChange={(value) => onChange(setting.key, value)}\n          />\n        )}\n\n        {warning && <div className=\"cedros-setting-warning\">{warning}</div>}\n      </div>\n    </div>\n  );\n}\n\n// =============================================================================\n// INPUT COMPONENTS\n// =============================================================================\n\ninterface DurationInputProps {\n  value: string;\n  onChange: (value: string) => void;\n  presets?: { label: string; value: string }[];\n  min?: number;\n}\n\nfunction DurationInput({ value, onChange, presets, min = 0 }: DurationInputProps) {\n  const numValue = parseInt(value, 10) || 0;\n  const displayValue = formatDuration(numValue);\n\n  const handlePresetChange = useCallback(\n    (e: React.ChangeEvent<HTMLSelectElement>) => {\n      if (e.target.value) {\n        onChange(e.target.value);\n      }\n    },\n    [onChange]\n  );\n\n  const handleCustomChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const newValue = Math.max(min, parseInt(e.target.value, 10) || 0);\n      onChange(String(newValue));\n    },\n    [onChange, min]\n  );\n\n  return (\n    <div className=\"cedros-duration-input\">\n      {presets && presets.length > 0 && (\n        <select\n          value={presets.find((p) => p.value === value)?.value ?? ''}\n          onChange={handlePresetChange}\n          className=\"cedros-setting-select\"\n        >\n          <option value=\"\">Custom...</option>\n          {presets.map((preset) => (\n            <option key={preset.value} value={preset.value}>\n              {preset.label}\n            </option>\n          ))}\n        </select>\n      )}\n      <div className=\"cedros-duration-custom\">\n        <input\n          type=\"number\"\n          value={numValue}\n          onChange={handleCustomChange}\n          min={min}\n          className=\"cedros-setting-input cedros-setting-input-sm\"\n        />\n        <span className=\"cedros-setting-unit\">seconds</span>\n        <span className=\"cedros-duration-display\">= {displayValue}</span>\n      </div>\n    </div>\n  );\n}\n\ninterface PercentageInputProps {\n  value: string;\n  onChange: (value: string) => void;\n  min: number;\n  max: number;\n  step: number;\n  presets?: { label: string; value: string }[];\n}\n\nfunction PercentageInput({ value, onChange, min, max, step, presets }: PercentageInputProps) {\n  const numValue = parseInt(value, 10) || min;\n\n  const handleSliderChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      onChange(e.target.value);\n    },\n    [onChange]\n  );\n\n  const handlePresetClick = useCallback(\n    (presetValue: string) => {\n      onChange(presetValue);\n    },\n    [onChange]\n  );\n\n  return (\n    <div className=\"cedros-percentage-input\">\n      <div className=\"cedros-percentage-slider-row\">\n        <input\n          type=\"range\"\n          value={numValue}\n          onChange={handleSliderChange}\n          min={min}\n          max={max}\n          step={step}\n          className=\"cedros-percentage-slider\"\n        />\n        <span className=\"cedros-percentage-value\">{numValue}%</span>\n      </div>\n      {presets && presets.length > 0 && (\n        <div className=\"cedros-preset-buttons\">\n          {presets.map((preset) => (\n            <button\n              key={preset.value}\n              type=\"button\"\n              className={`cedros-preset-button ${preset.value === value ? 'cedros-preset-button-active' : ''}`}\n              onClick={() => handlePresetClick(preset.value)}\n            >\n              {preset.label}\n            </button>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\ninterface SelectInputProps {\n  value: string;\n  onChange: (value: string) => void;\n  presets: { label: string; value: string }[];\n  unit?: string;\n}\n\nfunction SelectInput({ value, onChange, presets, unit }: SelectInputProps) {\n  const isCustomValue = !presets.some((p) => p.value === value);\n\n  const handleSelectChange = useCallback(\n    (e: React.ChangeEvent<HTMLSelectElement>) => {\n      if (e.target.value !== '__custom__') {\n        onChange(e.target.value);\n      }\n    },\n    [onChange]\n  );\n\n  const handleCustomChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      onChange(e.target.value);\n    },\n    [onChange]\n  );\n\n  return (\n    <div className=\"cedros-select-input\">\n      <select\n        value={isCustomValue ? '__custom__' : value}\n        onChange={handleSelectChange}\n        className=\"cedros-setting-select\"\n      >\n        {presets.map((preset) => (\n          <option key={preset.value} value={preset.value}>\n            {preset.label}\n          </option>\n        ))}\n        <option value=\"__custom__\">Custom...</option>\n      </select>\n      {isCustomValue && (\n        <div className=\"cedros-select-custom\">\n          <input\n            type=\"number\"\n            value={value}\n            onChange={handleCustomChange}\n            className=\"cedros-setting-input cedros-setting-input-sm\"\n          />\n          {unit && <span className=\"cedros-setting-unit\">{unit}</span>}\n        </div>\n      )}\n    </div>\n  );\n}\n\ninterface NumberInputProps {\n  value: string;\n  onChange: (value: string) => void;\n  min?: number;\n  max?: number;\n  unit?: string;\n}\n\nfunction NumberInput({ value, onChange, min, max, unit }: NumberInputProps) {\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      onChange(e.target.value);\n    },\n    [onChange]\n  );\n\n  return (\n    <div className=\"cedros-number-input\">\n      <input\n        type=\"number\"\n        value={value}\n        onChange={handleChange}\n        min={min}\n        max={max}\n        className=\"cedros-setting-input\"\n      />\n      {unit && <span className=\"cedros-setting-unit\">{unit}</span>}\n    </div>\n  );\n}\n\n// =============================================================================\n// TOKEN LIST INPUT\n// =============================================================================\n\n/** Preset tokens that are always available without needing to be redefined */\nconst PRESET_TOKEN_SYMBOLS = [\n  'SOL',\n  'USDC',\n  'USDT',\n  'EURC',\n  'USD1',\n  'PYUSD',\n  'USDH',\n  'CASH',\n  'BONK',\n  'ORE',\n];\n\ninterface TokenDefinition {\n  symbol: string;\n  mint: string;\n  decimals: number;\n  logoUrl?: string;\n}\n\ninterface TokenListInputProps {\n  value: string;\n  onChange: (value: string) => void;\n}\n\nfunction TokenListInput({ value, onChange }: TokenListInputProps) {\n  const tokens: TokenDefinition[] = useMemo(() => {\n    try {\n      return JSON.parse(value || '[]');\n    } catch {\n      return [];\n    }\n  }, [value]);\n\n  const updateTokens = useCallback(\n    (updated: TokenDefinition[]) => {\n      onChange(JSON.stringify(updated));\n    },\n    [onChange]\n  );\n\n  const addToken = useCallback(() => {\n    updateTokens([...tokens, { symbol: '', mint: '', decimals: 6 }]);\n  }, [tokens, updateTokens]);\n\n  const updateToken = useCallback(\n    (index: number, field: keyof TokenDefinition, val: string | number | undefined) => {\n      const updated = [...tokens];\n      updated[index] = { ...updated[index], [field]: val };\n      updateTokens(updated);\n    },\n    [tokens, updateTokens]\n  );\n\n  const removeToken = useCallback(\n    (index: number) => {\n      updateTokens(tokens.filter((_, i) => i !== index));\n    },\n    [tokens, updateTokens]\n  );\n\n  return (\n    <div className=\"cedros-token-list-input\">\n      {/* Preset tokens info */}\n      <div className=\"cedros-token-presets\">\n        <span className=\"cedros-token-presets-label\">Built-in tokens:</span>\n        <div className=\"cedros-token-presets-list\">\n          {PRESET_TOKEN_SYMBOLS.map((symbol) => (\n            <span key={symbol} className=\"cedros-token-preset-chip\">\n              {symbol}\n            </span>\n          ))}\n        </div>\n      </div>\n\n      {tokens.length === 0 && (\n        <p className=\"cedros-token-list-empty\">\n          No custom tokens added. Use the built-in tokens above or add your own.\n        </p>\n      )}\n\n      {tokens.map((token, i) => (\n        <div key={i} className=\"cedros-token-row\">\n          <div className=\"cedros-token-row-fields\">\n            <input\n              type=\"text\"\n              placeholder=\"Symbol\"\n              value={token.symbol}\n              onChange={(e) => updateToken(i, 'symbol', e.target.value.toUpperCase())}\n              className=\"cedros-setting-input cedros-token-input-symbol\"\n              maxLength={10}\n            />\n            <input\n              type=\"text\"\n              placeholder=\"Mint address\"\n              value={token.mint}\n              onChange={(e) => updateToken(i, 'mint', e.target.value)}\n              className=\"cedros-setting-input cedros-token-input-mint\"\n            />\n            <input\n              type=\"number\"\n              placeholder=\"Decimals\"\n              value={token.decimals}\n              onChange={(e) => updateToken(i, 'decimals', parseInt(e.target.value, 10) || 0)}\n              className=\"cedros-setting-input cedros-token-input-decimals\"\n              min={0}\n              max={18}\n            />\n            <input\n              type=\"text\"\n              placeholder=\"Logo URL (optional)\"\n              value={token.logoUrl || ''}\n              onChange={(e) => updateToken(i, 'logoUrl', e.target.value || undefined)}\n              className=\"cedros-setting-input cedros-token-input-logo\"\n            />\n          </div>\n          <button\n            type=\"button\"\n            className=\"cedros-token-remove-btn\"\n            onClick={() => removeToken(i)}\n            title=\"Remove token\"\n          >\n            \n          </button>\n        </div>\n      ))}\n\n      <button type=\"button\" className=\"cedros-token-add-btn\" onClick={addToken}>\n        + Add Token\n      </button>\n    </div>\n  );\n}\n\n// =============================================================================\n// TOKEN SYMBOL LIST INPUT\n// =============================================================================\n\ninterface TokenSymbolListInputProps {\n  value: string;\n  onChange: (value: string) => void;\n}\n\nfunction TokenSymbolListInput({ value, onChange }: TokenSymbolListInputProps) {\n  const symbols = useMemo(() => {\n    return value\n      .split(',')\n      .map((s) => s.trim())\n      .filter(Boolean);\n  }, [value]);\n\n  const addSymbol = useCallback(\n    (symbol: string) => {\n      if (!symbol || symbols.includes(symbol)) return;\n      const updated = [...symbols, symbol].join(', ');\n      onChange(updated);\n    },\n    [symbols, onChange]\n  );\n\n  const removeSymbol = useCallback(\n    (symbol: string) => {\n      const updated = symbols.filter((s) => s !== symbol).join(', ');\n      onChange(updated);\n    },\n    [symbols, onChange]\n  );\n\n  return (\n    <div className=\"cedros-token-symbol-list-input\">\n      {/* Preset tokens - click to add */}\n      <div className=\"cedros-token-presets\">\n        <span className=\"cedros-token-presets-label\">Click to add:</span>\n        <div className=\"cedros-token-presets-list\">\n          {PRESET_TOKEN_SYMBOLS.map((symbol) => {\n            const isSelected = symbols.includes(symbol);\n            return (\n              <button\n                key={symbol}\n                type=\"button\"\n                className={`cedros-token-preset-chip ${isSelected ? 'cedros-token-preset-chip-selected' : ''}`}\n                onClick={() => (isSelected ? removeSymbol(symbol) : addSymbol(symbol))}\n                title={isSelected ? `Remove ${symbol}` : `Add ${symbol}`}\n              >\n                {symbol}\n                {isSelected && <span className=\"cedros-token-chip-check\"></span>}\n              </button>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Text input for manual entry or custom symbols */}\n      <input\n        type=\"text\"\n        value={value}\n        onChange={(e) => onChange(e.target.value)}\n        className=\"cedros-setting-input\"\n        placeholder=\"USDC, SOL, BONK...\"\n      />\n    </div>\n  );\n}\n","import type {\n  Organization,\n  OrgWithMembership,\n  CreateOrgRequest,\n  UpdateOrgRequest,\n  ListOrgsResponse,\n  AuthorizeRequest,\n  AuthorizeResponse,\n  PermissionsResponse,\n} from '../types';\nimport { ApiClient, handleApiError } from './apiClient';\n\n/**\n * API client for organization operations\n */\nexport class OrgApiClient {\n  private client: ApiClient;\n\n  constructor(\n    baseUrl: string,\n    timeoutMs?: number,\n    retryAttempts?: number,\n    getAccessToken?: () => string | null\n  ) {\n    this.client = new ApiClient({ baseUrl, timeoutMs, retryAttempts, getAccessToken });\n  }\n\n  /**\n   * List all organizations the current user belongs to\n   */\n  async listOrgs(): Promise<OrgWithMembership[]> {\n    try {\n      const response = await this.client.get<ListOrgsResponse>('/orgs');\n      return response.orgs.map((org) => ({\n        ...org,\n        membership: {\n          orgId: org.id,\n          role: org.role,\n        },\n      }));\n    } catch (error) {\n      throw handleApiError(error, 'Failed to list organizations');\n    }\n  }\n\n  /**\n   * Get a single organization by ID\n   */\n  async getOrg(orgId: string): Promise<Organization> {\n    try {\n      return await this.client.get<Organization>(`/orgs/${orgId}`);\n    } catch (error) {\n      throw handleApiError(error, 'Failed to get organization');\n    }\n  }\n\n  /**\n   * Create a new organization\n   */\n  async createOrg(data: CreateOrgRequest): Promise<Organization> {\n    try {\n      return await this.client.post<Organization>('/orgs', data);\n    } catch (error) {\n      throw handleApiError(error, 'Failed to create organization');\n    }\n  }\n\n  /**\n   * Update an organization\n   */\n  async updateOrg(orgId: string, data: UpdateOrgRequest): Promise<Organization> {\n    try {\n      return await this.client.patch<Organization>(`/orgs/${orgId}`, data);\n    } catch (error) {\n      throw handleApiError(error, 'Failed to update organization');\n    }\n  }\n\n  /**\n   * Delete an organization\n   */\n  async deleteOrg(orgId: string): Promise<void> {\n    try {\n      await this.client.delete<void>(`/orgs/${orgId}`);\n    } catch (error) {\n      throw handleApiError(error, 'Failed to delete organization');\n    }\n  }\n\n  /**\n   * Check authorization for an action\n   */\n  async authorize(data: AuthorizeRequest): Promise<AuthorizeResponse> {\n    try {\n      return await this.client.post<AuthorizeResponse>('/authorize', data);\n    } catch (error) {\n      throw handleApiError(error, 'Failed to check authorization');\n    }\n  }\n\n  /**\n   * Get current user's permissions in an organization\n   */\n  async getPermissions(orgId: string): Promise<PermissionsResponse> {\n    try {\n      return await this.client.post<PermissionsResponse>('/permissions', { orgId });\n    } catch (error) {\n      throw handleApiError(error, 'Failed to get permissions');\n    }\n  }\n}\n","import { useState, useCallback, useMemo, useRef, useEffect } from 'react';\nimport type {\n  OrgWithMembership,\n  Organization,\n  CreateOrgRequest,\n  UpdateOrgRequest,\n  Permission,\n  OrgRole,\n  AuthError,\n} from '../types';\nimport { useCedrosLogin } from '../context/useCedrosLogin';\nimport { OrgApiClient } from '../utils/orgApi';\n\nexport interface UseOrgsReturn {\n  /** All organizations the user belongs to */\n  orgs: OrgWithMembership[];\n  /** Currently active organization */\n  activeOrg: OrgWithMembership | null;\n  /** User's permissions in the active org */\n  permissions: Permission[];\n  /** User's role in the active org */\n  role: OrgRole | null;\n  /** Loading state */\n  isLoading: boolean;\n  /** Error state */\n  error: AuthError | null;\n  /** Fetch/refresh organizations list */\n  fetchOrgs: () => Promise<void>;\n  /** Switch to a different organization */\n  switchOrg: (orgId: string) => Promise<void>;\n  /** Create a new organization */\n  createOrg: (data: CreateOrgRequest) => Promise<Organization>;\n  /** Update an organization */\n  updateOrg: (orgId: string, data: UpdateOrgRequest) => Promise<Organization>;\n  /** Delete an organization */\n  deleteOrg: (orgId: string) => Promise<void>;\n  /** Check if user has a specific permission */\n  hasPermission: (permission: Permission) => boolean;\n}\n\nconst ACTIVE_ORG_KEY = 'cedros_active_org';\n\n// P-06: Safe localStorage helpers to handle private browsing and quota errors\nfunction safeGetItem(key: string): string | null {\n  try {\n    return localStorage.getItem(key);\n  } catch {\n    return null;\n  }\n}\n\nfunction safeSetItem(key: string, value: string): void {\n  try {\n    localStorage.setItem(key, value);\n  } catch {\n    // Ignore - private browsing or quota exceeded\n  }\n}\n\n/**\n * Hook for managing organizations, memberships, and permissions.\n *\n * @example\n * ```tsx\n * function OrgSelector() {\n *   const { orgs, activeOrg, switchOrg, hasPermission } = useOrgs();\n *\n *   return (\n *     <select\n *       value={activeOrg?.id}\n *       onChange={(e) => switchOrg(e.target.value)}\n *     >\n *       {orgs.map(org => (\n *         <option key={org.id} value={org.id}>{org.name}</option>\n *       ))}\n *     </select>\n *   );\n * }\n * ```\n */\nexport function useOrgs(): UseOrgsReturn {\n  const { config, user, authState, _internal } = useCedrosLogin();\n  const hasStorage = typeof window !== 'undefined' && !!window.localStorage;\n\n  const [orgs, setOrgs] = useState<OrgWithMembership[]>([]);\n  const [activeOrg, setActiveOrg] = useState<OrgWithMembership | null>(null);\n  const [permissions, setPermissions] = useState<Permission[]>([]);\n  const [role, setRole] = useState<OrgRole | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<AuthError | null>(null);\n\n  // M-03: Memoize API client and use ref to prevent callback dependency cascades\n  const apiClient = useMemo(\n    () =>\n      new OrgApiClient(\n        config.serverUrl,\n        config.requestTimeout,\n        config.retryAttempts,\n        _internal?.getAccessToken\n      ),\n    [config.serverUrl, config.requestTimeout, config.retryAttempts, _internal]\n  );\n\n  // M-03: Store apiClient in ref to stabilize callback dependencies\n  const apiClientRef = useRef(apiClient);\n  useEffect(() => {\n    apiClientRef.current = apiClient;\n  }, [apiClient]);\n\n  // M-03: Use ref in callback to break dependency chain\n  const loadPermissions = useCallback(async (orgId: string) => {\n    try {\n      const response = await apiClientRef.current.getPermissions(orgId);\n      setPermissions(response.permissions);\n      setRole(response.role);\n    } catch {\n      // Permissions loading failure is non-fatal, just clear them\n      setPermissions([]);\n      setRole(null);\n    }\n  }, []);\n\n  // M-03: Use ref to break apiClient dependency chain\n  const fetchOrgs = useCallback(async () => {\n    if (authState !== 'authenticated' || !user) {\n      setOrgs([]);\n      setActiveOrg(null);\n      setPermissions([]);\n      setRole(null);\n      return;\n    }\n\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const fetchedOrgs = await apiClientRef.current.listOrgs();\n      setOrgs(fetchedOrgs);\n\n      // P-06: Restore active org from localStorage with safe access\n      const savedOrgId = hasStorage ? safeGetItem(ACTIVE_ORG_KEY) : null;\n      let selectedOrg = fetchedOrgs.find((org) => org.id === savedOrgId);\n\n      if (!selectedOrg && fetchedOrgs.length > 0) {\n        // Default to personal org or first org\n        selectedOrg = fetchedOrgs.find((org) => org.isPersonal) || fetchedOrgs[0];\n      }\n\n      if (selectedOrg) {\n        setActiveOrg(selectedOrg);\n        if (hasStorage) {\n          safeSetItem(ACTIVE_ORG_KEY, selectedOrg.id);\n        }\n        await loadPermissions(selectedOrg.id);\n      } else {\n        setActiveOrg(null);\n        setPermissions([]);\n        setRole(null);\n      }\n    } catch (err) {\n      setError(err as AuthError);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [authState, user, loadPermissions, hasStorage]);\n\n  const switchOrg = useCallback(\n    async (orgId: string) => {\n      const org = orgs.find((o) => o.id === orgId);\n      if (!org) {\n        setError({ code: 'UNKNOWN_ERROR', message: 'Organization not found' });\n        return;\n      }\n\n      setActiveOrg(org);\n      if (hasStorage) {\n        safeSetItem(ACTIVE_ORG_KEY, orgId);\n      }\n      await loadPermissions(orgId);\n    },\n    [orgs, loadPermissions, hasStorage]\n  );\n\n  // M-03: Use ref to break apiClient dependency chain\n  const createOrg = useCallback(\n    async (data: CreateOrgRequest): Promise<Organization> => {\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        const newOrg = await apiClientRef.current.createOrg(data);\n        // Refresh orgs list to include the new org with membership\n        await fetchOrgs();\n        return newOrg;\n      } catch (err) {\n        setError(err as AuthError);\n        throw err;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [fetchOrgs]\n  );\n\n  const updateOrg = useCallback(\n    async (orgId: string, data: UpdateOrgRequest): Promise<Organization> => {\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        const updatedOrg = await apiClientRef.current.updateOrg(orgId, data);\n        // Refresh orgs list to reflect changes\n        await fetchOrgs();\n        return updatedOrg;\n      } catch (err) {\n        setError(err as AuthError);\n        throw err;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [fetchOrgs]\n  );\n\n  const deleteOrg = useCallback(\n    async (orgId: string): Promise<void> => {\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        await apiClientRef.current.deleteOrg(orgId);\n        // Refresh orgs list\n        await fetchOrgs();\n      } catch (err) {\n        setError(err as AuthError);\n        throw err;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [fetchOrgs]\n  );\n\n  const hasPermission = useCallback(\n    (permission: Permission): boolean => {\n      return permissions.includes(permission);\n    },\n    [permissions]\n  );\n\n  return {\n    orgs,\n    activeOrg,\n    permissions,\n    role,\n    isLoading,\n    error,\n    fetchOrgs,\n    switchOrg,\n    createOrg,\n    updateOrg,\n    deleteOrg,\n    hasPermission,\n  };\n}\n","import type {\n  Member,\n  MemberApiResponse,\n  UpdateMemberRoleRequest,\n  ListMembersResponse,\n} from '../types';\nimport { ApiClient, handleApiError } from './apiClient';\n\n/**\n * API client for member operations within an organization\n */\nexport class MemberApiClient {\n  private client: ApiClient;\n\n  constructor(\n    baseUrl: string,\n    timeoutMs?: number,\n    retryAttempts?: number,\n    getAccessToken?: () => string | null\n  ) {\n    this.client = new ApiClient({ baseUrl, timeoutMs, retryAttempts, getAccessToken });\n  }\n\n  /**\n   * List all members of an organization\n   */\n  async listMembers(\n    orgId: string,\n    limit: number = 50,\n    offset: number = 0\n  ): Promise<{ members: Member[]; total: number }> {\n    try {\n      const response = await this.client.get<ListMembersResponse>(\n        `/orgs/${orgId}/members?limit=${limit}&offset=${offset}`\n      );\n      return {\n        members: response.members.map((member: MemberApiResponse) => ({\n          id: member.id,\n          userId: member.userId,\n          orgId,\n          role: member.role,\n          joinedAt: member.joinedAt,\n          user: {\n            id: member.userId,\n            email: member.email,\n            name: member.name,\n          },\n        })),\n        total: response.total,\n      };\n    } catch (error) {\n      throw handleApiError(error, 'Failed to list members');\n    }\n  }\n\n  /**\n   * Update a member's role\n   */\n  async updateMemberRole(\n    orgId: string,\n    userId: string,\n    data: UpdateMemberRoleRequest\n  ): Promise<Member> {\n    try {\n      return await this.client.patch<Member>(`/orgs/${orgId}/members/${userId}`, data);\n    } catch (error) {\n      throw handleApiError(error, 'Failed to update member role');\n    }\n  }\n\n  /**\n   * Remove a member from the organization\n   */\n  async removeMember(orgId: string, userId: string): Promise<void> {\n    try {\n      await this.client.delete<void>(`/orgs/${orgId}/members/${userId}`);\n    } catch (error) {\n      throw handleApiError(error, 'Failed to remove member');\n    }\n  }\n}\n","import { useState, useCallback, useMemo, useEffect, useRef } from 'react';\nimport type { Member, OrgRole, AuthError } from '../types';\nimport { useCedrosLogin } from '../context/useCedrosLogin';\nimport { MemberApiClient } from '../utils/memberApi';\n\nexport interface UseMembersReturn {\n  /** List of members */\n  members: Member[];\n  /** Total members available on the server */\n  total: number;\n  /** Loading state */\n  isLoading: boolean;\n  /** Error state */\n  error: AuthError | null;\n  /** Fetch/refresh members list */\n  fetchMembers: (options?: { limit?: number; offset?: number }) => Promise<void>;\n  /** Update a member's role */\n  updateMemberRole: (userId: string, role: OrgRole) => Promise<void>;\n  /** Remove a member */\n  removeMember: (userId: string) => Promise<void>;\n}\n\n/**\n * Hook for managing organization members.\n *\n * @param orgId - The organization ID to manage members for\n *\n * @example\n * ```tsx\n * function MembersList() {\n *   const { activeOrg } = useOrgs();\n *   const { members, isLoading, updateMemberRole, removeMember } = useMembers(activeOrg?.id);\n *\n *   if (!activeOrg) return null;\n *\n *   return (\n *     <ul>\n *       {members.map(member => (\n *         <li key={member.id}>\n *           {member.user.name} - {member.role}\n *           <button onClick={() => updateMemberRole(member.userId, 'admin')}>\n *             Make Admin\n *           </button>\n *           <button onClick={() => removeMember(member.userId)}>\n *             Remove\n *           </button>\n *         </li>\n *       ))}\n *     </ul>\n *   );\n * }\n * ```\n */\nexport function useMembers(orgId: string | undefined): UseMembersReturn {\n  const { config, authState, _internal } = useCedrosLogin();\n\n  const [members, setMembers] = useState<Member[]>([]);\n  const [total, setTotal] = useState(0);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<AuthError | null>(null);\n  // P-12: Track fetched orgId to prevent duplicate fetches on remount\n  const fetchedOrgIdRef = useRef<string | undefined>(undefined);\n  const requestIdRef = useRef(0);\n\n  const apiClient = useMemo(\n    () =>\n      new MemberApiClient(\n        config.serverUrl,\n        config.requestTimeout,\n        config.retryAttempts,\n        _internal?.getAccessToken\n      ),\n    [config.serverUrl, config.requestTimeout, config.retryAttempts, _internal]\n  );\n\n  // C-02: Use ref to avoid apiClient in callback dependencies\n  // Prevents infinite loop when apiClient identity changes\n  const apiClientRef = useRef(apiClient);\n  apiClientRef.current = apiClient;\n\n  const fetchMembers = useCallback(\n    async (options?: { limit?: number; offset?: number }) => {\n      if (!orgId || authState !== 'authenticated') {\n        setMembers([]);\n        setTotal(0);\n        return;\n      }\n\n      setIsLoading(true);\n      setError(null);\n      const requestId = ++requestIdRef.current;\n\n      try {\n        const { limit = 50, offset = 0 } = options ?? {};\n        const response = await apiClientRef.current.listMembers(orgId, limit, offset);\n        if (requestId !== requestIdRef.current) return;\n        setMembers(response.members);\n        setTotal(response.total);\n      } catch (err) {\n        if (requestId !== requestIdRef.current) return;\n        setError(err as AuthError);\n      } finally {\n        if (requestId === requestIdRef.current) {\n          setIsLoading(false);\n        }\n      }\n    },\n    [orgId, authState]\n  );\n\n  // P-12: Auto-fetch when orgId changes, but not on every remount\n  useEffect(() => {\n    if (authState !== 'authenticated') {\n      fetchedOrgIdRef.current = undefined;\n      return;\n    }\n\n    if (orgId !== fetchedOrgIdRef.current) {\n      fetchedOrgIdRef.current = orgId;\n      fetchMembers();\n    }\n  }, [orgId, authState, fetchMembers]);\n\n  const updateMemberRole = useCallback(\n    async (userId: string, role: OrgRole): Promise<void> => {\n      if (!orgId) {\n        throw new Error('No organization selected');\n      }\n\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        await apiClientRef.current.updateMemberRole(orgId, userId, { role });\n        // Refresh members list\n        await fetchMembers();\n      } catch (err) {\n        setError(err as AuthError);\n        throw err;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [orgId, fetchMembers]\n  );\n\n  const removeMember = useCallback(\n    async (userId: string): Promise<void> => {\n      if (!orgId) {\n        throw new Error('No organization selected');\n      }\n\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        await apiClientRef.current.removeMember(orgId, userId);\n        // Refresh members list\n        await fetchMembers();\n      } catch (err) {\n        setError(err as AuthError);\n        throw err;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [orgId, fetchMembers]\n  );\n\n  return {\n    members,\n    total,\n    isLoading,\n    error,\n    fetchMembers,\n    updateMemberRole,\n    removeMember,\n  };\n}\n","import type {\n  Invite,\n  InviteApiResponse,\n  CreateInviteRequest,\n  AcceptInviteRequest,\n  ListInvitesResponse,\n  CreateInviteResponse,\n  AcceptInviteResponse,\n} from '../types';\nimport { ApiClient, handleApiError } from './apiClient';\n\n/**\n * API client for invite operations\n */\nexport class InviteApiClient {\n  private client: ApiClient;\n\n  constructor(\n    baseUrl: string,\n    timeoutMs?: number,\n    retryAttempts?: number,\n    getAccessToken?: () => string | null\n  ) {\n    this.client = new ApiClient({ baseUrl, timeoutMs, retryAttempts, getAccessToken });\n  }\n\n  /**\n   * List all pending invites for an organization\n   */\n  async listInvites(\n    orgId: string,\n    limit: number = 50,\n    offset: number = 0\n  ): Promise<{ invites: Invite[]; total: number }> {\n    try {\n      const response = await this.client.get<ListInvitesResponse>(\n        `/orgs/${orgId}/invites?limit=${limit}&offset=${offset}`\n      );\n      return {\n        invites: response.invites.map((invite: InviteApiResponse) => ({\n          id: invite.id,\n          orgId: invite.orgId,\n          email: invite.email,\n          role: invite.role,\n          invitedBy: invite.invitedBy,\n          createdAt: invite.createdAt,\n          expiresAt: invite.expiresAt,\n        })),\n        total: response.total,\n      };\n    } catch (error) {\n      throw handleApiError(error, 'Failed to list invites');\n    }\n  }\n\n  /**\n   * Create a new invite\n   */\n  async createInvite(orgId: string, data: CreateInviteRequest): Promise<CreateInviteResponse> {\n    try {\n      return await this.client.post<CreateInviteResponse>(`/orgs/${orgId}/invites`, data);\n    } catch (error) {\n      throw handleApiError(error, 'Failed to create invite');\n    }\n  }\n\n  /**\n   * Cancel a pending invite\n   */\n  async cancelInvite(orgId: string, inviteId: string): Promise<void> {\n    try {\n      await this.client.delete<void>(`/orgs/${orgId}/invites/${inviteId}`);\n    } catch (error) {\n      throw handleApiError(error, 'Failed to cancel invite');\n    }\n  }\n\n  /**\n   * Resend an invite email\n   */\n  async resendInvite(orgId: string, inviteId: string): Promise<void> {\n    try {\n      await this.client.post<void>(`/orgs/${orgId}/invites/${inviteId}/resend`, {});\n    } catch (error) {\n      throw handleApiError(error, 'Failed to resend invite');\n    }\n  }\n\n  /**\n   * Accept an invite (public endpoint)\n   */\n  async acceptInvite(data: AcceptInviteRequest): Promise<AcceptInviteResponse> {\n    try {\n      return await this.client.post<AcceptInviteResponse>('/invites/accept', data);\n    } catch (error) {\n      throw handleApiError(error, 'Failed to accept invite');\n    }\n  }\n}\n","import { useState, useCallback, useMemo, useEffect, useRef } from 'react';\nimport type { Invite, OrgRole, AuthError, AcceptInviteResponse } from '../types';\nimport { useCedrosLogin } from '../context/useCedrosLogin';\nimport { InviteApiClient } from '../utils/inviteApi';\n\nexport interface UseInvitesReturn {\n  /** List of pending invites */\n  invites: Invite[];\n  /** Total pending invites available on the server */\n  total: number;\n  /** Loading state */\n  isLoading: boolean;\n  /** Error state */\n  error: AuthError | null;\n  /** Fetch/refresh invites list */\n  fetchInvites: (options?: { limit?: number; offset?: number }) => Promise<void>;\n  /** Create a new invite */\n  createInvite: (email: string, role?: Exclude<OrgRole, 'owner'>) => Promise<void>;\n  /** Cancel a pending invite */\n  cancelInvite: (inviteId: string) => Promise<void>;\n  /** Resend an invite email */\n  resendInvite: (inviteId: string) => Promise<void>;\n  /** Accept an invite (public) */\n  acceptInvite: (token: string) => Promise<AcceptInviteResponse>;\n}\n\n/**\n * Hook for managing organization invites.\n *\n * @param orgId - The organization ID to manage invites for\n *\n * @example\n * ```tsx\n * function InviteManager() {\n *   const { activeOrg } = useOrgs();\n *   const { invites, createInvite, cancelInvite, resendInvite } = useInvites(activeOrg?.id);\n *\n *   const handleInvite = async (email: string) => {\n *     await createInvite(email, 'member');\n *   };\n *\n *   return (\n *     <div>\n *       <InviteForm onSubmit={handleInvite} />\n *       <ul>\n *         {invites.map(invite => (\n *           <li key={invite.id}>\n *             {invite.email} ({invite.role})\n *             <button onClick={() => resendInvite(invite.id)}>Resend</button>\n *             <button onClick={() => cancelInvite(invite.id)}>Cancel</button>\n *           </li>\n *         ))}\n *       </ul>\n *     </div>\n *   );\n * }\n * ```\n */\nexport function useInvites(orgId: string | undefined): UseInvitesReturn {\n  const { config, authState, _internal } = useCedrosLogin();\n\n  const [invites, setInvites] = useState<Invite[]>([]);\n  const [total, setTotal] = useState(0);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<AuthError | null>(null);\n  // P-13: Track fetched orgId to prevent duplicate fetches on remount\n  const fetchedOrgIdRef = useRef<string | undefined>(undefined);\n  const requestIdRef = useRef(0);\n\n  const apiClient = useMemo(\n    () =>\n      new InviteApiClient(\n        config.serverUrl,\n        config.requestTimeout,\n        config.retryAttempts,\n        _internal?.getAccessToken\n      ),\n    [config.serverUrl, config.requestTimeout, config.retryAttempts, _internal]\n  );\n\n  // H-02: Use ref to avoid apiClient in callback dependencies\n  // Prevents infinite loop when apiClient identity changes\n  const apiClientRef = useRef(apiClient);\n  apiClientRef.current = apiClient;\n\n  const fetchInvites = useCallback(\n    async (options?: { limit?: number; offset?: number }) => {\n      if (!orgId || authState !== 'authenticated') {\n        setInvites([]);\n        setTotal(0);\n        return;\n      }\n\n      setIsLoading(true);\n      setError(null);\n      const requestId = ++requestIdRef.current;\n\n      try {\n        const { limit = 50, offset = 0 } = options ?? {};\n        const response = await apiClientRef.current.listInvites(orgId, limit, offset);\n        if (requestId !== requestIdRef.current) return;\n        setInvites(response.invites);\n        setTotal(response.total);\n      } catch (err) {\n        if (requestId !== requestIdRef.current) return;\n        setError(err as AuthError);\n      } finally {\n        if (requestId === requestIdRef.current) {\n          setIsLoading(false);\n        }\n      }\n    },\n    [orgId, authState]\n  );\n\n  // P-13: Auto-fetch when orgId changes, but not on every remount\n  useEffect(() => {\n    if (authState !== 'authenticated') {\n      fetchedOrgIdRef.current = undefined;\n      return;\n    }\n\n    if (orgId !== fetchedOrgIdRef.current) {\n      fetchedOrgIdRef.current = orgId;\n      fetchInvites();\n    }\n  }, [orgId, authState, fetchInvites]);\n\n  const createInvite = useCallback(\n    async (email: string, role: Exclude<OrgRole, 'owner'> = 'member'): Promise<void> => {\n      if (!orgId) {\n        throw new Error('No organization selected');\n      }\n\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        await apiClientRef.current.createInvite(orgId, { email, role });\n        // Refresh invites list\n        await fetchInvites();\n      } catch (err) {\n        setError(err as AuthError);\n        throw err;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [orgId, fetchInvites]\n  );\n\n  const cancelInvite = useCallback(\n    async (inviteId: string): Promise<void> => {\n      if (!orgId) {\n        throw new Error('No organization selected');\n      }\n\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        await apiClientRef.current.cancelInvite(orgId, inviteId);\n        // Refresh invites list\n        await fetchInvites();\n      } catch (err) {\n        setError(err as AuthError);\n        throw err;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [orgId, fetchInvites]\n  );\n\n  const resendInvite = useCallback(\n    async (inviteId: string): Promise<void> => {\n      if (!orgId) {\n        throw new Error('No organization selected');\n      }\n\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        await apiClientRef.current.resendInvite(orgId, inviteId);\n      } catch (err) {\n        setError(err as AuthError);\n        throw err;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [orgId]\n  );\n\n  const acceptInvite = useCallback(async (token: string): Promise<AcceptInviteResponse> => {\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      return await apiClientRef.current.acceptInvite({ token });\n    } catch (err) {\n      setError(err as AuthError);\n      throw err;\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  return {\n    invites,\n    total,\n    isLoading,\n    error,\n    fetchInvites,\n    createInvite,\n    cancelInvite,\n    resendInvite,\n    acceptInvite,\n  };\n}\n","/**\n * Hook for credit balance and transaction history\n *\n * Provides access to the user's credit balance and transaction history.\n * Credits are earned through Privacy Cash deposits.\n *\n * Safe to call outside CedrosLoginProvider (returns no-op functions).\n */\n\nimport { useState, useCallback, useMemo } from 'react';\nimport { useCedrosLoginOptional } from '../context/useCedrosLogin';\nimport { ApiClient, handleApiError } from '../utils/apiClient';\nimport type {\n  UseCreditsReturn,\n  CreditBalanceResponse,\n  CreditHistoryResponse,\n  BalancesResponse,\n} from '../types/deposit';\n\nexport type { UseCreditsReturn } from '../types/deposit';\n\n/**\n * Hook for credit balance and transaction history\n *\n * Credits represent the user's balance from Privacy Cash deposits.\n * The balance can be used for services within the application.\n *\n * Safe to call outside CedrosLoginProvider - returns no-op functions that throw.\n */\nexport function useCredits(): UseCreditsReturn {\n  const context = useCedrosLoginOptional();\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const apiClient = useMemo(() => {\n    if (!context) return null;\n    return new ApiClient({\n      baseUrl: context.config.serverUrl,\n      timeoutMs: context.config.requestTimeout,\n      retryAttempts: context.config.retryAttempts,\n      getAccessToken: context._internal?.getAccessToken,\n    });\n  }, [context]);\n\n  const clearError = useCallback(() => {\n    setError(null);\n  }, []);\n\n  const getBalance = useCallback(async (): Promise<CreditBalanceResponse> => {\n    if (!apiClient) {\n      throw new Error('useCredits must be used within a CedrosLoginProvider');\n    }\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const data = await apiClient.get<CreditBalanceResponse>('/credits/balance/sol');\n      return data;\n    } catch (err) {\n      const apiError = handleApiError(err, 'Failed to fetch credit balance');\n      setError(apiError.message);\n      throw apiError;\n    } finally {\n      setIsLoading(false);\n    }\n  }, [apiClient]);\n\n  const getAllBalances = useCallback(async (): Promise<CreditBalanceResponse[]> => {\n    if (!apiClient) {\n      throw new Error('useCredits must be used within a CedrosLoginProvider');\n    }\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const data = await apiClient.get<BalancesResponse>('/credits/balance');\n      return data.balances;\n    } catch (err) {\n      const apiError = handleApiError(err, 'Failed to fetch credit balances');\n      setError(apiError.message);\n      throw apiError;\n    } finally {\n      setIsLoading(false);\n    }\n  }, [apiClient]);\n\n  const getHistory = useCallback(\n    async (options?: {\n      currency?: string;\n      limit?: number;\n      offset?: number;\n    }): Promise<CreditHistoryResponse> => {\n      if (!apiClient) {\n        throw new Error('useCredits must be used within a CedrosLoginProvider');\n      }\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        const params = new URLSearchParams();\n        if (options?.currency) params.set('currency', options.currency);\n        if (options?.limit) params.set('limit', options.limit.toString());\n        if (options?.offset) params.set('offset', options.offset.toString());\n\n        const queryString = params.toString();\n        const url = queryString ? `/credits/history?${queryString}` : '/credits/history';\n\n        const data = await apiClient.get<CreditHistoryResponse>(url);\n        return data;\n      } catch (err) {\n        const apiError = handleApiError(err, 'Failed to fetch transaction history');\n        setError(apiError.message);\n        throw apiError;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  return {\n    getBalance,\n    getAllBalances,\n    getHistory,\n    isLoading,\n    error,\n    clearError,\n  };\n}\n","/**\n * Hook for admin Privacy Cash deposit operations\n *\n * Provides admin-only access to view all deposits, statistics, and pending withdrawals.\n * Requires system admin privileges.\n *\n * Safe to call outside CedrosLoginProvider (returns no-op functions).\n */\n\nimport { useState, useCallback, useMemo } from 'react';\nimport { useCedrosLoginOptional } from '../context/useCedrosLogin';\nimport { ApiClient, handleApiError } from '../utils/apiClient';\nimport type {\n  UseAdminDepositsReturn,\n  AdminDepositListResponse,\n  AdminDepositStatsResponse,\n  ProcessWithdrawalRequest,\n  ProcessWithdrawalResponse,\n  ProcessAllWithdrawalsResponse,\n  PrivacyStatusResponse,\n  AdminCreditStatsResponse,\n} from '../types/deposit';\n\nexport type { UseAdminDepositsReturn } from '../types/deposit';\n\n/**\n * Hook for admin Privacy Cash deposit operations\n *\n * Requires system admin privileges. All methods will fail with 403 if not admin.\n *\n * Safe to call outside CedrosLoginProvider - returns no-op functions that throw.\n */\nexport function useAdminDeposits(): UseAdminDepositsReturn {\n  const context = useCedrosLoginOptional();\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const apiClient = useMemo(() => {\n    if (!context) return null;\n    return new ApiClient({\n      baseUrl: context.config.serverUrl,\n      timeoutMs: context.config.requestTimeout,\n      retryAttempts: context.config.retryAttempts,\n      getAccessToken: context._internal?.getAccessToken,\n    });\n  }, [context]);\n\n  const clearError = useCallback(() => {\n    setError(null);\n  }, []);\n\n  const listDeposits = useCallback(\n    async (options?: {\n      status?: string;\n      limit?: number;\n      offset?: number;\n    }): Promise<AdminDepositListResponse> => {\n      if (!apiClient) {\n        throw new Error('useAdminDeposits must be used within a CedrosLoginProvider');\n      }\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        const params = new URLSearchParams();\n        if (options?.status) params.set('status', options.status);\n        if (options?.limit !== undefined) params.set('limit', String(options.limit));\n        if (options?.offset !== undefined) params.set('offset', String(options.offset));\n        const query = params.toString();\n        const url = query ? `/admin/deposits?${query}` : '/admin/deposits';\n        const data = await apiClient.get<AdminDepositListResponse>(url);\n        return data;\n      } catch (err) {\n        const apiError = handleApiError(err, 'Failed to list deposits');\n        setError(apiError.message);\n        throw apiError;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const getStats = useCallback(async (): Promise<AdminDepositStatsResponse> => {\n    if (!apiClient) {\n      throw new Error('useAdminDeposits must be used within a CedrosLoginProvider');\n    }\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const data = await apiClient.get<AdminDepositStatsResponse>('/admin/deposits/stats');\n      return data;\n    } catch (err) {\n      const apiError = handleApiError(err, 'Failed to get deposit stats');\n      setError(apiError.message);\n      throw apiError;\n    } finally {\n      setIsLoading(false);\n    }\n  }, [apiClient]);\n\n  const listInPrivacyPeriod = useCallback(\n    async (options?: { limit?: number; offset?: number }): Promise<AdminDepositListResponse> => {\n      if (!apiClient) {\n        throw new Error('useAdminDeposits must be used within a CedrosLoginProvider');\n      }\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        const params = new URLSearchParams();\n        if (options?.limit !== undefined) params.set('limit', String(options.limit));\n        if (options?.offset !== undefined) params.set('offset', String(options.offset));\n        const query = params.toString();\n        const url = query\n          ? `/admin/deposits/in-privacy-period?${query}`\n          : '/admin/deposits/in-privacy-period';\n        const data = await apiClient.get<AdminDepositListResponse>(url);\n        return data;\n      } catch (err) {\n        const apiError = handleApiError(err, 'Failed to list deposits in privacy period');\n        setError(apiError.message);\n        throw apiError;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const listPendingWithdrawals = useCallback(\n    async (options?: { limit?: number; offset?: number }): Promise<AdminDepositListResponse> => {\n      if (!apiClient) {\n        throw new Error('useAdminDeposits must be used within a CedrosLoginProvider');\n      }\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        const params = new URLSearchParams();\n        if (options?.limit !== undefined) params.set('limit', String(options.limit));\n        if (options?.offset !== undefined) params.set('offset', String(options.offset));\n        const query = params.toString();\n        const url = query ? `/admin/withdrawals/pending?${query}` : '/admin/withdrawals/pending';\n        const data = await apiClient.get<AdminDepositListResponse>(url);\n        return data;\n      } catch (err) {\n        const apiError = handleApiError(err, 'Failed to list pending withdrawals');\n        setError(apiError.message);\n        throw apiError;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const processWithdrawal = useCallback(\n    async (\n      sessionId: string,\n      options?: ProcessWithdrawalRequest\n    ): Promise<ProcessWithdrawalResponse> => {\n      if (!apiClient) {\n        throw new Error('useAdminDeposits must be used within a CedrosLoginProvider');\n      }\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        const data = await apiClient.post<ProcessWithdrawalResponse>(\n          `/admin/withdrawals/${sessionId}/process`,\n          options ?? {}\n        );\n        return data;\n      } catch (err) {\n        const apiError = handleApiError(err, 'Failed to process withdrawal');\n        setError(apiError.message);\n        throw apiError;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const processAllWithdrawals = useCallback(async (): Promise<ProcessAllWithdrawalsResponse> => {\n    if (!apiClient) {\n      throw new Error('useAdminDeposits must be used within a CedrosLoginProvider');\n    }\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const data = await apiClient.post<ProcessAllWithdrawalsResponse>(\n        '/admin/withdrawals/process-all',\n        {}\n      );\n      return data;\n    } catch (err) {\n      const apiError = handleApiError(err, 'Failed to process withdrawals');\n      setError(apiError.message);\n      throw apiError;\n    } finally {\n      setIsLoading(false);\n    }\n  }, [apiClient]);\n\n  const getPrivacyStatus = useCallback(async (): Promise<PrivacyStatusResponse> => {\n    if (!apiClient) {\n      throw new Error('useAdminDeposits must be used within a CedrosLoginProvider');\n    }\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const data = await apiClient.get<PrivacyStatusResponse>('/admin/privacy/status');\n      return data;\n    } catch (err) {\n      const apiError = handleApiError(err, 'Failed to get privacy status');\n      setError(apiError.message);\n      throw apiError;\n    } finally {\n      setIsLoading(false);\n    }\n  }, [apiClient]);\n\n  const getCreditStats = useCallback(async (): Promise<AdminCreditStatsResponse> => {\n    if (!apiClient) {\n      throw new Error('useAdminDeposits must be used within a CedrosLoginProvider');\n    }\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const data = await apiClient.get<AdminCreditStatsResponse>('/admin/credits/stats');\n      return data;\n    } catch (err) {\n      const apiError = handleApiError(err, 'Failed to get credit stats');\n      setError(apiError.message);\n      throw apiError;\n    } finally {\n      setIsLoading(false);\n    }\n  }, [apiClient]);\n\n  return {\n    listDeposits,\n    getStats,\n    listInPrivacyPeriod,\n    listPendingWithdrawals,\n    processWithdrawal,\n    processAllWithdrawals,\n    getPrivacyStatus,\n    getCreditStats,\n    isLoading,\n    error,\n    clearError,\n  };\n}\n","/**\n * Admin deposit statistics component\n *\n * Shows aggregate statistics for Privacy Cash deposits.\n * Requires system admin privileges.\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { useAdminDeposits } from '../../../hooks/useAdminDeposits';\nimport type { AdminDepositStatsResponse } from '../../../types/deposit';\n\nexport interface AdminDepositStatsProps {\n  /** Auto-refresh interval in milliseconds (0 to disable) */\n  refreshInterval?: number;\n  /** Additional CSS classes */\n  className?: string;\n  /** Callback when stats are loaded */\n  onLoad?: (stats: AdminDepositStatsResponse) => void;\n}\n\n/**\n * Admin deposit statistics display\n *\n * Shows total deposits, withdrawals, and pending amounts.\n */\nexport function AdminDepositStats({\n  refreshInterval = 0,\n  className = '',\n  onLoad,\n}: AdminDepositStatsProps) {\n  const { getStats, isLoading, error, clearError } = useAdminDeposits();\n\n  const [stats, setStats] = useState<AdminDepositStatsResponse | null>(null);\n  const [loadError, setLoadError] = useState<string | null>(null);\n\n  const fetchStats = useCallback(async () => {\n    try {\n      const result = await getStats();\n      setStats(result);\n      onLoad?.(result);\n      setLoadError(null);\n    } catch (err) {\n      setLoadError(err instanceof Error ? err.message : 'Failed to load stats');\n    }\n  }, [getStats, onLoad]);\n\n  // Fetch on mount\n  useEffect(() => {\n    fetchStats();\n  }, [fetchStats]);\n\n  // Auto-refresh\n  useEffect(() => {\n    if (refreshInterval <= 0) return;\n\n    const interval = setInterval(fetchStats, refreshInterval);\n    return () => clearInterval(interval);\n  }, [refreshInterval, fetchStats]);\n\n  // Error state\n  if (loadError || error) {\n    return (\n      <div className={`cedros-admin-stats cedros-admin-stats-error ${className}`}>\n        <p className=\"cedros-admin-error\">{loadError || error}</p>\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-outline\"\n          onClick={() => {\n            clearError();\n            setLoadError(null);\n            fetchStats();\n          }}\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  // Loading state\n  if (isLoading && !stats) {\n    return (\n      <div className={`cedros-admin-stats cedros-admin-stats-loading ${className}`}>\n        <span className=\"cedros-admin-loading-indicator\" />\n        <span className=\"cedros-admin-loading-text\">Loading statistics...</span>\n      </div>\n    );\n  }\n\n  if (!stats) {\n    return null;\n  }\n\n  return (\n    <div className={`cedros-admin-stats ${className}`}>\n      <div className=\"cedros-admin-stats-header\">\n        <h4 className=\"cedros-admin-stats-title\">Deposit Statistics</h4>\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-outline cedros-button-sm cedros-admin-icon-button\"\n          onClick={fetchStats}\n          disabled={isLoading}\n          title=\"Refresh stats\"\n          aria-label=\"Refresh stats\"\n        >\n          {isLoading ? '...' : ''}\n        </button>\n      </div>\n\n      {/* Basic Stats */}\n      <div className=\"cedros-admin-stats-grid\">\n        <div className=\"cedros-admin-stat-card\">\n          <span className=\"cedros-admin-stat-label\">Total Deposits</span>\n          <span className=\"cedros-admin-stat-value\">{stats.totalDeposits}</span>\n          <span className=\"cedros-admin-stat-sub\">{stats.totalDepositedSol.toFixed(4)} SOL</span>\n        </div>\n\n        <div className=\"cedros-admin-stat-card cedros-admin-stat-pending\">\n          <span className=\"cedros-admin-stat-label\">Pending Withdrawal</span>\n          <span className=\"cedros-admin-stat-value\">{stats.pendingWithdrawalCount}</span>\n          <span className=\"cedros-admin-stat-sub\">{stats.pendingWithdrawalSol.toFixed(4)} SOL</span>\n        </div>\n\n        <div className=\"cedros-admin-stat-card cedros-admin-stat-success\">\n          <span className=\"cedros-admin-stat-label\">Withdrawn</span>\n          <span className=\"cedros-admin-stat-value\">{stats.totalWithdrawnCount}</span>\n          <span className=\"cedros-admin-stat-sub\">{stats.totalWithdrawnSol.toFixed(4)} SOL</span>\n        </div>\n\n        <div className=\"cedros-admin-stat-card cedros-admin-stat-error\">\n          <span className=\"cedros-admin-stat-label\">Failed</span>\n          <span className=\"cedros-admin-stat-value\">{stats.failedCount}</span>\n        </div>\n      </div>\n\n      {/* Ready vs Privacy Period */}\n      {(stats.readyForWithdrawalCount !== undefined ||\n        stats.inPrivacyPeriodCount !== undefined) && (\n        <div className=\"cedros-admin-stats-section\">\n          <h5 className=\"cedros-admin-stats-section-title\">Withdrawal Status</h5>\n          <div className=\"cedros-admin-stats-grid\">\n            <div className=\"cedros-admin-stat-card cedros-admin-stat-ready\">\n              <span className=\"cedros-admin-stat-label\">Ready Now</span>\n              <span className=\"cedros-admin-stat-value\">{stats.readyForWithdrawalCount ?? 0}</span>\n              <span className=\"cedros-admin-stat-sub\">\n                {(stats.readyForWithdrawalSol ?? 0).toFixed(4)} SOL\n              </span>\n            </div>\n\n            <div className=\"cedros-admin-stat-card cedros-admin-stat-waiting\">\n              <span className=\"cedros-admin-stat-label\">In Privacy Period</span>\n              <span className=\"cedros-admin-stat-value\">{stats.inPrivacyPeriodCount ?? 0}</span>\n              <span className=\"cedros-admin-stat-sub\">\n                {(stats.inPrivacyPeriodSol ?? 0).toFixed(4)} SOL\n              </span>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Input Token Breakdown */}\n      {(stats.usdcDepositCount !== undefined || stats.usdtDepositCount !== undefined) && (\n        <div className=\"cedros-admin-stats-section\">\n          <h5 className=\"cedros-admin-stats-section-title\">Input Tokens</h5>\n          <div className=\"cedros-admin-stats-grid\">\n            <div className=\"cedros-admin-stat-card\">\n              <span className=\"cedros-admin-stat-label\">USDC Deposits</span>\n              <span className=\"cedros-admin-stat-value\">{stats.usdcDepositCount ?? 0}</span>\n              <span className=\"cedros-admin-stat-sub\">\n                ${(stats.totalUsdcDisplay ?? 0).toFixed(2)}\n              </span>\n            </div>\n\n            <div className=\"cedros-admin-stat-card\">\n              <span className=\"cedros-admin-stat-label\">USDT Deposits</span>\n              <span className=\"cedros-admin-stat-value\">{stats.usdtDepositCount ?? 0}</span>\n              <span className=\"cedros-admin-stat-sub\">\n                ${(stats.totalUsdtDisplay ?? 0).toFixed(2)}\n              </span>\n            </div>\n\n            <div className=\"cedros-admin-stat-card\">\n              <span className=\"cedros-admin-stat-label\">Native SOL</span>\n              <span className=\"cedros-admin-stat-value\">{stats.nativeSolDepositCount ?? 0}</span>\n              <span className=\"cedros-admin-stat-sub\">\n                {(stats.totalNativeSolDisplay ?? 0).toFixed(4)} SOL\n              </span>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","/**\n * Admin deposit list component\n *\n * Shows a paginated list of all deposits across all users.\n * Requires system admin privileges.\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { useAdminDeposits } from '../../../hooks/useAdminDeposits';\nimport type { AdminDepositItem, AdminDepositListResponse } from '../../../types/deposit';\n\nexport interface AdminDepositListProps {\n  /** Filter by status (comma-separated) */\n  statusFilter?: string;\n  /** Number of items per page (default: 20) */\n  pageSize?: number;\n  /** Auto-refresh interval in milliseconds (0 to disable) */\n  refreshInterval?: number;\n  /** Additional CSS classes */\n  className?: string;\n  /** Callback when list is loaded */\n  onLoad?: (response: AdminDepositListResponse) => void;\n  /** Callback when a deposit is clicked */\n  onDepositClick?: (deposit: AdminDepositItem) => void;\n}\n\ntype DepositStatusType =\n  | 'pending'\n  | 'detected'\n  | 'processing'\n  | 'completed'\n  | 'withdrawn'\n  | 'partially_withdrawn'\n  | 'expired'\n  | 'failed';\n\nfunction getStatusLabel(status: DepositStatusType): string {\n  const labels: Record<DepositStatusType, string> = {\n    pending: 'Pending',\n    detected: 'Detected',\n    processing: 'Processing',\n    completed: 'Completed',\n    withdrawn: 'Withdrawn',\n    partially_withdrawn: 'Partially Withdrawn',\n    expired: 'Expired',\n    failed: 'Failed',\n  };\n  return labels[status] || status;\n}\n\nfunction getStatusClass(status: DepositStatusType): string {\n  if (status === 'completed' || status === 'withdrawn' || status === 'partially_withdrawn') {\n    return 'cedros-admin-deposit-success';\n  }\n  if (status === 'failed' || status === 'expired') return 'cedros-admin-deposit-error';\n  if (status === 'processing' || status === 'detected') return 'cedros-admin-deposit-processing';\n  return 'cedros-admin-deposit-pending';\n}\n\nfunction formatAmount(lamports: number | null): string {\n  if (lamports === null || lamports === undefined) return '';\n  const solAmount = lamports / 1_000_000_000;\n  return `${solAmount.toFixed(4)} SOL`;\n}\n\nfunction formatDate(dateString: string): string {\n  const date = new Date(dateString);\n  return date.toLocaleDateString(undefined, {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit',\n  });\n}\n\nfunction truncateId(id: string): string {\n  if (id.length <= 12) return id;\n  return `${id.slice(0, 6)}...${id.slice(-4)}`;\n}\n\n/**\n * Admin deposit list display\n *\n * Shows paginated list of all deposits with user info.\n */\nexport function AdminDepositList({\n  statusFilter,\n  pageSize = 20,\n  refreshInterval = 0,\n  className = '',\n  onLoad,\n  onDepositClick,\n}: AdminDepositListProps) {\n  const { listDeposits, isLoading, error, clearError } = useAdminDeposits();\n\n  const [deposits, setDeposits] = useState<AdminDepositItem[]>([]);\n  const [total, setTotal] = useState(0);\n  const [offset, setOffset] = useState(0);\n  const [loadError, setLoadError] = useState<string | null>(null);\n\n  const fetchDeposits = useCallback(async () => {\n    try {\n      const result = await listDeposits({ status: statusFilter, limit: pageSize, offset });\n      setDeposits(result.deposits);\n      setTotal(result.total);\n      onLoad?.(result);\n      setLoadError(null);\n    } catch (err) {\n      setLoadError(err instanceof Error ? err.message : 'Failed to load deposits');\n    }\n  }, [statusFilter, pageSize, offset, listDeposits, onLoad]);\n\n  // Reset offset when filters change\n  useEffect(() => {\n    setOffset(0);\n  }, [statusFilter, pageSize]);\n\n  // Fetch on mount and when dependencies change\n  useEffect(() => {\n    fetchDeposits();\n  }, [fetchDeposits]);\n\n  // Auto-refresh\n  useEffect(() => {\n    if (refreshInterval <= 0) return;\n\n    const interval = setInterval(fetchDeposits, refreshInterval);\n    return () => clearInterval(interval);\n  }, [refreshInterval, fetchDeposits]);\n\n  const totalPages = Math.ceil(total / pageSize);\n  const currentPage = Math.floor(offset / pageSize) + 1;\n\n  const goToPage = (page: number) => {\n    const newOffset = (page - 1) * pageSize;\n    setOffset(Math.max(0, Math.min(newOffset, Math.max(0, total - 1))));\n  };\n\n  // Error state\n  if (loadError || error) {\n    return (\n      <div className={`cedros-admin-deposit-list cedros-admin-deposit-list-error ${className}`}>\n        <p className=\"cedros-admin-error\">{loadError || error}</p>\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-outline\"\n          onClick={() => {\n            clearError();\n            setLoadError(null);\n            fetchDeposits();\n          }}\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  // Loading state (initial load only)\n  if (isLoading && deposits.length === 0) {\n    return (\n      <div className={`cedros-admin-deposit-list cedros-admin-deposit-list-loading ${className}`}>\n        <span className=\"cedros-admin-loading-indicator\" />\n        <span className=\"cedros-admin-loading-text\">Loading deposits...</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`cedros-admin-deposit-list ${className}`}>\n      <div className=\"cedros-admin-deposit-list-header\">\n        <h4 className=\"cedros-admin-deposit-list-title\">All Deposits</h4>\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-outline cedros-button-sm cedros-admin-icon-button\"\n          onClick={fetchDeposits}\n          disabled={isLoading}\n          title=\"Refresh deposits\"\n          aria-label=\"Refresh deposits\"\n        >\n          {isLoading ? '...' : ''}\n        </button>\n      </div>\n\n      {deposits.length === 0 ? (\n        <div className=\"cedros-admin-empty\">\n          <p className=\"cedros-admin-empty-message\">No deposits found.</p>\n        </div>\n      ) : (\n        <>\n          <div className=\"cedros-admin-deposit-table\">\n            <div className=\"cedros-admin-deposit-thead\">\n              <div className=\"cedros-admin-deposit-th\">User</div>\n              <div className=\"cedros-admin-deposit-th\">Amount</div>\n              <div className=\"cedros-admin-deposit-th\">Status</div>\n              <div className=\"cedros-admin-deposit-th\">Created</div>\n              <div className=\"cedros-admin-deposit-th\">Tx</div>\n            </div>\n            {deposits.map((deposit) => (\n              <div\n                key={deposit.id}\n                className={`cedros-admin-deposit-row ${getStatusClass(deposit.status)}`}\n                onClick={() => onDepositClick?.(deposit)}\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter' || e.key === ' ') {\n                    e.preventDefault();\n                    onDepositClick?.(deposit);\n                  }\n                }}\n                role={onDepositClick ? 'button' : undefined}\n                tabIndex={onDepositClick ? 0 : undefined}\n              >\n                <div className=\"cedros-admin-deposit-td\" title={deposit.userId}>\n                  {truncateId(deposit.userId)}\n                </div>\n                <div className=\"cedros-admin-deposit-td\">\n                  {formatAmount(deposit.amountLamports)}\n                </div>\n                <div className=\"cedros-admin-deposit-td\">\n                  <span className=\"cedros-admin-status-badge\">\n                    {getStatusLabel(deposit.status)}\n                  </span>\n                </div>\n                <div className=\"cedros-admin-deposit-td\">{formatDate(deposit.createdAt)}</div>\n                <div className=\"cedros-admin-deposit-td\" title={deposit.txSignature || undefined}>\n                  {deposit.txSignature ? truncateId(deposit.txSignature) : ''}\n                </div>\n              </div>\n            ))}\n          </div>\n\n          {totalPages > 1 && (\n            <div className=\"cedros-admin-pagination\">\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-outline cedros-button-sm\"\n                onClick={() => goToPage(currentPage - 1)}\n                disabled={currentPage <= 1}\n              >\n                Previous\n              </button>\n              <span className=\"cedros-admin-page-info\">\n                Page {currentPage} of {totalPages} ({total} total)\n              </span>\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-outline cedros-button-sm\"\n                onClick={() => goToPage(currentPage + 1)}\n                disabled={currentPage >= totalPages}\n              >\n                Next\n              </button>\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n","/**\n * Admin withdrawal queue component\n *\n * Shows deposits that are ready for withdrawal (privacy period elapsed).\n * Includes buttons to process individual or all withdrawals.\n * Requires system admin privileges.\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { useAdminDeposits } from '../../../hooks/useAdminDeposits';\nimport type {\n  AdminDepositItem,\n  AdminDepositListResponse,\n  ProcessWithdrawalResponse,\n  ProcessAllWithdrawalsResponse,\n} from '../../../types/deposit';\n\nexport interface AdminWithdrawalQueueProps {\n  /** Number of items per page (default: 20) */\n  pageSize?: number;\n  /** Auto-refresh interval in milliseconds (0 to disable) */\n  refreshInterval?: number;\n  /** Additional CSS classes */\n  className?: string;\n  /** Callback when list is loaded */\n  onLoad?: (response: AdminDepositListResponse) => void;\n  /** Callback when a withdrawal item is clicked */\n  onItemClick?: (item: AdminDepositItem) => void;\n  /** Callback when a withdrawal is processed */\n  onWithdrawalProcessed?: (response: ProcessWithdrawalResponse) => void;\n  /** Callback when all withdrawals are processed */\n  onAllProcessed?: (response: ProcessAllWithdrawalsResponse) => void;\n}\n\nfunction formatAmount(lamports: number | null): string {\n  if (lamports === null || lamports === undefined) return '';\n  const solAmount = lamports / 1_000_000_000;\n  return `${solAmount.toFixed(4)} SOL`;\n}\n\nfunction formatDate(dateString: string): string {\n  const date = new Date(dateString);\n  return date.toLocaleDateString(undefined, {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit',\n  });\n}\n\nfunction truncateId(id: string): string {\n  if (id.length <= 12) return id;\n  return `${id.slice(0, 6)}...${id.slice(-4)}`;\n}\n\nfunction getTimeElapsed(dateString: string): string {\n  const date = new Date(dateString);\n  const now = new Date();\n  const diffMs = now.getTime() - date.getTime();\n  const diffMins = Math.floor(diffMs / 60000);\n  const diffHours = Math.floor(diffMins / 60);\n  const diffDays = Math.floor(diffHours / 24);\n\n  if (diffDays > 0) return `${diffDays}d ago`;\n  if (diffHours > 0) return `${diffHours}h ago`;\n  if (diffMins > 0) return `${diffMins}m ago`;\n  return 'just now';\n}\n\nfunction isWithinPrivacyPeriod(withdrawalAvailableAt: string | undefined): boolean {\n  if (!withdrawalAvailableAt) return true;\n  return new Date(withdrawalAvailableAt) > new Date();\n}\n\n/**\n * Admin withdrawal queue display\n *\n * Shows deposits ready for withdrawal processing with action buttons.\n */\nexport function AdminWithdrawalQueue({\n  pageSize = 20,\n  refreshInterval = 0,\n  className = '',\n  onLoad,\n  onItemClick,\n  onWithdrawalProcessed,\n  onAllProcessed,\n}: AdminWithdrawalQueueProps) {\n  const {\n    listPendingWithdrawals,\n    processWithdrawal,\n    processAllWithdrawals,\n    isLoading,\n    error,\n    clearError,\n  } = useAdminDeposits();\n\n  const [items, setItems] = useState<AdminDepositItem[]>([]);\n  const [total, setTotal] = useState(0);\n  const [offset, setOffset] = useState(0);\n  const [loadError, setLoadError] = useState<string | null>(null);\n\n  // Processing state\n  const [processingId, setProcessingId] = useState<string | null>(null);\n  const [processingAll, setProcessingAll] = useState(false);\n  const [processResult, setProcessResult] = useState<{\n    type: 'success' | 'error';\n    message: string;\n  } | null>(null);\n\n  // Early withdrawal confirmation modal\n  const [earlyWithdrawalItem, setEarlyWithdrawalItem] = useState<AdminDepositItem | null>(null);\n\n  const fetchItems = useCallback(async () => {\n    try {\n      const result = await listPendingWithdrawals({ limit: pageSize, offset });\n      setItems(result.deposits);\n      setTotal(result.total);\n      onLoad?.(result);\n      setLoadError(null);\n    } catch (err) {\n      setLoadError(err instanceof Error ? err.message : 'Failed to load pending withdrawals');\n    }\n  }, [pageSize, offset, listPendingWithdrawals, onLoad]);\n\n  // Reset offset when page size changes\n  useEffect(() => {\n    setOffset(0);\n  }, [pageSize]);\n\n  // Fetch on mount and when dependencies change\n  useEffect(() => {\n    fetchItems();\n  }, [fetchItems]);\n\n  // Auto-refresh\n  useEffect(() => {\n    if (refreshInterval <= 0) return;\n\n    const interval = setInterval(fetchItems, refreshInterval);\n    return () => clearInterval(interval);\n  }, [refreshInterval, fetchItems]);\n\n  // Clear result message after 5 seconds\n  useEffect(() => {\n    if (!processResult) return;\n    const timer = setTimeout(() => setProcessResult(null), 5000);\n    return () => clearTimeout(timer);\n  }, [processResult]);\n\n  const totalPages = Math.ceil(total / pageSize);\n  const currentPage = Math.floor(offset / pageSize) + 1;\n\n  const goToPage = (page: number) => {\n    const newOffset = (page - 1) * pageSize;\n    setOffset(Math.max(0, Math.min(newOffset, Math.max(0, total - 1))));\n  };\n\n  const handleProcessSingle = async (item: AdminDepositItem, force = false) => {\n    // Check if within privacy period and not forcing\n    if (!force && isWithinPrivacyPeriod(item.withdrawalAvailableAt)) {\n      setEarlyWithdrawalItem(item);\n      return;\n    }\n\n    setProcessingId(item.id);\n    setProcessResult(null);\n\n    try {\n      const result = await processWithdrawal(item.id, { force });\n      if (result.success) {\n        setProcessResult({\n          type: 'success',\n          message: `Withdrawal processed: ${result.txSignature?.slice(0, 12)}...`,\n        });\n        onWithdrawalProcessed?.(result);\n        // Refresh the list\n        await fetchItems();\n      } else {\n        setProcessResult({\n          type: 'error',\n          message: result.error || 'Failed to process withdrawal',\n        });\n      }\n    } catch (err) {\n      setProcessResult({\n        type: 'error',\n        message: err instanceof Error ? err.message : 'Failed to process withdrawal',\n      });\n    } finally {\n      setProcessingId(null);\n      setEarlyWithdrawalItem(null);\n    }\n  };\n\n  const handleProcessAll = async () => {\n    if (items.length === 0) return;\n\n    setProcessingAll(true);\n    setProcessResult(null);\n\n    try {\n      const result = await processAllWithdrawals();\n      if (result.totalSucceeded > 0) {\n        setProcessResult({\n          type: 'success',\n          message: `Processed ${result.totalSucceeded}/${result.totalProcessed} withdrawals`,\n        });\n      } else if (result.totalFailed > 0) {\n        setProcessResult({\n          type: 'error',\n          message: `Failed to process ${result.totalFailed} withdrawals`,\n        });\n      }\n      onAllProcessed?.(result);\n      // Refresh the list\n      await fetchItems();\n    } catch (err) {\n      setProcessResult({\n        type: 'error',\n        message: err instanceof Error ? err.message : 'Failed to process withdrawals',\n      });\n    } finally {\n      setProcessingAll(false);\n    }\n  };\n\n  // Error state\n  if (loadError || error) {\n    return (\n      <div\n        className={`cedros-admin-withdrawal-queue cedros-admin-withdrawal-queue-error ${className}`}\n      >\n        <p className=\"cedros-admin-error\">{loadError || error}</p>\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-outline\"\n          onClick={() => {\n            clearError();\n            setLoadError(null);\n            fetchItems();\n          }}\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  // Loading state (initial load only)\n  if (isLoading && items.length === 0 && !processingId && !processingAll) {\n    return (\n      <div\n        className={`cedros-admin-withdrawal-queue cedros-admin-withdrawal-queue-loading ${className}`}\n      >\n        <span className=\"cedros-admin-loading-indicator\" />\n        <span className=\"cedros-admin-loading-text\">Loading withdrawal queue...</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`cedros-admin-withdrawal-queue ${className}`}>\n      {/* Early Withdrawal Confirmation Modal */}\n      {earlyWithdrawalItem && (\n        <div\n          className=\"cedros-admin-modal-overlay\"\n          onClick={() => setEarlyWithdrawalItem(null)}\n          onKeyDown={(e) => e.key === 'Escape' && setEarlyWithdrawalItem(null)}\n          role=\"dialog\"\n          aria-modal=\"true\"\n          aria-labelledby=\"early-withdrawal-title\"\n        >\n          <div\n            className=\"cedros-admin-modal cedros-admin-modal-warning\"\n            onClick={(e) => e.stopPropagation()}\n            onKeyDown={() => {}}\n            role=\"document\"\n          >\n            <h3 id=\"early-withdrawal-title\" className=\"cedros-admin-modal-title\">\n              Early Withdrawal Warning\n            </h3>\n            <div className=\"cedros-admin-modal-content\">\n              <p className=\"cedros-admin-modal-warning-text\">\n                <strong>This deposit is still within its privacy period.</strong>\n              </p>\n              <p>\n                Processing this withdrawal early may compromise user privacy. The privacy period\n                exists to provide plausible deniability for deposits.\n              </p>\n              <p className=\"cedros-admin-modal-details\">\n                User: {truncateId(earlyWithdrawalItem.userId)}\n                <br />\n                Amount: {formatAmount(earlyWithdrawalItem.amountLamports)}\n                <br />\n                Available at:{' '}\n                {earlyWithdrawalItem.withdrawalAvailableAt\n                  ? formatDate(earlyWithdrawalItem.withdrawalAvailableAt)\n                  : ''}\n              </p>\n              <p>Are you sure you want to process this withdrawal early?</p>\n            </div>\n            <div className=\"cedros-admin-modal-actions\">\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-outline\"\n                onClick={() => setEarlyWithdrawalItem(null)}\n              >\n                Cancel\n              </button>\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-danger\"\n                onClick={() => handleProcessSingle(earlyWithdrawalItem, true)}\n                disabled={processingId === earlyWithdrawalItem.id}\n              >\n                {processingId === earlyWithdrawalItem.id ? 'Processing...' : 'Process Early'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Result message */}\n      {processResult && (\n        <div\n          className={`cedros-admin-result cedros-admin-result-${processResult.type}`}\n          role=\"status\"\n          aria-live=\"polite\"\n        >\n          {processResult.message}\n        </div>\n      )}\n\n      <div className=\"cedros-admin-withdrawal-queue-header\">\n        <h4 className=\"cedros-admin-withdrawal-queue-title\">Pending Withdrawals</h4>\n        <div className=\"cedros-admin-withdrawal-queue-actions\">\n          <span className=\"cedros-admin-queue-count\">{total} pending</span>\n          <button\n            type=\"button\"\n            className=\"cedros-button cedros-button-outline cedros-button-sm cedros-admin-icon-button\"\n            onClick={fetchItems}\n            disabled={isLoading || processingAll}\n            title=\"Refresh queue\"\n            aria-label=\"Refresh queue\"\n          >\n            {isLoading && !processingAll ? '...' : ''}\n          </button>\n          <button\n            type=\"button\"\n            className=\"cedros-button cedros-button-primary cedros-button-sm\"\n            onClick={handleProcessAll}\n            disabled={isLoading || processingAll || items.length === 0}\n            title=\"Process all ready withdrawals\"\n          >\n            {processingAll ? 'Processing...' : 'Process All'}\n          </button>\n        </div>\n      </div>\n\n      {items.length === 0 ? (\n        <div className=\"cedros-admin-empty\">\n          <p className=\"cedros-admin-empty-message\">No pending withdrawals.</p>\n        </div>\n      ) : (\n        <>\n          <div className=\"cedros-admin-withdrawal-table\">\n            <div className=\"cedros-admin-withdrawal-thead\">\n              <div className=\"cedros-admin-withdrawal-th\">User</div>\n              <div className=\"cedros-admin-withdrawal-th\">Amount</div>\n              <div className=\"cedros-admin-withdrawal-th\">Ready Since</div>\n              <div className=\"cedros-admin-withdrawal-th\">Waiting</div>\n              <div className=\"cedros-admin-withdrawal-th cedros-admin-withdrawal-th-action\">\n                Action\n              </div>\n            </div>\n            {items.map((item) => {\n              const withinPrivacyPeriod = isWithinPrivacyPeriod(item.withdrawalAvailableAt);\n              const isProcessing = processingId === item.id;\n\n              return (\n                <div\n                  key={item.id}\n                  className={`cedros-admin-withdrawal-row ${withinPrivacyPeriod ? 'cedros-admin-withdrawal-row-early' : ''}`}\n                  onClick={() => onItemClick?.(item)}\n                  onKeyDown={(e) => {\n                    if (e.key === 'Enter' || e.key === ' ') {\n                      e.preventDefault();\n                      onItemClick?.(item);\n                    }\n                  }}\n                  role={onItemClick ? 'button' : undefined}\n                  tabIndex={onItemClick ? 0 : undefined}\n                >\n                  <div className=\"cedros-admin-withdrawal-td\" title={item.userId}>\n                    {truncateId(item.userId)}\n                  </div>\n                  <div className=\"cedros-admin-withdrawal-td\">\n                    {formatAmount(item.amountLamports)}\n                  </div>\n                  <div className=\"cedros-admin-withdrawal-td\">\n                    {item.withdrawalAvailableAt ? formatDate(item.withdrawalAvailableAt) : ''}\n                  </div>\n                  <div className=\"cedros-admin-withdrawal-td cedros-admin-withdrawal-waiting\">\n                    {item.withdrawalAvailableAt\n                      ? withinPrivacyPeriod\n                        ? 'In privacy period'\n                        : getTimeElapsed(item.withdrawalAvailableAt)\n                      : ''}\n                  </div>\n                  <div className=\"cedros-admin-withdrawal-td cedros-admin-withdrawal-td-action\">\n                    <button\n                      type=\"button\"\n                      className={`cedros-button cedros-button-sm ${withinPrivacyPeriod ? 'cedros-button-warning' : 'cedros-button-primary'}`}\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleProcessSingle(item);\n                      }}\n                      disabled={isProcessing || processingAll}\n                      title={\n                        withinPrivacyPeriod\n                          ? 'Early withdrawal (requires confirmation)'\n                          : 'Process this withdrawal'\n                      }\n                    >\n                      {isProcessing ? '...' : withinPrivacyPeriod ? 'Early' : 'Process'}\n                    </button>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n\n          {totalPages > 1 && (\n            <div className=\"cedros-admin-pagination\">\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-outline cedros-button-sm\"\n                onClick={() => goToPage(currentPage - 1)}\n                disabled={currentPage <= 1}\n              >\n                Previous\n              </button>\n              <span className=\"cedros-admin-page-info\">\n                Page {currentPage} of {totalPages} ({total} total)\n              </span>\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-outline cedros-button-sm\"\n                onClick={() => goToPage(currentPage + 1)}\n                disabled={currentPage >= totalPages}\n              >\n                Next\n              </button>\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n","/**\n * Admin privacy period deposits component\n *\n * Shows deposits that are still in the privacy period (completed but not yet ready for withdrawal).\n * Requires system admin privileges.\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { useAdminDeposits } from '../../../hooks/useAdminDeposits';\nimport type { AdminDepositItem, AdminDepositListResponse } from '../../../types/deposit';\n\nexport interface AdminPrivacyPeriodDepositsProps {\n  /** Number of items per page (default: 20) */\n  pageSize?: number;\n  /** Auto-refresh interval in milliseconds (0 to disable) */\n  refreshInterval?: number;\n  /** Additional CSS classes */\n  className?: string;\n  /** Callback when list is loaded */\n  onLoad?: (response: AdminDepositListResponse) => void;\n  /** Callback when a deposit item is clicked */\n  onItemClick?: (item: AdminDepositItem) => void;\n}\n\nfunction formatAmount(lamports: number | null): string {\n  if (lamports === null || lamports === undefined) return '';\n  const solAmount = lamports / 1_000_000_000;\n  return `${solAmount.toFixed(4)} SOL`;\n}\n\nfunction formatDate(dateString: string): string {\n  const date = new Date(dateString);\n  return date.toLocaleDateString(undefined, {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit',\n  });\n}\n\nfunction truncateId(id: string): string {\n  if (id.length <= 12) return id;\n  return `${id.slice(0, 6)}...${id.slice(-4)}`;\n}\n\nfunction getTimeRemaining(dateString: string): string {\n  const date = new Date(dateString);\n  const now = new Date();\n  const diffMs = date.getTime() - now.getTime();\n\n  if (diffMs <= 0) return 'Ready';\n\n  const diffMins = Math.floor(diffMs / 60000);\n  const diffHours = Math.floor(diffMins / 60);\n  const diffDays = Math.floor(diffHours / 24);\n\n  if (diffDays > 0) {\n    const remainingHours = diffHours % 24;\n    return remainingHours > 0 ? `${diffDays}d ${remainingHours}h` : `${diffDays}d`;\n  }\n  if (diffHours > 0) {\n    const remainingMins = diffMins % 60;\n    return remainingMins > 0 ? `${diffHours}h ${remainingMins}m` : `${diffHours}h`;\n  }\n  return `${diffMins}m`;\n}\n\n/**\n * Admin privacy period deposits display\n *\n * Shows deposits that are still in the privacy period (not yet available for withdrawal).\n */\nexport function AdminPrivacyPeriodDeposits({\n  pageSize = 20,\n  refreshInterval = 0,\n  className = '',\n  onLoad,\n  onItemClick,\n}: AdminPrivacyPeriodDepositsProps) {\n  const { listInPrivacyPeriod, isLoading, error, clearError } = useAdminDeposits();\n\n  const [items, setItems] = useState<AdminDepositItem[]>([]);\n  const [total, setTotal] = useState(0);\n  const [offset, setOffset] = useState(0);\n  const [loadError, setLoadError] = useState<string | null>(null);\n\n  const fetchItems = useCallback(async () => {\n    try {\n      const result = await listInPrivacyPeriod({ limit: pageSize, offset });\n      setItems(result.deposits);\n      setTotal(result.total);\n      onLoad?.(result);\n      setLoadError(null);\n    } catch (err) {\n      setLoadError(err instanceof Error ? err.message : 'Failed to load deposits');\n    }\n  }, [pageSize, offset, listInPrivacyPeriod, onLoad]);\n\n  // Reset offset when page size changes\n  useEffect(() => {\n    setOffset(0);\n  }, [pageSize]);\n\n  // Fetch on mount and when dependencies change\n  useEffect(() => {\n    fetchItems();\n  }, [fetchItems]);\n\n  // Auto-refresh\n  useEffect(() => {\n    if (refreshInterval <= 0) return;\n\n    const interval = setInterval(fetchItems, refreshInterval);\n    return () => clearInterval(interval);\n  }, [refreshInterval, fetchItems]);\n\n  const totalPages = Math.ceil(total / pageSize);\n  const currentPage = Math.floor(offset / pageSize) + 1;\n\n  const goToPage = (page: number) => {\n    const newOffset = (page - 1) * pageSize;\n    setOffset(Math.max(0, Math.min(newOffset, Math.max(0, total - 1))));\n  };\n\n  // Error state\n  if (loadError || error) {\n    return (\n      <div\n        className={`cedros-admin-privacy-deposits cedros-admin-privacy-deposits-error ${className}`}\n      >\n        <p className=\"cedros-admin-error\">{loadError || error}</p>\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-outline\"\n          onClick={() => {\n            clearError();\n            setLoadError(null);\n            fetchItems();\n          }}\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  // Loading state (initial load only)\n  if (isLoading && items.length === 0) {\n    return (\n      <div\n        className={`cedros-admin-privacy-deposits cedros-admin-privacy-deposits-loading ${className}`}\n      >\n        <span className=\"cedros-admin-loading-indicator\" />\n        <span className=\"cedros-admin-loading-text\">Loading deposits...</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`cedros-admin-privacy-deposits ${className}`}>\n      <div className=\"cedros-admin-privacy-deposits-header\">\n        <h4 className=\"cedros-admin-privacy-deposits-title\">In Privacy Period</h4>\n        <div className=\"cedros-admin-privacy-deposits-actions\">\n          <span className=\"cedros-admin-queue-count\">\n            {total} deposit{total !== 1 ? 's' : ''}\n          </span>\n          <button\n            type=\"button\"\n            className=\"cedros-button cedros-button-outline cedros-button-sm cedros-admin-icon-button\"\n            onClick={fetchItems}\n            disabled={isLoading}\n            title=\"Refresh list\"\n            aria-label=\"Refresh list\"\n          >\n            {isLoading ? '...' : ''}\n          </button>\n        </div>\n      </div>\n\n      {items.length === 0 ? (\n        <div className=\"cedros-admin-empty\">\n          <p className=\"cedros-admin-empty-message\">No deposits in privacy period.</p>\n        </div>\n      ) : (\n        <>\n          <div className=\"cedros-admin-privacy-table\">\n            <div className=\"cedros-admin-privacy-thead\">\n              <div className=\"cedros-admin-privacy-th\">User</div>\n              <div className=\"cedros-admin-privacy-th\">Amount</div>\n              <div className=\"cedros-admin-privacy-th\">Deposited</div>\n              <div className=\"cedros-admin-privacy-th\">Ready In</div>\n            </div>\n            {items.map((item) => (\n              <div\n                key={item.id}\n                className=\"cedros-admin-privacy-row\"\n                onClick={() => onItemClick?.(item)}\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter' || e.key === ' ') {\n                    e.preventDefault();\n                    onItemClick?.(item);\n                  }\n                }}\n                role={onItemClick ? 'button' : undefined}\n                tabIndex={onItemClick ? 0 : undefined}\n              >\n                <div className=\"cedros-admin-privacy-td\" title={item.userId}>\n                  {truncateId(item.userId)}\n                </div>\n                <div className=\"cedros-admin-privacy-td\">{formatAmount(item.amountLamports)}</div>\n                <div className=\"cedros-admin-privacy-td\">\n                  {item.completedAt ? formatDate(item.completedAt) : ''}\n                </div>\n                <div className=\"cedros-admin-privacy-td cedros-admin-privacy-remaining\">\n                  {item.withdrawalAvailableAt ? getTimeRemaining(item.withdrawalAvailableAt) : ''}\n                </div>\n              </div>\n            ))}\n          </div>\n\n          {totalPages > 1 && (\n            <div className=\"cedros-admin-pagination\">\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-outline cedros-button-sm\"\n                onClick={() => goToPage(currentPage - 1)}\n                disabled={currentPage <= 1}\n              >\n                Previous\n              </button>\n              <span className=\"cedros-admin-page-info\">\n                Page {currentPage} of {totalPages} ({total} total)\n              </span>\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-outline cedros-button-sm\"\n                onClick={() => goToPage(currentPage + 1)}\n                disabled={currentPage >= totalPages}\n              >\n                Next\n              </button>\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n","/**\n * Admin withdrawal history component\n *\n * Shows deposits that have been fully withdrawn (processed).\n * Requires system admin privileges.\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { useAdminDeposits } from '../../../hooks/useAdminDeposits';\nimport type { AdminDepositItem, AdminDepositListResponse } from '../../../types/deposit';\n\nexport interface AdminWithdrawalHistoryProps {\n  /** Number of items per page (default: 20) */\n  pageSize?: number;\n  /** Auto-refresh interval in milliseconds (0 to disable) */\n  refreshInterval?: number;\n  /** Additional CSS classes */\n  className?: string;\n  /** Callback when list is loaded */\n  onLoad?: (response: AdminDepositListResponse) => void;\n  /** Callback when a withdrawal item is clicked */\n  onItemClick?: (item: AdminDepositItem) => void;\n}\n\nfunction formatAmount(lamports: number | null): string {\n  if (lamports === null || lamports === undefined) return '';\n  const solAmount = lamports / 1_000_000_000;\n  return `${solAmount.toFixed(4)} SOL`;\n}\n\nfunction formatDate(dateString: string): string {\n  const date = new Date(dateString);\n  return date.toLocaleDateString(undefined, {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit',\n  });\n}\n\nfunction truncateSignature(sig: string): string {\n  if (sig.length <= 16) return sig;\n  return `${sig.slice(0, 8)}...${sig.slice(-6)}`;\n}\n\nfunction truncateId(id: string): string {\n  if (id.length <= 12) return id;\n  return `${id.slice(0, 6)}...${id.slice(-4)}`;\n}\n\n/**\n * Admin withdrawal history display\n *\n * Shows deposits that have been fully withdrawn.\n */\nexport function AdminWithdrawalHistory({\n  pageSize = 20,\n  refreshInterval = 0,\n  className = '',\n  onLoad,\n  onItemClick,\n}: AdminWithdrawalHistoryProps) {\n  const { listDeposits, isLoading, error, clearError } = useAdminDeposits();\n\n  const [items, setItems] = useState<AdminDepositItem[]>([]);\n  const [total, setTotal] = useState(0);\n  const [offset, setOffset] = useState(0);\n  const [loadError, setLoadError] = useState<string | null>(null);\n\n  const fetchItems = useCallback(async () => {\n    try {\n      const result = await listDeposits({ status: 'withdrawn', limit: pageSize, offset });\n      setItems(result.deposits);\n      setTotal(result.total);\n      onLoad?.(result);\n      setLoadError(null);\n    } catch (err) {\n      setLoadError(err instanceof Error ? err.message : 'Failed to load withdrawal history');\n    }\n  }, [pageSize, offset, listDeposits, onLoad]);\n\n  // Reset offset when page size changes\n  useEffect(() => {\n    setOffset(0);\n  }, [pageSize]);\n\n  // Fetch on mount and when dependencies change\n  useEffect(() => {\n    fetchItems();\n  }, [fetchItems]);\n\n  // Auto-refresh\n  useEffect(() => {\n    if (refreshInterval <= 0) return;\n\n    const interval = setInterval(fetchItems, refreshInterval);\n    return () => clearInterval(interval);\n  }, [refreshInterval, fetchItems]);\n\n  const totalPages = Math.ceil(total / pageSize);\n  const currentPage = Math.floor(offset / pageSize) + 1;\n\n  const goToPage = (page: number) => {\n    const newOffset = (page - 1) * pageSize;\n    setOffset(Math.max(0, Math.min(newOffset, Math.max(0, total - 1))));\n  };\n\n  // Error state\n  if (loadError || error) {\n    return (\n      <div\n        className={`cedros-admin-withdrawal-history cedros-admin-withdrawal-history-error ${className}`}\n      >\n        <p className=\"cedros-admin-error\">{loadError || error}</p>\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-outline\"\n          onClick={() => {\n            clearError();\n            setLoadError(null);\n            fetchItems();\n          }}\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  // Loading state (initial load only)\n  if (isLoading && items.length === 0) {\n    return (\n      <div\n        className={`cedros-admin-withdrawal-history cedros-admin-withdrawal-history-loading ${className}`}\n      >\n        <span className=\"cedros-admin-loading-indicator\" />\n        <span className=\"cedros-admin-loading-text\">Loading withdrawal history...</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`cedros-admin-withdrawal-history ${className}`}>\n      <div className=\"cedros-admin-withdrawal-history-header\">\n        <h4 className=\"cedros-admin-withdrawal-history-title\">Withdrawal History</h4>\n        <div className=\"cedros-admin-withdrawal-history-actions\">\n          <span className=\"cedros-admin-queue-count\">\n            {total} withdrawal{total !== 1 ? 's' : ''}\n          </span>\n          <button\n            type=\"button\"\n            className=\"cedros-button cedros-button-outline cedros-button-sm cedros-admin-icon-button\"\n            onClick={fetchItems}\n            disabled={isLoading}\n            title=\"Refresh list\"\n            aria-label=\"Refresh list\"\n          >\n            {isLoading ? '...' : ''}\n          </button>\n        </div>\n      </div>\n\n      {items.length === 0 ? (\n        <div className=\"cedros-admin-empty\">\n          <p className=\"cedros-admin-empty-message\">No withdrawals processed yet.</p>\n        </div>\n      ) : (\n        <>\n          <div className=\"cedros-admin-history-table\">\n            <div className=\"cedros-admin-history-thead\">\n              <div className=\"cedros-admin-history-th\">User</div>\n              <div className=\"cedros-admin-history-th\">Amount</div>\n              <div className=\"cedros-admin-history-th\">Processed</div>\n              <div className=\"cedros-admin-history-th\">Transaction</div>\n            </div>\n            {items.map((item) => (\n              <div\n                key={item.id}\n                className=\"cedros-admin-history-row\"\n                onClick={() => onItemClick?.(item)}\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter' || e.key === ' ') {\n                    e.preventDefault();\n                    onItemClick?.(item);\n                  }\n                }}\n                role={onItemClick ? 'button' : undefined}\n                tabIndex={onItemClick ? 0 : undefined}\n              >\n                <div className=\"cedros-admin-history-td\" title={item.userId}>\n                  {truncateId(item.userId)}\n                </div>\n                <div className=\"cedros-admin-history-td\">{formatAmount(item.amountLamports)}</div>\n                <div className=\"cedros-admin-history-td\">\n                  {item.completedAt ? formatDate(item.completedAt) : ''}\n                </div>\n                <div className=\"cedros-admin-history-td\">\n                  {item.withdrawalTxSignature ? (\n                    <a\n                      href={`https://orbmarkets.io/tx/${item.withdrawalTxSignature}`}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"cedros-admin-tx-link\"\n                      onClick={(e) => e.stopPropagation()}\n                      title={item.withdrawalTxSignature}\n                    >\n                      {truncateSignature(item.withdrawalTxSignature)}\n                    </a>\n                  ) : (\n                    ''\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n\n          {totalPages > 1 && (\n            <div className=\"cedros-admin-pagination\">\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-outline cedros-button-sm\"\n                onClick={() => goToPage(currentPage - 1)}\n                disabled={currentPage <= 1}\n              >\n                Previous\n              </button>\n              <span className=\"cedros-admin-page-info\">\n                Page {currentPage} of {totalPages} ({total} total)\n              </span>\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-outline cedros-button-sm\"\n                onClick={() => goToPage(currentPage + 1)}\n                disabled={currentPage >= totalPages}\n              >\n                Next\n              </button>\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n","/**\n * Privacy Cash system status component\n *\n * Shows system configuration including partial withdrawal settings.\n * Requires system admin privileges.\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { useAdminDeposits } from '../../../hooks/useAdminDeposits';\nimport type { PrivacyStatusResponse } from '../../../types/deposit';\n\nexport interface PrivacySystemStatusProps {\n  /** Auto-refresh interval in milliseconds (0 to disable) */\n  refreshInterval?: number;\n  /** Additional CSS classes */\n  className?: string;\n  /** Callback when status is loaded */\n  onLoad?: (status: PrivacyStatusResponse) => void;\n}\n\n/**\n * Privacy Cash system status display\n *\n * Shows configuration including partial withdrawal settings for timing analysis protection.\n */\nexport function PrivacySystemStatus({\n  refreshInterval = 0,\n  className = '',\n  onLoad,\n}: PrivacySystemStatusProps) {\n  const { getPrivacyStatus, isLoading, error, clearError } = useAdminDeposits();\n\n  const [status, setStatus] = useState<PrivacyStatusResponse | null>(null);\n  const [loadError, setLoadError] = useState<string | null>(null);\n\n  const fetchStatus = useCallback(async () => {\n    try {\n      const result = await getPrivacyStatus();\n      setStatus(result);\n      onLoad?.(result);\n      setLoadError(null);\n    } catch (err) {\n      setLoadError(err instanceof Error ? err.message : 'Failed to load status');\n    }\n  }, [getPrivacyStatus, onLoad]);\n\n  // Fetch on mount\n  useEffect(() => {\n    fetchStatus();\n  }, [fetchStatus]);\n\n  // Auto-refresh\n  useEffect(() => {\n    if (refreshInterval <= 0) return;\n\n    const interval = setInterval(fetchStatus, refreshInterval);\n    return () => clearInterval(interval);\n  }, [refreshInterval, fetchStatus]);\n\n  // Error state\n  if (loadError || error) {\n    return (\n      <div className={`cedros-admin-status cedros-admin-status-error ${className}`}>\n        <p className=\"cedros-admin-error\">{loadError || error}</p>\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-outline\"\n          onClick={() => {\n            clearError();\n            setLoadError(null);\n            fetchStatus();\n          }}\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  // Loading state\n  if (isLoading && !status) {\n    return (\n      <div className={`cedros-admin-status cedros-admin-status-loading ${className}`}>\n        <span className=\"cedros-admin-loading-indicator\" />\n        <span className=\"cedros-admin-loading-text\">Loading system status...</span>\n      </div>\n    );\n  }\n\n  if (!status) {\n    return null;\n  }\n\n  const isPartialWithdrawalEnabled = status.partialWithdrawalCount > 0;\n\n  return (\n    <div className={`cedros-admin-status ${className}`}>\n      <div className=\"cedros-admin-status-header\">\n        <h4 className=\"cedros-admin-status-title\">System Configuration</h4>\n        <div className=\"cedros-admin-status-actions\">\n          <span\n            className={`cedros-admin-status-badge ${status.enabled ? 'cedros-admin-status-badge-enabled' : 'cedros-admin-status-badge-disabled'}`}\n          >\n            {status.enabled ? 'Enabled' : 'Disabled'}\n          </span>\n          <button\n            type=\"button\"\n            className=\"cedros-button cedros-button-outline cedros-button-sm cedros-admin-icon-button\"\n            onClick={fetchStatus}\n            disabled={isLoading}\n            title=\"Refresh status\"\n            aria-label=\"Refresh status\"\n          >\n            {isLoading ? '...' : ''}\n          </button>\n        </div>\n      </div>\n\n      <div className=\"cedros-admin-status-grid\">\n        {/* Core Settings */}\n        <div className=\"cedros-admin-status-section\">\n          <h5 className=\"cedros-admin-status-section-title\">Core Settings</h5>\n          <div className=\"cedros-admin-status-item\">\n            <span className=\"cedros-admin-status-label\">Privacy Period</span>\n            <span className=\"cedros-admin-status-value\">{status.privacyPeriodDisplay}</span>\n          </div>\n          <div className=\"cedros-admin-status-item\">\n            <span className=\"cedros-admin-status-label\">Min Deposit</span>\n            <span className=\"cedros-admin-status-value\">{status.minDepositSol} SOL</span>\n          </div>\n          <div className=\"cedros-admin-status-item\">\n            <span className=\"cedros-admin-status-label\">Company Currency</span>\n            <span className=\"cedros-admin-status-value\">{status.companyCurrency}</span>\n          </div>\n        </div>\n\n        {/* Partial Withdrawal Settings */}\n        <div className=\"cedros-admin-status-section\">\n          <h5 className=\"cedros-admin-status-section-title\">\n            Partial Withdrawals\n            <span\n              className={`cedros-admin-status-badge cedros-admin-status-badge-sm ${isPartialWithdrawalEnabled ? 'cedros-admin-status-badge-enabled' : 'cedros-admin-status-badge-disabled'}`}\n            >\n              {isPartialWithdrawalEnabled ? 'On' : 'Off'}\n            </span>\n          </h5>\n          <div className=\"cedros-admin-status-item\">\n            <span className=\"cedros-admin-status-label\">Withdrawal %</span>\n            <span className=\"cedros-admin-status-value\">{status.withdrawalPercentage}%</span>\n          </div>\n          <div className=\"cedros-admin-status-item\">\n            <span className=\"cedros-admin-status-label\">Max per Batch</span>\n            <span className=\"cedros-admin-status-value\">\n              {status.partialWithdrawalCount === 0 ? 'N/A' : status.partialWithdrawalCount}\n            </span>\n          </div>\n          <div className=\"cedros-admin-status-item\">\n            <span className=\"cedros-admin-status-label\">Min Amount</span>\n            <span className=\"cedros-admin-status-value\">\n              {status.partialWithdrawalCount === 0\n                ? 'N/A'\n                : `${status.partialWithdrawalMinSol} SOL`}\n            </span>\n          </div>\n        </div>\n\n        {/* Worker Settings */}\n        <div className=\"cedros-admin-status-section\">\n          <h5 className=\"cedros-admin-status-section-title\">Worker Settings</h5>\n          <div className=\"cedros-admin-status-item\">\n            <span className=\"cedros-admin-status-label\">Poll Interval</span>\n            <span className=\"cedros-admin-status-value\">{status.withdrawalPollIntervalSecs}s</span>\n          </div>\n          <div className=\"cedros-admin-status-item\">\n            <span className=\"cedros-admin-status-label\">Batch Size</span>\n            <span className=\"cedros-admin-status-value\">{status.withdrawalBatchSize}</span>\n          </div>\n          <div className=\"cedros-admin-status-item\">\n            <span className=\"cedros-admin-status-label\">Sidecar Status</span>\n            <span\n              className={`cedros-admin-status-value ${status.sidecarStatus === 'connected' ? 'cedros-admin-status-connected' : 'cedros-admin-status-disconnected'}`}\n            >\n              {status.sidecarStatus}\n            </span>\n          </div>\n        </div>\n      </div>\n\n      {/* Wallet Info */}\n      {status.companyWallet && (\n        <div className=\"cedros-admin-status-footer\">\n          <span className=\"cedros-admin-status-label\">Company Wallet</span>\n          <code className=\"cedros-admin-status-wallet\" title={status.companyWallet}>\n            {status.companyWallet.slice(0, 8)}...{status.companyWallet.slice(-6)}\n          </code>\n        </div>\n      )}\n    </div>\n  );\n}\n","import type {\n  AdminUser,\n  AdminUserCreditsResponse,\n  AdjustCreditsRequest,\n  ListAdminUsersResponse,\n  ListUsersParams,\n  UpdateUserRequest,\n} from '../types';\nimport type {\n  AdminDepositListResponse,\n  AdminUserWithdrawalHistoryResponse,\n} from '../types/deposit';\nimport { ApiClient, handleApiError } from './apiClient';\n\n/**\n * API client for admin user operations\n *\n * Requires system admin privileges.\n */\nexport class AdminUserApiClient {\n  private client: ApiClient;\n\n  constructor(\n    baseUrl: string,\n    timeoutMs?: number,\n    retryAttempts?: number,\n    getAccessToken?: () => string | null\n  ) {\n    this.client = new ApiClient({ baseUrl, timeoutMs, retryAttempts, getAccessToken });\n  }\n\n  /**\n   * List all users in the system\n   */\n  async listUsers(params?: ListUsersParams): Promise<ListAdminUsersResponse> {\n    try {\n      const query = new URLSearchParams();\n      if (params?.limit) query.set('limit', String(params.limit));\n      if (params?.offset) query.set('offset', String(params.offset));\n      const queryString = query.toString();\n      const url = `/admin/users${queryString ? `?${queryString}` : ''}`;\n      return await this.client.get<ListAdminUsersResponse>(url);\n    } catch (error) {\n      throw handleApiError(error, 'Failed to list users');\n    }\n  }\n\n  /**\n   * Get a specific user by ID\n   */\n  async getUser(userId: string): Promise<AdminUser> {\n    try {\n      return await this.client.get<AdminUser>(`/admin/users/${userId}`);\n    } catch (error) {\n      throw handleApiError(error, 'Failed to get user');\n    }\n  }\n\n  /**\n   * Set a user's system admin status\n   */\n  async setSystemAdmin(userId: string, isAdmin: boolean): Promise<void> {\n    try {\n      await this.client.patch(`/admin/users/${userId}/system-admin`, { isAdmin });\n    } catch (error) {\n      throw handleApiError(error, 'Failed to update system admin status');\n    }\n  }\n\n  /**\n   * Update a user's profile\n   */\n  async updateUser(userId: string, data: UpdateUserRequest): Promise<AdminUser> {\n    try {\n      return await this.client.patch<AdminUser>(`/admin/users/${userId}`, data);\n    } catch (error) {\n      throw handleApiError(error, 'Failed to update user');\n    }\n  }\n\n  /**\n   * Delete a user\n   */\n  async deleteUser(userId: string): Promise<void> {\n    try {\n      await this.client.delete(`/admin/users/${userId}`);\n    } catch (error) {\n      throw handleApiError(error, 'Failed to delete user');\n    }\n  }\n\n  /**\n   * Send a password reset email to a user\n   */\n  async forcePasswordReset(userId: string): Promise<void> {\n    try {\n      await this.client.post(`/admin/users/${userId}/force-password-reset`, {});\n    } catch (error) {\n      throw handleApiError(error, 'Failed to send password reset email');\n    }\n  }\n\n  /**\n   * Adjust a user's credits\n   */\n  async adjustCredits(userId: string, data: AdjustCreditsRequest): Promise<void> {\n    try {\n      await this.client.post(`/admin/users/${userId}/credits`, data);\n    } catch (error) {\n      throw handleApiError(error, 'Failed to adjust credits');\n    }\n  }\n\n  /**\n   * Get a user's deposit history\n   */\n  async getUserDeposits(\n    userId: string,\n    params?: ListUsersParams\n  ): Promise<AdminDepositListResponse> {\n    try {\n      const query = new URLSearchParams();\n      if (params?.limit) query.set('limit', String(params.limit));\n      if (params?.offset) query.set('offset', String(params.offset));\n      const queryString = query.toString();\n      const url = `/admin/users/${userId}/deposits${queryString ? `?${queryString}` : ''}`;\n      return await this.client.get<AdminDepositListResponse>(url);\n    } catch (error) {\n      throw handleApiError(error, 'Failed to get user deposits');\n    }\n  }\n\n  /**\n   * Get a user's credit stats and transaction history\n   */\n  async getUserCredits(\n    userId: string,\n    params?: ListUsersParams\n  ): Promise<AdminUserCreditsResponse> {\n    try {\n      const query = new URLSearchParams();\n      if (params?.limit) query.set('limit', String(params.limit));\n      if (params?.offset) query.set('offset', String(params.offset));\n      const queryString = query.toString();\n      const url = `/admin/users/${userId}/credits${queryString ? `?${queryString}` : ''}`;\n      return await this.client.get<AdminUserCreditsResponse>(url);\n    } catch (error) {\n      throw handleApiError(error, 'Failed to get user credits');\n    }\n  }\n\n  /**\n   * Get a user's withdrawal history\n   */\n  async getUserWithdrawalHistory(\n    userId: string,\n    params?: ListUsersParams\n  ): Promise<AdminUserWithdrawalHistoryResponse> {\n    try {\n      const query = new URLSearchParams();\n      if (params?.limit) query.set('limit', String(params.limit));\n      if (params?.offset) query.set('offset', String(params.offset));\n      const queryString = query.toString();\n      const url = `/admin/users/${userId}/withdrawal-history${queryString ? `?${queryString}` : ''}`;\n      return await this.client.get<AdminUserWithdrawalHistoryResponse>(url);\n    } catch (error) {\n      throw handleApiError(error, 'Failed to get user withdrawal history');\n    }\n  }\n}\n","import { useState, useCallback, useMemo } from 'react';\nimport { useCedrosLogin } from '../context/useCedrosLogin';\nimport { AdminUserApiClient } from '../utils/adminUserApi';\nimport type {\n  AdminUser,\n  AdminUserCreditsResponse,\n  ListAdminUsersResponse,\n  ListUsersParams,\n  UpdateUserRequest,\n  UseAdminUsersReturn,\n} from '../types';\nimport type {\n  AdminDepositListResponse,\n  AdminUserWithdrawalHistoryResponse,\n} from '../types/deposit';\n\n/**\n * Hook for admin user management operations\n *\n * Provides methods to list all users, get individual users,\n * and manage system admin status. Requires system admin privileges.\n *\n * @example\n * ```tsx\n * function UserManagement() {\n *   const { users, total, isLoading, listUsers, setSystemAdmin } = useAdminUsers();\n *\n *   useEffect(() => {\n *     listUsers({ limit: 20 });\n *   }, [listUsers]);\n *\n *   return (\n *     <AdminUserList\n *       users={users}\n *       total={total}\n *       isLoading={isLoading}\n *       onToggleAdmin={(userId, isAdmin) => setSystemAdmin(userId, isAdmin)}\n *     />\n *   );\n * }\n * ```\n */\nexport function useAdminUsers(): UseAdminUsersReturn {\n  const { config, _internal } = useCedrosLogin();\n\n  const [users, setUsers] = useState<AdminUser[]>([]);\n  const [total, setTotal] = useState(0);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n  const [lastParams, setLastParams] = useState<ListUsersParams>({});\n\n  const apiClient = useMemo(\n    () =>\n      new AdminUserApiClient(\n        config.serverUrl,\n        config.requestTimeout,\n        config.retryAttempts,\n        _internal?.getAccessToken\n      ),\n    [config.serverUrl, config.requestTimeout, config.retryAttempts, _internal]\n  );\n\n  const listUsers = useCallback(\n    async (params?: ListUsersParams): Promise<ListAdminUsersResponse> => {\n      setIsLoading(true);\n      setError(null);\n      setLastParams(params || {});\n\n      try {\n        const response = await apiClient.listUsers(params);\n        setUsers(response.users);\n        setTotal(response.total);\n        return response;\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error('Failed to list users');\n        setError(error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const getUser = useCallback(\n    async (userId: string): Promise<AdminUser> => {\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        return await apiClient.getUser(userId);\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error('Failed to get user');\n        setError(error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const setSystemAdmin = useCallback(\n    async (userId: string, isAdmin: boolean): Promise<void> => {\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        await apiClient.setSystemAdmin(userId, isAdmin);\n        // Update local state\n        setUsers((prev) =>\n          prev.map((user) => (user.id === userId ? { ...user, isSystemAdmin: isAdmin } : user))\n        );\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error('Failed to update admin status');\n        setError(error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const updateUser = useCallback(\n    async (userId: string, data: UpdateUserRequest): Promise<AdminUser> => {\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        const updated = await apiClient.updateUser(userId, data);\n        // Update local state\n        setUsers((prev) => prev.map((user) => (user.id === userId ? updated : user)));\n        return updated;\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error('Failed to update user');\n        setError(error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const deleteUser = useCallback(\n    async (userId: string): Promise<void> => {\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        await apiClient.deleteUser(userId);\n        // Remove from local state\n        setUsers((prev) => prev.filter((user) => user.id !== userId));\n        setTotal((prev) => prev - 1);\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error('Failed to delete user');\n        setError(error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const forcePasswordReset = useCallback(\n    async (userId: string): Promise<void> => {\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        await apiClient.forcePasswordReset(userId);\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error('Failed to send password reset');\n        setError(error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const adjustCredits = useCallback(\n    async (userId: string, amount: number, reason: string): Promise<void> => {\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        await apiClient.adjustCredits(userId, { amount, reason });\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error('Failed to adjust credits');\n        setError(error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const getUserDeposits = useCallback(\n    async (userId: string, params?: ListUsersParams): Promise<AdminDepositListResponse> => {\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        return await apiClient.getUserDeposits(userId, params);\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error('Failed to get user deposits');\n        setError(error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const getUserCredits = useCallback(\n    async (userId: string, params?: ListUsersParams): Promise<AdminUserCreditsResponse> => {\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        return await apiClient.getUserCredits(userId, params);\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error('Failed to get user credits');\n        setError(error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const getUserWithdrawalHistory = useCallback(\n    async (\n      userId: string,\n      params?: ListUsersParams\n    ): Promise<AdminUserWithdrawalHistoryResponse> => {\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        return await apiClient.getUserWithdrawalHistory(userId, params);\n      } catch (err) {\n        const error =\n          err instanceof Error ? err : new Error('Failed to get user withdrawal history');\n        setError(error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const refresh = useCallback(async () => {\n    await listUsers(lastParams);\n  }, [listUsers, lastParams]);\n\n  const clearError = useCallback(() => {\n    setError(null);\n  }, []);\n\n  return {\n    users,\n    total,\n    isLoading,\n    error,\n    listUsers,\n    getUser,\n    setSystemAdmin,\n    updateUser,\n    deleteUser,\n    forcePasswordReset,\n    adjustCredits,\n    getUserDeposits,\n    getUserCredits,\n    getUserWithdrawalHistory,\n    refresh,\n    clearError,\n  };\n}\n","/**\n * Admin user list component\n *\n * Displays all registered users in the system with management actions.\n * Requires system admin privileges.\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { useAdminUsers } from '../../hooks/useAdminUsers';\nimport type { AdminUser, ListAdminUsersResponse } from '../../types';\n\nexport interface AdminUserListProps {\n  /** Number of items per page (default: 20) */\n  pageSize?: number;\n  /** Auto-refresh interval in milliseconds (0 to disable) */\n  refreshInterval?: number;\n  /** Current user's ID (to prevent self-demotion) */\n  currentUserId?: string;\n  /** Additional CSS classes */\n  className?: string;\n  /** Callback when list is loaded */\n  onLoad?: (response: ListAdminUsersResponse) => void;\n  /** Callback when a user is clicked */\n  onUserClick?: (user: AdminUser) => void;\n  /** Callback when edit is clicked (parent handles modal) */\n  onEditUser?: (user: AdminUser) => void;\n  /** Callback when credits adjustment is clicked (parent handles modal) */\n  onAdjustCredits?: (user: AdminUser) => void;\n}\n\nfunction formatDate(dateString: string): string {\n  const date = new Date(dateString);\n  return date.toLocaleDateString(undefined, {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n  });\n}\n\nfunction truncateId(id: string): string {\n  if (id.length <= 12) return id;\n  return `${id.slice(0, 6)}...${id.slice(-4)}`;\n}\n\n/**\n * Admin user list display\n *\n * Shows all registered users with their auth methods and admin status.\n */\nexport function AdminUserList({\n  pageSize = 20,\n  refreshInterval = 0,\n  currentUserId,\n  className = '',\n  onLoad,\n  onUserClick,\n  onEditUser,\n  onAdjustCredits,\n}: AdminUserListProps) {\n  const {\n    users,\n    total,\n    isLoading,\n    error,\n    listUsers,\n    setSystemAdmin,\n    deleteUser,\n    forcePasswordReset,\n    clearError,\n  } = useAdminUsers();\n\n  const [offset, setOffset] = useState(0);\n  const [loadError, setLoadError] = useState<string | null>(null);\n  const [togglingId, setTogglingId] = useState<string | null>(null);\n  const [actionInProgress, setActionInProgress] = useState<string | null>(null);\n\n  const fetchUsers = useCallback(async () => {\n    try {\n      const result = await listUsers({ limit: pageSize, offset });\n      onLoad?.(result);\n      setLoadError(null);\n    } catch (err) {\n      setLoadError(err instanceof Error ? err.message : 'Failed to load users');\n    }\n  }, [pageSize, offset, listUsers, onLoad]);\n\n  // Reset offset when page size changes\n  useEffect(() => {\n    setOffset(0);\n  }, [pageSize]);\n\n  // Fetch on mount and when dependencies change\n  useEffect(() => {\n    fetchUsers();\n  }, [fetchUsers]);\n\n  // Auto-refresh\n  useEffect(() => {\n    if (refreshInterval <= 0) return;\n\n    const interval = setInterval(fetchUsers, refreshInterval);\n    return () => clearInterval(interval);\n  }, [refreshInterval, fetchUsers]);\n\n  const totalPages = Math.ceil(total / pageSize);\n  const currentPage = Math.floor(offset / pageSize) + 1;\n\n  const goToPage = (page: number) => {\n    const newOffset = (page - 1) * pageSize;\n    setOffset(Math.max(0, Math.min(newOffset, Math.max(0, total - 1))));\n  };\n\n  const handleToggleAdmin = async (user: AdminUser) => {\n    if (user.id === currentUserId) {\n      alert('You cannot change your own admin status');\n      return;\n    }\n\n    const action = user.isSystemAdmin\n      ? 'remove admin privileges from'\n      : 'grant admin privileges to';\n    const confirmed = window.confirm(\n      `Are you sure you want to ${action} ${user.name || user.email || 'this user'}?`\n    );\n    if (!confirmed) return;\n\n    setTogglingId(user.id);\n    try {\n      await setSystemAdmin(user.id, !user.isSystemAdmin);\n    } catch {\n      // Error is handled by the hook\n    } finally {\n      setTogglingId(null);\n    }\n  };\n\n  const handleDelete = async (user: AdminUser) => {\n    if (user.id === currentUserId) {\n      alert('You cannot delete your own account');\n      return;\n    }\n    if (user.isSystemAdmin) {\n      alert('Cannot delete a system admin. Remove admin status first.');\n      return;\n    }\n\n    const confirmed = window.confirm(\n      `Are you sure you want to delete ${user.name || user.email || 'this user'}? This action cannot be undone.`\n    );\n    if (!confirmed) return;\n\n    setActionInProgress(user.id);\n    try {\n      await deleteUser(user.id);\n    } catch {\n      // Error is handled by the hook\n    } finally {\n      setActionInProgress(null);\n    }\n  };\n\n  const handlePasswordReset = async (user: AdminUser) => {\n    if (!user.email) {\n      alert('User has no email address');\n      return;\n    }\n\n    const confirmed = window.confirm(`Send a password reset email to ${user.email}?`);\n    if (!confirmed) return;\n\n    setActionInProgress(user.id);\n    try {\n      await forcePasswordReset(user.id);\n      alert('Password reset email sent');\n    } catch {\n      // Error is handled by the hook\n    } finally {\n      setActionInProgress(null);\n    }\n  };\n\n  // Error state\n  if (loadError || error) {\n    return (\n      <div className={`cedros-admin-user-list cedros-admin-user-list-error ${className}`}>\n        <p className=\"cedros-admin-error\">{loadError || error?.message}</p>\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-outline\"\n          onClick={() => {\n            clearError();\n            setLoadError(null);\n            fetchUsers();\n          }}\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  // Loading state (initial load only)\n  if (isLoading && users.length === 0) {\n    return (\n      <div className={`cedros-admin-user-list cedros-admin-user-list-loading ${className}`}>\n        <span className=\"cedros-admin-loading-indicator\" />\n        <span className=\"cedros-admin-loading-text\">Loading users...</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`cedros-admin-user-list ${className}`}>\n      <div className=\"cedros-admin-user-list-header\">\n        <h4 className=\"cedros-admin-user-list-title\">All Users</h4>\n        <div className=\"cedros-admin-user-list-actions\">\n          <span className=\"cedros-admin-queue-count\">\n            {total} user{total !== 1 ? 's' : ''}\n          </span>\n          <button\n            type=\"button\"\n            className=\"cedros-button cedros-button-outline cedros-button-sm cedros-admin-icon-button\"\n            onClick={fetchUsers}\n            disabled={isLoading}\n            title=\"Refresh list\"\n            aria-label=\"Refresh list\"\n          >\n            {isLoading ? '...' : ''}\n          </button>\n        </div>\n      </div>\n\n      {users.length === 0 ? (\n        <div className=\"cedros-admin-empty\">\n          <p className=\"cedros-admin-empty-message\">No users found.</p>\n        </div>\n      ) : (\n        <>\n          <div className=\"cedros-admin-user-table\">\n            <div className=\"cedros-admin-user-thead\">\n              <div className=\"cedros-admin-user-th\">User</div>\n              <div className=\"cedros-admin-user-th\">Auth Methods</div>\n              <div className=\"cedros-admin-user-th\">Registered</div>\n              <div className=\"cedros-admin-user-th cedros-admin-user-th-admin\">Admin</div>\n              <div className=\"cedros-admin-user-th cedros-admin-user-th-actions\">Actions</div>\n            </div>\n            {users.map((user) => {\n              const isCurrentUser = user.id === currentUserId;\n              const isToggling = togglingId === user.id;\n\n              return (\n                <div\n                  key={user.id}\n                  className={`cedros-admin-user-row ${isCurrentUser ? 'cedros-admin-user-row-current' : ''}`}\n                  onClick={() => onUserClick?.(user)}\n                  onKeyDown={(e) => {\n                    if (e.key === 'Enter' || e.key === ' ') {\n                      e.preventDefault();\n                      onUserClick?.(user);\n                    }\n                  }}\n                  role={onUserClick ? 'button' : undefined}\n                  tabIndex={onUserClick ? 0 : undefined}\n                >\n                  <div className=\"cedros-admin-user-td cedros-admin-user-info\">\n                    <div className=\"cedros-admin-user-avatar\">\n                      {user.picture ? (\n                        <img\n                          src={user.picture}\n                          alt={user.name || user.email || 'User'}\n                          className=\"cedros-admin-user-avatar-img\"\n                          referrerPolicy=\"no-referrer\"\n                        />\n                      ) : (\n                        <span className=\"cedros-admin-user-avatar-placeholder\">\n                          {(user.name?.[0] || user.email?.[0] || '?').toUpperCase()}\n                        </span>\n                      )}\n                    </div>\n                    <div className=\"cedros-admin-user-details\">\n                      <span className=\"cedros-admin-user-name\">\n                        {user.name || 'Unknown'}\n                        {isCurrentUser && <span className=\"cedros-admin-user-you\">(you)</span>}\n                      </span>\n                      <span className=\"cedros-admin-user-email\" title={user.email}>\n                        {user.email || truncateId(user.id)}\n                      </span>\n                    </div>\n                  </div>\n                  <div className=\"cedros-admin-user-td cedros-admin-user-methods\">\n                    {user.authMethods.length > 0 ? (\n                      user.authMethods.map((method) => (\n                        <span\n                          key={method}\n                          className={`cedros-admin-auth-badge cedros-admin-auth-badge-${method}`}\n                        >\n                          {method}\n                        </span>\n                      ))\n                    ) : (\n                      <span className=\"cedros-admin-auth-badge cedros-admin-auth-badge-none\">\n                        none\n                      </span>\n                    )}\n                  </div>\n                  <div className=\"cedros-admin-user-td\">{formatDate(user.createdAt)}</div>\n                  <div className=\"cedros-admin-user-td cedros-admin-user-td-admin\">\n                    <button\n                      type=\"button\"\n                      className={`cedros-admin-toggle ${user.isSystemAdmin ? 'cedros-admin-toggle-on' : 'cedros-admin-toggle-off'}`}\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleToggleAdmin(user);\n                      }}\n                      disabled={isToggling || isCurrentUser}\n                      title={\n                        isCurrentUser\n                          ? 'Cannot change your own status'\n                          : user.isSystemAdmin\n                            ? 'Revoke admin'\n                            : 'Grant admin'\n                      }\n                      aria-label={user.isSystemAdmin ? 'Revoke admin' : 'Grant admin'}\n                    >\n                      {isToggling ? '...' : user.isSystemAdmin ? 'Yes' : 'No'}\n                    </button>\n                  </div>\n                  <div className=\"cedros-admin-user-td cedros-admin-user-td-actions\">\n                    {actionInProgress === user.id ? (\n                      <span className=\"cedros-admin-action-loading\">...</span>\n                    ) : (\n                      <div className=\"cedros-admin-action-buttons\">\n                        {onEditUser && (\n                          <button\n                            type=\"button\"\n                            className=\"cedros-admin-action-btn\"\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              onEditUser(user);\n                            }}\n                            title=\"Edit user\"\n                            aria-label=\"Edit user\"\n                          >\n                            Edit\n                          </button>\n                        )}\n                        {user.email && (\n                          <button\n                            type=\"button\"\n                            className=\"cedros-admin-action-btn\"\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              handlePasswordReset(user);\n                            }}\n                            title=\"Send password reset\"\n                            aria-label=\"Send password reset\"\n                          >\n                            Reset\n                          </button>\n                        )}\n                        {onAdjustCredits && (\n                          <button\n                            type=\"button\"\n                            className=\"cedros-admin-action-btn\"\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              onAdjustCredits(user);\n                            }}\n                            title=\"Adjust credits\"\n                            aria-label=\"Adjust credits\"\n                          >\n                            Credits\n                          </button>\n                        )}\n                        {!isCurrentUser && !user.isSystemAdmin && (\n                          <button\n                            type=\"button\"\n                            className=\"cedros-admin-action-btn cedros-admin-action-btn-danger\"\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              handleDelete(user);\n                            }}\n                            title=\"Delete user\"\n                            aria-label=\"Delete user\"\n                          >\n                            Delete\n                          </button>\n                        )}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n\n          {totalPages > 1 && (\n            <div className=\"cedros-admin-pagination\">\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-outline cedros-button-sm\"\n                onClick={() => goToPage(currentPage - 1)}\n                disabled={currentPage <= 1}\n              >\n                Previous\n              </button>\n              <span className=\"cedros-admin-page-info\">\n                Page {currentPage} of {totalPages} ({total} total)\n              </span>\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-outline cedros-button-sm\"\n                onClick={() => goToPage(currentPage + 1)}\n                disabled={currentPage >= totalPages}\n              >\n                Next\n              </button>\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n","/**\n * Admin user detail component\n *\n * Displays detailed information about a specific user including:\n * - Account information (email, auth methods, admin status)\n * - Credit balance and stats\n * - Deposit history\n * - Transaction history\n *\n * Requires system admin privileges.\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { useAdminUsers } from '../../hooks/useAdminUsers';\nimport type {\n  AdminUser,\n  AdminUserCreditsResponse,\n  AdminCreditTransactionItem,\n  ListUsersParams,\n} from '../../types';\nimport type { AdminDepositListResponse, AdminDepositItem } from '../../types/deposit';\n\nexport interface AdminUserDetailProps {\n  /** User ID to display */\n  userId: string;\n  /** Callback when back button is clicked */\n  onBack: () => void;\n  /** Current user's ID (to prevent self-demotion) */\n  currentUserId?: string;\n  /** Callback when edit is clicked (parent handles modal) */\n  onEditUser?: (user: AdminUser) => void;\n  /** Callback when credits adjustment is clicked (parent handles modal) */\n  onAdjustCredits?: (user: AdminUser) => void;\n  /** Additional CSS classes */\n  className?: string;\n}\n\ntype TabId = 'deposits' | 'transactions';\n\nfunction formatDate(dateString: string): string {\n  const date = new Date(dateString);\n  return date.toLocaleDateString(undefined, {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n  });\n}\n\nfunction formatDateTime(dateString: string): string {\n  const date = new Date(dateString);\n  return date.toLocaleString(undefined, {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit',\n  });\n}\n\nfunction formatSol(lamports: number | null | undefined): string {\n  if (lamports === null || lamports === undefined) return '';\n  const sol = lamports / 1_000_000_000;\n  return `${sol.toFixed(4)} SOL`;\n}\n\n/**\n * Admin user detail display\n *\n * Shows comprehensive user information with deposit and credit history.\n */\nexport function AdminUserDetail({\n  userId,\n  onBack,\n  currentUserId,\n  onEditUser,\n  onAdjustCredits,\n  className = '',\n}: AdminUserDetailProps) {\n  const {\n    isLoading,\n    getUser,\n    getUserDeposits,\n    getUserCredits,\n    setSystemAdmin,\n    deleteUser,\n    forcePasswordReset,\n    clearError,\n  } = useAdminUsers();\n\n  const [user, setUser] = useState<AdminUser | null>(null);\n  const [credits, setCredits] = useState<AdminUserCreditsResponse | null>(null);\n  const [deposits, setDeposits] = useState<AdminDepositListResponse | null>(null);\n  const [activeTab, setActiveTab] = useState<TabId>('deposits');\n  const [userError, setUserError] = useState<string | null>(null);\n  const [creditsError, setCreditsError] = useState<string | null>(null);\n  const [depositsError, setDepositsError] = useState<string | null>(null);\n  const [actionInProgress, setActionInProgress] = useState(false);\n\n  // Pagination state\n  const [depositsOffset, setDepositsOffset] = useState(0);\n  const [transactionsOffset, setTransactionsOffset] = useState(0);\n  const pageSize = 10;\n\n  const fetchUser = useCallback(async () => {\n    try {\n      const userData = await getUser(userId);\n      setUser(userData);\n      setUserError(null);\n    } catch (err) {\n      setUserError(err instanceof Error ? err.message : 'Failed to load user');\n    }\n  }, [userId, getUser]);\n\n  const fetchDeposits = useCallback(async () => {\n    try {\n      const params: ListUsersParams = { limit: pageSize, offset: depositsOffset };\n      const depositsData = await getUserDeposits(userId, params);\n      setDeposits(depositsData);\n      setDepositsError(null);\n    } catch (err) {\n      setDepositsError(err instanceof Error ? err.message : 'Failed to load deposits');\n    }\n  }, [userId, getUserDeposits, depositsOffset]);\n\n  const fetchCredits = useCallback(async () => {\n    try {\n      const params: ListUsersParams = { limit: pageSize, offset: transactionsOffset };\n      const creditsData = await getUserCredits(userId, params);\n      setCredits(creditsData);\n      setCreditsError(null);\n    } catch (err) {\n      setCreditsError(err instanceof Error ? err.message : 'Failed to load credits');\n    }\n  }, [userId, getUserCredits, transactionsOffset]);\n\n  // Initial load\n  useEffect(() => {\n    fetchUser();\n    fetchDeposits();\n    fetchCredits();\n  }, [fetchUser, fetchDeposits, fetchCredits]);\n\n  const handleToggleAdmin = async () => {\n    if (!user) return;\n    if (user.id === currentUserId) {\n      alert('You cannot change your own admin status');\n      return;\n    }\n\n    const action = user.isSystemAdmin\n      ? 'remove admin privileges from'\n      : 'grant admin privileges to';\n    const confirmed = window.confirm(\n      `Are you sure you want to ${action} ${user.name || user.email || 'this user'}?`\n    );\n    if (!confirmed) return;\n\n    setActionInProgress(true);\n    try {\n      await setSystemAdmin(user.id, !user.isSystemAdmin);\n      await fetchUser();\n    } catch {\n      // Error handled by hook\n    } finally {\n      setActionInProgress(false);\n    }\n  };\n\n  const handleDelete = async () => {\n    if (!user) return;\n    if (user.id === currentUserId) {\n      alert('You cannot delete your own account');\n      return;\n    }\n    if (user.isSystemAdmin) {\n      alert('Cannot delete a system admin. Remove admin status first.');\n      return;\n    }\n\n    const confirmed = window.confirm(\n      `Are you sure you want to delete ${user.name || user.email || 'this user'}? This action cannot be undone.`\n    );\n    if (!confirmed) return;\n\n    setActionInProgress(true);\n    try {\n      await deleteUser(user.id);\n      onBack();\n    } catch {\n      // Error handled by hook\n    } finally {\n      setActionInProgress(false);\n    }\n  };\n\n  const handlePasswordReset = async () => {\n    if (!user?.email) {\n      alert('User has no email address');\n      return;\n    }\n\n    const confirmed = window.confirm(`Send a password reset email to ${user.email}?`);\n    if (!confirmed) return;\n\n    setActionInProgress(true);\n    try {\n      await forcePasswordReset(user.id);\n      alert('Password reset email sent');\n    } catch {\n      // Error handled by hook\n    } finally {\n      setActionInProgress(false);\n    }\n  };\n\n  // Pagination handlers\n  const depositsTotalPages = deposits ? Math.ceil(deposits.total / pageSize) : 0;\n  const depositsCurrentPage = Math.floor(depositsOffset / pageSize) + 1;\n\n  const transactionsTotalPages = credits ? Math.ceil(credits.totalTransactions / pageSize) : 0;\n  const transactionsCurrentPage = Math.floor(transactionsOffset / pageSize) + 1;\n\n  const goToDepositsPage = (page: number) => {\n    setDepositsOffset((page - 1) * pageSize);\n  };\n\n  const goToTransactionsPage = (page: number) => {\n    setTransactionsOffset((page - 1) * pageSize);\n  };\n\n  // Critical error - user fetch failed\n  if (userError) {\n    return (\n      <div className={`cedros-admin-user-detail cedros-admin-user-detail-error ${className}`}>\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-outline cedros-button-sm\"\n          onClick={onBack}\n        >\n          Back\n        </button>\n        <p className=\"cedros-admin-error\">{userError}</p>\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-outline\"\n          onClick={() => {\n            clearError();\n            setUserError(null);\n            fetchUser();\n          }}\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  // Loading state\n  if (isLoading && !user) {\n    return (\n      <div className={`cedros-admin-user-detail cedros-admin-user-detail-loading ${className}`}>\n        <span className=\"cedros-admin-loading-indicator\" />\n        <span className=\"cedros-admin-loading-text\">Loading user...</span>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return (\n      <div className={`cedros-admin-user-detail ${className}`}>\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-outline cedros-button-sm\"\n          onClick={onBack}\n        >\n          Back\n        </button>\n        <p className=\"cedros-admin-empty-message\">User not found.</p>\n      </div>\n    );\n  }\n\n  const isCurrentUser = user.id === currentUserId;\n\n  return (\n    <div className={`cedros-admin-user-detail ${className}`}>\n      {/* Header */}\n      <div className=\"cedros-admin-user-detail-header\">\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-outline cedros-button-sm cedros-admin-back-btn\"\n          onClick={onBack}\n        >\n          Back to Users\n        </button>\n        <div className=\"cedros-admin-user-detail-actions\">\n          {onEditUser && (\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-outline cedros-button-sm\"\n              onClick={() => onEditUser(user)}\n              disabled={actionInProgress}\n            >\n              Edit\n            </button>\n          )}\n          {user.email && (\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-outline cedros-button-sm\"\n              onClick={handlePasswordReset}\n              disabled={actionInProgress}\n            >\n              Reset Password\n            </button>\n          )}\n          {onAdjustCredits && (\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-outline cedros-button-sm\"\n              onClick={() => onAdjustCredits(user)}\n              disabled={actionInProgress}\n            >\n              Adjust Credits\n            </button>\n          )}\n          {!isCurrentUser && !user.isSystemAdmin && (\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-outline cedros-button-sm cedros-admin-btn-danger\"\n              onClick={handleDelete}\n              disabled={actionInProgress}\n            >\n              Delete\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* User Info Section */}\n      <div className=\"cedros-admin-user-detail-info\">\n        <div className=\"cedros-admin-user-detail-avatar\">\n          {user.picture ? (\n            <img\n              src={user.picture}\n              alt={user.name || user.email || 'User'}\n              className=\"cedros-admin-user-detail-avatar-img\"\n              referrerPolicy=\"no-referrer\"\n            />\n          ) : (\n            <span className=\"cedros-admin-user-detail-avatar-placeholder\">\n              {(user.name?.[0] || user.email?.[0] || '?').toUpperCase()}\n            </span>\n          )}\n        </div>\n        <div className=\"cedros-admin-user-detail-meta\">\n          <h2 className=\"cedros-admin-user-detail-name\">\n            {user.name || 'Unknown'}\n            {isCurrentUser && <span className=\"cedros-admin-user-you\">(you)</span>}\n          </h2>\n          <p className=\"cedros-admin-user-detail-email\">\n            {user.email || 'No email'}\n            {user.emailVerified && (\n              <span className=\"cedros-admin-verified-badge\" title=\"Email verified\">\n                Verified\n              </span>\n            )}\n          </p>\n          <div className=\"cedros-admin-user-detail-badges\">\n            <span\n              className={`cedros-admin-admin-badge ${user.isSystemAdmin ? 'cedros-admin-admin-badge-yes' : 'cedros-admin-admin-badge-no'}`}\n            >\n              {user.isSystemAdmin ? 'System Admin' : 'User'}\n            </span>\n            {!isCurrentUser && (\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-outline cedros-button-xs\"\n                onClick={handleToggleAdmin}\n                disabled={actionInProgress}\n              >\n                {user.isSystemAdmin ? 'Revoke Admin' : 'Grant Admin'}\n              </button>\n            )}\n          </div>\n          <div className=\"cedros-admin-user-detail-methods\">\n            <span className=\"cedros-admin-user-detail-methods-label\">Auth Methods:</span>\n            {user.authMethods.length > 0 ? (\n              user.authMethods.map((method) => (\n                <span\n                  key={method}\n                  className={`cedros-admin-auth-badge cedros-admin-auth-badge-${method}`}\n                >\n                  {method}\n                </span>\n              ))\n            ) : (\n              <span className=\"cedros-admin-auth-badge cedros-admin-auth-badge-none\">none</span>\n            )}\n          </div>\n          <p className=\"cedros-admin-user-detail-dates\">\n            Registered: {formatDate(user.createdAt)} | Updated: {formatDate(user.updatedAt)}\n          </p>\n        </div>\n      </div>\n\n      {/* Stats Cards */}\n      {creditsError ? (\n        <div className=\"cedros-admin-stats-error\">\n          <p className=\"cedros-admin-error-inline\">{creditsError}</p>\n          <button\n            type=\"button\"\n            className=\"cedros-button cedros-button-outline cedros-button-sm\"\n            onClick={() => {\n              setCreditsError(null);\n              fetchCredits();\n            }}\n          >\n            Retry\n          </button>\n        </div>\n      ) : credits ? (\n        <div className=\"cedros-admin-user-detail-stats\">\n          <div className=\"cedros-admin-stat-card\">\n            <span className=\"cedros-admin-stat-label\">Current Balance</span>\n            <span className=\"cedros-admin-stat-value\">\n              {formatSol(credits.stats.currentBalanceLamports)}\n            </span>\n          </div>\n          <div className=\"cedros-admin-stat-card\">\n            <span className=\"cedros-admin-stat-label\">Total Deposited</span>\n            <span className=\"cedros-admin-stat-value\">\n              {formatSol(credits.stats.totalDepositedLamports)}\n            </span>\n          </div>\n          <div className=\"cedros-admin-stat-card\">\n            <span className=\"cedros-admin-stat-label\">Total Spent</span>\n            <span className=\"cedros-admin-stat-value\">\n              {formatSol(credits.stats.totalSpentLamports)}\n            </span>\n          </div>\n          <div className=\"cedros-admin-stat-card\">\n            <span className=\"cedros-admin-stat-label\">Deposits</span>\n            <span className=\"cedros-admin-stat-value\">{credits.stats.depositCount}</span>\n          </div>\n          <div className=\"cedros-admin-stat-card\">\n            <span className=\"cedros-admin-stat-label\">Transactions</span>\n            <span className=\"cedros-admin-stat-value\">{credits.stats.spendCount}</span>\n          </div>\n        </div>\n      ) : (\n        <div className=\"cedros-admin-stats-loading\">\n          <span className=\"cedros-admin-loading-indicator\" />\n          <span>Loading credit stats...</span>\n        </div>\n      )}\n\n      {/* Tabs */}\n      <div className=\"cedros-admin-user-detail-tabs\">\n        <button\n          type=\"button\"\n          className={`cedros-admin-tab ${activeTab === 'deposits' ? 'cedros-admin-tab-active' : ''}`}\n          onClick={() => setActiveTab('deposits')}\n        >\n          Deposits ({deposits?.total ?? 0})\n        </button>\n        <button\n          type=\"button\"\n          className={`cedros-admin-tab ${activeTab === 'transactions' ? 'cedros-admin-tab-active' : ''}`}\n          onClick={() => setActiveTab('transactions')}\n        >\n          Transactions ({credits?.totalTransactions ?? 0})\n        </button>\n      </div>\n\n      {/* Tab Content */}\n      <div className=\"cedros-admin-user-detail-content\">\n        {activeTab === 'deposits' && (\n          <DepositsTab\n            deposits={deposits?.deposits ?? []}\n            total={deposits?.total ?? 0}\n            currentPage={depositsCurrentPage}\n            totalPages={depositsTotalPages}\n            onPageChange={goToDepositsPage}\n            isLoading={isLoading}\n            error={depositsError}\n            onRetry={() => {\n              setDepositsError(null);\n              fetchDeposits();\n            }}\n          />\n        )}\n        {activeTab === 'transactions' && (\n          <TransactionsTab\n            transactions={credits?.transactions ?? []}\n            total={credits?.totalTransactions ?? 0}\n            currentPage={transactionsCurrentPage}\n            totalPages={transactionsTotalPages}\n            onPageChange={goToTransactionsPage}\n            error={creditsError}\n            onRetry={() => {\n              setCreditsError(null);\n              fetchCredits();\n            }}\n            isLoading={isLoading}\n          />\n        )}\n      </div>\n    </div>\n  );\n}\n\n// =============================================================================\n// Tab Components\n// =============================================================================\n\ninterface DepositsTabProps {\n  deposits: AdminDepositItem[];\n  total: number;\n  currentPage: number;\n  totalPages: number;\n  onPageChange: (page: number) => void;\n  isLoading: boolean;\n  error: string | null;\n  onRetry: () => void;\n}\n\nfunction DepositsTab({\n  deposits,\n  total,\n  currentPage,\n  totalPages,\n  onPageChange,\n  isLoading,\n  error,\n  onRetry,\n}: DepositsTabProps) {\n  if (error) {\n    return (\n      <div className=\"cedros-admin-tab-error\">\n        <p className=\"cedros-admin-error-inline\">{error}</p>\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-outline cedros-button-sm\"\n          onClick={onRetry}\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  if (isLoading && deposits.length === 0) {\n    return (\n      <div className=\"cedros-admin-tab-loading\">\n        <span className=\"cedros-admin-loading-indicator\" />\n        <span>Loading deposits...</span>\n      </div>\n    );\n  }\n\n  if (total === 0) {\n    return <div className=\"cedros-admin-empty-message\">No deposits found.</div>;\n  }\n\n  return (\n    <>\n      <div className=\"cedros-admin-list-table\">\n        <div className=\"cedros-admin-list-thead\">\n          <div className=\"cedros-admin-list-th\">Amount</div>\n          <div className=\"cedros-admin-list-th\">Status</div>\n          <div className=\"cedros-admin-list-th\">Date</div>\n          <div className=\"cedros-admin-list-th\">Address</div>\n        </div>\n        {deposits.map((deposit) => (\n          <div key={deposit.id} className=\"cedros-admin-list-row\">\n            <div className=\"cedros-admin-list-td\">{formatSol(deposit.amountLamports)}</div>\n            <div className=\"cedros-admin-list-td\">\n              <span className={`cedros-admin-status-badge cedros-admin-status-${deposit.status}`}>\n                {deposit.status}\n              </span>\n            </div>\n            <div className=\"cedros-admin-list-td\">{formatDateTime(deposit.createdAt)}</div>\n            <div\n              className=\"cedros-admin-list-td cedros-admin-list-td-mono\"\n              title={deposit.walletAddress}\n            >\n              {deposit.walletAddress.slice(0, 8)}...{deposit.walletAddress.slice(-4)}\n            </div>\n          </div>\n        ))}\n      </div>\n      {totalPages > 1 && (\n        <Pagination\n          currentPage={currentPage}\n          totalPages={totalPages}\n          total={total}\n          onPageChange={onPageChange}\n        />\n      )}\n    </>\n  );\n}\n\ninterface TransactionsTabProps {\n  transactions: AdminCreditTransactionItem[];\n  total: number;\n  currentPage: number;\n  totalPages: number;\n  onPageChange: (page: number) => void;\n  isLoading: boolean;\n  error: string | null;\n  onRetry: () => void;\n}\n\nfunction TransactionsTab({\n  transactions,\n  total,\n  currentPage,\n  totalPages,\n  onPageChange,\n  isLoading,\n  error,\n  onRetry,\n}: TransactionsTabProps) {\n  if (error) {\n    return (\n      <div className=\"cedros-admin-tab-error\">\n        <p className=\"cedros-admin-error-inline\">{error}</p>\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-outline cedros-button-sm\"\n          onClick={onRetry}\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  if (isLoading && transactions.length === 0) {\n    return (\n      <div className=\"cedros-admin-tab-loading\">\n        <span className=\"cedros-admin-loading-indicator\" />\n        <span>Loading transactions...</span>\n      </div>\n    );\n  }\n\n  if (total === 0) {\n    return <div className=\"cedros-admin-empty-message\">No transactions found.</div>;\n  }\n\n  return (\n    <>\n      <div className=\"cedros-admin-list-table\">\n        <div className=\"cedros-admin-list-thead\">\n          <div className=\"cedros-admin-list-th\">Amount</div>\n          <div className=\"cedros-admin-list-th\">Type</div>\n          <div className=\"cedros-admin-list-th\">Reference</div>\n          <div className=\"cedros-admin-list-th\">Date</div>\n        </div>\n        {transactions.map((tx) => (\n          <div key={tx.id} className=\"cedros-admin-list-row\">\n            <div\n              className={`cedros-admin-list-td ${tx.amountLamports >= 0 ? 'cedros-admin-amount-positive' : 'cedros-admin-amount-negative'}`}\n            >\n              {tx.amountLamports >= 0 ? '+' : ''}\n              {formatSol(tx.amountLamports)}\n            </div>\n            <div className=\"cedros-admin-list-td\">\n              <span\n                className={`cedros-admin-tx-type cedros-admin-tx-type-${tx.txType.toLowerCase()}`}\n              >\n                {tx.txType}\n              </span>\n            </div>\n            <div className=\"cedros-admin-list-td\">{tx.referenceType || ''}</div>\n            <div className=\"cedros-admin-list-td\">{formatDateTime(tx.createdAt)}</div>\n          </div>\n        ))}\n      </div>\n      {totalPages > 1 && (\n        <Pagination\n          currentPage={currentPage}\n          totalPages={totalPages}\n          total={total}\n          onPageChange={onPageChange}\n        />\n      )}\n    </>\n  );\n}\n\ninterface PaginationProps {\n  currentPage: number;\n  totalPages: number;\n  total: number;\n  onPageChange: (page: number) => void;\n}\n\nfunction Pagination({ currentPage, totalPages, total, onPageChange }: PaginationProps) {\n  return (\n    <div className=\"cedros-admin-pagination\">\n      <button\n        type=\"button\"\n        className=\"cedros-button cedros-button-outline cedros-button-sm\"\n        onClick={() => onPageChange(currentPage - 1)}\n        disabled={currentPage <= 1}\n      >\n        Previous\n      </button>\n      <span className=\"cedros-admin-page-info\">\n        Page {currentPage} of {totalPages} ({total} total)\n      </span>\n      <button\n        type=\"button\"\n        className=\"cedros-button cedros-button-outline cedros-button-sm\"\n        onClick={() => onPageChange(currentPage + 1)}\n        disabled={currentPage >= totalPages}\n      >\n        Next\n      </button>\n    </div>\n  );\n}\n","/**\n * Unified Admin Dashboard\n *\n * A complete, ready-to-use admin panel following shadcn/ui dashboard patterns.\n *\n * @example\n * ```tsx\n * // Minimal setup - everything included\n * function AdminPage() {\n *   return <CedrosAdminDashboard />;\n * }\n *\n * // Customized sections\n * function AdminPage() {\n *   return (\n *     <CedrosAdminDashboard\n *       sections={['overview', 'members', 'deposits', 'settings']}\n *       title=\"My App Admin\"\n *     />\n *   );\n * }\n * ```\n */\n\nimport { useState, useCallback, useEffect } from 'react';\nimport type { Permission } from '../../types';\nimport { MemberList } from '../members/MemberList';\nimport { InviteForm } from '../invites/InviteForm';\nimport { InviteList } from '../invites/InviteList';\nimport { SystemSettings } from './SystemSettings';\nimport { LoadingSpinner } from '../shared/LoadingSpinner';\nimport { ErrorMessage } from '../shared/ErrorMessage';\nimport { useOrgs } from '../../hooks/useOrgs';\nimport { useMembers } from '../../hooks/useMembers';\nimport { useInvites } from '../../hooks/useInvites';\nimport { useCedrosLogin } from '../../context/useCedrosLogin';\nimport { useCredits } from '../../hooks/useCredits';\nimport { AdminDepositStats } from '../deposit/admin/AdminDepositStats';\nimport { AdminDepositList } from '../deposit/admin/AdminDepositList';\nimport { AdminWithdrawalQueue } from '../deposit/admin/AdminWithdrawalQueue';\nimport { AdminPrivacyPeriodDeposits } from '../deposit/admin/AdminPrivacyPeriodDeposits';\nimport { AdminWithdrawalHistory } from '../deposit/admin/AdminWithdrawalHistory';\nimport { PrivacySystemStatus } from '../deposit/admin/PrivacySystemStatus';\nimport { AdminUserList } from './AdminUserList';\nimport { AdminUserDetail } from './AdminUserDetail';\nimport type { AdminUser } from '../../types';\n\n/** Available dashboard sections */\nexport type DashboardSection =\n  | 'overview'\n  | 'users'\n  | 'members'\n  | 'invites'\n  | 'deposits'\n  | 'withdrawals'\n  | 'settings';\n\nexport interface CedrosAdminDashboardProps {\n  /** Dashboard title */\n  title?: string;\n  /** Sections to display (defaults to all) */\n  sections?: DashboardSection[];\n  /** Initial active section */\n  defaultSection?: DashboardSection;\n  /** Auto-refresh interval for stats in ms (0 to disable) */\n  refreshInterval?: number;\n  /** Items per page for lists */\n  pageSize?: number;\n  /** Callback when section changes */\n  onSectionChange?: (section: DashboardSection) => void;\n  /** Additional CSS class */\n  className?: string;\n}\n\n// SVG Icons (Lucide-style, 24x24)\nconst Icons = {\n  overview: (\n    <svg\n      width=\"16\"\n      height=\"16\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <rect x=\"3\" y=\"3\" width=\"7\" height=\"9\" rx=\"1\" />\n      <rect x=\"14\" y=\"3\" width=\"7\" height=\"5\" rx=\"1\" />\n      <rect x=\"14\" y=\"12\" width=\"7\" height=\"9\" rx=\"1\" />\n      <rect x=\"3\" y=\"16\" width=\"7\" height=\"5\" rx=\"1\" />\n    </svg>\n  ),\n  users: (\n    <svg\n      width=\"16\"\n      height=\"16\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <path d=\"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\" />\n      <circle cx=\"9\" cy=\"7\" r=\"4\" />\n      <path d=\"M22 21v-2a4 4 0 0 0-3-3.87\" />\n      <path d=\"M16 3.13a4 4 0 0 1 0 7.75\" />\n    </svg>\n  ),\n  members: (\n    <svg\n      width=\"16\"\n      height=\"16\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <path d=\"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\" />\n      <circle cx=\"9\" cy=\"7\" r=\"4\" />\n      <path d=\"M22 21v-2a4 4 0 0 0-3-3.87\" />\n      <path d=\"M16 3.13a4 4 0 0 1 0 7.75\" />\n    </svg>\n  ),\n  invites: (\n    <svg\n      width=\"16\"\n      height=\"16\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <rect width=\"20\" height=\"16\" x=\"2\" y=\"4\" rx=\"2\" />\n      <path d=\"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7\" />\n    </svg>\n  ),\n  deposits: (\n    <svg\n      width=\"16\"\n      height=\"16\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <circle cx=\"12\" cy=\"12\" r=\"10\" />\n      <path d=\"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8\" />\n      <path d=\"M12 18V6\" />\n    </svg>\n  ),\n  withdrawals: (\n    <svg\n      width=\"16\"\n      height=\"16\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <path d=\"M12 5v14\" />\n      <path d=\"m19 12-7 7-7-7\" />\n    </svg>\n  ),\n  settings: (\n    <svg\n      width=\"16\"\n      height=\"16\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <path d=\"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z\" />\n      <circle cx=\"12\" cy=\"12\" r=\"3\" />\n    </svg>\n  ),\n  wallet: (\n    <svg\n      width=\"16\"\n      height=\"16\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <path d=\"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1\" />\n      <path d=\"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4\" />\n    </svg>\n  ),\n  chevronRight: (\n    <svg\n      width=\"16\"\n      height=\"16\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <path d=\"m9 18 6-6-6-6\" />\n    </svg>\n  ),\n};\n\ninterface SectionConfig {\n  id: DashboardSection;\n  label: string;\n  icon: React.ReactNode;\n}\n\nconst ALL_SECTIONS: SectionConfig[] = [\n  { id: 'overview', label: 'Overview', icon: Icons.overview },\n  { id: 'users', label: 'Users', icon: Icons.users },\n  { id: 'members', label: 'Team', icon: Icons.members },\n  { id: 'invites', label: 'Invites', icon: Icons.invites },\n  { id: 'deposits', label: 'Deposits', icon: Icons.deposits },\n  { id: 'withdrawals', label: 'Withdrawals', icon: Icons.withdrawals },\n  { id: 'settings', label: 'Settings', icon: Icons.settings },\n];\n\n/**\n * Unified Admin Dashboard\n *\n * Provides a complete admin interface with sidebar navigation.\n * Follows shadcn/ui dashboard patterns.\n */\nexport function CedrosAdminDashboard({\n  title = 'Dashboard',\n  sections = ['overview', 'users', 'members', 'invites', 'deposits', 'withdrawals', 'settings'],\n  defaultSection = 'overview',\n  refreshInterval = 0,\n  pageSize = 20,\n  onSectionChange,\n  className = '',\n}: CedrosAdminDashboardProps) {\n  const [activeSection, setActiveSection] = useState<DashboardSection>(defaultSection);\n\n  const { user } = useCedrosLogin();\n  const { activeOrg, role, isLoading: orgsLoading, fetchOrgs, hasPermission } = useOrgs();\n\n  useEffect(() => {\n    fetchOrgs();\n  }, [fetchOrgs]);\n\n  const handleSectionChange = useCallback(\n    (section: DashboardSection) => {\n      setActiveSection(section);\n      onSectionChange?.(section);\n    },\n    [onSectionChange]\n  );\n\n  const enabledSections = ALL_SECTIONS.filter((s) => sections.includes(s.id));\n\n  if (orgsLoading && !activeOrg) {\n    return (\n      <div className={`cedros-dashboard cedros-dashboard--loading ${className}`}>\n        <LoadingSpinner />\n        <span className=\"cedros-dashboard__loading-text\">Loading...</span>\n      </div>\n    );\n  }\n\n  const needsOrg = ['members', 'invites'].includes(activeSection);\n  if (needsOrg && !activeOrg) {\n    return (\n      <div className={`cedros-dashboard ${className}`}>\n        <ErrorMessage error=\"No organization selected. Please select an organization first.\" />\n      </div>\n    );\n  }\n\n  const currentSection = enabledSections.find((s) => s.id === activeSection);\n\n  return (\n    <div className={`cedros-dashboard ${className}`}>\n      {/* Sidebar */}\n      <aside className=\"cedros-dashboard__sidebar\">\n        <div className=\"cedros-dashboard__sidebar-header\">\n          <div className=\"cedros-dashboard__logo\">\n            {Icons.wallet}\n            <span className=\"cedros-dashboard__logo-text\">{title}</span>\n          </div>\n        </div>\n\n        <nav className=\"cedros-dashboard__nav\">\n          <div className=\"cedros-dashboard__nav-group\">\n            <span className=\"cedros-dashboard__nav-label\">Menu</span>\n            {enabledSections.map((section) => (\n              <button\n                key={section.id}\n                type=\"button\"\n                className={`cedros-dashboard__nav-item ${activeSection === section.id ? 'cedros-dashboard__nav-item--active' : ''}`}\n                onClick={() => handleSectionChange(section.id)}\n                aria-current={activeSection === section.id ? 'page' : undefined}\n              >\n                <span className=\"cedros-dashboard__nav-icon\">{section.icon}</span>\n                <span className=\"cedros-dashboard__nav-text\">{section.label}</span>\n              </button>\n            ))}\n          </div>\n        </nav>\n\n        {/* Org info at bottom */}\n        {activeOrg && (\n          <div className=\"cedros-dashboard__sidebar-footer\">\n            <div className=\"cedros-dashboard__org\">\n              <div className=\"cedros-dashboard__org-avatar\">\n                {activeOrg.name.charAt(0).toUpperCase()}\n              </div>\n              <div className=\"cedros-dashboard__org-info\">\n                <span className=\"cedros-dashboard__org-name\">{activeOrg.name}</span>\n                {role && <span className=\"cedros-dashboard__org-role\">{role}</span>}\n              </div>\n            </div>\n          </div>\n        )}\n      </aside>\n\n      {/* Main Content */}\n      <main className=\"cedros-dashboard__main\">\n        <header className=\"cedros-dashboard__header\">\n          <div className=\"cedros-dashboard__breadcrumb\">\n            <span className=\"cedros-dashboard__breadcrumb-root\">{title}</span>\n            <span className=\"cedros-dashboard__breadcrumb-sep\">{Icons.chevronRight}</span>\n            <span className=\"cedros-dashboard__breadcrumb-current\">{currentSection?.label}</span>\n          </div>\n        </header>\n\n        <div className=\"cedros-dashboard__content\">\n          {activeSection === 'overview' && <OverviewSection refreshInterval={refreshInterval} />}\n          {activeSection === 'users' && (\n            <UsersSection pageSize={pageSize} currentUserId={user?.id} />\n          )}\n          {activeSection === 'members' && activeOrg && (\n            <MembersSection\n              orgId={activeOrg.id}\n              currentUserId={user?.id}\n              hasPermission={hasPermission}\n            />\n          )}\n          {activeSection === 'invites' && activeOrg && (\n            <InvitesSection orgId={activeOrg.id} hasPermission={hasPermission} />\n          )}\n          {activeSection === 'deposits' && (\n            <DepositsSection pageSize={pageSize} refreshInterval={refreshInterval} />\n          )}\n          {activeSection === 'withdrawals' && (\n            <WithdrawalsSection pageSize={pageSize} refreshInterval={refreshInterval} />\n          )}\n          {activeSection === 'settings' && <SettingsSection />}\n        </div>\n      </main>\n    </div>\n  );\n}\n\n// =============================================================================\n// Section Components\n// =============================================================================\n\ninterface OverviewSectionProps {\n  refreshInterval: number;\n}\n\nfunction OverviewSection({ refreshInterval }: OverviewSectionProps) {\n  const { getBalance, isLoading } = useCredits();\n  const [balanceDisplay, setBalanceDisplay] = useState<string | null>(null);\n\n  useEffect(() => {\n    getBalance()\n      .then((res) => setBalanceDisplay(res.display))\n      .catch(() => setBalanceDisplay(null));\n  }, [getBalance]);\n\n  return (\n    <div className=\"cedros-dashboard__overview\">\n      {/* Metric Cards */}\n      <div className=\"cedros-dashboard__cards\">\n        <div className=\"cedros-dashboard__card\">\n          <div className=\"cedros-dashboard__card-header\">\n            <span className=\"cedros-dashboard__card-title\">Credit Balance</span>\n            <span className=\"cedros-dashboard__card-icon\">{Icons.wallet}</span>\n          </div>\n          <div className=\"cedros-dashboard__card-value\">\n            {isLoading ? '...' : (balanceDisplay ?? '')}\n          </div>\n          <p className=\"cedros-dashboard__card-desc\">Available credits for services</p>\n        </div>\n      </div>\n\n      {/* System Status */}\n      <PrivacySystemStatus refreshInterval={refreshInterval} />\n\n      {/* Deposit Stats */}\n      <AdminDepositStats refreshInterval={refreshInterval} />\n    </div>\n  );\n}\n\ninterface UsersSectionProps {\n  pageSize: number;\n  currentUserId?: string;\n}\n\nfunction UsersSection({ pageSize, currentUserId }: UsersSectionProps) {\n  const [selectedUser, setSelectedUser] = useState<AdminUser | null>(null);\n\n  if (selectedUser) {\n    return (\n      <div className=\"cedros-dashboard__section\">\n        <AdminUserDetail\n          userId={selectedUser.id}\n          currentUserId={currentUserId}\n          onBack={() => setSelectedUser(null)}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"cedros-dashboard__section\">\n      <p className=\"cedros-dashboard__text-muted\">\n        All registered users in the system. Requires system admin privileges.\n      </p>\n      <AdminUserList\n        pageSize={pageSize}\n        currentUserId={currentUserId}\n        onUserClick={(user) => setSelectedUser(user)}\n      />\n    </div>\n  );\n}\n\ninterface MembersSectionProps {\n  orgId: string;\n  currentUserId?: string;\n  hasPermission: (permission: Permission) => boolean;\n}\n\nfunction MembersSection({ orgId, currentUserId, hasPermission }: MembersSectionProps) {\n  const { members, isLoading, error, fetchMembers, updateMemberRole, removeMember } =\n    useMembers(orgId);\n\n  useEffect(() => {\n    fetchMembers();\n  }, [fetchMembers]);\n\n  return (\n    <div className=\"cedros-dashboard__section\">\n      <MemberList\n        members={members}\n        currentUserId={currentUserId}\n        isLoading={isLoading}\n        error={error?.message}\n        canManage={hasPermission('member:remove')}\n        canChangeRoles={hasPermission('member:role_change')}\n        onUpdateRole={updateMemberRole}\n        onRemove={removeMember}\n      />\n    </div>\n  );\n}\n\ninterface InvitesSectionProps {\n  orgId: string;\n  hasPermission: (permission: Permission) => boolean;\n}\n\nfunction InvitesSection({ orgId, hasPermission }: InvitesSectionProps) {\n  const { invites, isLoading, error, fetchInvites, createInvite, cancelInvite, resendInvite } =\n    useInvites(orgId);\n\n  useEffect(() => {\n    fetchInvites();\n  }, [fetchInvites]);\n\n  const canInvite = hasPermission('invite:create');\n  const canCancel = hasPermission('invite:cancel');\n\n  return (\n    <div className=\"cedros-dashboard__invites\">\n      {canInvite && (\n        <div className=\"cedros-dashboard__section\">\n          <div className=\"cedros-dashboard__section-header\">\n            <h3 className=\"cedros-dashboard__section-title\">Send Invitation</h3>\n          </div>\n          <InviteForm onSubmit={createInvite} isLoading={isLoading} error={error?.message} />\n        </div>\n      )}\n\n      <div className=\"cedros-dashboard__section\">\n        <div className=\"cedros-dashboard__section-header\">\n          <h3 className=\"cedros-dashboard__section-title\">Pending Invitations</h3>\n        </div>\n        <InviteList\n          invites={invites}\n          isLoading={isLoading}\n          error={error?.message}\n          canManage={canCancel || canInvite}\n          onCancel={canCancel ? cancelInvite : undefined}\n          onResend={canInvite ? resendInvite : undefined}\n        />\n      </div>\n    </div>\n  );\n}\n\ninterface DepositsSectionProps {\n  pageSize: number;\n  refreshInterval: number;\n}\n\nfunction DepositsSection({ pageSize, refreshInterval }: DepositsSectionProps) {\n  const [statusFilter, setStatusFilter] = useState<string>('');\n\n  return (\n    <div className=\"cedros-dashboard__deposits\">\n      {/* Stats summary */}\n      <AdminDepositStats refreshInterval={refreshInterval} />\n\n      {/* Filter and list */}\n      <div className=\"cedros-dashboard__deposits-list\">\n        <div className=\"cedros-dashboard__toolbar\">\n          <div className=\"cedros-dashboard__filter\">\n            <label className=\"cedros-dashboard__filter-label\" htmlFor=\"status-filter\">\n              Status\n            </label>\n            <select\n              id=\"status-filter\"\n              className=\"cedros-dashboard__select\"\n              value={statusFilter}\n              onChange={(e) => setStatusFilter(e.target.value)}\n            >\n              <option value=\"\">All statuses</option>\n              <option value=\"pending\">Pending</option>\n              <option value=\"detected\">Detected</option>\n              <option value=\"processing\">Processing</option>\n              <option value=\"completed\">Completed</option>\n              <option value=\"withdrawn\">Withdrawn</option>\n              <option value=\"expired\">Expired</option>\n              <option value=\"failed\">Failed</option>\n            </select>\n          </div>\n        </div>\n\n        <AdminDepositList\n          statusFilter={statusFilter || undefined}\n          pageSize={pageSize}\n          refreshInterval={refreshInterval}\n        />\n      </div>\n    </div>\n  );\n}\n\ninterface WithdrawalsSectionProps {\n  pageSize: number;\n  refreshInterval: number;\n}\n\nfunction WithdrawalsSection({ pageSize, refreshInterval }: WithdrawalsSectionProps) {\n  return (\n    <div className=\"cedros-dashboard__withdrawals\">\n      <p className=\"cedros-dashboard__text-muted\">\n        Track deposits through the withdrawal pipeline: privacy period, ready for processing, and\n        completed.\n      </p>\n\n      {/* Pipeline view: Privacy Period  Ready  Completed */}\n      <div className=\"cedros-dashboard__pipeline\">\n        <AdminPrivacyPeriodDeposits pageSize={pageSize} refreshInterval={refreshInterval} />\n        <AdminWithdrawalQueue pageSize={pageSize} refreshInterval={refreshInterval} />\n        <AdminWithdrawalHistory pageSize={pageSize} refreshInterval={refreshInterval} />\n      </div>\n    </div>\n  );\n}\n\nfunction SettingsSection() {\n  return (\n    <div className=\"cedros-dashboard__section\">\n      <p className=\"cedros-dashboard__text-muted\">\n        Configure system-wide settings. Changes take effect immediately.\n      </p>\n      <SystemSettings showDescriptions />\n    </div>\n  );\n}\n","// can-promise has a crash in some versions of react native that dont have\n// standard global objects\n// https://github.com/soldair/node-qrcode/issues/157\n\nmodule.exports = function () {\n  return typeof Promise === 'function' && Promise.prototype && Promise.prototype.then\n}\n","let toSJISFunction\nconst CODEWORDS_COUNT = [\n  0, // Not used\n  26, 44, 70, 100, 134, 172, 196, 242, 292, 346,\n  404, 466, 532, 581, 655, 733, 815, 901, 991, 1085,\n  1156, 1258, 1364, 1474, 1588, 1706, 1828, 1921, 2051, 2185,\n  2323, 2465, 2611, 2761, 2876, 3034, 3196, 3362, 3532, 3706\n]\n\n/**\n * Returns the QR Code size for the specified version\n *\n * @param  {Number} version QR Code version\n * @return {Number}         size of QR code\n */\nexports.getSymbolSize = function getSymbolSize (version) {\n  if (!version) throw new Error('\"version\" cannot be null or undefined')\n  if (version < 1 || version > 40) throw new Error('\"version\" should be in range from 1 to 40')\n  return version * 4 + 17\n}\n\n/**\n * Returns the total number of codewords used to store data and EC information.\n *\n * @param  {Number} version QR Code version\n * @return {Number}         Data length in bits\n */\nexports.getSymbolTotalCodewords = function getSymbolTotalCodewords (version) {\n  return CODEWORDS_COUNT[version]\n}\n\n/**\n * Encode data with Bose-Chaudhuri-Hocquenghem\n *\n * @param  {Number} data Value to encode\n * @return {Number}      Encoded value\n */\nexports.getBCHDigit = function (data) {\n  let digit = 0\n\n  while (data !== 0) {\n    digit++\n    data >>>= 1\n  }\n\n  return digit\n}\n\nexports.setToSJISFunction = function setToSJISFunction (f) {\n  if (typeof f !== 'function') {\n    throw new Error('\"toSJISFunc\" is not a valid function.')\n  }\n\n  toSJISFunction = f\n}\n\nexports.isKanjiModeEnabled = function () {\n  return typeof toSJISFunction !== 'undefined'\n}\n\nexports.toSJIS = function toSJIS (kanji) {\n  return toSJISFunction(kanji)\n}\n","exports.L = { bit: 1 }\nexports.M = { bit: 0 }\nexports.Q = { bit: 3 }\nexports.H = { bit: 2 }\n\nfunction fromString (string) {\n  if (typeof string !== 'string') {\n    throw new Error('Param is not a string')\n  }\n\n  const lcStr = string.toLowerCase()\n\n  switch (lcStr) {\n    case 'l':\n    case 'low':\n      return exports.L\n\n    case 'm':\n    case 'medium':\n      return exports.M\n\n    case 'q':\n    case 'quartile':\n      return exports.Q\n\n    case 'h':\n    case 'high':\n      return exports.H\n\n    default:\n      throw new Error('Unknown EC Level: ' + string)\n  }\n}\n\nexports.isValid = function isValid (level) {\n  return level && typeof level.bit !== 'undefined' &&\n    level.bit >= 0 && level.bit < 4\n}\n\nexports.from = function from (value, defaultValue) {\n  if (exports.isValid(value)) {\n    return value\n  }\n\n  try {\n    return fromString(value)\n  } catch (e) {\n    return defaultValue\n  }\n}\n","function BitBuffer () {\n  this.buffer = []\n  this.length = 0\n}\n\nBitBuffer.prototype = {\n\n  get: function (index) {\n    const bufIndex = Math.floor(index / 8)\n    return ((this.buffer[bufIndex] >>> (7 - index % 8)) & 1) === 1\n  },\n\n  put: function (num, length) {\n    for (let i = 0; i < length; i++) {\n      this.putBit(((num >>> (length - i - 1)) & 1) === 1)\n    }\n  },\n\n  getLengthInBits: function () {\n    return this.length\n  },\n\n  putBit: function (bit) {\n    const bufIndex = Math.floor(this.length / 8)\n    if (this.buffer.length <= bufIndex) {\n      this.buffer.push(0)\n    }\n\n    if (bit) {\n      this.buffer[bufIndex] |= (0x80 >>> (this.length % 8))\n    }\n\n    this.length++\n  }\n}\n\nmodule.exports = BitBuffer\n","/**\n * Helper class to handle QR Code symbol modules\n *\n * @param {Number} size Symbol size\n */\nfunction BitMatrix (size) {\n  if (!size || size < 1) {\n    throw new Error('BitMatrix size must be defined and greater than 0')\n  }\n\n  this.size = size\n  this.data = new Uint8Array(size * size)\n  this.reservedBit = new Uint8Array(size * size)\n}\n\n/**\n * Set bit value at specified location\n * If reserved flag is set, this bit will be ignored during masking process\n *\n * @param {Number}  row\n * @param {Number}  col\n * @param {Boolean} value\n * @param {Boolean} reserved\n */\nBitMatrix.prototype.set = function (row, col, value, reserved) {\n  const index = row * this.size + col\n  this.data[index] = value\n  if (reserved) this.reservedBit[index] = true\n}\n\n/**\n * Returns bit value at specified location\n *\n * @param  {Number}  row\n * @param  {Number}  col\n * @return {Boolean}\n */\nBitMatrix.prototype.get = function (row, col) {\n  return this.data[row * this.size + col]\n}\n\n/**\n * Applies xor operator at specified location\n * (used during masking process)\n *\n * @param {Number}  row\n * @param {Number}  col\n * @param {Boolean} value\n */\nBitMatrix.prototype.xor = function (row, col, value) {\n  this.data[row * this.size + col] ^= value\n}\n\n/**\n * Check if bit at specified location is reserved\n *\n * @param {Number}   row\n * @param {Number}   col\n * @return {Boolean}\n */\nBitMatrix.prototype.isReserved = function (row, col) {\n  return this.reservedBit[row * this.size + col]\n}\n\nmodule.exports = BitMatrix\n","/**\n * Alignment pattern are fixed reference pattern in defined positions\n * in a matrix symbology, which enables the decode software to re-synchronise\n * the coordinate mapping of the image modules in the event of moderate amounts\n * of distortion of the image.\n *\n * Alignment patterns are present only in QR Code symbols of version 2 or larger\n * and their number depends on the symbol version.\n */\n\nconst getSymbolSize = require('./utils').getSymbolSize\n\n/**\n * Calculate the row/column coordinates of the center module of each alignment pattern\n * for the specified QR Code version.\n *\n * The alignment patterns are positioned symmetrically on either side of the diagonal\n * running from the top left corner of the symbol to the bottom right corner.\n *\n * Since positions are simmetrical only half of the coordinates are returned.\n * Each item of the array will represent in turn the x and y coordinate.\n * @see {@link getPositions}\n *\n * @param  {Number} version QR Code version\n * @return {Array}          Array of coordinate\n */\nexports.getRowColCoords = function getRowColCoords (version) {\n  if (version === 1) return []\n\n  const posCount = Math.floor(version / 7) + 2\n  const size = getSymbolSize(version)\n  const intervals = size === 145 ? 26 : Math.ceil((size - 13) / (2 * posCount - 2)) * 2\n  const positions = [size - 7] // Last coord is always (size - 7)\n\n  for (let i = 1; i < posCount - 1; i++) {\n    positions[i] = positions[i - 1] - intervals\n  }\n\n  positions.push(6) // First coord is always 6\n\n  return positions.reverse()\n}\n\n/**\n * Returns an array containing the positions of each alignment pattern.\n * Each array's element represent the center point of the pattern as (x, y) coordinates\n *\n * Coordinates are calculated expanding the row/column coordinates returned by {@link getRowColCoords}\n * and filtering out the items that overlaps with finder pattern\n *\n * @example\n * For a Version 7 symbol {@link getRowColCoords} returns values 6, 22 and 38.\n * The alignment patterns, therefore, are to be centered on (row, column)\n * positions (6,22), (22,6), (22,22), (22,38), (38,22), (38,38).\n * Note that the coordinates (6,6), (6,38), (38,6) are occupied by finder patterns\n * and are not therefore used for alignment patterns.\n *\n * let pos = getPositions(7)\n * // [[6,22], [22,6], [22,22], [22,38], [38,22], [38,38]]\n *\n * @param  {Number} version QR Code version\n * @return {Array}          Array of coordinates\n */\nexports.getPositions = function getPositions (version) {\n  const coords = []\n  const pos = exports.getRowColCoords(version)\n  const posLength = pos.length\n\n  for (let i = 0; i < posLength; i++) {\n    for (let j = 0; j < posLength; j++) {\n      // Skip if position is occupied by finder patterns\n      if ((i === 0 && j === 0) || // top-left\n          (i === 0 && j === posLength - 1) || // bottom-left\n          (i === posLength - 1 && j === 0)) { // top-right\n        continue\n      }\n\n      coords.push([pos[i], pos[j]])\n    }\n  }\n\n  return coords\n}\n","const getSymbolSize = require('./utils').getSymbolSize\nconst FINDER_PATTERN_SIZE = 7\n\n/**\n * Returns an array containing the positions of each finder pattern.\n * Each array's element represent the top-left point of the pattern as (x, y) coordinates\n *\n * @param  {Number} version QR Code version\n * @return {Array}          Array of coordinates\n */\nexports.getPositions = function getPositions (version) {\n  const size = getSymbolSize(version)\n\n  return [\n    // top-left\n    [0, 0],\n    // top-right\n    [size - FINDER_PATTERN_SIZE, 0],\n    // bottom-left\n    [0, size - FINDER_PATTERN_SIZE]\n  ]\n}\n","/**\n * Data mask pattern reference\n * @type {Object}\n */\nexports.Patterns = {\n  PATTERN000: 0,\n  PATTERN001: 1,\n  PATTERN010: 2,\n  PATTERN011: 3,\n  PATTERN100: 4,\n  PATTERN101: 5,\n  PATTERN110: 6,\n  PATTERN111: 7\n}\n\n/**\n * Weighted penalty scores for the undesirable features\n * @type {Object}\n */\nconst PenaltyScores = {\n  N1: 3,\n  N2: 3,\n  N3: 40,\n  N4: 10\n}\n\n/**\n * Check if mask pattern value is valid\n *\n * @param  {Number}  mask    Mask pattern\n * @return {Boolean}         true if valid, false otherwise\n */\nexports.isValid = function isValid (mask) {\n  return mask != null && mask !== '' && !isNaN(mask) && mask >= 0 && mask <= 7\n}\n\n/**\n * Returns mask pattern from a value.\n * If value is not valid, returns undefined\n *\n * @param  {Number|String} value        Mask pattern value\n * @return {Number}                     Valid mask pattern or undefined\n */\nexports.from = function from (value) {\n  return exports.isValid(value) ? parseInt(value, 10) : undefined\n}\n\n/**\n* Find adjacent modules in row/column with the same color\n* and assign a penalty value.\n*\n* Points: N1 + i\n* i is the amount by which the number of adjacent modules of the same color exceeds 5\n*/\nexports.getPenaltyN1 = function getPenaltyN1 (data) {\n  const size = data.size\n  let points = 0\n  let sameCountCol = 0\n  let sameCountRow = 0\n  let lastCol = null\n  let lastRow = null\n\n  for (let row = 0; row < size; row++) {\n    sameCountCol = sameCountRow = 0\n    lastCol = lastRow = null\n\n    for (let col = 0; col < size; col++) {\n      let module = data.get(row, col)\n      if (module === lastCol) {\n        sameCountCol++\n      } else {\n        if (sameCountCol >= 5) points += PenaltyScores.N1 + (sameCountCol - 5)\n        lastCol = module\n        sameCountCol = 1\n      }\n\n      module = data.get(col, row)\n      if (module === lastRow) {\n        sameCountRow++\n      } else {\n        if (sameCountRow >= 5) points += PenaltyScores.N1 + (sameCountRow - 5)\n        lastRow = module\n        sameCountRow = 1\n      }\n    }\n\n    if (sameCountCol >= 5) points += PenaltyScores.N1 + (sameCountCol - 5)\n    if (sameCountRow >= 5) points += PenaltyScores.N1 + (sameCountRow - 5)\n  }\n\n  return points\n}\n\n/**\n * Find 2x2 blocks with the same color and assign a penalty value\n *\n * Points: N2 * (m - 1) * (n - 1)\n */\nexports.getPenaltyN2 = function getPenaltyN2 (data) {\n  const size = data.size\n  let points = 0\n\n  for (let row = 0; row < size - 1; row++) {\n    for (let col = 0; col < size - 1; col++) {\n      const last = data.get(row, col) +\n        data.get(row, col + 1) +\n        data.get(row + 1, col) +\n        data.get(row + 1, col + 1)\n\n      if (last === 4 || last === 0) points++\n    }\n  }\n\n  return points * PenaltyScores.N2\n}\n\n/**\n * Find 1:1:3:1:1 ratio (dark:light:dark:light:dark) pattern in row/column,\n * preceded or followed by light area 4 modules wide\n *\n * Points: N3 * number of pattern found\n */\nexports.getPenaltyN3 = function getPenaltyN3 (data) {\n  const size = data.size\n  let points = 0\n  let bitsCol = 0\n  let bitsRow = 0\n\n  for (let row = 0; row < size; row++) {\n    bitsCol = bitsRow = 0\n    for (let col = 0; col < size; col++) {\n      bitsCol = ((bitsCol << 1) & 0x7FF) | data.get(row, col)\n      if (col >= 10 && (bitsCol === 0x5D0 || bitsCol === 0x05D)) points++\n\n      bitsRow = ((bitsRow << 1) & 0x7FF) | data.get(col, row)\n      if (col >= 10 && (bitsRow === 0x5D0 || bitsRow === 0x05D)) points++\n    }\n  }\n\n  return points * PenaltyScores.N3\n}\n\n/**\n * Calculate proportion of dark modules in entire symbol\n *\n * Points: N4 * k\n *\n * k is the rating of the deviation of the proportion of dark modules\n * in the symbol from 50% in steps of 5%\n */\nexports.getPenaltyN4 = function getPenaltyN4 (data) {\n  let darkCount = 0\n  const modulesCount = data.data.length\n\n  for (let i = 0; i < modulesCount; i++) darkCount += data.data[i]\n\n  const k = Math.abs(Math.ceil((darkCount * 100 / modulesCount) / 5) - 10)\n\n  return k * PenaltyScores.N4\n}\n\n/**\n * Return mask value at given position\n *\n * @param  {Number} maskPattern Pattern reference value\n * @param  {Number} i           Row\n * @param  {Number} j           Column\n * @return {Boolean}            Mask value\n */\nfunction getMaskAt (maskPattern, i, j) {\n  switch (maskPattern) {\n    case exports.Patterns.PATTERN000: return (i + j) % 2 === 0\n    case exports.Patterns.PATTERN001: return i % 2 === 0\n    case exports.Patterns.PATTERN010: return j % 3 === 0\n    case exports.Patterns.PATTERN011: return (i + j) % 3 === 0\n    case exports.Patterns.PATTERN100: return (Math.floor(i / 2) + Math.floor(j / 3)) % 2 === 0\n    case exports.Patterns.PATTERN101: return (i * j) % 2 + (i * j) % 3 === 0\n    case exports.Patterns.PATTERN110: return ((i * j) % 2 + (i * j) % 3) % 2 === 0\n    case exports.Patterns.PATTERN111: return ((i * j) % 3 + (i + j) % 2) % 2 === 0\n\n    default: throw new Error('bad maskPattern:' + maskPattern)\n  }\n}\n\n/**\n * Apply a mask pattern to a BitMatrix\n *\n * @param  {Number}    pattern Pattern reference number\n * @param  {BitMatrix} data    BitMatrix data\n */\nexports.applyMask = function applyMask (pattern, data) {\n  const size = data.size\n\n  for (let col = 0; col < size; col++) {\n    for (let row = 0; row < size; row++) {\n      if (data.isReserved(row, col)) continue\n      data.xor(row, col, getMaskAt(pattern, row, col))\n    }\n  }\n}\n\n/**\n * Returns the best mask pattern for data\n *\n * @param  {BitMatrix} data\n * @return {Number} Mask pattern reference number\n */\nexports.getBestMask = function getBestMask (data, setupFormatFunc) {\n  const numPatterns = Object.keys(exports.Patterns).length\n  let bestPattern = 0\n  let lowerPenalty = Infinity\n\n  for (let p = 0; p < numPatterns; p++) {\n    setupFormatFunc(p)\n    exports.applyMask(p, data)\n\n    // Calculate penalty\n    const penalty =\n      exports.getPenaltyN1(data) +\n      exports.getPenaltyN2(data) +\n      exports.getPenaltyN3(data) +\n      exports.getPenaltyN4(data)\n\n    // Undo previously applied mask\n    exports.applyMask(p, data)\n\n    if (penalty < lowerPenalty) {\n      lowerPenalty = penalty\n      bestPattern = p\n    }\n  }\n\n  return bestPattern\n}\n","const ECLevel = require('./error-correction-level')\r\n\r\nconst EC_BLOCKS_TABLE = [\r\n// L  M  Q  H\r\n  1, 1, 1, 1,\r\n  1, 1, 1, 1,\r\n  1, 1, 2, 2,\r\n  1, 2, 2, 4,\r\n  1, 2, 4, 4,\r\n  2, 4, 4, 4,\r\n  2, 4, 6, 5,\r\n  2, 4, 6, 6,\r\n  2, 5, 8, 8,\r\n  4, 5, 8, 8,\r\n  4, 5, 8, 11,\r\n  4, 8, 10, 11,\r\n  4, 9, 12, 16,\r\n  4, 9, 16, 16,\r\n  6, 10, 12, 18,\r\n  6, 10, 17, 16,\r\n  6, 11, 16, 19,\r\n  6, 13, 18, 21,\r\n  7, 14, 21, 25,\r\n  8, 16, 20, 25,\r\n  8, 17, 23, 25,\r\n  9, 17, 23, 34,\r\n  9, 18, 25, 30,\r\n  10, 20, 27, 32,\r\n  12, 21, 29, 35,\r\n  12, 23, 34, 37,\r\n  12, 25, 34, 40,\r\n  13, 26, 35, 42,\r\n  14, 28, 38, 45,\r\n  15, 29, 40, 48,\r\n  16, 31, 43, 51,\r\n  17, 33, 45, 54,\r\n  18, 35, 48, 57,\r\n  19, 37, 51, 60,\r\n  19, 38, 53, 63,\r\n  20, 40, 56, 66,\r\n  21, 43, 59, 70,\r\n  22, 45, 62, 74,\r\n  24, 47, 65, 77,\r\n  25, 49, 68, 81\r\n]\r\n\r\nconst EC_CODEWORDS_TABLE = [\r\n// L  M  Q  H\r\n  7, 10, 13, 17,\r\n  10, 16, 22, 28,\r\n  15, 26, 36, 44,\r\n  20, 36, 52, 64,\r\n  26, 48, 72, 88,\r\n  36, 64, 96, 112,\r\n  40, 72, 108, 130,\r\n  48, 88, 132, 156,\r\n  60, 110, 160, 192,\r\n  72, 130, 192, 224,\r\n  80, 150, 224, 264,\r\n  96, 176, 260, 308,\r\n  104, 198, 288, 352,\r\n  120, 216, 320, 384,\r\n  132, 240, 360, 432,\r\n  144, 280, 408, 480,\r\n  168, 308, 448, 532,\r\n  180, 338, 504, 588,\r\n  196, 364, 546, 650,\r\n  224, 416, 600, 700,\r\n  224, 442, 644, 750,\r\n  252, 476, 690, 816,\r\n  270, 504, 750, 900,\r\n  300, 560, 810, 960,\r\n  312, 588, 870, 1050,\r\n  336, 644, 952, 1110,\r\n  360, 700, 1020, 1200,\r\n  390, 728, 1050, 1260,\r\n  420, 784, 1140, 1350,\r\n  450, 812, 1200, 1440,\r\n  480, 868, 1290, 1530,\r\n  510, 924, 1350, 1620,\r\n  540, 980, 1440, 1710,\r\n  570, 1036, 1530, 1800,\r\n  570, 1064, 1590, 1890,\r\n  600, 1120, 1680, 1980,\r\n  630, 1204, 1770, 2100,\r\n  660, 1260, 1860, 2220,\r\n  720, 1316, 1950, 2310,\r\n  750, 1372, 2040, 2430\r\n]\r\n\r\n/**\r\n * Returns the number of error correction block that the QR Code should contain\r\n * for the specified version and error correction level.\r\n *\r\n * @param  {Number} version              QR Code version\r\n * @param  {Number} errorCorrectionLevel Error correction level\r\n * @return {Number}                      Number of error correction blocks\r\n */\r\nexports.getBlocksCount = function getBlocksCount (version, errorCorrectionLevel) {\r\n  switch (errorCorrectionLevel) {\r\n    case ECLevel.L:\r\n      return EC_BLOCKS_TABLE[(version - 1) * 4 + 0]\r\n    case ECLevel.M:\r\n      return EC_BLOCKS_TABLE[(version - 1) * 4 + 1]\r\n    case ECLevel.Q:\r\n      return EC_BLOCKS_TABLE[(version - 1) * 4 + 2]\r\n    case ECLevel.H:\r\n      return EC_BLOCKS_TABLE[(version - 1) * 4 + 3]\r\n    default:\r\n      return undefined\r\n  }\r\n}\r\n\r\n/**\r\n * Returns the number of error correction codewords to use for the specified\r\n * version and error correction level.\r\n *\r\n * @param  {Number} version              QR Code version\r\n * @param  {Number} errorCorrectionLevel Error correction level\r\n * @return {Number}                      Number of error correction codewords\r\n */\r\nexports.getTotalCodewordsCount = function getTotalCodewordsCount (version, errorCorrectionLevel) {\r\n  switch (errorCorrectionLevel) {\r\n    case ECLevel.L:\r\n      return EC_CODEWORDS_TABLE[(version - 1) * 4 + 0]\r\n    case ECLevel.M:\r\n      return EC_CODEWORDS_TABLE[(version - 1) * 4 + 1]\r\n    case ECLevel.Q:\r\n      return EC_CODEWORDS_TABLE[(version - 1) * 4 + 2]\r\n    case ECLevel.H:\r\n      return EC_CODEWORDS_TABLE[(version - 1) * 4 + 3]\r\n    default:\r\n      return undefined\r\n  }\r\n}\r\n","const EXP_TABLE = new Uint8Array(512)\nconst LOG_TABLE = new Uint8Array(256)\n/**\n * Precompute the log and anti-log tables for faster computation later\n *\n * For each possible value in the galois field 2^8, we will pre-compute\n * the logarithm and anti-logarithm (exponential) of this value\n *\n * ref {@link https://en.wikiversity.org/wiki/Reed%E2%80%93Solomon_codes_for_coders#Introduction_to_mathematical_fields}\n */\n;(function initTables () {\n  let x = 1\n  for (let i = 0; i < 255; i++) {\n    EXP_TABLE[i] = x\n    LOG_TABLE[x] = i\n\n    x <<= 1 // multiply by 2\n\n    // The QR code specification says to use byte-wise modulo 100011101 arithmetic.\n    // This means that when a number is 256 or larger, it should be XORed with 0x11D.\n    if (x & 0x100) { // similar to x >= 256, but a lot faster (because 0x100 == 256)\n      x ^= 0x11D\n    }\n  }\n\n  // Optimization: double the size of the anti-log table so that we don't need to mod 255 to\n  // stay inside the bounds (because we will mainly use this table for the multiplication of\n  // two GF numbers, no more).\n  // @see {@link mul}\n  for (let i = 255; i < 512; i++) {\n    EXP_TABLE[i] = EXP_TABLE[i - 255]\n  }\n}())\n\n/**\n * Returns log value of n inside Galois Field\n *\n * @param  {Number} n\n * @return {Number}\n */\nexports.log = function log (n) {\n  if (n < 1) throw new Error('log(' + n + ')')\n  return LOG_TABLE[n]\n}\n\n/**\n * Returns anti-log value of n inside Galois Field\n *\n * @param  {Number} n\n * @return {Number}\n */\nexports.exp = function exp (n) {\n  return EXP_TABLE[n]\n}\n\n/**\n * Multiplies two number inside Galois Field\n *\n * @param  {Number} x\n * @param  {Number} y\n * @return {Number}\n */\nexports.mul = function mul (x, y) {\n  if (x === 0 || y === 0) return 0\n\n  // should be EXP_TABLE[(LOG_TABLE[x] + LOG_TABLE[y]) % 255] if EXP_TABLE wasn't oversized\n  // @see {@link initTables}\n  return EXP_TABLE[LOG_TABLE[x] + LOG_TABLE[y]]\n}\n","const GF = require('./galois-field')\n\n/**\n * Multiplies two polynomials inside Galois Field\n *\n * @param  {Uint8Array} p1 Polynomial\n * @param  {Uint8Array} p2 Polynomial\n * @return {Uint8Array}    Product of p1 and p2\n */\nexports.mul = function mul (p1, p2) {\n  const coeff = new Uint8Array(p1.length + p2.length - 1)\n\n  for (let i = 0; i < p1.length; i++) {\n    for (let j = 0; j < p2.length; j++) {\n      coeff[i + j] ^= GF.mul(p1[i], p2[j])\n    }\n  }\n\n  return coeff\n}\n\n/**\n * Calculate the remainder of polynomials division\n *\n * @param  {Uint8Array} divident Polynomial\n * @param  {Uint8Array} divisor  Polynomial\n * @return {Uint8Array}          Remainder\n */\nexports.mod = function mod (divident, divisor) {\n  let result = new Uint8Array(divident)\n\n  while ((result.length - divisor.length) >= 0) {\n    const coeff = result[0]\n\n    for (let i = 0; i < divisor.length; i++) {\n      result[i] ^= GF.mul(divisor[i], coeff)\n    }\n\n    // remove all zeros from buffer head\n    let offset = 0\n    while (offset < result.length && result[offset] === 0) offset++\n    result = result.slice(offset)\n  }\n\n  return result\n}\n\n/**\n * Generate an irreducible generator polynomial of specified degree\n * (used by Reed-Solomon encoder)\n *\n * @param  {Number} degree Degree of the generator polynomial\n * @return {Uint8Array}    Buffer containing polynomial coefficients\n */\nexports.generateECPolynomial = function generateECPolynomial (degree) {\n  let poly = new Uint8Array([1])\n  for (let i = 0; i < degree; i++) {\n    poly = exports.mul(poly, new Uint8Array([1, GF.exp(i)]))\n  }\n\n  return poly\n}\n","const Polynomial = require('./polynomial')\n\nfunction ReedSolomonEncoder (degree) {\n  this.genPoly = undefined\n  this.degree = degree\n\n  if (this.degree) this.initialize(this.degree)\n}\n\n/**\n * Initialize the encoder.\n * The input param should correspond to the number of error correction codewords.\n *\n * @param  {Number} degree\n */\nReedSolomonEncoder.prototype.initialize = function initialize (degree) {\n  // create an irreducible generator polynomial\n  this.degree = degree\n  this.genPoly = Polynomial.generateECPolynomial(this.degree)\n}\n\n/**\n * Encodes a chunk of data\n *\n * @param  {Uint8Array} data Buffer containing input data\n * @return {Uint8Array}      Buffer containing encoded data\n */\nReedSolomonEncoder.prototype.encode = function encode (data) {\n  if (!this.genPoly) {\n    throw new Error('Encoder not initialized')\n  }\n\n  // Calculate EC for this data block\n  // extends data size to data+genPoly size\n  const paddedData = new Uint8Array(data.length + this.degree)\n  paddedData.set(data)\n\n  // The error correction codewords are the remainder after dividing the data codewords\n  // by a generator polynomial\n  const remainder = Polynomial.mod(paddedData, this.genPoly)\n\n  // return EC data blocks (last n byte, where n is the degree of genPoly)\n  // If coefficients number in remainder are less than genPoly degree,\n  // pad with 0s to the left to reach the needed number of coefficients\n  const start = this.degree - remainder.length\n  if (start > 0) {\n    const buff = new Uint8Array(this.degree)\n    buff.set(remainder, start)\n\n    return buff\n  }\n\n  return remainder\n}\n\nmodule.exports = ReedSolomonEncoder\n","/**\n * Check if QR Code version is valid\n *\n * @param  {Number}  version QR Code version\n * @return {Boolean}         true if valid version, false otherwise\n */\nexports.isValid = function isValid (version) {\n  return !isNaN(version) && version >= 1 && version <= 40\n}\n","const numeric = '[0-9]+'\nconst alphanumeric = '[A-Z $%*+\\\\-./:]+'\nlet kanji = '(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|' +\n  '[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|' +\n  '[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|' +\n  '[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+'\nkanji = kanji.replace(/u/g, '\\\\u')\n\nconst byte = '(?:(?![A-Z0-9 $%*+\\\\-./:]|' + kanji + ')(?:.|[\\r\\n]))+'\n\nexports.KANJI = new RegExp(kanji, 'g')\nexports.BYTE_KANJI = new RegExp('[^A-Z0-9 $%*+\\\\-./:]+', 'g')\nexports.BYTE = new RegExp(byte, 'g')\nexports.NUMERIC = new RegExp(numeric, 'g')\nexports.ALPHANUMERIC = new RegExp(alphanumeric, 'g')\n\nconst TEST_KANJI = new RegExp('^' + kanji + '$')\nconst TEST_NUMERIC = new RegExp('^' + numeric + '$')\nconst TEST_ALPHANUMERIC = new RegExp('^[A-Z0-9 $%*+\\\\-./:]+$')\n\nexports.testKanji = function testKanji (str) {\n  return TEST_KANJI.test(str)\n}\n\nexports.testNumeric = function testNumeric (str) {\n  return TEST_NUMERIC.test(str)\n}\n\nexports.testAlphanumeric = function testAlphanumeric (str) {\n  return TEST_ALPHANUMERIC.test(str)\n}\n","const VersionCheck = require('./version-check')\nconst Regex = require('./regex')\n\n/**\n * Numeric mode encodes data from the decimal digit set (0 - 9)\n * (byte values 30HEX to 39HEX).\n * Normally, 3 data characters are represented by 10 bits.\n *\n * @type {Object}\n */\nexports.NUMERIC = {\n  id: 'Numeric',\n  bit: 1 << 0,\n  ccBits: [10, 12, 14]\n}\n\n/**\n * Alphanumeric mode encodes data from a set of 45 characters,\n * i.e. 10 numeric digits (0 - 9),\n *      26 alphabetic characters (A - Z),\n *   and 9 symbols (SP, $, %, *, +, -, ., /, :).\n * Normally, two input characters are represented by 11 bits.\n *\n * @type {Object}\n */\nexports.ALPHANUMERIC = {\n  id: 'Alphanumeric',\n  bit: 1 << 1,\n  ccBits: [9, 11, 13]\n}\n\n/**\n * In byte mode, data is encoded at 8 bits per character.\n *\n * @type {Object}\n */\nexports.BYTE = {\n  id: 'Byte',\n  bit: 1 << 2,\n  ccBits: [8, 16, 16]\n}\n\n/**\n * The Kanji mode efficiently encodes Kanji characters in accordance with\n * the Shift JIS system based on JIS X 0208.\n * The Shift JIS values are shifted from the JIS X 0208 values.\n * JIS X 0208 gives details of the shift coded representation.\n * Each two-byte character value is compacted to a 13-bit binary codeword.\n *\n * @type {Object}\n */\nexports.KANJI = {\n  id: 'Kanji',\n  bit: 1 << 3,\n  ccBits: [8, 10, 12]\n}\n\n/**\n * Mixed mode will contain a sequences of data in a combination of any of\n * the modes described above\n *\n * @type {Object}\n */\nexports.MIXED = {\n  bit: -1\n}\n\n/**\n * Returns the number of bits needed to store the data length\n * according to QR Code specifications.\n *\n * @param  {Mode}   mode    Data mode\n * @param  {Number} version QR Code version\n * @return {Number}         Number of bits\n */\nexports.getCharCountIndicator = function getCharCountIndicator (mode, version) {\n  if (!mode.ccBits) throw new Error('Invalid mode: ' + mode)\n\n  if (!VersionCheck.isValid(version)) {\n    throw new Error('Invalid version: ' + version)\n  }\n\n  if (version >= 1 && version < 10) return mode.ccBits[0]\n  else if (version < 27) return mode.ccBits[1]\n  return mode.ccBits[2]\n}\n\n/**\n * Returns the most efficient mode to store the specified data\n *\n * @param  {String} dataStr Input data string\n * @return {Mode}           Best mode\n */\nexports.getBestModeForData = function getBestModeForData (dataStr) {\n  if (Regex.testNumeric(dataStr)) return exports.NUMERIC\n  else if (Regex.testAlphanumeric(dataStr)) return exports.ALPHANUMERIC\n  else if (Regex.testKanji(dataStr)) return exports.KANJI\n  else return exports.BYTE\n}\n\n/**\n * Return mode name as string\n *\n * @param {Mode} mode Mode object\n * @returns {String}  Mode name\n */\nexports.toString = function toString (mode) {\n  if (mode && mode.id) return mode.id\n  throw new Error('Invalid mode')\n}\n\n/**\n * Check if input param is a valid mode object\n *\n * @param   {Mode}    mode Mode object\n * @returns {Boolean} True if valid mode, false otherwise\n */\nexports.isValid = function isValid (mode) {\n  return mode && mode.bit && mode.ccBits\n}\n\n/**\n * Get mode object from its name\n *\n * @param   {String} string Mode name\n * @returns {Mode}          Mode object\n */\nfunction fromString (string) {\n  if (typeof string !== 'string') {\n    throw new Error('Param is not a string')\n  }\n\n  const lcStr = string.toLowerCase()\n\n  switch (lcStr) {\n    case 'numeric':\n      return exports.NUMERIC\n    case 'alphanumeric':\n      return exports.ALPHANUMERIC\n    case 'kanji':\n      return exports.KANJI\n    case 'byte':\n      return exports.BYTE\n    default:\n      throw new Error('Unknown mode: ' + string)\n  }\n}\n\n/**\n * Returns mode from a value.\n * If value is not a valid mode, returns defaultValue\n *\n * @param  {Mode|String} value        Encoding mode\n * @param  {Mode}        defaultValue Fallback value\n * @return {Mode}                     Encoding mode\n */\nexports.from = function from (value, defaultValue) {\n  if (exports.isValid(value)) {\n    return value\n  }\n\n  try {\n    return fromString(value)\n  } catch (e) {\n    return defaultValue\n  }\n}\n","const Utils = require('./utils')\nconst ECCode = require('./error-correction-code')\nconst ECLevel = require('./error-correction-level')\nconst Mode = require('./mode')\nconst VersionCheck = require('./version-check')\n\n// Generator polynomial used to encode version information\nconst G18 = (1 << 12) | (1 << 11) | (1 << 10) | (1 << 9) | (1 << 8) | (1 << 5) | (1 << 2) | (1 << 0)\nconst G18_BCH = Utils.getBCHDigit(G18)\n\nfunction getBestVersionForDataLength (mode, length, errorCorrectionLevel) {\n  for (let currentVersion = 1; currentVersion <= 40; currentVersion++) {\n    if (length <= exports.getCapacity(currentVersion, errorCorrectionLevel, mode)) {\n      return currentVersion\n    }\n  }\n\n  return undefined\n}\n\nfunction getReservedBitsCount (mode, version) {\n  // Character count indicator + mode indicator bits\n  return Mode.getCharCountIndicator(mode, version) + 4\n}\n\nfunction getTotalBitsFromDataArray (segments, version) {\n  let totalBits = 0\n\n  segments.forEach(function (data) {\n    const reservedBits = getReservedBitsCount(data.mode, version)\n    totalBits += reservedBits + data.getBitsLength()\n  })\n\n  return totalBits\n}\n\nfunction getBestVersionForMixedData (segments, errorCorrectionLevel) {\n  for (let currentVersion = 1; currentVersion <= 40; currentVersion++) {\n    const length = getTotalBitsFromDataArray(segments, currentVersion)\n    if (length <= exports.getCapacity(currentVersion, errorCorrectionLevel, Mode.MIXED)) {\n      return currentVersion\n    }\n  }\n\n  return undefined\n}\n\n/**\n * Returns version number from a value.\n * If value is not a valid version, returns defaultValue\n *\n * @param  {Number|String} value        QR Code version\n * @param  {Number}        defaultValue Fallback value\n * @return {Number}                     QR Code version number\n */\nexports.from = function from (value, defaultValue) {\n  if (VersionCheck.isValid(value)) {\n    return parseInt(value, 10)\n  }\n\n  return defaultValue\n}\n\n/**\n * Returns how much data can be stored with the specified QR code version\n * and error correction level\n *\n * @param  {Number} version              QR Code version (1-40)\n * @param  {Number} errorCorrectionLevel Error correction level\n * @param  {Mode}   mode                 Data mode\n * @return {Number}                      Quantity of storable data\n */\nexports.getCapacity = function getCapacity (version, errorCorrectionLevel, mode) {\n  if (!VersionCheck.isValid(version)) {\n    throw new Error('Invalid QR Code version')\n  }\n\n  // Use Byte mode as default\n  if (typeof mode === 'undefined') mode = Mode.BYTE\n\n  // Total codewords for this QR code version (Data + Error correction)\n  const totalCodewords = Utils.getSymbolTotalCodewords(version)\n\n  // Total number of error correction codewords\n  const ecTotalCodewords = ECCode.getTotalCodewordsCount(version, errorCorrectionLevel)\n\n  // Total number of data codewords\n  const dataTotalCodewordsBits = (totalCodewords - ecTotalCodewords) * 8\n\n  if (mode === Mode.MIXED) return dataTotalCodewordsBits\n\n  const usableBits = dataTotalCodewordsBits - getReservedBitsCount(mode, version)\n\n  // Return max number of storable codewords\n  switch (mode) {\n    case Mode.NUMERIC:\n      return Math.floor((usableBits / 10) * 3)\n\n    case Mode.ALPHANUMERIC:\n      return Math.floor((usableBits / 11) * 2)\n\n    case Mode.KANJI:\n      return Math.floor(usableBits / 13)\n\n    case Mode.BYTE:\n    default:\n      return Math.floor(usableBits / 8)\n  }\n}\n\n/**\n * Returns the minimum version needed to contain the amount of data\n *\n * @param  {Segment} data                    Segment of data\n * @param  {Number} [errorCorrectionLevel=H] Error correction level\n * @param  {Mode} mode                       Data mode\n * @return {Number}                          QR Code version\n */\nexports.getBestVersionForData = function getBestVersionForData (data, errorCorrectionLevel) {\n  let seg\n\n  const ecl = ECLevel.from(errorCorrectionLevel, ECLevel.M)\n\n  if (Array.isArray(data)) {\n    if (data.length > 1) {\n      return getBestVersionForMixedData(data, ecl)\n    }\n\n    if (data.length === 0) {\n      return 1\n    }\n\n    seg = data[0]\n  } else {\n    seg = data\n  }\n\n  return getBestVersionForDataLength(seg.mode, seg.getLength(), ecl)\n}\n\n/**\n * Returns version information with relative error correction bits\n *\n * The version information is included in QR Code symbols of version 7 or larger.\n * It consists of an 18-bit sequence containing 6 data bits,\n * with 12 error correction bits calculated using the (18, 6) Golay code.\n *\n * @param  {Number} version QR Code version\n * @return {Number}         Encoded version info bits\n */\nexports.getEncodedBits = function getEncodedBits (version) {\n  if (!VersionCheck.isValid(version) || version < 7) {\n    throw new Error('Invalid QR Code version')\n  }\n\n  let d = version << 12\n\n  while (Utils.getBCHDigit(d) - G18_BCH >= 0) {\n    d ^= (G18 << (Utils.getBCHDigit(d) - G18_BCH))\n  }\n\n  return (version << 12) | d\n}\n","const Utils = require('./utils')\n\nconst G15 = (1 << 10) | (1 << 8) | (1 << 5) | (1 << 4) | (1 << 2) | (1 << 1) | (1 << 0)\nconst G15_MASK = (1 << 14) | (1 << 12) | (1 << 10) | (1 << 4) | (1 << 1)\nconst G15_BCH = Utils.getBCHDigit(G15)\n\n/**\n * Returns format information with relative error correction bits\n *\n * The format information is a 15-bit sequence containing 5 data bits,\n * with 10 error correction bits calculated using the (15, 5) BCH code.\n *\n * @param  {Number} errorCorrectionLevel Error correction level\n * @param  {Number} mask                 Mask pattern\n * @return {Number}                      Encoded format information bits\n */\nexports.getEncodedBits = function getEncodedBits (errorCorrectionLevel, mask) {\n  const data = ((errorCorrectionLevel.bit << 3) | mask)\n  let d = data << 10\n\n  while (Utils.getBCHDigit(d) - G15_BCH >= 0) {\n    d ^= (G15 << (Utils.getBCHDigit(d) - G15_BCH))\n  }\n\n  // xor final data with mask pattern in order to ensure that\n  // no combination of Error Correction Level and data mask pattern\n  // will result in an all-zero data string\n  return ((data << 10) | d) ^ G15_MASK\n}\n","const Mode = require('./mode')\n\nfunction NumericData (data) {\n  this.mode = Mode.NUMERIC\n  this.data = data.toString()\n}\n\nNumericData.getBitsLength = function getBitsLength (length) {\n  return 10 * Math.floor(length / 3) + ((length % 3) ? ((length % 3) * 3 + 1) : 0)\n}\n\nNumericData.prototype.getLength = function getLength () {\n  return this.data.length\n}\n\nNumericData.prototype.getBitsLength = function getBitsLength () {\n  return NumericData.getBitsLength(this.data.length)\n}\n\nNumericData.prototype.write = function write (bitBuffer) {\n  let i, group, value\n\n  // The input data string is divided into groups of three digits,\n  // and each group is converted to its 10-bit binary equivalent.\n  for (i = 0; i + 3 <= this.data.length; i += 3) {\n    group = this.data.substr(i, 3)\n    value = parseInt(group, 10)\n\n    bitBuffer.put(value, 10)\n  }\n\n  // If the number of input digits is not an exact multiple of three,\n  // the final one or two digits are converted to 4 or 7 bits respectively.\n  const remainingNum = this.data.length - i\n  if (remainingNum > 0) {\n    group = this.data.substr(i)\n    value = parseInt(group, 10)\n\n    bitBuffer.put(value, remainingNum * 3 + 1)\n  }\n}\n\nmodule.exports = NumericData\n","const Mode = require('./mode')\n\n/**\n * Array of characters available in alphanumeric mode\n *\n * As per QR Code specification, to each character\n * is assigned a value from 0 to 44 which in this case coincides\n * with the array index\n *\n * @type {Array}\n */\nconst ALPHA_NUM_CHARS = [\n  '0', '1', '2', '3', '4', '5', '6', '7', '8', '9',\n  'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M',\n  'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z',\n  ' ', '$', '%', '*', '+', '-', '.', '/', ':'\n]\n\nfunction AlphanumericData (data) {\n  this.mode = Mode.ALPHANUMERIC\n  this.data = data\n}\n\nAlphanumericData.getBitsLength = function getBitsLength (length) {\n  return 11 * Math.floor(length / 2) + 6 * (length % 2)\n}\n\nAlphanumericData.prototype.getLength = function getLength () {\n  return this.data.length\n}\n\nAlphanumericData.prototype.getBitsLength = function getBitsLength () {\n  return AlphanumericData.getBitsLength(this.data.length)\n}\n\nAlphanumericData.prototype.write = function write (bitBuffer) {\n  let i\n\n  // Input data characters are divided into groups of two characters\n  // and encoded as 11-bit binary codes.\n  for (i = 0; i + 2 <= this.data.length; i += 2) {\n    // The character value of the first character is multiplied by 45\n    let value = ALPHA_NUM_CHARS.indexOf(this.data[i]) * 45\n\n    // The character value of the second digit is added to the product\n    value += ALPHA_NUM_CHARS.indexOf(this.data[i + 1])\n\n    // The sum is then stored as 11-bit binary number\n    bitBuffer.put(value, 11)\n  }\n\n  // If the number of input data characters is not a multiple of two,\n  // the character value of the final character is encoded as a 6-bit binary number.\n  if (this.data.length % 2) {\n    bitBuffer.put(ALPHA_NUM_CHARS.indexOf(this.data[i]), 6)\n  }\n}\n\nmodule.exports = AlphanumericData\n","const Mode = require('./mode')\n\nfunction ByteData (data) {\n  this.mode = Mode.BYTE\n  if (typeof (data) === 'string') {\n    this.data = new TextEncoder().encode(data)\n  } else {\n    this.data = new Uint8Array(data)\n  }\n}\n\nByteData.getBitsLength = function getBitsLength (length) {\n  return length * 8\n}\n\nByteData.prototype.getLength = function getLength () {\n  return this.data.length\n}\n\nByteData.prototype.getBitsLength = function getBitsLength () {\n  return ByteData.getBitsLength(this.data.length)\n}\n\nByteData.prototype.write = function (bitBuffer) {\n  for (let i = 0, l = this.data.length; i < l; i++) {\n    bitBuffer.put(this.data[i], 8)\n  }\n}\n\nmodule.exports = ByteData\n","const Mode = require('./mode')\nconst Utils = require('./utils')\n\nfunction KanjiData (data) {\n  this.mode = Mode.KANJI\n  this.data = data\n}\n\nKanjiData.getBitsLength = function getBitsLength (length) {\n  return length * 13\n}\n\nKanjiData.prototype.getLength = function getLength () {\n  return this.data.length\n}\n\nKanjiData.prototype.getBitsLength = function getBitsLength () {\n  return KanjiData.getBitsLength(this.data.length)\n}\n\nKanjiData.prototype.write = function (bitBuffer) {\n  let i\n\n  // In the Shift JIS system, Kanji characters are represented by a two byte combination.\n  // These byte values are shifted from the JIS X 0208 values.\n  // JIS X 0208 gives details of the shift coded representation.\n  for (i = 0; i < this.data.length; i++) {\n    let value = Utils.toSJIS(this.data[i])\n\n    // For characters with Shift JIS values from 0x8140 to 0x9FFC:\n    if (value >= 0x8140 && value <= 0x9FFC) {\n      // Subtract 0x8140 from Shift JIS value\n      value -= 0x8140\n\n    // For characters with Shift JIS values from 0xE040 to 0xEBBF\n    } else if (value >= 0xE040 && value <= 0xEBBF) {\n      // Subtract 0xC140 from Shift JIS value\n      value -= 0xC140\n    } else {\n      throw new Error(\n        'Invalid SJIS character: ' + this.data[i] + '\\n' +\n        'Make sure your charset is UTF-8')\n    }\n\n    // Multiply most significant byte of result by 0xC0\n    // and add least significant byte to product\n    value = (((value >>> 8) & 0xff) * 0xC0) + (value & 0xff)\n\n    // Convert result to a 13-bit binary string\n    bitBuffer.put(value, 13)\n  }\n}\n\nmodule.exports = KanjiData\n","'use strict';\n\n/******************************************************************************\n * Created 2008-08-19.\n *\n * Dijkstra path-finding functions. Adapted from the Dijkstar Python project.\n *\n * Copyright (C) 2008\n *   Wyatt Baldwin <self@wyattbaldwin.com>\n *   All rights reserved\n *\n * Licensed under the MIT license.\n *\n *   http://www.opensource.org/licenses/mit-license.php\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n *****************************************************************************/\nvar dijkstra = {\n  single_source_shortest_paths: function(graph, s, d) {\n    // Predecessor map for each node that has been encountered.\n    // node ID => predecessor node ID\n    var predecessors = {};\n\n    // Costs of shortest paths from s to all nodes encountered.\n    // node ID => cost\n    var costs = {};\n    costs[s] = 0;\n\n    // Costs of shortest paths from s to all nodes encountered; differs from\n    // `costs` in that it provides easy access to the node that currently has\n    // the known shortest path from s.\n    // XXX: Do we actually need both `costs` and `open`?\n    var open = dijkstra.PriorityQueue.make();\n    open.push(s, 0);\n\n    var closest,\n        u, v,\n        cost_of_s_to_u,\n        adjacent_nodes,\n        cost_of_e,\n        cost_of_s_to_u_plus_cost_of_e,\n        cost_of_s_to_v,\n        first_visit;\n    while (!open.empty()) {\n      // In the nodes remaining in graph that have a known cost from s,\n      // find the node, u, that currently has the shortest path from s.\n      closest = open.pop();\n      u = closest.value;\n      cost_of_s_to_u = closest.cost;\n\n      // Get nodes adjacent to u...\n      adjacent_nodes = graph[u] || {};\n\n      // ...and explore the edges that connect u to those nodes, updating\n      // the cost of the shortest paths to any or all of those nodes as\n      // necessary. v is the node across the current edge from u.\n      for (v in adjacent_nodes) {\n        if (adjacent_nodes.hasOwnProperty(v)) {\n          // Get the cost of the edge running from u to v.\n          cost_of_e = adjacent_nodes[v];\n\n          // Cost of s to u plus the cost of u to v across e--this is *a*\n          // cost from s to v that may or may not be less than the current\n          // known cost to v.\n          cost_of_s_to_u_plus_cost_of_e = cost_of_s_to_u + cost_of_e;\n\n          // If we haven't visited v yet OR if the current known cost from s to\n          // v is greater than the new cost we just found (cost of s to u plus\n          // cost of u to v across e), update v's cost in the cost list and\n          // update v's predecessor in the predecessor list (it's now u).\n          cost_of_s_to_v = costs[v];\n          first_visit = (typeof costs[v] === 'undefined');\n          if (first_visit || cost_of_s_to_v > cost_of_s_to_u_plus_cost_of_e) {\n            costs[v] = cost_of_s_to_u_plus_cost_of_e;\n            open.push(v, cost_of_s_to_u_plus_cost_of_e);\n            predecessors[v] = u;\n          }\n        }\n      }\n    }\n\n    if (typeof d !== 'undefined' && typeof costs[d] === 'undefined') {\n      var msg = ['Could not find a path from ', s, ' to ', d, '.'].join('');\n      throw new Error(msg);\n    }\n\n    return predecessors;\n  },\n\n  extract_shortest_path_from_predecessor_list: function(predecessors, d) {\n    var nodes = [];\n    var u = d;\n    var predecessor;\n    while (u) {\n      nodes.push(u);\n      predecessor = predecessors[u];\n      u = predecessors[u];\n    }\n    nodes.reverse();\n    return nodes;\n  },\n\n  find_path: function(graph, s, d) {\n    var predecessors = dijkstra.single_source_shortest_paths(graph, s, d);\n    return dijkstra.extract_shortest_path_from_predecessor_list(\n      predecessors, d);\n  },\n\n  /**\n   * A very naive priority queue implementation.\n   */\n  PriorityQueue: {\n    make: function (opts) {\n      var T = dijkstra.PriorityQueue,\n          t = {},\n          key;\n      opts = opts || {};\n      for (key in T) {\n        if (T.hasOwnProperty(key)) {\n          t[key] = T[key];\n        }\n      }\n      t.queue = [];\n      t.sorter = opts.sorter || T.default_sorter;\n      return t;\n    },\n\n    default_sorter: function (a, b) {\n      return a.cost - b.cost;\n    },\n\n    /**\n     * Add a new item to the queue and ensure the highest priority element\n     * is at the front of the queue.\n     */\n    push: function (value, cost) {\n      var item = {value: value, cost: cost};\n      this.queue.push(item);\n      this.queue.sort(this.sorter);\n    },\n\n    /**\n     * Return the highest priority element in the queue.\n     */\n    pop: function () {\n      return this.queue.shift();\n    },\n\n    empty: function () {\n      return this.queue.length === 0;\n    }\n  }\n};\n\n\n// node.js module exports\nif (typeof module !== 'undefined') {\n  module.exports = dijkstra;\n}\n","const Mode = require('./mode')\nconst NumericData = require('./numeric-data')\nconst AlphanumericData = require('./alphanumeric-data')\nconst ByteData = require('./byte-data')\nconst KanjiData = require('./kanji-data')\nconst Regex = require('./regex')\nconst Utils = require('./utils')\nconst dijkstra = require('dijkstrajs')\n\n/**\n * Returns UTF8 byte length\n *\n * @param  {String} str Input string\n * @return {Number}     Number of byte\n */\nfunction getStringByteLength (str) {\n  return unescape(encodeURIComponent(str)).length\n}\n\n/**\n * Get a list of segments of the specified mode\n * from a string\n *\n * @param  {Mode}   mode Segment mode\n * @param  {String} str  String to process\n * @return {Array}       Array of object with segments data\n */\nfunction getSegments (regex, mode, str) {\n  const segments = []\n  let result\n\n  while ((result = regex.exec(str)) !== null) {\n    segments.push({\n      data: result[0],\n      index: result.index,\n      mode: mode,\n      length: result[0].length\n    })\n  }\n\n  return segments\n}\n\n/**\n * Extracts a series of segments with the appropriate\n * modes from a string\n *\n * @param  {String} dataStr Input string\n * @return {Array}          Array of object with segments data\n */\nfunction getSegmentsFromString (dataStr) {\n  const numSegs = getSegments(Regex.NUMERIC, Mode.NUMERIC, dataStr)\n  const alphaNumSegs = getSegments(Regex.ALPHANUMERIC, Mode.ALPHANUMERIC, dataStr)\n  let byteSegs\n  let kanjiSegs\n\n  if (Utils.isKanjiModeEnabled()) {\n    byteSegs = getSegments(Regex.BYTE, Mode.BYTE, dataStr)\n    kanjiSegs = getSegments(Regex.KANJI, Mode.KANJI, dataStr)\n  } else {\n    byteSegs = getSegments(Regex.BYTE_KANJI, Mode.BYTE, dataStr)\n    kanjiSegs = []\n  }\n\n  const segs = numSegs.concat(alphaNumSegs, byteSegs, kanjiSegs)\n\n  return segs\n    .sort(function (s1, s2) {\n      return s1.index - s2.index\n    })\n    .map(function (obj) {\n      return {\n        data: obj.data,\n        mode: obj.mode,\n        length: obj.length\n      }\n    })\n}\n\n/**\n * Returns how many bits are needed to encode a string of\n * specified length with the specified mode\n *\n * @param  {Number} length String length\n * @param  {Mode} mode     Segment mode\n * @return {Number}        Bit length\n */\nfunction getSegmentBitsLength (length, mode) {\n  switch (mode) {\n    case Mode.NUMERIC:\n      return NumericData.getBitsLength(length)\n    case Mode.ALPHANUMERIC:\n      return AlphanumericData.getBitsLength(length)\n    case Mode.KANJI:\n      return KanjiData.getBitsLength(length)\n    case Mode.BYTE:\n      return ByteData.getBitsLength(length)\n  }\n}\n\n/**\n * Merges adjacent segments which have the same mode\n *\n * @param  {Array} segs Array of object with segments data\n * @return {Array}      Array of object with segments data\n */\nfunction mergeSegments (segs) {\n  return segs.reduce(function (acc, curr) {\n    const prevSeg = acc.length - 1 >= 0 ? acc[acc.length - 1] : null\n    if (prevSeg && prevSeg.mode === curr.mode) {\n      acc[acc.length - 1].data += curr.data\n      return acc\n    }\n\n    acc.push(curr)\n    return acc\n  }, [])\n}\n\n/**\n * Generates a list of all possible nodes combination which\n * will be used to build a segments graph.\n *\n * Nodes are divided by groups. Each group will contain a list of all the modes\n * in which is possible to encode the given text.\n *\n * For example the text '12345' can be encoded as Numeric, Alphanumeric or Byte.\n * The group for '12345' will contain then 3 objects, one for each\n * possible encoding mode.\n *\n * Each node represents a possible segment.\n *\n * @param  {Array} segs Array of object with segments data\n * @return {Array}      Array of object with segments data\n */\nfunction buildNodes (segs) {\n  const nodes = []\n  for (let i = 0; i < segs.length; i++) {\n    const seg = segs[i]\n\n    switch (seg.mode) {\n      case Mode.NUMERIC:\n        nodes.push([seg,\n          { data: seg.data, mode: Mode.ALPHANUMERIC, length: seg.length },\n          { data: seg.data, mode: Mode.BYTE, length: seg.length }\n        ])\n        break\n      case Mode.ALPHANUMERIC:\n        nodes.push([seg,\n          { data: seg.data, mode: Mode.BYTE, length: seg.length }\n        ])\n        break\n      case Mode.KANJI:\n        nodes.push([seg,\n          { data: seg.data, mode: Mode.BYTE, length: getStringByteLength(seg.data) }\n        ])\n        break\n      case Mode.BYTE:\n        nodes.push([\n          { data: seg.data, mode: Mode.BYTE, length: getStringByteLength(seg.data) }\n        ])\n    }\n  }\n\n  return nodes\n}\n\n/**\n * Builds a graph from a list of nodes.\n * All segments in each node group will be connected with all the segments of\n * the next group and so on.\n *\n * At each connection will be assigned a weight depending on the\n * segment's byte length.\n *\n * @param  {Array} nodes    Array of object with segments data\n * @param  {Number} version QR Code version\n * @return {Object}         Graph of all possible segments\n */\nfunction buildGraph (nodes, version) {\n  const table = {}\n  const graph = { start: {} }\n  let prevNodeIds = ['start']\n\n  for (let i = 0; i < nodes.length; i++) {\n    const nodeGroup = nodes[i]\n    const currentNodeIds = []\n\n    for (let j = 0; j < nodeGroup.length; j++) {\n      const node = nodeGroup[j]\n      const key = '' + i + j\n\n      currentNodeIds.push(key)\n      table[key] = { node: node, lastCount: 0 }\n      graph[key] = {}\n\n      for (let n = 0; n < prevNodeIds.length; n++) {\n        const prevNodeId = prevNodeIds[n]\n\n        if (table[prevNodeId] && table[prevNodeId].node.mode === node.mode) {\n          graph[prevNodeId][key] =\n            getSegmentBitsLength(table[prevNodeId].lastCount + node.length, node.mode) -\n            getSegmentBitsLength(table[prevNodeId].lastCount, node.mode)\n\n          table[prevNodeId].lastCount += node.length\n        } else {\n          if (table[prevNodeId]) table[prevNodeId].lastCount = node.length\n\n          graph[prevNodeId][key] = getSegmentBitsLength(node.length, node.mode) +\n            4 + Mode.getCharCountIndicator(node.mode, version) // switch cost\n        }\n      }\n    }\n\n    prevNodeIds = currentNodeIds\n  }\n\n  for (let n = 0; n < prevNodeIds.length; n++) {\n    graph[prevNodeIds[n]].end = 0\n  }\n\n  return { map: graph, table: table }\n}\n\n/**\n * Builds a segment from a specified data and mode.\n * If a mode is not specified, the more suitable will be used.\n *\n * @param  {String} data             Input data\n * @param  {Mode | String} modesHint Data mode\n * @return {Segment}                 Segment\n */\nfunction buildSingleSegment (data, modesHint) {\n  let mode\n  const bestMode = Mode.getBestModeForData(data)\n\n  mode = Mode.from(modesHint, bestMode)\n\n  // Make sure data can be encoded\n  if (mode !== Mode.BYTE && mode.bit < bestMode.bit) {\n    throw new Error('\"' + data + '\"' +\n      ' cannot be encoded with mode ' + Mode.toString(mode) +\n      '.\\n Suggested mode is: ' + Mode.toString(bestMode))\n  }\n\n  // Use Mode.BYTE if Kanji support is disabled\n  if (mode === Mode.KANJI && !Utils.isKanjiModeEnabled()) {\n    mode = Mode.BYTE\n  }\n\n  switch (mode) {\n    case Mode.NUMERIC:\n      return new NumericData(data)\n\n    case Mode.ALPHANUMERIC:\n      return new AlphanumericData(data)\n\n    case Mode.KANJI:\n      return new KanjiData(data)\n\n    case Mode.BYTE:\n      return new ByteData(data)\n  }\n}\n\n/**\n * Builds a list of segments from an array.\n * Array can contain Strings or Objects with segment's info.\n *\n * For each item which is a string, will be generated a segment with the given\n * string and the more appropriate encoding mode.\n *\n * For each item which is an object, will be generated a segment with the given\n * data and mode.\n * Objects must contain at least the property \"data\".\n * If property \"mode\" is not present, the more suitable mode will be used.\n *\n * @param  {Array} array Array of objects with segments data\n * @return {Array}       Array of Segments\n */\nexports.fromArray = function fromArray (array) {\n  return array.reduce(function (acc, seg) {\n    if (typeof seg === 'string') {\n      acc.push(buildSingleSegment(seg, null))\n    } else if (seg.data) {\n      acc.push(buildSingleSegment(seg.data, seg.mode))\n    }\n\n    return acc\n  }, [])\n}\n\n/**\n * Builds an optimized sequence of segments from a string,\n * which will produce the shortest possible bitstream.\n *\n * @param  {String} data    Input string\n * @param  {Number} version QR Code version\n * @return {Array}          Array of segments\n */\nexports.fromString = function fromString (data, version) {\n  const segs = getSegmentsFromString(data, Utils.isKanjiModeEnabled())\n\n  const nodes = buildNodes(segs)\n  const graph = buildGraph(nodes, version)\n  const path = dijkstra.find_path(graph.map, 'start', 'end')\n\n  const optimizedSegs = []\n  for (let i = 1; i < path.length - 1; i++) {\n    optimizedSegs.push(graph.table[path[i]].node)\n  }\n\n  return exports.fromArray(mergeSegments(optimizedSegs))\n}\n\n/**\n * Splits a string in various segments with the modes which\n * best represent their content.\n * The produced segments are far from being optimized.\n * The output of this function is only used to estimate a QR Code version\n * which may contain the data.\n *\n * @param  {string} data Input string\n * @return {Array}       Array of segments\n */\nexports.rawSplit = function rawSplit (data) {\n  return exports.fromArray(\n    getSegmentsFromString(data, Utils.isKanjiModeEnabled())\n  )\n}\n","const Utils = require('./utils')\nconst ECLevel = require('./error-correction-level')\nconst BitBuffer = require('./bit-buffer')\nconst BitMatrix = require('./bit-matrix')\nconst AlignmentPattern = require('./alignment-pattern')\nconst FinderPattern = require('./finder-pattern')\nconst MaskPattern = require('./mask-pattern')\nconst ECCode = require('./error-correction-code')\nconst ReedSolomonEncoder = require('./reed-solomon-encoder')\nconst Version = require('./version')\nconst FormatInfo = require('./format-info')\nconst Mode = require('./mode')\nconst Segments = require('./segments')\n\n/**\n * QRCode for JavaScript\n *\n * modified by Ryan Day for nodejs support\n * Copyright (c) 2011 Ryan Day\n *\n * Licensed under the MIT license:\n *   http://www.opensource.org/licenses/mit-license.php\n *\n//---------------------------------------------------------------------\n// QRCode for JavaScript\n//\n// Copyright (c) 2009 Kazuhiko Arase\n//\n// URL: http://www.d-project.com/\n//\n// Licensed under the MIT license:\n//   http://www.opensource.org/licenses/mit-license.php\n//\n// The word \"QR Code\" is registered trademark of\n// DENSO WAVE INCORPORATED\n//   http://www.denso-wave.com/qrcode/faqpatent-e.html\n//\n//---------------------------------------------------------------------\n*/\n\n/**\n * Add finder patterns bits to matrix\n *\n * @param  {BitMatrix} matrix  Modules matrix\n * @param  {Number}    version QR Code version\n */\nfunction setupFinderPattern (matrix, version) {\n  const size = matrix.size\n  const pos = FinderPattern.getPositions(version)\n\n  for (let i = 0; i < pos.length; i++) {\n    const row = pos[i][0]\n    const col = pos[i][1]\n\n    for (let r = -1; r <= 7; r++) {\n      if (row + r <= -1 || size <= row + r) continue\n\n      for (let c = -1; c <= 7; c++) {\n        if (col + c <= -1 || size <= col + c) continue\n\n        if ((r >= 0 && r <= 6 && (c === 0 || c === 6)) ||\n          (c >= 0 && c <= 6 && (r === 0 || r === 6)) ||\n          (r >= 2 && r <= 4 && c >= 2 && c <= 4)) {\n          matrix.set(row + r, col + c, true, true)\n        } else {\n          matrix.set(row + r, col + c, false, true)\n        }\n      }\n    }\n  }\n}\n\n/**\n * Add timing pattern bits to matrix\n *\n * Note: this function must be called before {@link setupAlignmentPattern}\n *\n * @param  {BitMatrix} matrix Modules matrix\n */\nfunction setupTimingPattern (matrix) {\n  const size = matrix.size\n\n  for (let r = 8; r < size - 8; r++) {\n    const value = r % 2 === 0\n    matrix.set(r, 6, value, true)\n    matrix.set(6, r, value, true)\n  }\n}\n\n/**\n * Add alignment patterns bits to matrix\n *\n * Note: this function must be called after {@link setupTimingPattern}\n *\n * @param  {BitMatrix} matrix  Modules matrix\n * @param  {Number}    version QR Code version\n */\nfunction setupAlignmentPattern (matrix, version) {\n  const pos = AlignmentPattern.getPositions(version)\n\n  for (let i = 0; i < pos.length; i++) {\n    const row = pos[i][0]\n    const col = pos[i][1]\n\n    for (let r = -2; r <= 2; r++) {\n      for (let c = -2; c <= 2; c++) {\n        if (r === -2 || r === 2 || c === -2 || c === 2 ||\n          (r === 0 && c === 0)) {\n          matrix.set(row + r, col + c, true, true)\n        } else {\n          matrix.set(row + r, col + c, false, true)\n        }\n      }\n    }\n  }\n}\n\n/**\n * Add version info bits to matrix\n *\n * @param  {BitMatrix} matrix  Modules matrix\n * @param  {Number}    version QR Code version\n */\nfunction setupVersionInfo (matrix, version) {\n  const size = matrix.size\n  const bits = Version.getEncodedBits(version)\n  let row, col, mod\n\n  for (let i = 0; i < 18; i++) {\n    row = Math.floor(i / 3)\n    col = i % 3 + size - 8 - 3\n    mod = ((bits >> i) & 1) === 1\n\n    matrix.set(row, col, mod, true)\n    matrix.set(col, row, mod, true)\n  }\n}\n\n/**\n * Add format info bits to matrix\n *\n * @param  {BitMatrix} matrix               Modules matrix\n * @param  {ErrorCorrectionLevel}    errorCorrectionLevel Error correction level\n * @param  {Number}    maskPattern          Mask pattern reference value\n */\nfunction setupFormatInfo (matrix, errorCorrectionLevel, maskPattern) {\n  const size = matrix.size\n  const bits = FormatInfo.getEncodedBits(errorCorrectionLevel, maskPattern)\n  let i, mod\n\n  for (i = 0; i < 15; i++) {\n    mod = ((bits >> i) & 1) === 1\n\n    // vertical\n    if (i < 6) {\n      matrix.set(i, 8, mod, true)\n    } else if (i < 8) {\n      matrix.set(i + 1, 8, mod, true)\n    } else {\n      matrix.set(size - 15 + i, 8, mod, true)\n    }\n\n    // horizontal\n    if (i < 8) {\n      matrix.set(8, size - i - 1, mod, true)\n    } else if (i < 9) {\n      matrix.set(8, 15 - i - 1 + 1, mod, true)\n    } else {\n      matrix.set(8, 15 - i - 1, mod, true)\n    }\n  }\n\n  // fixed module\n  matrix.set(size - 8, 8, 1, true)\n}\n\n/**\n * Add encoded data bits to matrix\n *\n * @param  {BitMatrix}  matrix Modules matrix\n * @param  {Uint8Array} data   Data codewords\n */\nfunction setupData (matrix, data) {\n  const size = matrix.size\n  let inc = -1\n  let row = size - 1\n  let bitIndex = 7\n  let byteIndex = 0\n\n  for (let col = size - 1; col > 0; col -= 2) {\n    if (col === 6) col--\n\n    while (true) {\n      for (let c = 0; c < 2; c++) {\n        if (!matrix.isReserved(row, col - c)) {\n          let dark = false\n\n          if (byteIndex < data.length) {\n            dark = (((data[byteIndex] >>> bitIndex) & 1) === 1)\n          }\n\n          matrix.set(row, col - c, dark)\n          bitIndex--\n\n          if (bitIndex === -1) {\n            byteIndex++\n            bitIndex = 7\n          }\n        }\n      }\n\n      row += inc\n\n      if (row < 0 || size <= row) {\n        row -= inc\n        inc = -inc\n        break\n      }\n    }\n  }\n}\n\n/**\n * Create encoded codewords from data input\n *\n * @param  {Number}   version              QR Code version\n * @param  {ErrorCorrectionLevel}   errorCorrectionLevel Error correction level\n * @param  {ByteData} data                 Data input\n * @return {Uint8Array}                    Buffer containing encoded codewords\n */\nfunction createData (version, errorCorrectionLevel, segments) {\n  // Prepare data buffer\n  const buffer = new BitBuffer()\n\n  segments.forEach(function (data) {\n    // prefix data with mode indicator (4 bits)\n    buffer.put(data.mode.bit, 4)\n\n    // Prefix data with character count indicator.\n    // The character count indicator is a string of bits that represents the\n    // number of characters that are being encoded.\n    // The character count indicator must be placed after the mode indicator\n    // and must be a certain number of bits long, depending on the QR version\n    // and data mode\n    // @see {@link Mode.getCharCountIndicator}.\n    buffer.put(data.getLength(), Mode.getCharCountIndicator(data.mode, version))\n\n    // add binary data sequence to buffer\n    data.write(buffer)\n  })\n\n  // Calculate required number of bits\n  const totalCodewords = Utils.getSymbolTotalCodewords(version)\n  const ecTotalCodewords = ECCode.getTotalCodewordsCount(version, errorCorrectionLevel)\n  const dataTotalCodewordsBits = (totalCodewords - ecTotalCodewords) * 8\n\n  // Add a terminator.\n  // If the bit string is shorter than the total number of required bits,\n  // a terminator of up to four 0s must be added to the right side of the string.\n  // If the bit string is more than four bits shorter than the required number of bits,\n  // add four 0s to the end.\n  if (buffer.getLengthInBits() + 4 <= dataTotalCodewordsBits) {\n    buffer.put(0, 4)\n  }\n\n  // If the bit string is fewer than four bits shorter, add only the number of 0s that\n  // are needed to reach the required number of bits.\n\n  // After adding the terminator, if the number of bits in the string is not a multiple of 8,\n  // pad the string on the right with 0s to make the string's length a multiple of 8.\n  while (buffer.getLengthInBits() % 8 !== 0) {\n    buffer.putBit(0)\n  }\n\n  // Add pad bytes if the string is still shorter than the total number of required bits.\n  // Extend the buffer to fill the data capacity of the symbol corresponding to\n  // the Version and Error Correction Level by adding the Pad Codewords 11101100 (0xEC)\n  // and 00010001 (0x11) alternately.\n  const remainingByte = (dataTotalCodewordsBits - buffer.getLengthInBits()) / 8\n  for (let i = 0; i < remainingByte; i++) {\n    buffer.put(i % 2 ? 0x11 : 0xEC, 8)\n  }\n\n  return createCodewords(buffer, version, errorCorrectionLevel)\n}\n\n/**\n * Encode input data with Reed-Solomon and return codewords with\n * relative error correction bits\n *\n * @param  {BitBuffer} bitBuffer            Data to encode\n * @param  {Number}    version              QR Code version\n * @param  {ErrorCorrectionLevel} errorCorrectionLevel Error correction level\n * @return {Uint8Array}                     Buffer containing encoded codewords\n */\nfunction createCodewords (bitBuffer, version, errorCorrectionLevel) {\n  // Total codewords for this QR code version (Data + Error correction)\n  const totalCodewords = Utils.getSymbolTotalCodewords(version)\n\n  // Total number of error correction codewords\n  const ecTotalCodewords = ECCode.getTotalCodewordsCount(version, errorCorrectionLevel)\n\n  // Total number of data codewords\n  const dataTotalCodewords = totalCodewords - ecTotalCodewords\n\n  // Total number of blocks\n  const ecTotalBlocks = ECCode.getBlocksCount(version, errorCorrectionLevel)\n\n  // Calculate how many blocks each group should contain\n  const blocksInGroup2 = totalCodewords % ecTotalBlocks\n  const blocksInGroup1 = ecTotalBlocks - blocksInGroup2\n\n  const totalCodewordsInGroup1 = Math.floor(totalCodewords / ecTotalBlocks)\n\n  const dataCodewordsInGroup1 = Math.floor(dataTotalCodewords / ecTotalBlocks)\n  const dataCodewordsInGroup2 = dataCodewordsInGroup1 + 1\n\n  // Number of EC codewords is the same for both groups\n  const ecCount = totalCodewordsInGroup1 - dataCodewordsInGroup1\n\n  // Initialize a Reed-Solomon encoder with a generator polynomial of degree ecCount\n  const rs = new ReedSolomonEncoder(ecCount)\n\n  let offset = 0\n  const dcData = new Array(ecTotalBlocks)\n  const ecData = new Array(ecTotalBlocks)\n  let maxDataSize = 0\n  const buffer = new Uint8Array(bitBuffer.buffer)\n\n  // Divide the buffer into the required number of blocks\n  for (let b = 0; b < ecTotalBlocks; b++) {\n    const dataSize = b < blocksInGroup1 ? dataCodewordsInGroup1 : dataCodewordsInGroup2\n\n    // extract a block of data from buffer\n    dcData[b] = buffer.slice(offset, offset + dataSize)\n\n    // Calculate EC codewords for this data block\n    ecData[b] = rs.encode(dcData[b])\n\n    offset += dataSize\n    maxDataSize = Math.max(maxDataSize, dataSize)\n  }\n\n  // Create final data\n  // Interleave the data and error correction codewords from each block\n  const data = new Uint8Array(totalCodewords)\n  let index = 0\n  let i, r\n\n  // Add data codewords\n  for (i = 0; i < maxDataSize; i++) {\n    for (r = 0; r < ecTotalBlocks; r++) {\n      if (i < dcData[r].length) {\n        data[index++] = dcData[r][i]\n      }\n    }\n  }\n\n  // Apped EC codewords\n  for (i = 0; i < ecCount; i++) {\n    for (r = 0; r < ecTotalBlocks; r++) {\n      data[index++] = ecData[r][i]\n    }\n  }\n\n  return data\n}\n\n/**\n * Build QR Code symbol\n *\n * @param  {String} data                 Input string\n * @param  {Number} version              QR Code version\n * @param  {ErrorCorretionLevel} errorCorrectionLevel Error level\n * @param  {MaskPattern} maskPattern     Mask pattern\n * @return {Object}                      Object containing symbol data\n */\nfunction createSymbol (data, version, errorCorrectionLevel, maskPattern) {\n  let segments\n\n  if (Array.isArray(data)) {\n    segments = Segments.fromArray(data)\n  } else if (typeof data === 'string') {\n    let estimatedVersion = version\n\n    if (!estimatedVersion) {\n      const rawSegments = Segments.rawSplit(data)\n\n      // Estimate best version that can contain raw splitted segments\n      estimatedVersion = Version.getBestVersionForData(rawSegments, errorCorrectionLevel)\n    }\n\n    // Build optimized segments\n    // If estimated version is undefined, try with the highest version\n    segments = Segments.fromString(data, estimatedVersion || 40)\n  } else {\n    throw new Error('Invalid data')\n  }\n\n  // Get the min version that can contain data\n  const bestVersion = Version.getBestVersionForData(segments, errorCorrectionLevel)\n\n  // If no version is found, data cannot be stored\n  if (!bestVersion) {\n    throw new Error('The amount of data is too big to be stored in a QR Code')\n  }\n\n  // If not specified, use min version as default\n  if (!version) {\n    version = bestVersion\n\n  // Check if the specified version can contain the data\n  } else if (version < bestVersion) {\n    throw new Error('\\n' +\n      'The chosen QR Code version cannot contain this amount of data.\\n' +\n      'Minimum version required to store current data is: ' + bestVersion + '.\\n'\n    )\n  }\n\n  const dataBits = createData(version, errorCorrectionLevel, segments)\n\n  // Allocate matrix buffer\n  const moduleCount = Utils.getSymbolSize(version)\n  const modules = new BitMatrix(moduleCount)\n\n  // Add function modules\n  setupFinderPattern(modules, version)\n  setupTimingPattern(modules)\n  setupAlignmentPattern(modules, version)\n\n  // Add temporary dummy bits for format info just to set them as reserved.\n  // This is needed to prevent these bits from being masked by {@link MaskPattern.applyMask}\n  // since the masking operation must be performed only on the encoding region.\n  // These blocks will be replaced with correct values later in code.\n  setupFormatInfo(modules, errorCorrectionLevel, 0)\n\n  if (version >= 7) {\n    setupVersionInfo(modules, version)\n  }\n\n  // Add data codewords\n  setupData(modules, dataBits)\n\n  if (isNaN(maskPattern)) {\n    // Find best mask pattern\n    maskPattern = MaskPattern.getBestMask(modules,\n      setupFormatInfo.bind(null, modules, errorCorrectionLevel))\n  }\n\n  // Apply mask pattern\n  MaskPattern.applyMask(maskPattern, modules)\n\n  // Replace format info bits with correct values\n  setupFormatInfo(modules, errorCorrectionLevel, maskPattern)\n\n  return {\n    modules: modules,\n    version: version,\n    errorCorrectionLevel: errorCorrectionLevel,\n    maskPattern: maskPattern,\n    segments: segments\n  }\n}\n\n/**\n * QR Code\n *\n * @param {String | Array} data                 Input data\n * @param {Object} options                      Optional configurations\n * @param {Number} options.version              QR Code version\n * @param {String} options.errorCorrectionLevel Error correction level\n * @param {Function} options.toSJISFunc         Helper func to convert utf8 to sjis\n */\nexports.create = function create (data, options) {\n  if (typeof data === 'undefined' || data === '') {\n    throw new Error('No input text')\n  }\n\n  let errorCorrectionLevel = ECLevel.M\n  let version\n  let mask\n\n  if (typeof options !== 'undefined') {\n    // Use higher error correction level as default\n    errorCorrectionLevel = ECLevel.from(options.errorCorrectionLevel, ECLevel.M)\n    version = Version.from(options.version)\n    mask = MaskPattern.from(options.maskPattern)\n\n    if (options.toSJISFunc) {\n      Utils.setToSJISFunction(options.toSJISFunc)\n    }\n  }\n\n  return createSymbol(data, version, errorCorrectionLevel, mask)\n}\n","function hex2rgba (hex) {\n  if (typeof hex === 'number') {\n    hex = hex.toString()\n  }\n\n  if (typeof hex !== 'string') {\n    throw new Error('Color should be defined as hex string')\n  }\n\n  let hexCode = hex.slice().replace('#', '').split('')\n  if (hexCode.length < 3 || hexCode.length === 5 || hexCode.length > 8) {\n    throw new Error('Invalid hex color: ' + hex)\n  }\n\n  // Convert from short to long form (fff -> ffffff)\n  if (hexCode.length === 3 || hexCode.length === 4) {\n    hexCode = Array.prototype.concat.apply([], hexCode.map(function (c) {\n      return [c, c]\n    }))\n  }\n\n  // Add default alpha value\n  if (hexCode.length === 6) hexCode.push('F', 'F')\n\n  const hexValue = parseInt(hexCode.join(''), 16)\n\n  return {\n    r: (hexValue >> 24) & 255,\n    g: (hexValue >> 16) & 255,\n    b: (hexValue >> 8) & 255,\n    a: hexValue & 255,\n    hex: '#' + hexCode.slice(0, 6).join('')\n  }\n}\n\nexports.getOptions = function getOptions (options) {\n  if (!options) options = {}\n  if (!options.color) options.color = {}\n\n  const margin = typeof options.margin === 'undefined' ||\n    options.margin === null ||\n    options.margin < 0\n    ? 4\n    : options.margin\n\n  const width = options.width && options.width >= 21 ? options.width : undefined\n  const scale = options.scale || 4\n\n  return {\n    width: width,\n    scale: width ? 4 : scale,\n    margin: margin,\n    color: {\n      dark: hex2rgba(options.color.dark || '#000000ff'),\n      light: hex2rgba(options.color.light || '#ffffffff')\n    },\n    type: options.type,\n    rendererOpts: options.rendererOpts || {}\n  }\n}\n\nexports.getScale = function getScale (qrSize, opts) {\n  return opts.width && opts.width >= qrSize + opts.margin * 2\n    ? opts.width / (qrSize + opts.margin * 2)\n    : opts.scale\n}\n\nexports.getImageWidth = function getImageWidth (qrSize, opts) {\n  const scale = exports.getScale(qrSize, opts)\n  return Math.floor((qrSize + opts.margin * 2) * scale)\n}\n\nexports.qrToImageData = function qrToImageData (imgData, qr, opts) {\n  const size = qr.modules.size\n  const data = qr.modules.data\n  const scale = exports.getScale(size, opts)\n  const symbolSize = Math.floor((size + opts.margin * 2) * scale)\n  const scaledMargin = opts.margin * scale\n  const palette = [opts.color.light, opts.color.dark]\n\n  for (let i = 0; i < symbolSize; i++) {\n    for (let j = 0; j < symbolSize; j++) {\n      let posDst = (i * symbolSize + j) * 4\n      let pxColor = opts.color.light\n\n      if (i >= scaledMargin && j >= scaledMargin &&\n        i < symbolSize - scaledMargin && j < symbolSize - scaledMargin) {\n        const iSrc = Math.floor((i - scaledMargin) / scale)\n        const jSrc = Math.floor((j - scaledMargin) / scale)\n        pxColor = palette[data[iSrc * size + jSrc] ? 1 : 0]\n      }\n\n      imgData[posDst++] = pxColor.r\n      imgData[posDst++] = pxColor.g\n      imgData[posDst++] = pxColor.b\n      imgData[posDst] = pxColor.a\n    }\n  }\n}\n","const Utils = require('./utils')\n\nfunction clearCanvas (ctx, canvas, size) {\n  ctx.clearRect(0, 0, canvas.width, canvas.height)\n\n  if (!canvas.style) canvas.style = {}\n  canvas.height = size\n  canvas.width = size\n  canvas.style.height = size + 'px'\n  canvas.style.width = size + 'px'\n}\n\nfunction getCanvasElement () {\n  try {\n    return document.createElement('canvas')\n  } catch (e) {\n    throw new Error('You need to specify a canvas element')\n  }\n}\n\nexports.render = function render (qrData, canvas, options) {\n  let opts = options\n  let canvasEl = canvas\n\n  if (typeof opts === 'undefined' && (!canvas || !canvas.getContext)) {\n    opts = canvas\n    canvas = undefined\n  }\n\n  if (!canvas) {\n    canvasEl = getCanvasElement()\n  }\n\n  opts = Utils.getOptions(opts)\n  const size = Utils.getImageWidth(qrData.modules.size, opts)\n\n  const ctx = canvasEl.getContext('2d')\n  const image = ctx.createImageData(size, size)\n  Utils.qrToImageData(image.data, qrData, opts)\n\n  clearCanvas(ctx, canvasEl, size)\n  ctx.putImageData(image, 0, 0)\n\n  return canvasEl\n}\n\nexports.renderToDataURL = function renderToDataURL (qrData, canvas, options) {\n  let opts = options\n\n  if (typeof opts === 'undefined' && (!canvas || !canvas.getContext)) {\n    opts = canvas\n    canvas = undefined\n  }\n\n  if (!opts) opts = {}\n\n  const canvasEl = exports.render(qrData, canvas, opts)\n\n  const type = opts.type || 'image/png'\n  const rendererOpts = opts.rendererOpts || {}\n\n  return canvasEl.toDataURL(type, rendererOpts.quality)\n}\n","const Utils = require('./utils')\n\nfunction getColorAttrib (color, attrib) {\n  const alpha = color.a / 255\n  const str = attrib + '=\"' + color.hex + '\"'\n\n  return alpha < 1\n    ? str + ' ' + attrib + '-opacity=\"' + alpha.toFixed(2).slice(1) + '\"'\n    : str\n}\n\nfunction svgCmd (cmd, x, y) {\n  let str = cmd + x\n  if (typeof y !== 'undefined') str += ' ' + y\n\n  return str\n}\n\nfunction qrToPath (data, size, margin) {\n  let path = ''\n  let moveBy = 0\n  let newRow = false\n  let lineLength = 0\n\n  for (let i = 0; i < data.length; i++) {\n    const col = Math.floor(i % size)\n    const row = Math.floor(i / size)\n\n    if (!col && !newRow) newRow = true\n\n    if (data[i]) {\n      lineLength++\n\n      if (!(i > 0 && col > 0 && data[i - 1])) {\n        path += newRow\n          ? svgCmd('M', col + margin, 0.5 + row + margin)\n          : svgCmd('m', moveBy, 0)\n\n        moveBy = 0\n        newRow = false\n      }\n\n      if (!(col + 1 < size && data[i + 1])) {\n        path += svgCmd('h', lineLength)\n        lineLength = 0\n      }\n    } else {\n      moveBy++\n    }\n  }\n\n  return path\n}\n\nexports.render = function render (qrData, options, cb) {\n  const opts = Utils.getOptions(options)\n  const size = qrData.modules.size\n  const data = qrData.modules.data\n  const qrcodesize = size + opts.margin * 2\n\n  const bg = !opts.color.light.a\n    ? ''\n    : '<path ' + getColorAttrib(opts.color.light, 'fill') +\n      ' d=\"M0 0h' + qrcodesize + 'v' + qrcodesize + 'H0z\"/>'\n\n  const path =\n    '<path ' + getColorAttrib(opts.color.dark, 'stroke') +\n    ' d=\"' + qrToPath(data, size, opts.margin) + '\"/>'\n\n  const viewBox = 'viewBox=\"' + '0 0 ' + qrcodesize + ' ' + qrcodesize + '\"'\n\n  const width = !opts.width ? '' : 'width=\"' + opts.width + '\" height=\"' + opts.width + '\" '\n\n  const svgTag = '<svg xmlns=\"http://www.w3.org/2000/svg\" ' + width + viewBox + ' shape-rendering=\"crispEdges\">' + bg + path + '</svg>\\n'\n\n  if (typeof cb === 'function') {\n    cb(null, svgTag)\n  }\n\n  return svgTag\n}\n","\nconst canPromise = require('./can-promise')\n\nconst QRCode = require('./core/qrcode')\nconst CanvasRenderer = require('./renderer/canvas')\nconst SvgRenderer = require('./renderer/svg-tag.js')\n\nfunction renderCanvas (renderFunc, canvas, text, opts, cb) {\n  const args = [].slice.call(arguments, 1)\n  const argsNum = args.length\n  const isLastArgCb = typeof args[argsNum - 1] === 'function'\n\n  if (!isLastArgCb && !canPromise()) {\n    throw new Error('Callback required as last argument')\n  }\n\n  if (isLastArgCb) {\n    if (argsNum < 2) {\n      throw new Error('Too few arguments provided')\n    }\n\n    if (argsNum === 2) {\n      cb = text\n      text = canvas\n      canvas = opts = undefined\n    } else if (argsNum === 3) {\n      if (canvas.getContext && typeof cb === 'undefined') {\n        cb = opts\n        opts = undefined\n      } else {\n        cb = opts\n        opts = text\n        text = canvas\n        canvas = undefined\n      }\n    }\n  } else {\n    if (argsNum < 1) {\n      throw new Error('Too few arguments provided')\n    }\n\n    if (argsNum === 1) {\n      text = canvas\n      canvas = opts = undefined\n    } else if (argsNum === 2 && !canvas.getContext) {\n      opts = text\n      text = canvas\n      canvas = undefined\n    }\n\n    return new Promise(function (resolve, reject) {\n      try {\n        const data = QRCode.create(text, opts)\n        resolve(renderFunc(data, canvas, opts))\n      } catch (e) {\n        reject(e)\n      }\n    })\n  }\n\n  try {\n    const data = QRCode.create(text, opts)\n    cb(null, renderFunc(data, canvas, opts))\n  } catch (e) {\n    cb(e)\n  }\n}\n\nexports.create = QRCode.create\nexports.toCanvas = renderCanvas.bind(null, CanvasRenderer.render)\nexports.toDataURL = renderCanvas.bind(null, CanvasRenderer.renderToDataURL)\n\n// only svg for now.\nexports.toString = renderCanvas.bind(null, function (data, _, opts) {\n  return SvgRenderer.render(data, opts)\n})\n","/**\n * QR Code component for TOTP setup\n *\n * Generates QR codes client-side using the qrcode library.\n * SECURITY: Never sends the TOTP secret to external services.\n */\n\nimport { useEffect, useRef, useState } from 'react';\nimport QRCode from 'qrcode';\n\nexport interface QrCodeProps {\n  /** The data to encode in the QR code (e.g., otpauth:// URL) */\n  value: string;\n  /** Size in pixels (width and height) */\n  size?: number;\n  /** Alt text for accessibility */\n  alt?: string;\n  /** Additional CSS class */\n  className?: string;\n}\n\n/**\n * Renders a QR code as a canvas element.\n * Generated entirely client-side for security.\n */\nexport function QrCode({ value, size = 200, alt = 'QR code', className = '' }: QrCodeProps) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (!canvasRef.current || !value) return;\n\n    QRCode.toCanvas(canvasRef.current, value, {\n      width: size,\n      margin: 2,\n      color: {\n        dark: '#000000',\n        light: '#ffffff',\n      },\n      errorCorrectionLevel: 'M',\n    })\n      .then(() => {\n        // Clear any previous error on successful generation\n        setError(null);\n      })\n      .catch((err) => {\n        setError(err instanceof Error ? err.message : 'Failed to generate QR code');\n      });\n  }, [value, size]);\n\n  if (error) {\n    return (\n      <div\n        className={`cedros-qr-error ${className}`}\n        style={{ width: size, height: size }}\n        role=\"img\"\n        aria-label={alt}\n      >\n        <p>Failed to generate QR code</p>\n      </div>\n    );\n  }\n\n  return (\n    <canvas\n      ref={canvasRef}\n      className={`cedros-totp-qr-image ${className}`}\n      role=\"img\"\n      aria-label={alt}\n      style={{ borderRadius: '0.5rem' }}\n    />\n  );\n}\n","import { useState, useCallback, useMemo } from 'react';\nimport { useCedrosLogin } from '../context/useCedrosLogin';\nimport { ApiClient, handleApiError } from '../utils/apiClient';\nimport type {\n  AuthError,\n  TotpStatus,\n  TotpSetupResponse,\n  TotpBackupCodesResponse,\n  TotpSetupState,\n} from '../types';\n\nexport interface UseTotpReturn {\n  /** Current TOTP status for the user */\n  status: TotpStatus | null;\n  /** Setup state for the enrollment flow */\n  setupState: TotpSetupState;\n  /** Setup data (secret, QR URL, backup codes) */\n  setupData: TotpSetupResponse | null;\n  /** Whether a request is in progress */\n  isLoading: boolean;\n  /** Error from the last request */\n  error: AuthError | null;\n  /** Fetch current TOTP status */\n  getStatus: () => Promise<TotpStatus>;\n  /** Start TOTP setup (generates secret and backup codes) */\n  beginSetup: () => Promise<TotpSetupResponse>;\n  /** Verify code and enable TOTP */\n  enableTotp: (code: string) => Promise<void>;\n  /** Disable TOTP (requires password confirmation) */\n  disableTotp: (password: string) => Promise<void>;\n  /** Regenerate recovery codes (requires current authenticator code) */\n  regenerateBackupCodes: (code: string) => Promise<TotpBackupCodesResponse>;\n  /** Clear error state */\n  clearError: () => void;\n  /** Reset to initial state */\n  reset: () => void;\n}\n\n/**\n * Hook for TOTP (Time-based One-Time Password) two-factor authentication.\n *\n * Provides methods for:\n * - Setting up TOTP with authenticator apps\n * - Enabling/disabling TOTP for the user's account\n * - Managing backup codes\n *\n * @example\n * ```tsx\n * function TotpSettings() {\n *   const { status, beginSetup, enableTotp, setupData } = useTotp();\n *\n *   if (status?.enabled) {\n *     return <p>2FA is enabled</p>;\n *   }\n *\n *   const handleSetup = async () => {\n *     const data = await beginSetup();\n *     // Show QR code from data.otpauthUri\n *   };\n * }\n * ```\n */\nexport function useTotp(): UseTotpReturn {\n  const { config, _internal } = useCedrosLogin();\n  const [status, setStatus] = useState<TotpStatus | null>(null);\n  const [setupState, setSetupState] = useState<TotpSetupState>('idle');\n  const [setupData, setSetupData] = useState<TotpSetupResponse | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<AuthError | null>(null);\n\n  const apiClient = useMemo(\n    () =>\n      new ApiClient({\n        baseUrl: config.serverUrl,\n        timeoutMs: config.requestTimeout,\n        retryAttempts: config.retryAttempts,\n        getAccessToken: _internal?.getAccessToken,\n      }),\n    [config.serverUrl, config.requestTimeout, config.retryAttempts, _internal]\n  );\n\n  const getStatus = useCallback(async (): Promise<TotpStatus> => {\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const result = await apiClient.get<TotpStatus>('/mfa/status');\n      setStatus(result);\n      return result;\n    } catch (err) {\n      const authError = handleApiError(err, 'Failed to get TOTP status');\n      setError(authError);\n      throw authError;\n    } finally {\n      setIsLoading(false);\n    }\n  }, [apiClient]);\n\n  const beginSetup = useCallback(async (): Promise<TotpSetupResponse> => {\n    setIsLoading(true);\n    setError(null);\n    setSetupState('loading');\n\n    try {\n      const result = await apiClient.post<TotpSetupResponse>('/mfa/setup', {});\n      setSetupData(result);\n      setSetupState('setup');\n      return result;\n    } catch (err) {\n      const authError = handleApiError(err, 'Failed to start TOTP setup');\n      setError(authError);\n      setSetupState('error');\n      throw authError;\n    } finally {\n      setIsLoading(false);\n    }\n  }, [apiClient]);\n\n  const enableTotp = useCallback(\n    async (code: string): Promise<void> => {\n      if (!/^\\d{6}$/.test(code)) {\n        const validationError: AuthError = {\n          code: 'VALIDATION_ERROR',\n          message: 'Please enter a 6-digit code',\n        };\n        setError(validationError);\n        throw validationError;\n      }\n\n      setIsLoading(true);\n      setError(null);\n      setSetupState('verifying');\n\n      try {\n        await apiClient.post('/mfa/enable', { code });\n        setSetupState('success');\n        setStatus({ enabled: true, recoveryCodesRemaining: setupData?.recoveryCodes.length ?? 0 });\n      } catch (err) {\n        const authError = handleApiError(err, 'Invalid verification code');\n        setError(authError);\n        setSetupState('error');\n        throw authError;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient, setupData]\n  );\n\n  const disableTotp = useCallback(\n    async (password: string): Promise<void> => {\n      if (!password) {\n        const validationError: AuthError = {\n          code: 'VALIDATION_ERROR',\n          message: 'Please enter your password',\n        };\n        setError(validationError);\n        throw validationError;\n      }\n\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        await apiClient.post('/mfa/disable', { password });\n        setStatus({ enabled: false, recoveryCodesRemaining: 0 });\n        setSetupData(null);\n        setSetupState('idle');\n      } catch (err) {\n        const authError = handleApiError(err, 'Failed to disable TOTP');\n        setError(authError);\n        throw authError;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const regenerateBackupCodes = useCallback(\n    async (code: string): Promise<TotpBackupCodesResponse> => {\n      if (!/^\\d{6}$/.test(code)) {\n        const validationError: AuthError = {\n          code: 'VALIDATION_ERROR',\n          message: 'Please enter a 6-digit code',\n        };\n        setError(validationError);\n        throw validationError;\n      }\n\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        const result = await apiClient.post<TotpBackupCodesResponse>(\n          '/mfa/recovery-codes/regenerate',\n          { code }\n        );\n        return result;\n      } catch (err) {\n        const authError = handleApiError(err, 'Failed to regenerate recovery codes');\n        setError(authError);\n        throw authError;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const clearError = useCallback(() => setError(null), []);\n\n  const reset = useCallback(() => {\n    setError(null);\n    setSetupData(null);\n    setSetupState('idle');\n    setIsLoading(false);\n  }, []);\n\n  return {\n    status,\n    setupState,\n    setupData,\n    isLoading,\n    error,\n    getStatus,\n    beginSetup,\n    enableTotp,\n    disableTotp,\n    regenerateBackupCodes,\n    clearError,\n    reset,\n  };\n}\n","/**\n * TOTP Setup component for enabling two-factor authentication\n *\n * Guides users through:\n * 1. Scanning QR code with authenticator app\n * 2. Saving backup codes\n * 3. Verifying setup with a code\n */\n\nimport { useState, useEffect, useRef } from 'react';\nimport { useTotp } from '../../hooks/useTotp';\nimport { OtpInput } from './OtpInput';\nimport { QrCode } from './QrCode';\nimport { LoadingSpinner } from '../shared/LoadingSpinner';\nimport { ErrorMessage } from '../shared/ErrorMessage';\n\nexport interface TotpSetupProps {\n  /** Called when setup is completed successfully */\n  onSuccess?: () => void;\n  /** Called when user cancels setup */\n  onCancel?: () => void;\n  /** Additional CSS class */\n  className?: string;\n}\n\n/**\n * Two-factor authentication setup wizard.\n *\n * Displays QR code for authenticator app scanning,\n * recovery codes for account recovery, and verification step.\n */\nexport function TotpSetup({ onSuccess, onCancel, className = '' }: TotpSetupProps) {\n  const { setupState, setupData, isLoading, error, beginSetup, enableTotp, clearError, reset } =\n    useTotp();\n\n  const [step, setStep] = useState<'qr' | 'backup' | 'verify'>('qr');\n  const [verifyCode, setVerifyCode] = useState('');\n  const [copiedSecret, setCopiedSecret] = useState(false);\n  const [savedBackupCodes, setSavedBackupCodes] = useState(false);\n  const copyTimerRef = useRef<number | null>(null);\n\n  // Start setup on mount\n  useEffect(() => {\n    if (setupState === 'idle') {\n      beginSetup().catch(() => {\n        // Error handled by hook\n      });\n    }\n  }, [setupState, beginSetup]);\n\n  // Handle successful setup\n  useEffect(() => {\n    if (setupState === 'success') {\n      onSuccess?.();\n    }\n  }, [setupState, onSuccess]);\n\n  const handleCopySecret = async () => {\n    if (setupData?.secret) {\n      await navigator.clipboard.writeText(setupData.secret);\n      setCopiedSecret(true);\n      if (copyTimerRef.current !== null) {\n        window.clearTimeout(copyTimerRef.current);\n      }\n      copyTimerRef.current = window.setTimeout(() => setCopiedSecret(false), 2000);\n    }\n  };\n\n  const handleCopyBackupCodes = async () => {\n    if (setupData?.recoveryCodes) {\n      const codes = setupData.recoveryCodes.join('\\n');\n      await navigator.clipboard.writeText(codes);\n    }\n  };\n\n  const handleVerify = async () => {\n    try {\n      await enableTotp(verifyCode);\n    } catch {\n      // Error handled by hook\n      setVerifyCode('');\n    }\n  };\n\n  const handleCancel = () => {\n    reset();\n    onCancel?.();\n  };\n\n  useEffect(() => {\n    return () => {\n      if (copyTimerRef.current !== null) {\n        window.clearTimeout(copyTimerRef.current);\n        copyTimerRef.current = null;\n      }\n    };\n  }, []);\n\n  // Loading state\n  if (setupState === 'loading' || (setupState === 'idle' && isLoading)) {\n    return (\n      <div className={`cedros-totp-setup ${className}`}>\n        <div className=\"cedros-totp-loading\">\n          <LoadingSpinner size=\"lg\" label=\"Setting up two-factor authentication\" />\n        </div>\n      </div>\n    );\n  }\n\n  // Error state (failed to start setup)\n  if (setupState === 'error' && !setupData) {\n    return (\n      <div className={`cedros-totp-setup ${className}`}>\n        <ErrorMessage error={error} onDismiss={clearError} />\n        <div className=\"cedros-totp-actions\">\n          <button\n            type=\"button\"\n            className=\"cedros-button cedros-button-outline cedros-button-md\"\n            onClick={handleCancel}\n          >\n            Cancel\n          </button>\n          <button\n            type=\"button\"\n            className=\"cedros-button cedros-button-primary cedros-button-md\"\n            onClick={() => beginSetup()}\n          >\n            Try again\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // Success state\n  if (setupState === 'success') {\n    return (\n      <div className={`cedros-totp-setup ${className}`}>\n        <div className=\"cedros-totp-success\">\n          <svg\n            className=\"cedros-totp-success-icon\"\n            width=\"48\"\n            height=\"48\"\n            viewBox=\"0 0 48 48\"\n            fill=\"none\"\n            aria-hidden=\"true\"\n          >\n            <circle cx=\"24\" cy=\"24\" r=\"22\" stroke=\"var(--cedros-success)\" strokeWidth=\"2\" />\n            <path\n              d=\"M14 24l7 7 13-13\"\n              stroke=\"var(--cedros-success)\"\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n            />\n          </svg>\n          <h3 className=\"cedros-totp-title\">Two-factor authentication enabled</h3>\n          <p className=\"cedros-totp-description\">\n            Your account is now protected with an additional layer of security.\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!setupData) return null;\n\n  return (\n    <div className={`cedros-totp-setup ${className}`}>\n      {/* Step 1: QR Code */}\n      {step === 'qr' && (\n        <div className=\"cedros-totp-step\">\n          <h3 className=\"cedros-totp-title\">Scan QR code</h3>\n          <p className=\"cedros-totp-description\">\n            Use your authenticator app to scan this QR code.\n          </p>\n\n          <div className=\"cedros-totp-qr\">\n            {/* QR code generated client-side from the server-provided otpauth URI */}\n            <QrCode value={setupData.otpauthUri} size={200} alt=\"QR code for authenticator app\" />\n          </div>\n\n          <div className=\"cedros-totp-manual\">\n            <p className=\"cedros-totp-manual-label\">Or enter this code manually:</p>\n            <div className=\"cedros-totp-secret\">\n              <code className=\"cedros-totp-secret-code\">{setupData.secret}</code>\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-ghost cedros-button-sm\"\n                onClick={handleCopySecret}\n                aria-label=\"Copy secret\"\n              >\n                {copiedSecret ? 'Copied!' : 'Copy'}\n              </button>\n            </div>\n          </div>\n\n          <div className=\"cedros-totp-actions\">\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-outline cedros-button-md\"\n              onClick={handleCancel}\n            >\n              Cancel\n            </button>\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-primary cedros-button-md\"\n              onClick={() => setStep('backup')}\n            >\n              Continue\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Step 2: Recovery Codes */}\n      {step === 'backup' && (\n        <div className=\"cedros-totp-step\">\n          <h3 className=\"cedros-totp-title\">Save recovery codes</h3>\n          <p className=\"cedros-totp-description\">\n            Save these codes in a secure place. You can use them to access your account if you lose\n            your authenticator device.\n          </p>\n\n          <div className=\"cedros-totp-backup-codes\">\n            {setupData.recoveryCodes.map((code, index) => (\n              <code key={index} className=\"cedros-totp-backup-code\">\n                {code}\n              </code>\n            ))}\n          </div>\n\n          <button\n            type=\"button\"\n            className=\"cedros-button cedros-button-outline cedros-button-md cedros-button-full\"\n            onClick={handleCopyBackupCodes}\n          >\n            Copy all codes\n          </button>\n\n          <label className=\"cedros-checkbox-label cedros-totp-confirm\">\n            <input\n              type=\"checkbox\"\n              className=\"cedros-checkbox\"\n              checked={savedBackupCodes}\n              onChange={(e) => setSavedBackupCodes(e.target.checked)}\n            />\n            <span className=\"cedros-checkbox-text\">I have saved these recovery codes</span>\n          </label>\n\n          <div className=\"cedros-totp-actions\">\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-outline cedros-button-md\"\n              onClick={() => setStep('qr')}\n            >\n              Back\n            </button>\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-primary cedros-button-md\"\n              onClick={() => setStep('verify')}\n              disabled={!savedBackupCodes}\n            >\n              Continue\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Step 3: Verify */}\n      {step === 'verify' && (\n        <div className=\"cedros-totp-step\">\n          <h3 className=\"cedros-totp-title\">Verify setup</h3>\n          <p className=\"cedros-totp-description\">\n            Enter the 6-digit code from your authenticator app to complete setup.\n          </p>\n\n          <OtpInput\n            value={verifyCode}\n            onChange={setVerifyCode}\n            onComplete={handleVerify}\n            disabled={isLoading}\n            error={error?.message}\n            autoFocus\n          />\n\n          <div className=\"cedros-totp-actions\">\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-outline cedros-button-md\"\n              onClick={() => setStep('backup')}\n              disabled={isLoading}\n            >\n              Back\n            </button>\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-primary cedros-button-md\"\n              onClick={handleVerify}\n              disabled={isLoading || verifyCode.length !== 6}\n            >\n              {isLoading ? (\n                <>\n                  <LoadingSpinner size=\"sm\" />\n                  <span>Verifying...</span>\n                </>\n              ) : (\n                'Enable 2FA'\n              )}\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","/**\n * TOTP Settings component for managing two-factor authentication\n *\n * Allows users to:\n * - View current 2FA status\n * - Enable 2FA (via TotpSetup wizard)\n * - Disable 2FA (requires verification)\n * - Regenerate backup codes\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { useTotp } from '../../hooks/useTotp';\nimport { TotpSetup } from './TotpSetup';\nimport { OtpInput } from './OtpInput';\nimport { PasswordInput } from '../email/PasswordInput';\nimport { LoadingSpinner } from '../shared/LoadingSpinner';\nimport { ErrorMessage } from '../shared/ErrorMessage';\n\nexport interface TotpSettingsProps {\n  /** Called when 2FA status changes */\n  onStatusChange?: (enabled: boolean) => void;\n  /** Additional CSS class */\n  className?: string;\n}\n\ntype SettingsView = 'status' | 'setup' | 'disable' | 'regenerate';\n\n/**\n * Two-factor authentication settings panel.\n *\n * Shows current 2FA status and provides controls for\n * enabling, disabling, and managing backup codes.\n *\n * @example\n * ```tsx\n * function SecuritySettings() {\n *   return (\n *     <div>\n *       <h2>Security</h2>\n *       <TotpSettings\n *         onStatusChange={(enabled) => {\n *           console.log('2FA is now', enabled ? 'enabled' : 'disabled');\n *         }}\n *       />\n *     </div>\n *   );\n * }\n * ```\n */\nexport function TotpSettings({ onStatusChange, className = '' }: TotpSettingsProps) {\n  const { status, isLoading, error, getStatus, disableTotp, regenerateBackupCodes, clearError } =\n    useTotp();\n\n  const [view, setView] = useState<SettingsView>('status');\n  const [disablePassword, setDisablePassword] = useState('');\n  const [regenerateCode, setRegenerateCode] = useState('');\n  const [newRecoveryCodes, setNewRecoveryCodes] = useState<string[] | null>(null);\n  const [actionLoading, setActionLoading] = useState(false);\n  const [actionError, setActionError] = useState<string | null>(null);\n\n  // Fetch status on mount\n  useEffect(() => {\n    getStatus().catch(() => {\n      // Error handled by hook\n    });\n  }, [getStatus]);\n\n  const handleSetupComplete = useCallback(() => {\n    setView('status');\n    onStatusChange?.(true);\n  }, [onStatusChange]);\n\n  const handleDisable = async () => {\n    setActionLoading(true);\n    setActionError(null);\n    try {\n      await disableTotp(disablePassword);\n      setView('status');\n      setDisablePassword('');\n      onStatusChange?.(false);\n    } catch (err) {\n      setActionError(err instanceof Error ? err.message : 'Failed to disable 2FA');\n      setDisablePassword('');\n    } finally {\n      setActionLoading(false);\n    }\n  };\n\n  const handleRegenerate = async () => {\n    setActionLoading(true);\n    setActionError(null);\n    try {\n      const result = await regenerateBackupCodes(regenerateCode);\n      setNewRecoveryCodes(result.recoveryCodes);\n      setRegenerateCode('');\n    } catch (err) {\n      setActionError(err instanceof Error ? err.message : 'Failed to regenerate codes');\n      setRegenerateCode('');\n    } finally {\n      setActionLoading(false);\n    }\n  };\n\n  const handleCopyBackupCodes = async () => {\n    if (newRecoveryCodes) {\n      await navigator.clipboard.writeText(newRecoveryCodes.join('\\n'));\n    }\n  };\n\n  // Loading state\n  if (isLoading && !status) {\n    return (\n      <div className={`cedros-totp-settings ${className}`}>\n        <div className=\"cedros-totp-loading\">\n          <LoadingSpinner size=\"md\" label=\"Loading security settings\" />\n        </div>\n      </div>\n    );\n  }\n\n  // Error state\n  if (error && !status) {\n    return (\n      <div className={`cedros-totp-settings ${className}`}>\n        <ErrorMessage error={error} onDismiss={clearError} />\n        <button\n          type=\"button\"\n          className=\"cedros-button cedros-button-primary cedros-button-md\"\n          onClick={() => getStatus()}\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  // Setup view\n  if (view === 'setup') {\n    return (\n      <div className={`cedros-totp-settings ${className}`}>\n        <TotpSetup onSuccess={handleSetupComplete} onCancel={() => setView('status')} />\n      </div>\n    );\n  }\n\n  // Disable confirmation view\n  if (view === 'disable') {\n    return (\n      <div className={`cedros-totp-settings ${className}`}>\n        <div className=\"cedros-totp-panel\">\n          <h3 className=\"cedros-totp-title\">Disable two-factor authentication</h3>\n          <p className=\"cedros-totp-description cedros-totp-warning\">\n            This will make your account less secure. Enter your password to confirm.\n          </p>\n\n          {actionError && (\n            <div className=\"cedros-totp-error\">\n              <ErrorMessage\n                error={{ code: 'UNKNOWN_ERROR', message: actionError }}\n                onDismiss={() => setActionError(null)}\n              />\n            </div>\n          )}\n\n          <div className=\"cedros-totp-verify-input\">\n            <PasswordInput\n              label=\"Password\"\n              placeholder=\"Enter your password\"\n              value={disablePassword}\n              onChange={(e) => setDisablePassword(e.target.value)}\n              disabled={actionLoading}\n              autoFocus\n            />\n          </div>\n\n          <div className=\"cedros-totp-actions\">\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-outline cedros-button-md\"\n              onClick={() => {\n                setView('status');\n                setDisablePassword('');\n                setActionError(null);\n              }}\n              disabled={actionLoading}\n            >\n              Cancel\n            </button>\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-destructive cedros-button-md\"\n              onClick={handleDisable}\n              disabled={actionLoading || disablePassword.length === 0}\n            >\n              {actionLoading ? (\n                <>\n                  <LoadingSpinner size=\"sm\" />\n                  <span>Disabling...</span>\n                </>\n              ) : (\n                'Disable 2FA'\n              )}\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Regenerate backup codes view\n  if (view === 'regenerate') {\n    // Show new codes after regeneration\n    if (newRecoveryCodes) {\n      return (\n        <div className={`cedros-totp-settings ${className}`}>\n          <div className=\"cedros-totp-panel\">\n            <h3 className=\"cedros-totp-title\">New recovery codes</h3>\n            <p className=\"cedros-totp-description\">\n              Save these codes in a secure place. Your old codes are no longer valid.\n            </p>\n\n            <div className=\"cedros-totp-backup-codes\">\n              {newRecoveryCodes.map((code, index) => (\n                <code key={index} className=\"cedros-totp-backup-code\">\n                  {code}\n                </code>\n              ))}\n            </div>\n\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-outline cedros-button-md cedros-button-full\"\n              onClick={handleCopyBackupCodes}\n            >\n              Copy all codes\n            </button>\n\n            <div className=\"cedros-totp-actions\">\n              <button\n                type=\"button\"\n                className=\"cedros-button cedros-button-primary cedros-button-md\"\n                onClick={() => {\n                  setView('status');\n                  setNewRecoveryCodes(null);\n                }}\n              >\n                Done\n              </button>\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    // Code entry for regeneration\n    return (\n      <div className={`cedros-totp-settings ${className}`}>\n        <div className=\"cedros-totp-panel\">\n          <h3 className=\"cedros-totp-title\">Regenerate recovery codes</h3>\n          <p className=\"cedros-totp-description\">\n            This will invalidate all existing recovery codes. Enter your authenticator code to\n            confirm.\n          </p>\n\n          {actionError && (\n            <div className=\"cedros-totp-error\">\n              <ErrorMessage\n                error={{ code: 'UNKNOWN_ERROR', message: actionError }}\n                onDismiss={() => setActionError(null)}\n              />\n            </div>\n          )}\n\n          <div className=\"cedros-totp-verify-input\">\n            <OtpInput\n              value={regenerateCode}\n              onChange={setRegenerateCode}\n              onComplete={handleRegenerate}\n              disabled={actionLoading}\n              autoFocus\n            />\n          </div>\n\n          <div className=\"cedros-totp-actions\">\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-outline cedros-button-md\"\n              onClick={() => {\n                setView('status');\n                setRegenerateCode('');\n                setActionError(null);\n              }}\n              disabled={actionLoading}\n            >\n              Cancel\n            </button>\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-primary cedros-button-md\"\n              onClick={handleRegenerate}\n              disabled={actionLoading || regenerateCode.length !== 6}\n            >\n              {actionLoading ? (\n                <>\n                  <LoadingSpinner size=\"sm\" />\n                  <span>Regenerating...</span>\n                </>\n              ) : (\n                'Regenerate codes'\n              )}\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Main status view\n  return (\n    <div className={`cedros-totp-settings ${className}`}>\n      <div className=\"cedros-totp-panel\">\n        <div className=\"cedros-totp-status-header\">\n          <div className=\"cedros-totp-status-info\">\n            <h3 className=\"cedros-totp-title\">Two-factor authentication</h3>\n            <p className=\"cedros-totp-description\">\n              Add an extra layer of security to your account by requiring a verification code from\n              your authenticator app when signing in.\n            </p>\n          </div>\n          <div\n            className={`cedros-totp-badge ${status?.enabled ? 'cedros-totp-badge-enabled' : 'cedros-totp-badge-disabled'}`}\n          >\n            {status?.enabled ? 'Enabled' : 'Disabled'}\n          </div>\n        </div>\n\n        {status?.enabled ? (\n          <div className=\"cedros-totp-enabled-actions\">\n            <div className=\"cedros-totp-description\" style={{ marginTop: '0.25rem' }}>\n              Recovery codes remaining: <strong>{status.recoveryCodesRemaining}</strong>\n            </div>\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-outline cedros-button-md\"\n              onClick={() => setView('regenerate')}\n            >\n              Regenerate recovery codes\n            </button>\n            <button\n              type=\"button\"\n              className=\"cedros-button cedros-button-destructive-outline cedros-button-md\"\n              onClick={() => setView('disable')}\n            >\n              Disable 2FA\n            </button>\n          </div>\n        ) : (\n          <button\n            type=\"button\"\n            className=\"cedros-button cedros-button-primary cedros-button-md\"\n            onClick={() => setView('setup')}\n          >\n            Enable two-factor authentication\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n","/**\n * Hook for Privacy Cash deposit operations\n *\n * Handles depositing SOL to the user's Privacy Cash account.\n * Requires an unlocked SSS wallet with no-recovery mode.\n *\n * Safe to call outside CedrosLoginProvider (returns no-op functions).\n */\n\nimport { useState, useCallback, useMemo } from 'react';\nimport { useCedrosLoginOptional } from '../context/useCedrosLogin';\nimport { ApiClient, handleApiError } from '../utils/apiClient';\nimport type {\n  UseDepositReturn,\n  DepositResponse,\n  DepositStatusResponse,\n  DepositConfigResponse,\n  DepositListResponse,\n  DepositQuoteResponse,\n  PublicDepositRequest,\n  MicroDepositRequest,\n  TieredDepositResponse,\n} from '../types/deposit';\n\nexport type { UseDepositReturn } from '../types/deposit';\n\n/**\n * Hook for Privacy Cash deposit operations\n *\n * Deposits go to the user's Privacy Cash account (user's pubkey is owner).\n * Credits are issued immediately, withdrawal to company wallet happens later.\n *\n * Requirements:\n * - User must have SSS wallet enrolled\n * - Wallet must be unlocked (call POST /wallet/unlock first)\n * - Wallet must be in \"no recovery\" mode\n *\n * Safe to call outside CedrosLoginProvider - returns no-op functions that throw.\n */\nexport function useDeposit(): UseDepositReturn {\n  const context = useCedrosLoginOptional();\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const apiClient = useMemo(() => {\n    if (!context) return null;\n    return new ApiClient({\n      baseUrl: context.config.serverUrl,\n      timeoutMs: context.config.requestTimeout,\n      retryAttempts: context.config.retryAttempts,\n      getAccessToken: context._internal?.getAccessToken,\n    });\n  }, [context]);\n\n  const clearError = useCallback(() => {\n    setError(null);\n  }, []);\n\n  const deposit = useCallback(\n    async (amountLamports: number): Promise<DepositResponse> => {\n      if (!apiClient) {\n        throw new Error('useDeposit must be used within a CedrosLoginProvider');\n      }\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        const data = await apiClient.post<DepositResponse>('/deposit', {\n          amount_lamports: amountLamports,\n        });\n        return data;\n      } catch (err) {\n        const apiError = handleApiError(err, 'Failed to execute deposit');\n        setError(apiError.message);\n        throw apiError;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const getStatus = useCallback(\n    async (sessionId: string): Promise<DepositStatusResponse> => {\n      if (!apiClient) {\n        throw new Error('useDeposit must be used within a CedrosLoginProvider');\n      }\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        const data = await apiClient.get<DepositStatusResponse>(`/deposit/status/${sessionId}`);\n        return data;\n      } catch (err) {\n        const apiError = handleApiError(err, 'Failed to get deposit status');\n        setError(apiError.message);\n        throw apiError;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const getConfig = useCallback(async (): Promise<DepositConfigResponse> => {\n    if (!apiClient) {\n      throw new Error('useDeposit must be used within a CedrosLoginProvider');\n    }\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const data = await apiClient.get<DepositConfigResponse>('/deposit/config');\n      return data;\n    } catch (err) {\n      const apiError = handleApiError(err, 'Failed to get deposit config');\n      setError(apiError.message);\n      throw apiError;\n    } finally {\n      setIsLoading(false);\n    }\n  }, [apiClient]);\n\n  const listDeposits = useCallback(\n    async (options?: { limit?: number; offset?: number }): Promise<DepositListResponse> => {\n      if (!apiClient) {\n        throw new Error('useDeposit must be used within a CedrosLoginProvider');\n      }\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        const params = new URLSearchParams();\n        if (options?.limit !== undefined) params.set('limit', String(options.limit));\n        if (options?.offset !== undefined) params.set('offset', String(options.offset));\n        const query = params.toString();\n        const url = query ? `/deposits?${query}` : '/deposits';\n        const data = await apiClient.get<DepositListResponse>(url);\n        return data;\n      } catch (err) {\n        const apiError = handleApiError(err, 'Failed to list deposits');\n        setError(apiError.message);\n        throw apiError;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const getQuote = useCallback(\n    async (params: {\n      inputMint: string;\n      amount: number;\n      taker: string;\n    }): Promise<DepositQuoteResponse> => {\n      if (!apiClient) {\n        throw new Error('useDeposit must be used within a CedrosLoginProvider');\n      }\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        const queryParams = new URLSearchParams({\n          input_mint: params.inputMint,\n          amount: String(params.amount),\n          taker: params.taker,\n        });\n        const data = await apiClient.get<DepositQuoteResponse>(`/deposit/quote?${queryParams}`);\n        return data;\n      } catch (err) {\n        const apiError = handleApiError(err, 'Failed to get deposit quote');\n        setError(apiError.message);\n        throw apiError;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const publicDeposit = useCallback(\n    async (request: PublicDepositRequest): Promise<TieredDepositResponse> => {\n      if (!apiClient) {\n        throw new Error('useDeposit must be used within a CedrosLoginProvider');\n      }\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        const data = await apiClient.post<TieredDepositResponse>('/deposit/public', request);\n        return data;\n      } catch (err) {\n        const apiError = handleApiError(err, 'Failed to execute public deposit');\n        setError(apiError.message);\n        throw apiError;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  const microDeposit = useCallback(\n    async (request: MicroDepositRequest): Promise<TieredDepositResponse> => {\n      if (!apiClient) {\n        throw new Error('useDeposit must be used within a CedrosLoginProvider');\n      }\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        const data = await apiClient.post<TieredDepositResponse>('/deposit/micro', request);\n        return data;\n      } catch (err) {\n        const apiError = handleApiError(err, 'Failed to execute micro deposit');\n        setError(apiError.message);\n        throw apiError;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [apiClient]\n  );\n\n  return {\n    deposit,\n    getQuote,\n    publicDeposit,\n    microDeposit,\n    getStatus,\n    getConfig,\n    listDeposits,\n    isLoading,\n    error,\n    clearError,\n  };\n}\n","/**\n * Token selector component for deposit currency selection\n *\n * Allows users to select which token to deposit.\n * Supports search and displays token icons.\n */\n\nimport { useState, useCallback, useMemo, useRef, useEffect } from 'react';\nimport type { Token } from './tokens';\n\nexport interface TokenSelectorProps {\n  /** List of available tokens */\n  tokens: Token[];\n  /** Currently selected token */\n  selectedToken?: Token;\n  /** Callback when token is selected */\n  onSelect: (token: Token) => void;\n  /** Signal to force-open the dropdown */\n  openSignal?: number;\n  /** Placeholder text when no token selected */\n  placeholder?: string;\n  /** Disable the selector */\n  disabled?: boolean;\n  /** Additional CSS classes */\n  className?: string;\n  /** Show search input */\n  searchable?: boolean;\n}\n\n/**\n * Token selector dropdown component\n */\nexport function TokenSelector({\n  tokens,\n  selectedToken,\n  onSelect,\n  openSignal,\n  placeholder = 'Select token',\n  disabled = false,\n  className = '',\n  searchable = true,\n}: TokenSelectorProps) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [search, setSearch] = useState('');\n  const containerRef = useRef<HTMLDivElement>(null);\n  const searchInputRef = useRef<HTMLInputElement>(null);\n\n  // Filter tokens by search\n  const filteredTokens = useMemo(() => {\n    if (!search.trim()) return tokens;\n    const searchLower = search.toLowerCase();\n    return tokens.filter(\n      (token) =>\n        token.symbol.toLowerCase().includes(searchLower) ||\n        token.name.toLowerCase().includes(searchLower) ||\n        token.mint.toLowerCase().includes(searchLower)\n    );\n  }, [tokens, search]);\n\n  // Close on outside click\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (containerRef.current && !containerRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n        setSearch('');\n      }\n    };\n\n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n      return () => document.removeEventListener('mousedown', handleClickOutside);\n    }\n  }, [isOpen]);\n\n  // Focus search input when opening\n  useEffect(() => {\n    if (isOpen && searchable && searchInputRef.current) {\n      searchInputRef.current.focus();\n    }\n  }, [isOpen, searchable]);\n\n  useEffect(() => {\n    if (openSignal === undefined || disabled) return;\n    setIsOpen(true);\n    setSearch('');\n  }, [openSignal, disabled]);\n\n  const handleToggle = useCallback(() => {\n    if (!disabled) {\n      setIsOpen((prev) => !prev);\n      if (isOpen) {\n        setSearch('');\n      }\n    }\n  }, [disabled, isOpen]);\n\n  const handleSelect = useCallback(\n    (token: Token) => {\n      onSelect(token);\n      setIsOpen(false);\n      setSearch('');\n    },\n    [onSelect]\n  );\n\n  const handleKeyDown = useCallback(\n    (event: React.KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        setIsOpen(false);\n        setSearch('');\n      } else if (event.key === 'Enter' && filteredTokens.length === 1) {\n        handleSelect(filteredTokens[0]);\n      }\n    },\n    [filteredTokens, handleSelect]\n  );\n\n  return (\n    <div\n      ref={containerRef}\n      className={`cedros-token-selector ${isOpen ? 'cedros-token-selector-open' : ''} ${disabled ? 'cedros-token-selector-disabled' : ''} ${className}`}\n      onKeyDown={handleKeyDown}\n    >\n      {/* Trigger button */}\n      <button\n        type=\"button\"\n        className=\"cedros-token-selector-trigger\"\n        onClick={handleToggle}\n        disabled={disabled}\n        aria-haspopup=\"listbox\"\n        aria-expanded={isOpen}\n      >\n        {selectedToken ? (\n          <span className=\"cedros-token-selector-selected\">\n            {selectedToken.logoUrl && (\n              <img\n                src={selectedToken.logoUrl}\n                alt={selectedToken.symbol}\n                className=\"cedros-token-icon\"\n                onError={(e) => {\n                  (e.target as HTMLImageElement).style.display = 'none';\n                }}\n              />\n            )}\n            <span className=\"cedros-token-symbol\">{selectedToken.symbol}</span>\n          </span>\n        ) : (\n          <span className=\"cedros-token-selector-placeholder\">{placeholder}</span>\n        )}\n        <span className=\"cedros-token-selector-arrow\">{isOpen ? '' : ''}</span>\n      </button>\n\n      {/* Dropdown */}\n      {isOpen && (\n        <div className=\"cedros-token-selector-dropdown\" role=\"listbox\">\n          {/* Search input */}\n          {searchable && (\n            <div className=\"cedros-token-search\">\n              <input\n                ref={searchInputRef}\n                type=\"text\"\n                value={search}\n                onChange={(e) => setSearch(e.target.value)}\n                placeholder=\"Search tokens...\"\n                className=\"cedros-token-search-input\"\n              />\n            </div>\n          )}\n\n          {/* Token list */}\n          <div className=\"cedros-token-list\">\n            {filteredTokens.length === 0 ? (\n              <div className=\"cedros-token-empty\">No tokens found</div>\n            ) : (\n              <>\n                {filteredTokens.map((token) => (\n                  <button\n                    key={token.mint}\n                    type=\"button\"\n                    className={`cedros-token-option ${selectedToken?.mint === token.mint ? 'cedros-token-option-selected' : ''}`}\n                    onClick={() => handleSelect(token)}\n                    role=\"option\"\n                    aria-selected={selectedToken?.mint === token.mint}\n                  >\n                    {token.logoUrl && (\n                      <img\n                        src={token.logoUrl}\n                        alt={token.symbol}\n                        className=\"cedros-token-icon\"\n                        onError={(e) => {\n                          (e.target as HTMLImageElement).style.display = 'none';\n                        }}\n                      />\n                    )}\n                    <span className=\"cedros-token-info\">\n                      <span className=\"cedros-token-symbol\">{token.symbol}</span>\n                      <span className=\"cedros-token-name\">{token.name}</span>\n                    </span>\n                    {selectedToken?.mint === token.mint && (\n                      <span className=\"cedros-token-check\"></span>\n                    )}\n                  </button>\n                ))}\n              </>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import type { DepositConfigResponse, DepositTier } from '../../types/deposit';\n\n/**\n * Determine which tier an amount falls into\n *\n * When private deposits are disabled (recovery mode enabled), the 'private'\n * tier is not available and amounts that would qualify for it fall back to 'public'.\n */\nexport function getTierForAmount(usd: number, config: DepositConfigResponse): DepositTier {\n  // Skip private tier if recovery mode is enabled (privateDepositsEnabled is false)\n  if (config.privateDepositsEnabled && usd >= config.privateMinUsd) return 'private';\n  if (usd >= config.publicMinUsd) return 'public';\n  return 'sol_micro';\n}\n","export default \"data:image/webp;base64,UklGRkACAABXRUJQVlA4IDQCAACQDQCdASo8ADwAPjEWiUMiISEUBFQgAwSgB4Z/TeLt3XMAoQH23eph0gPMB+sn+M9tvngOsA9ADwgPg3/cH9sfZciikEBuA1AB+nf+84CUkAVvA2x4xvyobR+mBaYhjUv/ewHb4hTqOnP38rzsxZX2inOSciAA/v7uqvqGdpWcjjrfMDFaNHumTog38t3yor0kbjn631VsX61cAC749wWuAX74u/f/hpeDFqS/ci8E1g94wk9UVs7BHqtv7f/M9iT1u5ITJV0Gv6tE/CW5j/nVR6yExJ6JoDRDOWQ8zVpWH92r3Lnbnc4WJpOchbRT3H5rv//6PP+F//4ehLUlR/4tkRUKZu/yOa26+sywmY+Xc1X2lXMcUv7+eQ7+FBE7bhKc7htieBfH4eR134AVaILL7PWA2FjzAjfaP1Lgirqoq/ZooE8jVD/b4g3J3O3/TG/4ajHe6clnAI/4NdwrnHX0P/quBU03HqSsQ0qsEMAuhrH/jn+YtDzmjm8q/cGJ44qvi24Hn+G1kxz2XP2S/Gp7ri5cMlo+muuwBjyNJnnEcTt/5cRdYS2cbEBZtpINWj3PuC1EOsd/8cTepSpxODcJHLzktfC1PHW3Pgoh3J5PHjW3TCQ1Wlu/wP8e8OPfNm48BODGChioj3ezblqrOBV+cI+hLi7ReJdvBF/4jY+/Un0asuWnrA6kRNpgOeO8wyl4Ryhkrff+9R1SpyPYP+5T3EuWWLZaCn0bGzyk97S3VAAAAAA=\"","/**\n * Tiered amount input with deposit tier indicator\n *\n * Shows which deposit tier (private, public, sol_micro) applies\n * based on the entered USD amount. Displays tier-specific guidance\n * for privacy and processing expectations.\n */\n\nimport { useMemo } from 'react';\nimport type { DepositTier, DepositConfigResponse } from '../../types/deposit';\nimport { getTierForAmount } from './tierUtils';\nimport solLogo from '../../assets/tokens/sol.webp';\n\nexport interface TieredAmountSliderProps {\n  /** Deposit configuration with tier thresholds */\n  config: DepositConfigResponse;\n  /** Current amount in USD */\n  valueUsd: number;\n  /** Amount change handler */\n  onChange: (valueUsd: number) => void;\n  /** Cap in USD (default: 10000) */\n  maxUsd?: number;\n  /** Disabled state */\n  disabled?: boolean;\n  /** Additional CSS classes */\n  className?: string;\n}\n\nconst DEFAULT_MAX_USD = 10_000;\nconst SLIDER_STEPS = 1000;\nconst CURVE_POWER = 3;\n\nfunction formatUsd(value: number): string {\n  if (!Number.isFinite(value)) return '$0';\n  return `$${Math.round(value)}`;\n}\n\nfunction getTierInfo(tier: DepositTier, config: DepositConfigResponse) {\n  switch (tier) {\n    case 'private':\n      return {\n        label: 'Private',\n        detail: 'Private transaction, instant credit',\n        note: null,\n      };\n    case 'public':\n      return {\n        label: 'Public',\n        detail: 'Visible on-chain, instant credit',\n        note: null,\n      };\n    case 'sol_micro':\n      return {\n        label: 'SOL Only',\n        detail: `SOL only under ${formatUsd(config.solMicroMaxUsd)}`,\n        note: 'Small deposits must be sent in SOL and are visible on-chain. Increase the amount to use tokens.',\n      };\n  }\n}\n\nfunction clamp(value: number, min: number, max: number): number {\n  return Math.min(Math.max(value, min), max);\n}\n\nfunction usdToSlider(usd: number, maxUsd: number): number {\n  if (maxUsd <= 0) return 0;\n  const normalized = clamp(usd / maxUsd, 0, 1);\n  return Math.round(Math.pow(normalized, 1 / CURVE_POWER) * SLIDER_STEPS);\n}\n\nfunction sliderToUsd(position: number, maxUsd: number): number {\n  const normalized = clamp(position / SLIDER_STEPS, 0, 1);\n  return maxUsd * Math.pow(normalized, CURVE_POWER);\n}\n\nfunction getUsdStep(value: number): number {\n  if (value < 10) return 0.01;\n  if (value < 100) return 1;\n  if (value < 500) return 5;\n  if (value < 1000) return 10;\n  if (value < 5000) return 25;\n  return 50;\n}\n\nfunction getStepDecimals(step: number): number {\n  if (step < 1) return 2;\n  return 0;\n}\n\nfunction roundUsd(value: number): number {\n  const step = getUsdStep(value);\n  const rounded = Math.round(value / step) * step;\n  const decimals = getStepDecimals(step);\n  return Number(rounded.toFixed(decimals));\n}\n\n/**\n * Tiered amount input with deposit tier indicator\n */\nexport function TieredAmountSlider({\n  config,\n  valueUsd,\n  onChange,\n  maxUsd = DEFAULT_MAX_USD,\n  disabled = false,\n  className = '',\n}: TieredAmountSliderProps) {\n  const normalizedValue = clamp(Number.isFinite(valueUsd) ? valueUsd : 0, 0, maxUsd);\n  const tier = useMemo(() => getTierForAmount(normalizedValue, config), [normalizedValue, config]);\n  const tierInfo = getTierInfo(tier, config);\n  const sliderValue = usdToSlider(normalizedValue, maxUsd);\n  const sliderPercent = (sliderValue / SLIDER_STEPS) * 100;\n\n  return (\n    <div className={`cedros-tiered-slider ${className}`}>\n      <div className=\"cedros-tiered-slider-input-row\">\n        <div className=\"cedros-tiered-slider-input\">\n          <span className=\"cedros-tiered-slider-currency\">$</span>\n          <input\n            type=\"number\"\n            value={normalizedValue || ''}\n            onChange={(e) => onChange(roundUsd(parseFloat(e.target.value) || 0))}\n            placeholder=\"Enter amount\"\n            disabled={disabled}\n            min={0}\n            step={getUsdStep(normalizedValue)}\n            className=\"cedros-deposit-flow-input cedros-tiered-slider-input-field\"\n            aria-label=\"Deposit amount\"\n          />\n        </div>\n        <div className=\"cedros-tiered-slider-tier\">\n          <span className={`cedros-tiered-slider-badge cedros-tiered-slider-badge-${tier}`}>\n            {tier === 'sol_micro' && (\n              <img src={solLogo} alt=\"SOL\" className=\"cedros-tiered-slider-badge-icon\" />\n            )}\n            {tierInfo.label}\n          </span>\n          <span className=\"cedros-tiered-slider-tier-detail\">{tierInfo.detail}</span>\n        </div>\n      </div>\n\n      <input\n        type=\"range\"\n        min={0}\n        max={SLIDER_STEPS}\n        step={1}\n        value={sliderValue}\n        onChange={(e) => onChange(roundUsd(sliderToUsd(parseFloat(e.target.value), maxUsd)))}\n        className=\"cedros-tiered-slider-range\"\n        style={{\n          background: `linear-gradient(to right, var(--cedros-primary) 0%, var(--cedros-primary) ${sliderPercent}%, var(--cedros-border) ${sliderPercent}%, var(--cedros-border) 100%)`,\n        }}\n        disabled={disabled}\n        aria-label=\"Deposit amount slider\"\n      />\n\n      {tierInfo.note && <div className=\"cedros-tiered-slider-note\">{tierInfo.note}</div>}\n    </div>\n  );\n}\n","/**\n * Multi-step deposit flow component\n *\n * Provides a complete deposit wizard with configurable currency support:\n * - SOL only mode\n * - Single token mode (admin-configured token)\n * - Multi-token mode (user selects from allowed tokens)\n */\n\nimport { useState, useCallback, useEffect, useMemo } from 'react';\nimport { useDeposit } from '../../hooks/useDeposit';\nimport { useWallet } from '../../hooks/useWallet';\nimport { TokenSelector } from './TokenSelector';\nimport { TieredAmountSlider } from './TieredAmountSlider';\nimport { getTierForAmount } from './tierUtils';\nimport solLogo from '../../assets/tokens/sol.webp';\nimport { sanitizeExternalUrl } from '../../utils/sanitization';\nimport type { Token } from './tokens';\nimport type { DepositResponse, DepositConfigResponse } from '../../types/deposit';\n\n/** Check if any user-facing fee is enabled */\nfunction hasUserFee(config: DepositConfigResponse): boolean {\n  return (\n    config.companyFeePercent > 0 ||\n    config.feePolicy === 'user_pays_all' ||\n    config.feePolicy === 'user_pays_swap' ||\n    config.feePolicy === 'user_pays_privacy'\n  );\n}\n\n/** Calculate effective fee percentage based on config and deposit type */\nfunction getEffectiveFeePercent(\n  config: DepositConfigResponse,\n  isPrivate: boolean,\n  isMicro: boolean\n): number {\n  const { feePolicy, privacyFeePercent, swapFeePercent, companyFeePercent } = config;\n  let userFee = companyFeePercent;\n  if (isMicro) return userFee;\n  if (feePolicy === 'user_pays_all') {\n    userFee += swapFeePercent;\n    if (isPrivate) {\n      userFee += privacyFeePercent;\n    }\n  } else if (feePolicy === 'user_pays_privacy' && isPrivate) {\n    userFee += privacyFeePercent;\n  } else if (feePolicy === 'user_pays_swap') {\n    userFee += swapFeePercent;\n  }\n  return userFee;\n}\n\n/** Currency configuration mode */\nexport type CurrencyMode = 'sol' | 'single-token' | 'multi-token';\n\n/** Deposit method - how the user will deposit funds */\nexport type DepositMethod = 'sign' | 'receive';\n\n/** Flow step */\nexport type DepositFlowStep =\n  | 'explainer'\n  | 'unlock'\n  | 'confirm' // Sign mode: select token + enter amount + sign\n  | 'signing'\n  | 'show-address' // Receive mode: select token + show address, auto-detect amount\n  | 'waiting'\n  | 'success'\n  | 'error';\n\n/** Configuration for the optional explainer step */\nexport interface ExplainerConfig {\n  /** Custom title (default: \"How Deposits Work\") */\n  title?: string;\n  /** Custom body text (default explains Solana and suggests exchange) */\n  body?: string;\n  /** Exchange URL (default: \"https://www.coinbase.com\") */\n  exchangeUrl?: string;\n  /** Exchange name (default: \"Coinbase\") */\n  exchangeName?: string;\n  /** Whether to show the exchange suggestion (default: true) */\n  showExchangeSuggestion?: boolean;\n}\n\nexport interface DepositFlowProps {\n  /** Deposit configuration (required) */\n  config: DepositConfigResponse;\n  /**\n   * Currency mode determines what tokens users can deposit:\n   * - 'sol': SOL only (no token selection step)\n   * - 'single-token': Single admin-configured token (shows token info, no selection)\n   * - 'multi-token': User selects from available tokens\n   */\n  currencyMode: CurrencyMode;\n  /**\n   * Deposit method determines how the user deposits:\n   * - 'sign': User has a connected wallet and signs transactions (default for browser wallets)\n   * - 'receive': User sends from external source (exchange) to deposit address (embedded wallet)\n   *\n   * If not specified, auto-detects based on wallet status:\n   * - If user has external wallet connected  'sign'\n   * - If user has embedded wallet only  'receive'\n   */\n  depositMethod?: DepositMethod;\n  /**\n   * Available tokens for single-token or multi-token modes.\n   * For single-token mode, only the first token is used.\n   * Ignored in 'sol' mode.\n   */\n  tokens?: Token[];\n  /** Pre-selected token (for multi-token mode) */\n  defaultToken?: Token;\n  /** Minimum deposit amount (overrides server config) */\n  minAmount?: number;\n  /** Maximum deposit amount */\n  maxAmount?: number;\n  /** Callback on successful deposit */\n  onSuccess?: (result: DepositFlowResult) => void;\n  /** Callback on error */\n  onError?: (error: Error) => void;\n  /** Callback when user cancels */\n  onCancel?: () => void;\n  /** Callback to request wallet unlock */\n  onUnlockRequired?: () => void;\n  /**\n   * Callback to authorize deposit with password/PIN.\n   * This sends the password to the server to decrypt Share B for withdrawal signing.\n   * Returns the session ID for tracking the deposit.\n   *\n   * For sign mode: amount is the user-entered deposit amount\n   * For receive mode: amount is 0 (auto-detected when deposit arrives)\n   */\n  onAuthorize?: (\n    password: string,\n    amount: number | null,\n    token: Token\n  ) => Promise<{ sessionId: string; depositAddress: string }>;\n  /** Additional CSS classes */\n  className?: string;\n  /** Show step indicator */\n  showStepIndicator?: boolean;\n  /** Polling interval for checking deposit status in receive mode (ms, default: 5000) */\n  pollInterval?: number;\n  /** Demo mode - skips wallet checks for Storybook/testing (default: false) */\n  demoMode?: boolean;\n  /** Demo mode auto-confirm delay in ms (storybook only) */\n  demoAutoConfirmMs?: number;\n  /** USD price overrides for non-USD tokens (by symbol) */\n  tokenPriceUsd?: Record<string, number>;\n  /**\n   * Show an optional explainer step for non-crypto-native users.\n   * This explains Solana and suggests an exchange for purchasing.\n   * Admin-controlled setting (default: false)\n   */\n  showExplainer?: boolean;\n  /** Site name to display in explainer (e.g., \"Acme Inc\") */\n  siteName?: string;\n  /** Configuration for the explainer step content */\n  explainerConfig?: ExplainerConfig;\n}\n\nexport interface DepositFlowResult {\n  /** Selected token (null for SOL) */\n  token: Token | null;\n  /** Amount in token units */\n  amount: number;\n  /** Amount in lamports (for SOL) or smallest unit */\n  amountSmallestUnit: number;\n  /** Transaction signature (for sign mode) */\n  txSignature: string;\n  /** Session ID for tracking */\n  sessionId: string;\n  /** Deposit response from server */\n  response: DepositResponse;\n  /** Deposit method used */\n  method: DepositMethod;\n  /** Deposit address (for receive mode) */\n  depositAddress?: string;\n}\n\nconst LAMPORTS_PER_SOL = 1_000_000_000;\n\n/**\n * SOL token definition for SOL-only mode\n */\nconst SOL_TOKEN: Token = {\n  mint: 'So11111111111111111111111111111111111111112',\n  symbol: 'SOL',\n  name: 'Solana',\n  decimals: 9,\n  logoUrl: solLogo,\n};\n\nconst OTHER_TOKEN: Token = {\n  mint: 'other',\n  symbol: 'OTHER',\n  name: 'Other',\n  decimals: 6,\n};\n\nconst MAX_DEPOSIT_USD = 10_000;\n\ninterface FeeLineItem {\n  label: string;\n  solAmount: number;\n  percent: number;\n  usdAmount: number;\n}\n\nfunction calculateFeeLines(config: DepositConfigResponse, amountUsd: number): FeeLineItem[] {\n  const isMicro = amountUsd < config.publicMinUsd;\n  const isPrivate = amountUsd >= config.privateMinUsd;\n  const lines: FeeLineItem[] = [];\n\n  const privacyActive =\n    !isMicro &&\n    isPrivate &&\n    (config.feePolicy === 'user_pays_all' || config.feePolicy === 'user_pays_privacy') &&\n    (config.privacyFeeFixedLamports > 0 || config.privacyFeePercent > 0);\n  const swapActive =\n    !isMicro &&\n    (config.feePolicy === 'user_pays_all' || config.feePolicy === 'user_pays_swap') &&\n    (config.swapFeeFixedLamports > 0 || config.swapFeePercent > 0);\n  const companyActive = config.companyFeeFixedLamports > 0 || config.companyFeePercent > 0;\n\n  if (privacyActive) {\n    const solAmount = config.privacyFeeFixedLamports / LAMPORTS_PER_SOL;\n    const percent = config.privacyFeePercent;\n    const fixedUsd = solAmount * config.solPriceUsd;\n    const percentUsd = amountUsd * (percent / 100);\n    lines.push({ label: 'Privacy', solAmount, percent, usdAmount: fixedUsd + percentUsd });\n  }\n  if (swapActive) {\n    const solAmount = config.swapFeeFixedLamports / LAMPORTS_PER_SOL;\n    const percent = config.swapFeePercent;\n    const fixedUsd = solAmount * config.solPriceUsd;\n    const percentUsd = amountUsd * (percent / 100);\n    lines.push({ label: 'Swap', solAmount, percent, usdAmount: fixedUsd + percentUsd });\n  }\n  if (companyActive) {\n    const solAmount = config.companyFeeFixedLamports / LAMPORTS_PER_SOL;\n    const percent = config.companyFeePercent;\n    const fixedUsd = solAmount * config.solPriceUsd;\n    const percentUsd = amountUsd * (percent / 100);\n    lines.push({ label: 'Service', solAmount, percent, usdAmount: fixedUsd + percentUsd });\n  }\n\n  return lines;\n}\n\nfunction formatFeeTooltip(\n  config: DepositConfigResponse,\n  amountUsd: number,\n  totalFeeUsd: number\n): string {\n  const feeLines = calculateFeeLines(config, amountUsd);\n  const feeTotalDisplay = totalFeeUsd < 0.01 ? 0.01 : totalFeeUsd;\n\n  if (feeLines.length === 0) {\n    return `Total: $${feeTotalDisplay.toFixed(2)}`;\n  }\n\n  // Calculate totals\n  const totalSol = feeLines.reduce((sum, line) => sum + line.solAmount, 0);\n  const totalPercent = feeLines.reduce((sum, line) => sum + line.percent, 0);\n\n  // Format as a table with column dividers\n  // Fixed column widths for alignment (with padding space on each side)\n  const COL = { fee: 7, sol: 8, rate: 7, usd: 8 };\n\n  const formatLine = (item: FeeLineItem): string => {\n    const label = item.label.padEnd(COL.fee);\n    const sol = item.solAmount.toFixed(4).padStart(6).padEnd(COL.sol);\n    const pct = (item.percent.toFixed(2) + '%').padStart(5).padEnd(COL.rate);\n    const usd = ('$' + Math.max(item.usdAmount, 0.01).toFixed(2)).padEnd(COL.usd);\n    return `${label}  ${sol}  ${pct}  ${usd}`;\n  };\n\n  const header = `${'Fee'.padEnd(COL.fee)}  ${'SOL'.padEnd(COL.sol)}  ${'+ Rate'.padEnd(COL.rate)}  ${'= Total'.padEnd(COL.usd)}`;\n  const divider = `${''.repeat(COL.fee)}${''.repeat(COL.sol)}${''.repeat(COL.rate)}${''.repeat(COL.usd)}`;\n\n  const totalUsdStr = ('$' + feeTotalDisplay.toFixed(2)).padEnd(COL.usd);\n  const totalLine = `${'TOTAL'.padEnd(COL.fee)}  ${totalSol.toFixed(4).padStart(6).padEnd(COL.sol)}  ${(totalPercent.toFixed(2) + '%').padStart(5).padEnd(COL.rate)}  ${totalUsdStr}`;\n\n  const lines = [header, divider, ...feeLines.map(formatLine), divider, totalLine];\n  return lines.join('\\n');\n}\n\nfunction formatExplainerFeeSummary(config: DepositConfigResponse): string {\n  const feeLabels: string[] = [];\n  const hasPrivacyFee = config.privacyFeeFixedLamports > 0 || config.privacyFeePercent > 0;\n  const hasSwapFee = config.swapFeeFixedLamports > 0 || config.swapFeePercent > 0;\n  const hasCompanyFee = config.companyFeeFixedLamports > 0 || config.companyFeePercent > 0;\n\n  if (hasPrivacyFee) feeLabels.push('Privacy Cash fee');\n  if (hasSwapFee) feeLabels.push('swap fee');\n  if (hasCompanyFee) feeLabels.push('company service fee');\n\n  if (feeLabels.length === 0) {\n    return 'No processing fees apply to deposits.';\n  }\n\n  return \"A small fee may apply. We'll show exact totals before you confirm.\";\n}\n\nfunction getTotalFeeUsd(config: DepositConfigResponse, amountUsd: number): number {\n  if (amountUsd <= 0) return 0;\n  const isMicro = amountUsd < config.publicMinUsd;\n  const isPrivate = amountUsd >= config.privateMinUsd;\n  const feePercent = getEffectiveFeePercent(config, isPrivate, isMicro);\n  let userFixedLamports = config.companyFeeFixedLamports;\n  if (!isMicro) {\n    if (\n      isPrivate &&\n      (config.feePolicy === 'user_pays_all' || config.feePolicy === 'user_pays_privacy')\n    ) {\n      userFixedLamports += config.privacyFeeFixedLamports;\n    }\n    if (config.feePolicy === 'user_pays_all' || config.feePolicy === 'user_pays_swap') {\n      userFixedLamports += config.swapFeeFixedLamports;\n    }\n  }\n  const fixedFeeUsd = (userFixedLamports / LAMPORTS_PER_SOL) * config.solPriceUsd;\n  const percentFeeUsd = amountUsd * (feePercent / 100);\n  return fixedFeeUsd + percentFeeUsd;\n}\n\nfunction getPurchaseCurrencyLabel(\n  currencyMode: CurrencyMode,\n  token: Token,\n  tokens: Token[]\n): string {\n  if (currencyMode === 'sol') {\n    return 'SOL';\n  }\n  if (currencyMode === 'single-token') {\n    return token.symbol;\n  }\n  const hasUsdc = tokens.some((supported) => supported.symbol === 'USDC');\n  return hasUsdc ? 'SOL or USDC' : 'SOL or supported tokens';\n}\n\nfunction normalizeTokenSymbols(symbols: string[]): string[] {\n  return symbols.map((symbol) => symbol.trim()).filter(Boolean);\n}\n\nconst USD_STABLE_TOKENS = new Set(['USDC', 'USDT', 'USD1', 'PYUSD', 'USDH', 'CASH']);\n\nfunction getTokenUsdPrice(\n  token: Token,\n  config: DepositConfigResponse,\n  priceOverrides?: Record<string, number>\n): number | null {\n  // USD stablecoins are always $1\n  if (USD_STABLE_TOKENS.has(token.symbol)) return 1;\n\n  // Check server-provided token prices first (includes SOL, BONK, ORE, EURC)\n  const serverPrice = config.tokenPrices?.[token.symbol];\n  if (serverPrice && serverPrice > 0) return serverPrice;\n\n  // Fallback to SOL price for backwards compatibility\n  if (token.symbol === 'SOL') return config.solPriceUsd || null;\n\n  // Check prop overrides for custom tokens\n  const override = priceOverrides?.[token.symbol];\n  if (override && override > 0) return override;\n\n  return null;\n}\n\nfunction formatTokenAmount(amount: number, symbol: string): string {\n  const decimals = USD_STABLE_TOKENS.has(symbol) ? 2 : 4;\n  return amount.toFixed(decimals);\n}\n\n/**\n * Multi-step deposit flow component\n */\nexport function DepositFlow({\n  config,\n  currencyMode,\n  depositMethod: depositMethodProp,\n  tokens = [],\n  defaultToken,\n  minAmount,\n  maxAmount = 10000,\n  onSuccess,\n  onError,\n  onCancel,\n  onUnlockRequired,\n  onAuthorize,\n  className = '',\n  showStepIndicator = true,\n  pollInterval = 5000,\n  demoMode = false,\n  demoAutoConfirmMs,\n  tokenPriceUsd,\n  showExplainer = false,\n  siteName,\n  explainerConfig,\n}: DepositFlowProps) {\n  const { deposit, getStatus, error: depositError, clearError } = useDeposit();\n  const wallet = useWallet();\n  const quickActionSymbols = normalizeTokenSymbols(config.quickActionTokens);\n  const customTokenSymbols = normalizeTokenSymbols(config.customTokenSymbols);\n  // Merge preset tokens with admin-configured custom tokens\n  const mergedTokens = useMemo(() => {\n    const customDefs = config.customTokens ?? [];\n    if (customDefs.length === 0) return tokens;\n\n    // Build set of existing symbols for deduplication\n    const seen = new Set(tokens.map((t) => t.symbol));\n    const merged = [...tokens];\n\n    // Add custom tokens that don't conflict with presets\n    for (const def of customDefs) {\n      if (!seen.has(def.symbol)) {\n        merged.push({\n          mint: def.mint,\n          symbol: def.symbol,\n          name: def.symbol, // Use symbol as name for custom tokens\n          decimals: def.decimals,\n          logoUrl: def.logoUrl,\n        });\n        seen.add(def.symbol);\n      }\n    }\n    return merged;\n  }, [tokens, config.customTokens]);\n\n  // Filter merged tokens based on customTokenSymbols setting\n  const customListTokens = useMemo(() => {\n    if (customTokenSymbols.length === 0) return mergedTokens;\n    const filtered = mergedTokens.filter((token) => customTokenSymbols.includes(token.symbol));\n    return filtered.length > 0 ? filtered : mergedTokens;\n  }, [mergedTokens, customTokenSymbols]);\n\n  // Auto-detect deposit method if not specified\n  // - Sign mode requires private deposits enabled (server-side signing via SSS)\n  // - If private deposits disabled (recovery mode enabled), force receive mode\n  // - If user has external wallet (browser extension)  sign mode (if allowed)\n  // - If user has embedded wallet only  receive mode\n  const canUseSignMode = config.privateDepositsEnabled;\n  const depositMethod: DepositMethod = depositMethodProp\n    ? depositMethodProp === 'sign' && !canUseSignMode\n      ? 'receive'\n      : depositMethodProp\n    : canUseSignMode && wallet.hasExternalWallet\n      ? 'sign'\n      : 'receive';\n\n  // Determine effective token based on mode\n  // Priority: defaultToken > first quick action token > USDC > first non-SOL > first token > SOL\n  const firstQuickActionToken = quickActionSymbols[0]\n    ? mergedTokens.find((t) => t.symbol === quickActionSymbols[0])\n    : undefined;\n  const effectiveToken =\n    currencyMode === 'sol'\n      ? SOL_TOKEN\n      : currencyMode === 'single-token'\n        ? (firstQuickActionToken ??\n          mergedTokens.find((t) => t.symbol === 'USDC') ??\n          mergedTokens[0] ??\n          SOL_TOKEN)\n        : (defaultToken ??\n          firstQuickActionToken ??\n          mergedTokens.find((candidate) => candidate.symbol === 'USDC') ??\n          mergedTokens.find((candidate) => candidate.symbol !== 'SOL') ??\n          mergedTokens[0] ??\n          SOL_TOKEN);\n\n  // Determine the first step based on configuration\n  const getFirstStep = useCallback((): DepositFlowStep => {\n    if (showExplainer) return 'explainer';\n    return 'unlock';\n  }, [showExplainer]);\n\n  // State\n  const [step, setStep] = useState<DepositFlowStep>(getFirstStep);\n  const [selectedToken, setSelectedToken] = useState<Token>(effectiveToken);\n  const [amount, setAmount] = useState<string>('');\n  const [result, setResult] = useState<DepositFlowResult | null>(null);\n  const [flowError, setFlowError] = useState<string | null>(null);\n  const [sessionId, setSessionId] = useState<string | null>(null);\n  const [depositAddress, setDepositAddress] = useState<string | null>(null);\n  const [copied, setCopied] = useState(false);\n  const [isAuthorizing, setIsAuthorizing] = useState(false);\n  const [receiveAmountUsd, setReceiveAmountUsd] = useState<number | null>(null);\n\n  // Reset flow when currencyMode or depositMethod changes\n  useEffect(() => {\n    setStep(getFirstStep());\n    setSelectedToken(effectiveToken);\n    setAmount('');\n    setResult(null);\n    setFlowError(null);\n    setSessionId(null);\n    setDepositAddress(null);\n    setCopied(false);\n    setIsAuthorizing(false);\n    setReceiveAmountUsd(null);\n    clearError();\n  }, [currencyMode, depositMethod, effectiveToken, clearError, getFirstStep]);\n\n  const effectiveMin = minAmount ?? config.privateMinSol;\n  const effectiveMax = maxAmount;\n\n  // Parse amount (used by handleDeposit for sign mode)\n  const parsedAmount = parseFloat(amount);\n\n  // Wallet status\n  const isEnrolled =\n    wallet.status === 'enrolled_locked' ||\n    wallet.status === 'enrolled_unlocked' ||\n    wallet.status === 'unlocked';\n  const walletReady = isEnrolled && wallet.isUnlocked;\n  const needsUnlock = isEnrolled && !wallet.isUnlocked;\n\n  // Get steps based on mode and deposit method\n  const getSteps = useCallback((): { key: DepositFlowStep; label: string }[] => {\n    // Sign mode: authorize  select token + enter amount & sign  complete\n    const signSteps = [\n      { key: 'unlock' as const, label: 'Authorize' },\n      { key: 'confirm' as const, label: 'Send' },\n      { key: 'signing' as const, label: 'Signing' },\n      { key: 'success' as const, label: 'Complete' },\n    ];\n\n    // Receive mode: authorize  select token + show address  auto-detect deposit  complete\n    const receiveSteps = [\n      { key: 'unlock' as const, label: 'Authorize' },\n      { key: 'show-address' as const, label: 'Send' },\n      { key: 'waiting' as const, label: 'Confirming' },\n      { key: 'success' as const, label: 'Complete' },\n    ];\n\n    let steps: { key: DepositFlowStep; label: string }[] =\n      depositMethod === 'sign' ? signSteps : receiveSteps;\n\n    if (showExplainer) {\n      steps = [{ key: 'explainer', label: 'Info' }, ...steps];\n    }\n\n    return steps;\n  }, [depositMethod, showExplainer]);\n\n  const steps = getSteps();\n  const currentStepIndex = steps.findIndex((s) => s.key === step);\n\n  // Handle token selection\n  const handleTokenSelect = useCallback((token: Token) => {\n    setSelectedToken(token);\n  }, []);\n\n  // Handle authorization (password submission to decrypt Share B on server)\n  const handleAuthorize = useCallback(\n    async (password: string) => {\n      if (!onAuthorize) {\n        // If no onAuthorize callback, skip to next step\n        setStep(depositMethod === 'sign' ? 'confirm' : 'show-address');\n        return;\n      }\n\n      setIsAuthorizing(true);\n      setFlowError(null);\n\n      try {\n        // For receive mode, amount is null (auto-detected when deposit arrives)\n        const authorizeAmount = depositMethod === 'sign' ? parsedAmount : null;\n        const result = await onAuthorize(password, authorizeAmount, selectedToken);\n        setSessionId(result.sessionId);\n        setDepositAddress(result.depositAddress);\n        setStep(depositMethod === 'sign' ? 'confirm' : 'show-address');\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error('Authorization failed');\n        setFlowError(error.message);\n      } finally {\n        setIsAuthorizing(false);\n      }\n    },\n    [onAuthorize, depositMethod, parsedAmount, selectedToken]\n  );\n\n  // Handle deposit submission (sign mode)\n  const handleDeposit = useCallback(\n    async (depositAmount?: number, depositToken?: Token) => {\n      clearError();\n      setFlowError(null);\n      setStep('signing');\n\n      const finalAmount = depositAmount ?? parsedAmount;\n      const finalToken = depositToken ?? selectedToken;\n\n      // Skip wallet checks in demo mode\n      if (!demoMode) {\n        if (needsUnlock && onUnlockRequired) {\n          onUnlockRequired();\n          setStep('confirm');\n          return;\n        }\n\n        if (!walletReady) {\n          setFlowError('Wallet not ready');\n          setStep('error');\n          return;\n        }\n      }\n\n      try {\n        // Convert amount to smallest unit\n        const smallestUnit = Math.floor(finalAmount * Math.pow(10, finalToken.decimals));\n\n        // Demo mode: simulate signing delay and success\n        if (demoMode) {\n          await new Promise((resolve) => setTimeout(resolve, 1500));\n          const flowResult: DepositFlowResult = {\n            token: currencyMode === 'sol' ? null : finalToken,\n            amount: finalAmount,\n            amountSmallestUnit: smallestUnit,\n            txSignature: `demo-tx-${Date.now()}`,\n            sessionId: sessionId || `demo-session-${Date.now()}`,\n            response: {\n              sessionId: sessionId || `demo-session-${Date.now()}`,\n              txSignature: `demo-tx-${Date.now()}`,\n              amountLamports: smallestUnit,\n              message: 'Demo deposit successful',\n              withdrawalAvailableAt: new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString(),\n            },\n            method: 'sign',\n          };\n          setResult(flowResult);\n          setStep('success');\n          onSuccess?.(flowResult);\n          return;\n        }\n\n        // For now, deposit API only supports SOL (lamports)\n        // Token deposits would need Jupiter swap integration\n        const response = await deposit(smallestUnit);\n\n        const flowResult: DepositFlowResult = {\n          token: currencyMode === 'sol' ? null : finalToken,\n          amount: finalAmount,\n          amountSmallestUnit: smallestUnit,\n          txSignature: response.txSignature,\n          sessionId: response.sessionId,\n          response,\n          method: 'sign',\n        };\n\n        setResult(flowResult);\n        setStep('success');\n        onSuccess?.(flowResult);\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error('Deposit failed');\n        setFlowError(error.message);\n        setStep('error');\n        onError?.(error);\n      }\n    },\n    [\n      deposit,\n      parsedAmount,\n      selectedToken,\n      currencyMode,\n      demoMode,\n      sessionId,\n      walletReady,\n      needsUnlock,\n      onUnlockRequired,\n      onSuccess,\n      onError,\n      clearError,\n    ]\n  );\n\n  // Handle \"I've sent it\" button - start polling\n  const handleSentDeposit = useCallback(() => {\n    setStep('waiting');\n  }, []);\n\n  // Copy address to clipboard\n  const handleCopyAddress = useCallback(async () => {\n    const address = depositAddress || wallet.solanaPubkey;\n    if (address) {\n      try {\n        await navigator.clipboard.writeText(address);\n        setCopied(true);\n        setTimeout(() => setCopied(false), 2000);\n      } catch {\n        // Fallback for older browsers\n        const textArea = document.createElement('textarea');\n        textArea.value = address;\n        document.body.appendChild(textArea);\n        textArea.select();\n        document.execCommand('copy');\n        document.body.removeChild(textArea);\n        setCopied(true);\n        setTimeout(() => setCopied(false), 2000);\n      }\n    }\n  }, [depositAddress, wallet.solanaPubkey]);\n\n  // Poll for deposit status as soon as we show the address (don't wait for \"I've sent it\")\n  // This enables auto-detection: if user sends deposit, we detect it and skip to success\n  useEffect(() => {\n    // Start polling when showing deposit address (confirm step in sign mode, show-address/waiting in receive mode)\n    // Skip in demo mode - user must click \"I've sent it\" to proceed\n    const isListeningStep = step === 'confirm' || step === 'show-address' || step === 'waiting';\n    if (!isListeningStep || !sessionId || demoMode) return;\n\n    let cancelled = false;\n    let pollCount = 0;\n    const maxPolls = 360; // 30 minutes at 5s interval (user may take time to send from exchange)\n\n    const poll = async () => {\n      if (cancelled || pollCount >= maxPolls) return;\n      pollCount++;\n\n      try {\n        // Check for deposit status from server\n        // Server auto-detects incoming deposits and returns the amount\n        const status = await getStatus(sessionId);\n\n        if (status.status === 'completed' || status.status === 'detected') {\n          // Get the actual deposited amount from the server response\n          const detectedAmount = status.amountLamports\n            ? status.amountLamports / Math.pow(10, selectedToken.decimals)\n            : 0;\n          const smallestUnit = status.amountLamports || 0;\n\n          const flowResult: DepositFlowResult = {\n            token: currencyMode === 'sol' ? null : selectedToken,\n            amount: detectedAmount,\n            amountSmallestUnit: smallestUnit,\n            txSignature: status.txSignature || '',\n            sessionId: sessionId,\n            response: status as unknown as DepositResponse,\n            method: 'receive',\n            depositAddress: wallet.solanaPubkey ?? undefined,\n          };\n\n          setResult(flowResult);\n          setStep('success');\n          onSuccess?.(flowResult);\n          return;\n        }\n      } catch {\n        // Continue polling on error\n      }\n\n      if (!cancelled) {\n        setTimeout(poll, pollInterval);\n      }\n    };\n\n    poll();\n\n    return () => {\n      cancelled = true;\n    };\n  }, [\n    step,\n    sessionId,\n    demoMode,\n    getStatus,\n    selectedToken,\n    currencyMode,\n    wallet.solanaPubkey,\n    onSuccess,\n    pollInterval,\n  ]);\n\n  useEffect(() => {\n    if (!demoMode || !demoAutoConfirmMs || step !== 'waiting' || depositMethod !== 'receive')\n      return;\n    if (!depositAddress) return;\n\n    const timeout = window.setTimeout(() => {\n      const amountUsd = receiveAmountUsd ?? config.privateMinUsd;\n      const tokenAmount =\n        selectedToken.symbol === 'SOL' && config.solPriceUsd > 0\n          ? amountUsd / config.solPriceUsd\n          : amountUsd;\n      const smallestUnit = Math.floor(tokenAmount * Math.pow(10, selectedToken.decimals));\n      const flowResult: DepositFlowResult = {\n        token: currencyMode === 'sol' ? null : selectedToken,\n        amount: tokenAmount,\n        amountSmallestUnit: smallestUnit,\n        txSignature: `demo-tx-${Date.now()}`,\n        sessionId: sessionId || `demo-session-${Date.now()}`,\n        response: {\n          sessionId: sessionId || `demo-session-${Date.now()}`,\n          txSignature: `demo-tx-${Date.now()}`,\n          amountLamports: smallestUnit,\n          message: 'Demo deposit detected',\n          withdrawalAvailableAt: new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString(),\n        },\n        method: 'receive',\n        depositAddress: depositAddress ?? undefined,\n      };\n      setResult(flowResult);\n      setStep('success');\n      onSuccess?.(flowResult);\n    }, demoAutoConfirmMs);\n\n    return () => window.clearTimeout(timeout);\n  }, [\n    demoMode,\n    demoAutoConfirmMs,\n    step,\n    depositMethod,\n    depositAddress,\n    receiveAmountUsd,\n    config,\n    selectedToken,\n    currencyMode,\n    sessionId,\n    onSuccess,\n  ]);\n\n  // Reset flow\n  const handleReset = useCallback(() => {\n    setStep(getFirstStep());\n    setAmount('');\n    setResult(null);\n    setFlowError(null);\n    clearError();\n  }, [getFirstStep, clearError]);\n\n  // Deposits disabled\n  if (!config.enabled) {\n    return (\n      <div className={`cedros-deposit-flow cedros-deposit-flow-disabled ${className}`}>\n        <p>Deposits are not currently available.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`cedros-deposit-flow ${className}`}>\n      {/* Step Indicator */}\n      {showStepIndicator && step !== 'error' && (\n        <div className=\"cedros-deposit-flow-steps\">\n          {steps.map((s, idx) => {\n            const isActive = currentStepIndex >= idx;\n            const isCurrent = s.key === step;\n            return (\n              <div\n                key={s.key}\n                className={`cedros-deposit-flow-step-item ${isActive ? 'step-active' : ''}`}\n              >\n                <div\n                  className={`cedros-deposit-flow-step-circle ${isActive ? 'active' : ''} ${isCurrent ? 'current' : ''}`}\n                >\n                  {idx + 1}\n                </div>\n                <span className={`cedros-deposit-flow-step-label ${isActive ? 'active' : ''}`}>\n                  {s.label}\n                </span>\n              </div>\n            );\n          })}\n        </div>\n      )}\n\n      {/* Step Content */}\n      <div className=\"cedros-deposit-flow-content\">\n        {step === 'explainer' && (\n          <ExplainerStep\n            siteName={siteName}\n            config={explainerConfig}\n            depositConfig={config}\n            currencyMode={currencyMode}\n            token={selectedToken}\n            tokens={customListTokens}\n            onContinue={() => setStep('unlock')}\n            onCancel={onCancel}\n          />\n        )}\n\n        {step === 'unlock' && (\n          <UnlockStep\n            token={selectedToken}\n            tokens={customListTokens}\n            currencyMode={currencyMode}\n            depositMethod={depositMethod}\n            isAuthorizing={isAuthorizing}\n            error={flowError}\n            onAuthorize={handleAuthorize}\n            onBack={showExplainer ? () => setStep('explainer') : undefined}\n            onCancel={onCancel}\n          />\n        )}\n\n        {/* Sign mode steps */}\n        {step === 'confirm' && depositMethod === 'sign' && (\n          <ConfirmStep\n            token={selectedToken}\n            tokens={mergedTokens}\n            quickActionSymbols={quickActionSymbols}\n            customTokenSymbols={customTokenSymbols}\n            currencyMode={currencyMode}\n            minAmount={effectiveMin}\n            maxAmount={effectiveMax}\n            depositAddress={depositAddress || wallet.solanaPubkey}\n            walletReady={walletReady || demoMode}\n            needsUnlock={needsUnlock && !demoMode}\n            copied={copied}\n            isListening={!!sessionId && !demoMode}\n            config={config}\n            onCopy={handleCopyAddress}\n            onTokenSelect={handleTokenSelect}\n            onUnlockRequired={onUnlockRequired}\n            onConfirm={(amt, tkn) => handleDeposit(amt, tkn)}\n            onBack={() => setStep('unlock')}\n            onCancel={onCancel}\n          />\n        )}\n\n        {step === 'signing' && <SigningStep depositAddress={wallet.solanaPubkey} />}\n\n        {/* Receive mode steps */}\n        {step === 'show-address' && (\n          <ShowAddressStep\n            token={selectedToken}\n            tokens={mergedTokens}\n            quickActionSymbols={quickActionSymbols}\n            customTokenSymbols={customTokenSymbols}\n            tokenPriceUsd={tokenPriceUsd}\n            currencyMode={currencyMode}\n            depositAddress={depositAddress || wallet.solanaPubkey}\n            copied={copied}\n            isListening={!!sessionId && !demoMode}\n            config={config}\n            onCopy={handleCopyAddress}\n            onTokenSelect={handleTokenSelect}\n            onAmountChange={setReceiveAmountUsd}\n            onSent={handleSentDeposit}\n            onBack={() => setStep('unlock')}\n            onCancel={onCancel}\n          />\n        )}\n\n        {step === 'waiting' && (\n          <WaitingStep\n            token={selectedToken}\n            depositAddress={depositAddress || wallet.solanaPubkey}\n            copied={copied}\n            feeLine={\n              receiveAmountUsd\n                ? `Fees: $${Math.max(getTotalFeeUsd(config, receiveAmountUsd), 0.01).toFixed(2)} total`\n                : 'Fees: calculated after deposit'\n            }\n            onCopy={handleCopyAddress}\n          />\n        )}\n\n        {step === 'success' && result && (\n          <SuccessStep result={result} config={config} onNewDeposit={handleReset} />\n        )}\n\n        {step === 'error' && (\n          <ErrorStep\n            error={flowError || depositError || 'An error occurred'}\n            onRetry={() => setStep('confirm')}\n            onCancel={onCancel}\n          />\n        )}\n      </div>\n    </div>\n  );\n}\n\n// =============================================================================\n// STEP COMPONENTS\n// =============================================================================\n\ninterface ExplainerStepProps {\n  siteName?: string;\n  config?: ExplainerConfig;\n  depositConfig: DepositConfigResponse;\n  currencyMode: CurrencyMode;\n  token: Token;\n  tokens: Token[];\n  onContinue: () => void;\n  onCancel?: () => void;\n}\n\nfunction ExplainerStep({\n  siteName,\n  config,\n  depositConfig,\n  currencyMode,\n  token,\n  tokens,\n  onContinue,\n  onCancel,\n}: ExplainerStepProps) {\n  const title = config?.title ?? 'How Deposits Work';\n  const exchangeName = config?.exchangeName ?? 'Coinbase';\n  const exchangeUrl = sanitizeExternalUrl(config?.exchangeUrl) ?? 'https://www.coinbase.com';\n  const showExchange = config?.showExchangeSuggestion !== false;\n  const purchaseCurrencyLabel = getPurchaseCurrencyLabel(currencyMode, token, tokens);\n\n  const defaultBody = siteName\n    ? `${siteName} uses the Solana blockchain to process secure, private payments.`\n    : 'This site uses the Solana blockchain to process secure, private payments.';\n\n  const body = config?.body ?? defaultBody;\n\n  // Calculate fee info for display\n  const showUserFee = hasUserFee(depositConfig);\n  const feeDescription = formatExplainerFeeSummary(depositConfig);\n\n  return (\n    <div className=\"cedros-deposit-flow-step\">\n      <h4 className=\"cedros-deposit-flow-step-title\">{title}</h4>\n      <p className=\"cedros-deposit-flow-step-desc\">{body}</p>\n\n      <div className=\"cedros-deposit-flow-explainer-content\">\n        <div className=\"cedros-deposit-flow-explainer-item\">\n          <span className=\"cedros-deposit-flow-explainer-icon cedros-deposit-flow-icon-shield\" />\n          <div>\n            <strong>Private & Secure</strong>\n            <p>Your deposits are protected by cryptographic privacy technology.</p>\n          </div>\n        </div>\n        <div className=\"cedros-deposit-flow-explainer-item\">\n          <span className=\"cedros-deposit-flow-explainer-icon cedros-deposit-flow-icon-bolt\" />\n          <div>\n            <strong>Fast Transactions</strong>\n            <p>Solana transactions confirm in seconds, not minutes.</p>\n          </div>\n        </div>\n        <div className=\"cedros-deposit-flow-explainer-item\">\n          <span className=\"cedros-deposit-flow-explainer-icon cedros-deposit-flow-icon-coin\" />\n          <div>\n            <strong>{showUserFee ? 'Transparent Fees' : 'Low Fees'}</strong>\n            <p>{feeDescription}</p>\n          </div>\n        </div>\n      </div>\n\n      {showExchange && (\n        <div className=\"cedros-deposit-flow-explainer-exchange\">\n          <p className=\"cedros-deposit-flow-explainer-exchange-text\">\n            <strong>New to Solana?</strong> You can purchase {purchaseCurrencyLabel} using your\n            credit card at{' '}\n            <a href={exchangeUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n              {exchangeName}\n            </a>\n            , then send it here to fund your account.\n          </p>\n        </div>\n      )}\n\n      <div className=\"cedros-deposit-flow-actions\">\n        {onCancel && (\n          <button\n            type=\"button\"\n            className=\"cedros-deposit-flow-button cedros-deposit-flow-button-secondary\"\n            onClick={onCancel}\n          >\n            Cancel\n          </button>\n        )}\n        <button\n          type=\"button\"\n          className=\"cedros-deposit-flow-button cedros-deposit-flow-button-primary\"\n          onClick={onContinue}\n        >\n          Continue\n        </button>\n      </div>\n    </div>\n  );\n}\n\ninterface UnlockStepProps {\n  token: Token;\n  tokens: Token[];\n  currencyMode: CurrencyMode;\n  depositMethod: DepositMethod;\n  isAuthorizing: boolean;\n  error: string | null;\n  onAuthorize: (password: string) => void;\n  onBack?: () => void;\n  onCancel?: () => void;\n}\n\nfunction UnlockStep({\n  token,\n  tokens,\n  currencyMode,\n  depositMethod,\n  isAuthorizing,\n  error,\n  onAuthorize,\n  onBack,\n}: UnlockStepProps) {\n  const [password, setPassword] = useState('');\n  const purchaseCurrencyLabel = getPurchaseCurrencyLabel(currencyMode, token, tokens);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (password.trim()) {\n      onAuthorize(password);\n    }\n  };\n\n  return (\n    <div className=\"cedros-deposit-flow-step\">\n      <h4 className=\"cedros-deposit-flow-step-title\">Authorize Deposit</h4>\n      <p className=\"cedros-deposit-flow-step-desc\">\n        {depositMethod === 'sign'\n          ? currencyMode === 'multi-token'\n            ? 'Enter your password to authorize a deposit. This allows us to process your withdrawal when the privacy period ends.'\n            : `Enter your password to authorize a ${purchaseCurrencyLabel} deposit. This allows us to process your withdrawal when the privacy period ends.`\n          : currencyMode === 'multi-token'\n            ? 'Enter your password to get your deposit address. Any supported token sent to this address will be credited to your account.'\n            : `Enter your password to get your deposit address. Any ${purchaseCurrencyLabel} sent to this address will be credited to your account.`}\n      </p>\n\n      <form onSubmit={handleSubmit}>\n        <div className=\"cedros-deposit-flow-field\">\n          <label className=\"cedros-deposit-flow-label\" htmlFor=\"deposit-password\">\n            Password\n          </label>\n          <input\n            id=\"deposit-password\"\n            type=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            className=\"cedros-deposit-flow-input\"\n            placeholder=\"Enter your password\"\n            disabled={isAuthorizing}\n            autoComplete=\"current-password\"\n          />\n        </div>\n\n        {error && <p className=\"cedros-deposit-flow-error\">{error}</p>}\n\n        <div className=\"cedros-deposit-flow-actions\">\n          <button\n            type=\"button\"\n            className=\"cedros-deposit-flow-button cedros-deposit-flow-button-secondary\"\n            onClick={onBack}\n            disabled={isAuthorizing}\n          >\n            Back\n          </button>\n          <button\n            type=\"submit\"\n            className=\"cedros-deposit-flow-button cedros-deposit-flow-button-primary\"\n            disabled={!password.trim() || isAuthorizing}\n          >\n            {isAuthorizing ? 'Authorizing...' : 'Continue'}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n\ninterface ConfirmStepProps {\n  token: Token;\n  tokens: Token[];\n  quickActionSymbols: string[];\n  customTokenSymbols: string[];\n  currencyMode: CurrencyMode;\n  minAmount: number;\n  maxAmount: number;\n  depositAddress: string | null;\n  walletReady: boolean;\n  needsUnlock: boolean;\n  copied: boolean;\n  isListening: boolean;\n  config: DepositConfigResponse;\n  onCopy: () => void;\n  onTokenSelect: (token: Token) => void;\n  onUnlockRequired?: () => void;\n  onConfirm: (amount: number, token: Token) => void;\n  onBack: () => void;\n  onCancel?: () => void;\n}\n\nfunction ConfirmStep({\n  token,\n  tokens,\n  quickActionSymbols,\n  customTokenSymbols,\n  currencyMode,\n  minAmount,\n  maxAmount,\n  depositAddress,\n  walletReady,\n  needsUnlock,\n  copied,\n  isListening,\n  config,\n  onCopy,\n  onTokenSelect,\n  onUnlockRequired,\n  onConfirm,\n  onBack,\n}: ConfirmStepProps) {\n  const [amountUsd, setAmountUsd] = useState(config.privateMinUsd);\n  const [showCustomToken, setShowCustomToken] = useState(false);\n  const [feeTooltipOpen, setFeeTooltipOpen] = useState(false);\n  const [customOpenSignal, setCustomOpenSignal] = useState(0);\n  // Track the token selected before auto-switching to SOL for micro tier\n  const [preMicroToken, setPreMicroToken] = useState<Token | null>(null);\n  const tier = getTierForAmount(amountUsd, config);\n  const isMicroTier = tier === 'sol_micro';\n  const isOtherToken = token.symbol === OTHER_TOKEN.symbol;\n  const customTokens = useMemo(() => {\n    const baseTokens =\n      customTokenSymbols.length === 0\n        ? tokens\n        : tokens.filter((candidate) => customTokenSymbols.includes(candidate.symbol));\n    const resolved = baseTokens.length > 0 ? baseTokens : tokens;\n    const hasOther = resolved.some((candidate) => candidate.symbol === OTHER_TOKEN.symbol);\n    return hasOther ? resolved : [...resolved, OTHER_TOKEN];\n  }, [tokens, customTokenSymbols]);\n  const totalFeeUsd = getTotalFeeUsd(config, amountUsd);\n  const feeTotalDisplay = totalFeeUsd < 0.01 ? 0.01 : totalFeeUsd;\n  const feeLine = isOtherToken\n    ? 'Fees: calculated after deposit'\n    : `Fees: $${feeTotalDisplay.toFixed(2)} total`;\n  const feeTooltip = isOtherToken ? '' : formatFeeTooltip(config, amountUsd, totalFeeUsd);\n\n  const tokenUsdPrice = getTokenUsdPrice(isMicroTier ? SOL_TOKEN : token, config);\n  const tokenAmount = tokenUsdPrice\n    ? amountUsd / tokenUsdPrice\n    : token.symbol === 'SOL' && config.solPriceUsd > 0\n      ? amountUsd / config.solPriceUsd\n      : amountUsd;\n  const sendAmountLabel = tokenAmount\n    ? formatTokenAmount(tokenAmount, isMicroTier ? 'SOL' : token.symbol)\n    : null;\n\n  // Check if fees exceed the deposit amount (effective minimum)\n  const netAmountUsd = amountUsd - totalFeeUsd;\n  const feesExceedAmount = netAmountUsd <= 0 && amountUsd > 0;\n\n  const isValidAmount =\n    !isOtherToken &&\n    amountUsd > 0 &&\n    !feesExceedAmount &&\n    tokenAmount >= minAmount &&\n    tokenAmount <= maxAmount;\n\n  // Auto-select SOL for micro tier, restore previous token when leaving micro tier\n  useEffect(() => {\n    if (currencyMode !== 'multi-token') return;\n\n    if (isMicroTier && token.symbol !== 'SOL') {\n      // Entering micro tier with non-SOL token: save it and switch to SOL\n      setPreMicroToken(token);\n      const solToken = tokens.find((t) => t.symbol === 'SOL');\n      if (solToken) onTokenSelect(solToken);\n    } else if (!isMicroTier && preMicroToken && token.symbol === 'SOL') {\n      // Leaving micro tier: restore the previously selected token\n      onTokenSelect(preMicroToken);\n      setPreMicroToken(null);\n    }\n  }, [isMicroTier, token.symbol, currencyMode, tokens, onTokenSelect, preMicroToken, token]);\n\n  const handleConfirm = () => {\n    if (isValidAmount) {\n      onConfirm(tokenAmount, token);\n    }\n  };\n\n  return (\n    <div className=\"cedros-deposit-flow-step\">\n      <h4 className=\"cedros-deposit-flow-step-title\">Choose Amount</h4>\n      <p className=\"cedros-deposit-flow-step-desc\">\n        Set how much you want to deposit. Higher tiers unlock privacy.\n      </p>\n\n      {/* Token Selector - only show for non-micro tiers in multi-token mode */}\n      {currencyMode === 'multi-token' && !isMicroTier && (\n        <div className=\"cedros-deposit-flow-field\">\n          <label className=\"cedros-deposit-flow-label\">Token</label>\n          <div className=\"cedros-deposit-flow-token-quick\">\n            {quickActionSymbols.map((symbol) => {\n              const quickToken = tokens.find((candidate) => candidate.symbol === symbol);\n              const isActive = token.symbol === symbol;\n              return (\n                <button\n                  key={symbol}\n                  type=\"button\"\n                  className={`cedros-deposit-flow-token-quick-btn ${isActive ? 'is-active' : ''}`}\n                  onClick={() => {\n                    if (quickToken) {\n                      setShowCustomToken(false);\n                      onTokenSelect(quickToken);\n                    }\n                  }}\n                  disabled={!quickToken}\n                >\n                  {quickToken?.logoUrl && (\n                    <img\n                      className=\"cedros-deposit-flow-token-quick-icon\"\n                      src={quickToken.logoUrl}\n                      alt={`${symbol} logo`}\n                    />\n                  )}\n                  {symbol}\n                </button>\n              );\n            })}\n            <button\n              type=\"button\"\n              className={`cedros-deposit-flow-token-quick-btn ${showCustomToken ? 'is-active' : ''}`}\n              onClick={() => {\n                setShowCustomToken(true);\n                setCustomOpenSignal((current) => current + 1);\n              }}\n            >\n              Custom\n            </button>\n          </div>\n          {showCustomToken && (\n            <div className=\"cedros-deposit-flow-token-custom\">\n              <TokenSelector\n                tokens={customTokens}\n                selectedToken={token}\n                onSelect={onTokenSelect}\n                openSignal={customOpenSignal}\n              />\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Amount Selector with Tier Indicator */}\n      <div className=\"cedros-deposit-flow-field\">\n        <TieredAmountSlider\n          config={config}\n          valueUsd={amountUsd}\n          onChange={setAmountUsd}\n          maxUsd={MAX_DEPOSIT_USD}\n        />\n      </div>\n\n      {/* Deposit Address */}\n      <div className=\"cedros-deposit-flow-field\">\n        <label className=\"cedros-deposit-flow-label\">\n          {isOtherToken\n            ? 'Sign to send tokens to this address'\n            : `Sign to send ${sendAmountLabel ?? '--'} ${isMicroTier ? 'SOL' : token.symbol} to this address`}\n        </label>\n        <div className=\"cedros-deposit-flow-address-box\">\n          <code className=\"cedros-deposit-flow-address\">{depositAddress || 'Loading...'}</code>\n          <div className=\"cedros-deposit-flow-address-actions\">\n            <button\n              type=\"button\"\n              className=\"cedros-deposit-flow-copy-btn cedros-deposit-flow-copy-icon\"\n              onClick={onCopy}\n              title=\"Copy address\"\n              disabled={!depositAddress}\n            >\n              {copied ? '' : ''}\n            </button>\n            {depositAddress && (\n              <a\n                className=\"cedros-deposit-flow-copy-btn cedros-deposit-flow-copy-link cedros-deposit-flow-copy-icon\"\n                href={`https://orbmarkets.io/account/${depositAddress}`}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                title=\"View on Orb Markets\"\n              >\n                \n              </a>\n            )}\n          </div>\n        </div>\n        {copied && <p className=\"cedros-deposit-flow-copied-msg\">Copied!</p>}\n      </div>\n\n      {/* Warning if fees exceed amount */}\n      {feesExceedAmount && (\n        <div className=\"cedros-deposit-flow-warning\">\n          <p>Deposit amount is less than the fees. Increase the amount to proceed.</p>\n        </div>\n      )}\n\n      <div className=\"cedros-deposit-flow-info-stack\">\n        <div className=\"cedros-deposit-flow-info-item\">\n          <span className=\"cedros-deposit-flow-info-dot\" />\n          <span>Send only on the Solana network.</span>\n        </div>\n        <div className=\"cedros-deposit-flow-info-item\">\n          <span className=\"cedros-deposit-flow-info-dot\" />\n          <span>\n            {feeLine}\n            <button\n              type=\"button\"\n              className={`cedros-deposit-flow-fee-info ${feeTooltipOpen ? 'is-open' : ''}`}\n              data-tooltip={feeTooltip}\n              aria-label={`Fee breakdown: ${feeTooltip.replaceAll('\\n', ', ')}`}\n              aria-expanded={feeTooltipOpen}\n              onClick={(event) => {\n                event.stopPropagation();\n                setFeeTooltipOpen((current) => !current);\n              }}\n              onBlur={() => setFeeTooltipOpen(false)}\n              onKeyDown={(event) => {\n                if (event.key === 'Escape') {\n                  setFeeTooltipOpen(false);\n                }\n              }}\n            >\n              i\n            </button>\n          </span>\n        </div>\n        <div className=\"cedros-deposit-flow-info-item\">\n          <span className=\"cedros-deposit-flow-info-dot\" />\n          <span>Credits appear after network confirmation.</span>\n        </div>\n      </div>\n\n      {isListening && (\n        <div className=\"cedros-deposit-flow-info-banner\">\n          Listening for incoming transfers. We will confirm automatically.\n        </div>\n      )}\n\n      {needsUnlock && (\n        <div className=\"cedros-deposit-flow-warning\">\n          <p>Your wallet is locked. Unlock it to continue.</p>\n          {onUnlockRequired && (\n            <button\n              type=\"button\"\n              className=\"cedros-deposit-flow-button cedros-deposit-flow-button-secondary\"\n              onClick={onUnlockRequired}\n            >\n              Unlock Wallet\n            </button>\n          )}\n        </div>\n      )}\n\n      <div className=\"cedros-deposit-flow-actions\">\n        <button\n          type=\"button\"\n          className=\"cedros-deposit-flow-button cedros-deposit-flow-button-secondary\"\n          onClick={onBack}\n        >\n          Back\n        </button>\n        <button\n          type=\"button\"\n          className=\"cedros-deposit-flow-button cedros-deposit-flow-button-primary\"\n          onClick={handleConfirm}\n          disabled={!isValidAmount || !walletReady || !depositAddress}\n        >\n          Deposit\n        </button>\n      </div>\n    </div>\n  );\n}\n\ninterface SigningStepProps {\n  depositAddress: string | null;\n}\n\nfunction SigningStep({ depositAddress }: SigningStepProps) {\n  return (\n    <div className=\"cedros-deposit-flow-step cedros-deposit-flow-step-centered\">\n      <div className=\"cedros-deposit-flow-spinner\" />\n      <h4 className=\"cedros-deposit-flow-step-title\">Signing Transfer</h4>\n      <p className=\"cedros-deposit-flow-step-desc\">\n        Approve the transfer in your wallet extension...\n      </p>\n      {depositAddress && (\n        <p className=\"cedros-deposit-flow-signing-dest\">\n          Sending to:{' '}\n          <code>\n            {depositAddress.slice(0, 6)}...{depositAddress.slice(-4)}\n          </code>\n        </p>\n      )}\n    </div>\n  );\n}\n\n// =============================================================================\n// RECEIVE MODE STEP COMPONENTS\n// =============================================================================\n\ninterface ShowAddressStepProps {\n  token: Token;\n  tokens: Token[];\n  quickActionSymbols: string[];\n  customTokenSymbols: string[];\n  tokenPriceUsd?: Record<string, number>;\n  currencyMode: CurrencyMode;\n  depositAddress: string | null;\n  copied: boolean;\n  isListening: boolean;\n  config: DepositConfigResponse;\n  onCopy: () => void;\n  onTokenSelect: (token: Token) => void;\n  onAmountChange: (amountUsd: number) => void;\n  onSent: () => void;\n  onBack: () => void;\n  onCancel?: () => void;\n}\n\nfunction ShowAddressStep({\n  token,\n  tokens,\n  quickActionSymbols,\n  customTokenSymbols,\n  tokenPriceUsd,\n  currencyMode,\n  depositAddress,\n  copied,\n  isListening,\n  config,\n  onCopy,\n  onTokenSelect,\n  onAmountChange,\n  onSent,\n  onBack,\n}: ShowAddressStepProps) {\n  const [amountUsd, setAmountUsd] = useState(config.privateMinUsd);\n  const [showCustomToken, setShowCustomToken] = useState(false);\n  const [feeTooltipOpen, setFeeTooltipOpen] = useState(false);\n  const [customOpenSignal, setCustomOpenSignal] = useState(0);\n  // Track the token selected before auto-switching to SOL for micro tier\n  const [preMicroToken, setPreMicroToken] = useState<Token | null>(null);\n  const tier = getTierForAmount(amountUsd, config);\n  const isMicroTier = tier === 'sol_micro';\n  const isOtherToken = token.symbol === OTHER_TOKEN.symbol;\n  const customTokens = useMemo(() => {\n    const baseTokens =\n      customTokenSymbols.length === 0\n        ? tokens\n        : tokens.filter((candidate) => customTokenSymbols.includes(candidate.symbol));\n    const resolved = baseTokens.length > 0 ? baseTokens : tokens;\n    const hasOther = resolved.some((candidate) => candidate.symbol === OTHER_TOKEN.symbol);\n    return hasOther ? resolved : [...resolved, OTHER_TOKEN];\n  }, [tokens, customTokenSymbols]);\n  const totalFeeUsd = getTotalFeeUsd(config, amountUsd);\n  const feeTotalDisplay = totalFeeUsd < 0.01 ? 0.01 : totalFeeUsd;\n  const feeLine = isOtherToken\n    ? 'Fees: calculated after deposit'\n    : `Fees: $${feeTotalDisplay.toFixed(2)} total`;\n  const feeTooltip = isOtherToken ? '' : formatFeeTooltip(config, amountUsd, totalFeeUsd);\n  const canSubmit = isOtherToken || amountUsd > 0;\n  const tokenUsdPrice = getTokenUsdPrice(isMicroTier ? SOL_TOKEN : token, config, tokenPriceUsd);\n  const tokenAmount = tokenUsdPrice ? amountUsd / tokenUsdPrice : null;\n  const sendAmountLabel = tokenAmount ? formatTokenAmount(tokenAmount, token.symbol) : null;\n\n  // Auto-select SOL for micro tier, restore previous token when leaving micro tier\n  useEffect(() => {\n    if (currencyMode !== 'multi-token') return;\n\n    if (isMicroTier && token.symbol !== 'SOL') {\n      // Entering micro tier with non-SOL token: save it and switch to SOL\n      setPreMicroToken(token);\n      const solToken = tokens.find((t) => t.symbol === 'SOL');\n      if (solToken) onTokenSelect(solToken);\n    } else if (!isMicroTier && preMicroToken && token.symbol === 'SOL') {\n      // Leaving micro tier: restore the previously selected token\n      onTokenSelect(preMicroToken);\n      setPreMicroToken(null);\n    }\n  }, [isMicroTier, token.symbol, currencyMode, tokens, onTokenSelect, preMicroToken, token]);\n\n  useEffect(() => {\n    onAmountChange(amountUsd);\n  }, [amountUsd, onAmountChange]);\n\n  if (!depositAddress) {\n    return (\n      <div className=\"cedros-deposit-flow-step cedros-deposit-flow-step-centered\">\n        <div className=\"cedros-deposit-flow-error-icon\">!</div>\n        <h4 className=\"cedros-deposit-flow-step-title\">Wallet Not Ready</h4>\n        <p className=\"cedros-deposit-flow-step-desc\">\n          Your embedded wallet is not set up. Please complete wallet enrollment first.\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"cedros-deposit-flow-step\">\n      <h4 className=\"cedros-deposit-flow-step-title\">Send Deposit</h4>\n      <p className=\"cedros-deposit-flow-step-desc\">\n        Send funds to your deposit address. We'll confirm automatically.\n      </p>\n\n      {/* Token Selector - only show for non-micro tiers in multi-token mode */}\n      {currencyMode === 'multi-token' && !isMicroTier && (\n        <div className=\"cedros-deposit-flow-field\">\n          <label className=\"cedros-deposit-flow-label\">Token</label>\n          <div className=\"cedros-deposit-flow-token-quick\">\n            {quickActionSymbols.map((symbol) => {\n              const quickToken = tokens.find((candidate) => candidate.symbol === symbol);\n              const isActive = token.symbol === symbol;\n              return (\n                <button\n                  key={symbol}\n                  type=\"button\"\n                  className={`cedros-deposit-flow-token-quick-btn ${isActive ? 'is-active' : ''}`}\n                  onClick={() => {\n                    if (quickToken) {\n                      setShowCustomToken(false);\n                      onTokenSelect(quickToken);\n                    }\n                  }}\n                  disabled={!quickToken}\n                >\n                  {quickToken?.logoUrl && (\n                    <img\n                      className=\"cedros-deposit-flow-token-quick-icon\"\n                      src={quickToken.logoUrl}\n                      alt={`${symbol} logo`}\n                    />\n                  )}\n                  {symbol}\n                </button>\n              );\n            })}\n            <button\n              type=\"button\"\n              className={`cedros-deposit-flow-token-quick-btn ${showCustomToken ? 'is-active' : ''}`}\n              onClick={() => {\n                setShowCustomToken(true);\n                setCustomOpenSignal((current) => current + 1);\n              }}\n            >\n              Custom\n            </button>\n          </div>\n          {showCustomToken && (\n            <div className=\"cedros-deposit-flow-token-custom\">\n              <TokenSelector\n                tokens={customTokens}\n                selectedToken={token}\n                onSelect={onTokenSelect}\n                openSignal={customOpenSignal}\n              />\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Amount Selector with Tier Indicator */}\n      {!isOtherToken && (\n        <div className=\"cedros-deposit-flow-field\">\n          <label className=\"cedros-deposit-flow-label\">Deposit Amount</label>\n          <TieredAmountSlider\n            config={config}\n            valueUsd={amountUsd}\n            onChange={setAmountUsd}\n            maxUsd={MAX_DEPOSIT_USD}\n          />\n        </div>\n      )}\n\n      {isOtherToken && (\n        <div className=\"cedros-deposit-flow-note\">\n          Send any token you want. We'll detect the deposit, swap it, and credit your balance\n          automatically.\n        </div>\n      )}\n\n      {/* Deposit Address */}\n      <div className=\"cedros-deposit-flow-field\">\n        <label className=\"cedros-deposit-flow-label\">\n          {isOtherToken\n            ? 'Send any token to this address'\n            : `Send ${sendAmountLabel ?? '--'} ${isMicroTier ? 'SOL' : token.symbol} to this address`}\n        </label>\n        <div className=\"cedros-deposit-flow-address-box\">\n          <code className=\"cedros-deposit-flow-address\">{depositAddress}</code>\n          <button\n            type=\"button\"\n            className=\"cedros-deposit-flow-copy-btn\"\n            onClick={onCopy}\n            title=\"Copy address\"\n          >\n            {copied ? '' : ''}\n          </button>\n        </div>\n        {copied && <p className=\"cedros-deposit-flow-copied-msg\">Copied!</p>}\n      </div>\n\n      <div className=\"cedros-deposit-flow-info-stack\">\n        <div className=\"cedros-deposit-flow-info-item\">\n          <span className=\"cedros-deposit-flow-info-dot\" />\n          <span>Send only on the Solana network.</span>\n        </div>\n        <div className=\"cedros-deposit-flow-info-item\">\n          <span className=\"cedros-deposit-flow-info-dot\" />\n          <span>\n            {feeLine}\n            {!isOtherToken && (\n              <button\n                type=\"button\"\n                className={`cedros-deposit-flow-fee-info ${feeTooltipOpen ? 'is-open' : ''}`}\n                data-tooltip={feeTooltip}\n                aria-label={`Fee breakdown: ${feeTooltip.replaceAll('\\n', ', ')}`}\n                aria-expanded={feeTooltipOpen}\n                onClick={(event) => {\n                  event.stopPropagation();\n                  setFeeTooltipOpen((current) => !current);\n                }}\n                onBlur={() => setFeeTooltipOpen(false)}\n                onKeyDown={(event) => {\n                  if (event.key === 'Escape') {\n                    setFeeTooltipOpen(false);\n                  }\n                }}\n              >\n                i\n              </button>\n            )}\n          </span>\n        </div>\n        <div className=\"cedros-deposit-flow-info-item\">\n          <span className=\"cedros-deposit-flow-info-dot\" />\n          <span>Credits appear after confirmation (typically ~30s).</span>\n        </div>\n      </div>\n\n      {isListening && (\n        <div className=\"cedros-deposit-flow-info-banner\">\n          Listening for your deposit. We'll notify you when it arrives.\n        </div>\n      )}\n\n      <div className=\"cedros-deposit-flow-actions\">\n        <button\n          type=\"button\"\n          className=\"cedros-deposit-flow-button cedros-deposit-flow-button-secondary\"\n          onClick={onBack}\n        >\n          Back\n        </button>\n        <button\n          type=\"button\"\n          className=\"cedros-deposit-flow-button cedros-deposit-flow-button-primary\"\n          onClick={onSent}\n          disabled={!canSubmit}\n        >\n          I've Sent It\n        </button>\n      </div>\n    </div>\n  );\n}\n\ninterface WaitingStepProps {\n  token: Token;\n  depositAddress: string | null;\n  copied: boolean;\n  feeLine: string;\n  onCopy: () => void;\n}\n\nfunction WaitingStep({ token, depositAddress, copied, feeLine, onCopy }: WaitingStepProps) {\n  return (\n    <div className=\"cedros-deposit-flow-step cedros-deposit-flow-step-centered\">\n      <div className=\"cedros-deposit-flow-spinner\" />\n      <h4 className=\"cedros-deposit-flow-step-title\">Waiting for Deposit</h4>\n      <p className=\"cedros-deposit-flow-step-desc\">\n        Looking for incoming <strong>{token.symbol}</strong> deposits...\n      </p>\n\n      <div className=\"cedros-deposit-flow-waiting-info\">\n        <p className=\"cedros-deposit-flow-waiting-text\">\n          Once your transaction is confirmed on the Solana network, your account will be credited\n          automatically. This usually takes 20-30 seconds.\n        </p>\n        {depositAddress && (\n          <div className=\"cedros-deposit-flow-field\">\n            <label className=\"cedros-deposit-flow-label\">Deposit address</label>\n            <div className=\"cedros-deposit-flow-address-box\">\n              <code className=\"cedros-deposit-flow-address\">\n                {depositAddress.slice(0, 6)}...{depositAddress.slice(-6)}\n              </code>\n              <div className=\"cedros-deposit-flow-address-actions\">\n                <button\n                  type=\"button\"\n                  className=\"cedros-deposit-flow-copy-btn cedros-deposit-flow-copy-icon\"\n                  onClick={onCopy}\n                  title=\"Copy address\"\n                >\n                  {copied ? '' : ''}\n                </button>\n                <a\n                  className=\"cedros-deposit-flow-copy-btn cedros-deposit-flow-copy-link cedros-deposit-flow-copy-icon\"\n                  href={`https://orbmarkets.io/account/${depositAddress}`}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  title=\"View on Orb Markets\"\n                >\n                  \n                </a>\n              </div>\n            </div>\n          </div>\n        )}\n        <div className=\"cedros-deposit-flow-info-stack\">\n          <div className=\"cedros-deposit-flow-info-item\">\n            <span className=\"cedros-deposit-flow-info-dot\" />\n            <span>Send only on the Solana network.</span>\n          </div>\n          <div className=\"cedros-deposit-flow-info-item\">\n            <span className=\"cedros-deposit-flow-info-dot\" />\n            <span>{feeLine}</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\ninterface SuccessStepProps {\n  result: DepositFlowResult;\n  config: DepositConfigResponse;\n  onNewDeposit: () => void;\n}\n\nfunction SuccessStep({ result, config, onNewDeposit }: SuccessStepProps) {\n  const token = result.token ?? SOL_TOKEN;\n  const amountUsd =\n    token.symbol === 'SOL' && config.solPriceUsd > 0\n      ? result.amount * config.solPriceUsd\n      : result.amount;\n  const totalFeeUsd = getTotalFeeUsd(config, amountUsd);\n  const creditsUsd = Math.max(amountUsd - totalFeeUsd, 0);\n  const totalFeeDisplay = totalFeeUsd < 0.01 ? 0.01 : totalFeeUsd;\n\n  return (\n    <div className=\"cedros-deposit-flow-step cedros-deposit-flow-step-centered\">\n      <div className=\"cedros-deposit-flow-success-icon\"></div>\n      <h4 className=\"cedros-deposit-flow-step-title\">Deposit Successful!</h4>\n      <p className=\"cedros-deposit-flow-step-desc\">\n        Your deposit of {result.amount.toLocaleString()} {token.symbol} has been received.\n      </p>\n\n      <div className=\"cedros-deposit-flow-summary\">\n        <div className=\"cedros-deposit-flow-summary-row\">\n          <span className=\"cedros-deposit-flow-summary-label\">Transaction</span>\n          <span className=\"cedros-deposit-flow-summary-value cedros-deposit-flow-tx\">\n            <a\n              href={`https://orbmarkets.io/tx/${result.txSignature}`}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              {result.txSignature.slice(0, 8)}...{result.txSignature.slice(-8)}\n            </a>\n            <a\n              className=\"cedros-deposit-flow-tx-action\"\n              href={`https://orbmarkets.io/tx/${result.txSignature}`}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              aria-label=\"View transaction on Orb Markets\"\n              title=\"View transaction\"\n            >\n              \n            </a>\n          </span>\n        </div>\n        <div className=\"cedros-deposit-flow-summary-row\">\n          <span className=\"cedros-deposit-flow-summary-label\">Deposit Amount</span>\n          <span className=\"cedros-deposit-flow-summary-value\">${amountUsd.toFixed(2)}</span>\n        </div>\n        <div className=\"cedros-deposit-flow-summary-row\">\n          <span className=\"cedros-deposit-flow-summary-label\">Total Fees</span>\n          <span className=\"cedros-deposit-flow-summary-value cedros-deposit-flow-fee\">\n            -${totalFeeDisplay.toFixed(2)}\n          </span>\n        </div>\n        <div className=\"cedros-deposit-flow-summary-row\">\n          <span className=\"cedros-deposit-flow-summary-label\">Credits Added</span>\n          <span className=\"cedros-deposit-flow-summary-value cedros-deposit-flow-credit\">\n            +${creditsUsd.toFixed(2)}\n          </span>\n        </div>\n        <div className=\"cedros-deposit-flow-summary-row\">\n          <span className=\"cedros-deposit-flow-summary-label\">Available</span>\n          <span className=\"cedros-deposit-flow-summary-value\">Immediately</span>\n        </div>\n      </div>\n\n      <div className=\"cedros-deposit-flow-actions\">\n        <button\n          type=\"button\"\n          className=\"cedros-deposit-flow-button cedros-deposit-flow-button-primary\"\n          onClick={onNewDeposit}\n        >\n          Make Another Deposit\n        </button>\n      </div>\n    </div>\n  );\n}\n\ninterface ErrorStepProps {\n  error: string;\n  onRetry: () => void;\n  onCancel?: () => void;\n}\n\nfunction ErrorStep({ error, onRetry, onCancel }: ErrorStepProps) {\n  return (\n    <div className=\"cedros-deposit-flow-step cedros-deposit-flow-step-centered\">\n      <div className=\"cedros-deposit-flow-error-icon\"></div>\n      <h4 className=\"cedros-deposit-flow-step-title\">Deposit Failed</h4>\n      <p className=\"cedros-deposit-flow-error-message\">{error}</p>\n\n      <div className=\"cedros-deposit-flow-actions\">\n        {onCancel && (\n          <button\n            type=\"button\"\n            className=\"cedros-deposit-flow-button cedros-deposit-flow-button-secondary\"\n            onClick={onCancel}\n          >\n            Cancel\n          </button>\n        )}\n        <button\n          type=\"button\"\n          className=\"cedros-deposit-flow-button cedros-deposit-flow-button-primary\"\n          onClick={onRetry}\n        >\n          Try Again\n        </button>\n      </div>\n    </div>\n  );\n}\n","export default \"data:image/webp;base64,UklGRmIEAABXRUJQVlA4WAoAAAAIAAAAOwAAOwAAVlA4IIIDAADwDwCdASo8ADwAPm0qkUWkIqGWDVeYQAbEtgBOmZMBu+H816ov3b8R8R2g2FXtxdyh5s3+A60v0APLi9ktgGB/LZjWNAXqgpE6jfW0NF+P4xEhH2L7M+26iGwrTjjcQegyCZqxs+ifvZANjWd279diqZNKUrgOTVtjJGtW4IVtRhMECd5aWVgAAP7nDv3UY/8f1l//xTP/FM/8NU8c9g//sC3+bX/1HZXsNsM57VKG2LVf1a0KdncWO8uPo/Oh79m9ZqjJZwXfPXuvwkK+WDOl6+N8C2Ux6no/V/zkoucKK/JZek7MR5sS8TknXB+6BuVDXou9Rx4aUea2q2IzvLvFIujjKsVYLMab7j9zo48fhgm9YOtjmWuS0WZ4c+6ta0mr3xF4fcdAIFf6oXRSlqovOX0HUiMV//hXwSX1cfP5cLj8c7OTyT/4ce4olJARV95GoY8oF+2uU0blGul3ItlG7c2Hl2/uC6s2WZc7Zukwojx6ed8t97bZ68N1uzCLzPlG7BuYS17F19e0wXnc6vEl3q7ft0K7OEl7r8mY6Kh+Nt/5V/Lp68mFBjLem1JjvC371+lKwez4KCdXwNo2Z04FqyzGpFutY6YQ/r5Tfu7Oi+oNfN0R/W+D4aj1nqHhlqYJzpx2NK4mj0gJIXmX8EArelSQI8mV4Ux9MRPwC2PuZhLTjQZv+Vl4p0D8bSB+Z0rek3hS6G1r80fW3cn767Pz/bXanjVmm34wt1nQPqdJObrZ7vv2NWcEuQKj9d+V6DzeDrq0CtGNcanEB5MY9agi1E6BprEScTdfPXjBeMnPbpD+QO6P7IW4UZ9etCCHtX++S/fl5Iz5RzUr10ojRMw//35C0yTjSEhbe884dPwor64n//KByjUFEGsCPAAXPJp1+O+SiKfUaODq6ncjKayTHXjoXgM7XP1z4sBhIKJZJRiM7vGC/+v/Sk8/jbgZLZDAVz1vLou93y7Yd8hxcWM/BesxgWgeKvl8fjE/Ud8tQKp4425hWh66lzzwxa4J3ctA4/E50wX/eoBOgq0B7+7S6FK4wvPHSNgfh+vwSWIJsJLt/3yjBeb41RRyMDMZqFQTZPEdFpXp48ExEyDayZ6objbjTHoS5WQDnDQpRyqMNKfvd41nhEPdb/hxpzXeTIjWmfHHCT+CQYWXDqLehCh1cRyeYOBwsSlSw5PiquAbsgAARVhJRroAAABFeGlmAABJSSoACAAAAAYAEgEDAAEAAAABAAAAGgEFAAEAAABWAAAAGwEFAAEAAABeAAAAKAEDAAEAAAACAAAAEwIDAAEAAAABAAAAaYcEAAEAAABmAAAAAAAAAEgAAAABAAAASAAAAAEAAAAGAACQBwAEAAAAMDIxMAGRBwAEAAAAAQIDAACgBwAEAAAAMDEwMAGgAwABAAAA//8AAAKgBAABAAAAPAAAAAOgBAABAAAAPAAAAAAAAAA=\"","export default \"data:image/webp;base64,UklGRtgCAABXRUJQVlA4WAoAAAAIAAAAOwAAOwAAVlA4IPgBAABQCwCdASo8ADwAPm0wk0ekIqGhKBQMqIANiWkADPF3uV2D8VcQGk1mg+P36i9SLnZvYAQxszEWYzEwX1RVkqG/4BGbJgMSHqhKDFsjWsGfPPrvfef11goNmCDDlBJHVVD+8gAA/vu4q03kl+E7FpjtZ2gc8pQ619Hjv9NywoRZ6az43C1wcrRr/lWzJlJhLWMHN0MkVl1ueAf6Hn8StVzeUfMBXOKkgfe2msx7QWR5PnHW/5c6/35yrtWnrURc2q6UYlGin+v8C2dQqexkW6rX2EEijTI9eEQ46PWH3/59fM2AlMvvR2abaRk5XX7V1triQncRxvMfz5YmYDN+PY/ikcZUNaiFucKoUq5riv0eKCezuFNHecE11ojwJqWRSTWpalkz5autXp6vFS+FT1tWUsB/fs1CCOZxaA1vR1grOEaiuKe1RYm7e05psWtqbXLVmm1bA8Ly9PFkVdCbc6hR3UuBBsFGnVeGOUeMn2onnfvYhBMcM9YPxGdQkwZLXOk1VuQSTk01Shf3fZrFyRlFauftFdPYhKXwqrr+meav1P+KLKBVosqmHnFFfgExsQ/rOf3TSd+mOqQfJA+cF+HojNU7nmM3uDkoCBi+//Gqp+gPNNW8M4LFrol8rxE+7WsjqMgfwv1f+Nr25RtG1Wa/KkniRCAAAABFWElGugAAAEV4aWYAAElJKgAIAAAABgASAQMAAQAAAAEAAAAaAQUAAQAAAFYAAAAbAQUAAQAAAF4AAAAoAQMAAQAAAAIAAAATAgMAAQAAAAEAAABphwQAAQAAAGYAAAAAAAAASAAAAAEAAABIAAAAAQAAAAYAAJAHAAQAAAAwMjEwAZEHAAQAAAABAgMAAKAHAAQAAAAwMTAwAaADAAEAAAD//wAAAqAEAAEAAAA8AAAAA6AEAAEAAAA8AAAAAAAAAA==\"","export default \"data:image/webp;base64,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\"","export default \"data:image/webp;base64,UklGRo4EAABXRUJQVlA4WAoAAAAYAAAAOwAAOwAAQUxQSA4CAAABkGXb2to2V9/v6D1Jmd5CQ5GXPYXAJMrtPOJMoMzMzDgIPYY5+vVds6T/m0BEOGzAtm1IBlR2d8kXUMyaADjeuHr9V7qj3E5/XrvaOA5AHCqzFgHTFz9tUTmEyq1PF6cBqVWDOLjkwS6VPsu8KqnaewRU7j5KIjipgFiQfCf1IGch8wMlv9QhcWk4nLlL9Z4l6b3y7hmUvGQkmF1nnrMC85zrc5CozDUQtwamisNSDCmxjL5jpqxMzfhutFCCY3+5110CaI9/jhVIcPg/DxiIB/x/eKgijLxkRobTyxFEw7zVm0NqcYg5LNAzKD3n4QbmyRVqWCiXJyD9uN7z0Ha9Dw4N5gzOnHU4IMJ7egt8HuYWasIJnlg46fkYgul9qgWU+9PA2Z7b2FngnR3e49Qm1QbKzVPNnltZ8wozK2S8et0SN34wt0LOnynVCsp02xI7tKSqqXYsV7ZtD/lpeaEfNyw/k9evWuKK7XfQ9ruP9/RW/s74t872N1bw2MY8n0Acmlb/KQ04AJ8t5PkeEbpDnbmR2/5392FiOfRFlCuTkIGsMh/aPBeGZFLBYuiM1IIUZLOD0NnMNBMWZdE/4bLo32MQ0wxcJnsvhcnerRhSLvPPhcj8s5DIsmtU6Tj1L1U6zvcEElfrVlHyqGy3epC4om5Vsg3OlO50UQ2V6Qa65LWf6TZ1J/11faBLlpgAVlA4IJgBAADwCQCdASo8ADwAPm0ylEckIyIhKAoAgA2JaQATzh4OcBkEByVmbl5z9gD9U/+J2APQgLaX4twLu19/UVxAWN1IKXE4cIqJBhoyQ0yDYn61m3zk6T7FMg0AAP78+EMvGgC8jLXmcbbmqvufKjG8Tv1M9Krl47vOW74O/Rapv2DgXbg9iK6PrRQG/9d9+rF/ESxzbszVFn3GThrMBmsklj/LPWDQ0pKzG7EyjQL6p6gfUwMze+wPhzJpn8tMqlUVgq6/QSUVcgG+ztsi73rA3vl3n4baeF1INsbuosTXtnsotVYuTii6rscx9OUTvevYcPNvcL9MPhyWeCQw0qynnGtzCIw+oFRN0+TN1mqXkFyk/rFBcH+FHiI6s9XX5EWCKn5vTRt/0RbS687PiXPFC5Zk/Gk4+538IYi+HZDjvlQQWOH/vddfYTerQ5QqWJt1YuaZNThQ2u+/DtXfZPRy1iWWLR9SKFFtlGrqBKWF5nPRPWWMNA3OssvUtvCNBLBA4cn1whzy+SpbgLvnaepxiykjKsU/MhzgAABFWElGugAAAEV4aWYAAElJKgAIAAAABgASAQMAAQAAAAEAAAAaAQUAAQAAAFYAAAAbAQUAAQAAAF4AAAAoAQMAAQAAAAIAAAATAgMAAQAAAAEAAABphwQAAQAAAGYAAAAAAAAASAAAAAEAAABIAAAAAQAAAAYAAJAHAAQAAAAwMjEwAZEHAAQAAAABAgMAAKAHAAQAAAAwMTAwAaADAAEAAAD//wAAAqAEAAEAAAA8AAAAA6AEAAEAAAA8AAAAAAAAAA==\"","export default \"data:image/webp;base64,UklGRqwEAABXRUJQVlA4WAoAAAAYAAAAOwAAOwAAQUxQSL8BAAABkGvbtmlLc5997yvbmW19gBnbDm2kjF5UmW3bthXZVZFdZ+81r+87Z1XlEaHIbSNlMstwos4XUBSTLAFQo/u01Zdf/yLDDze3zB/YwADJEoOoJAKg7oTdH4SF+XxiZlMgSESzwAJdVn2iUJzzOUMiLhQKf+/va2FtBLMBuu1zpHcsincUXhtoTKLsCTVX/KF3wrLhPLm/OWzZtjQWfZ7RhYyAC/lxMowpSzJYJAyFkZDQc21FBMUT7BqGjpHxf3m+XlEPUHE/f3vGgPzmw4awRUaTexkyJhwfNShctVgZXyJDXq4CUyjNy6Y4fVOBIkAPR2GcOE7Jm2NQ/RE9YzXht3a5VYvlOX0xF0fy+tp/ozBuQg6DzZYb6Bi7ed4rB5Mp/1Co4cNhLUo1StLxDIDqrynUoRswiF6nFnIxsDpnZ5WBW0GFZ1qZ8HfLDk5txHHsGDpSa6B0cXZEa+DsTr1M+P4qPdXwjynU4+1/a7oN3Sm6G+meSd27oHsHde++7puj+tYpv7G6b7vun6L7l6n+oZp/t7JmUNUqqhpJV5upakJVLaqqgVW1t6rmV401NGMc1djqH4rpIseSfyPFkgAAVlA4IAQCAABQDACdASo8ADwAPm0yk0akIyGhJgzogA2JaQAThroHvLxu+aPf5G2BYxv+B6XHzx6GPon/o+qz/tOAA/TM82gR0vnExWoiQRM36jlg2UIvwCSqySErzuguz9EP2x/7hsNazr91aIworWI7AAD+/TZ+6Ipl444OdT+2wU0Ov+T8oJuVP/vUbT/w1Jsv6Awnl6rvF/xetfOPt3gTQZZi0Y/AOx563J7CJkqTR/fc/n34zyeKzR80fhfv4ef+Hjhz/CX5aQo+58zg/FdE+7bLoophGfG0szI513EH+q+Gc73H1PFdJYf7CF8v5dhr3tMwEVX5Ji2ZxejK8xrf/E6nVXqlA4DrYNRP09InHc+fEqO/fH8xr+rMf4y1F9TOnwVffZblLoTP6lot0m/sh7sTiDQr0mIA8TiHoOffGDG6KzV+B3239udfhzD740gkRi/m53abX0Ku3vAgadgFFqL0vk8M/4aI+cI+0fbLW17mWGeMu21wSRRQiv5iNgGKR3vEGXAItcLDft1uUzWAfbe1X3zK/ymT7bA/76PB6UUknm+Y5MM4osurUXU/k7P38pN/3slnGfpFzjl4c3USY4mH9ZCJYUuC/kGEnq/yRPalPdODNFvW6s8MiQeQejYNRY0LsJ0WXkK8vXiDmihCivYAOPoSovesL7on+WAArDNM/BcQSQvCYABFWElGugAAAEV4aWYAAElJKgAIAAAABgASAQMAAQAAAAEAAAAaAQUAAQAAAFYAAAAbAQUAAQAAAF4AAAAoAQMAAQAAAAIAAAATAgMAAQAAAAEAAABphwQAAQAAAGYAAAAAAAAASAAAAAEAAABIAAAAAQAAAAYAAJAHAAQAAAAwMjEwAZEHAAQAAAABAgMAAKAHAAQAAAAwMTAwAaADAAEAAAD//wAAAqAEAAEAAAA8AAAAA6AEAAEAAAA8AAAAAAAAAA==\"","export default \"data:image/webp;base64,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\"","export default \"data:image/svg+xml,%3csvg%20width='88'%20height='88'%20viewBox='0%200%2088%2088'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='88'%20height='88'%20fill='url(%23paint0_linear_170_79)'/%3e%3crect%20x='25.6665'%20y='25.6667'%20width='11'%20height='36.6667'%20rx='1.83333'%20fill='white'/%3e%3crect%20x='51.3335'%20y='25.6667'%20width='11'%20height='36.6667'%20rx='1.83333'%20fill='white'/%3e%3crect%20x='29.3335'%20y='40.3333'%20width='29.3333'%20height='7.33333'%20fill='white'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_170_79'%20x1='-75.3077'%20y1='-55'%20x2='146.302'%20y2='148.167'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23FF00FF'/%3e%3cstop%20offset='0.531673'%20stop-color='%237A84FF'/%3e%3cstop%20offset='1'%20stop-color='%2305FAFF'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\"","export default \"data:image/webp;base64,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\"","export default \"data:image/svg+xml,%3csvg%20width='868'%20height='868'%20viewBox='0%200%20868%20868'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='434'%20cy='434'%20r='434'%20fill='%231B262D'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M234.563%20184H640.697C650.387%20184%20659.339%20189.164%20664.172%20197.542L782.495%20402.657C788.631%20413.294%20786.808%20426.72%20778.056%20435.346L452.368%20756.327C441.818%20766.724%20424.846%20766.724%20414.296%20756.327L89.0484%20435.78C80.0927%20426.954%2078.4157%20413.136%2085.0013%20402.433L211.48%20196.884C216.405%20188.879%20225.146%20184%20234.563%20184ZM588.257%20275.577V333.129H472.567V373.032C553.82%20377.296%20614.782%20394.81%20615.234%20415.802L615.231%20459.563C614.779%20480.556%20553.82%20498.069%20472.567%20502.333V600.259H395.746V502.333C314.492%20498.069%20253.531%20480.555%20253.078%20459.563L253.081%20415.802C253.533%20394.81%20314.492%20377.296%20395.746%20373.032V333.129H280.055V275.577H588.257ZM434.156%20472.268C520.868%20472.268%20593.345%20457.459%20611.082%20437.683C596.041%20420.912%20541.636%20407.713%20472.567%20404.089V445.867C460.187%20446.516%20447.336%20446.858%20434.156%20446.858C420.976%20446.858%20408.125%20446.516%20395.746%20445.867V404.089C326.676%20407.713%20272.271%20420.912%20257.23%20437.683C274.968%20457.459%20347.444%20472.268%20434.156%20472.268Z'%20fill='%23009393'/%3e%3c/svg%3e\"","/**\n * Token types and constants for deposit currency selection\n */\n\nimport bonkLogo from '../../assets/tokens/bonk.webp';\nimport cashLogo from '../../assets/tokens/cash.webp';\nimport eurcLogo from '../../assets/tokens/eurc.webp';\nimport oreLogo from '../../assets/tokens/ore.webp';\nimport pyusdLogo from '../../assets/tokens/pyusd.webp';\nimport solLogo from '../../assets/tokens/sol.webp';\nimport usdcLogo from '../../assets/tokens/usdc.webp';\nimport usdhLogo from '../../assets/tokens/usdh.svg';\nimport usd1Logo from '../../assets/tokens/usd1.webp';\nimport usdtLogo from '../../assets/tokens/usdt.svg';\n\nexport interface Token {\n  /** Token mint address */\n  mint: string;\n  /** Token symbol (e.g., SOL, USDC) */\n  symbol: string;\n  /** Token name (e.g., Solana, USD Coin) */\n  name: string;\n  /** Token decimals */\n  decimals: number;\n  /** Token logo URL */\n  logoUrl?: string;\n}\n\n/**\n * Supported stablecoins for deposits\n */\nexport const SUPPORTED_TOKENS: Token[] = [\n  {\n    mint: 'So11111111111111111111111111111111111111112',\n    symbol: 'SOL',\n    name: 'Solana',\n    decimals: 9,\n    logoUrl: solLogo,\n  },\n  {\n    mint: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n    symbol: 'USDC',\n    name: 'Circle USD',\n    decimals: 6,\n    logoUrl: usdcLogo,\n  },\n  {\n    mint: 'Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB',\n    symbol: 'USDT',\n    name: 'Tether USD',\n    decimals: 6,\n    logoUrl: usdtLogo,\n  },\n  {\n    mint: 'HzwqbKZw8HxMN6bF2yFZNrht3c2iXXzpKcFu7uBEDKtr',\n    symbol: 'EURC',\n    name: 'Circle Euro',\n    decimals: 6,\n    logoUrl: eurcLogo,\n  },\n  {\n    mint: 'USD1ttGY1N17NEEHLmELoaybftRBUSErhqYiQzvEmuB',\n    symbol: 'USD1',\n    name: 'WLFI USD',\n    decimals: 6,\n    logoUrl: usd1Logo,\n  },\n  {\n    mint: '2b1kV6DkPAnxd5ixfnxCpjxmKwqjjaYmCZfHsFu24GXo',\n    symbol: 'PYUSD',\n    name: 'PayPal USD',\n    decimals: 6,\n    logoUrl: pyusdLogo,\n  },\n  {\n    mint: 'USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX',\n    symbol: 'USDH',\n    name: 'Hubble USD',\n    decimals: 6,\n    logoUrl: usdhLogo,\n  },\n  {\n    mint: 'CASHVDm2wsJXfhj6VWxb7GiMdoLc17Du7paH4bNr5woT',\n    symbol: 'CASH',\n    name: 'Stripe USD',\n    decimals: 6,\n    logoUrl: cashLogo,\n  },\n  {\n    mint: 'DezXAZ8z7PnrnRJjz3wXBoRgixCa6xjnB7YaB1pPB263',\n    symbol: 'BONK',\n    name: 'Bonk',\n    decimals: 5,\n    logoUrl: bonkLogo,\n  },\n  {\n    mint: 'oreoU2P8bN6jkk3jbaiVxYnG1dCXcYxwhwyK9jSybcp',\n    symbol: 'ORE',\n    name: 'Ore',\n    decimals: 11,\n    logoUrl: oreLogo,\n  },\n];\n","/**\n * Credit balance display component\n *\n * Shows the user's current credit balance from Privacy Cash deposits.\n * Can display single currency or all currencies.\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { useCredits } from '../../hooks/useCredits';\nimport type { CreditBalanceResponse } from '../../types/deposit';\n\nexport interface CreditBalanceProps {\n  /** Show only SOL balance (default) or all currencies */\n  showAllCurrencies?: boolean;\n  /** Auto-refresh interval in milliseconds (0 to disable) */\n  refreshInterval?: number;\n  /** Compact display mode */\n  compact?: boolean;\n  /** Additional CSS classes */\n  className?: string;\n  /** Callback when balance is loaded */\n  onLoad?: (balance: CreditBalanceResponse[]) => void;\n}\n\n/**\n * Credit balance display\n *\n * Shows the user's credit balance. Supports auto-refresh.\n */\nexport function CreditBalance({\n  showAllCurrencies = false,\n  refreshInterval = 0,\n  compact = false,\n  className = '',\n  onLoad,\n}: CreditBalanceProps) {\n  const { getBalance, getAllBalances, isLoading, error, clearError } = useCredits();\n\n  const [balances, setBalances] = useState<CreditBalanceResponse[]>([]);\n  const [loadError, setLoadError] = useState<string | null>(null);\n\n  const fetchBalance = useCallback(async () => {\n    try {\n      if (showAllCurrencies) {\n        const result = await getAllBalances();\n        setBalances(result);\n        onLoad?.(result);\n      } else {\n        const result = await getBalance();\n        setBalances([result]);\n        onLoad?.([result]);\n      }\n      setLoadError(null);\n    } catch (err) {\n      setLoadError(err instanceof Error ? err.message : 'Failed to load balance');\n    }\n  }, [showAllCurrencies, getBalance, getAllBalances, onLoad]);\n\n  // Initial load\n  useEffect(() => {\n    fetchBalance();\n  }, [fetchBalance]);\n\n  // Auto-refresh\n  useEffect(() => {\n    if (refreshInterval <= 0) return;\n\n    const interval = setInterval(fetchBalance, refreshInterval);\n    return () => clearInterval(interval);\n  }, [refreshInterval, fetchBalance]);\n\n  // Error state\n  if (loadError || error) {\n    return (\n      <div className={`cedros-credit-balance cedros-credit-balance-error ${className}`}>\n        <p className=\"cedros-credit-error\">{loadError || error}</p>\n        <button\n          type=\"button\"\n          className=\"cedros-credit-retry\"\n          onClick={() => {\n            clearError();\n            setLoadError(null);\n            fetchBalance();\n          }}\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  // Loading state\n  if (isLoading && balances.length === 0) {\n    return (\n      <div className={`cedros-credit-balance cedros-credit-balance-loading ${className}`}>\n        <span className=\"cedros-credit-loading-indicator\" />\n        <span className=\"cedros-credit-loading-text\">Loading balance...</span>\n      </div>\n    );\n  }\n\n  // Compact display\n  if (compact) {\n    const primaryBalance = balances[0];\n    return (\n      <div className={`cedros-credit-balance cedros-credit-balance-compact ${className}`}>\n        {primaryBalance ? (\n          <span\n            className=\"cedros-credit-value\"\n            title={`${primaryBalance.balanceLamports} lamports`}\n          >\n            {primaryBalance.display}\n          </span>\n        ) : (\n          <span className=\"cedros-credit-value cedros-credit-value-zero\">0.0000 SOL</span>\n        )}\n        {isLoading && <span className=\"cedros-credit-refresh-indicator\" title=\"Refreshing...\" />}\n      </div>\n    );\n  }\n\n  // Full display\n  return (\n    <div className={`cedros-credit-balance ${className}`}>\n      <div className=\"cedros-credit-header\">\n        <h4 className=\"cedros-credit-title\">Credit Balance</h4>\n        <button\n          type=\"button\"\n          className=\"cedros-credit-refresh\"\n          onClick={fetchBalance}\n          disabled={isLoading}\n          title=\"Refresh balance\"\n        >\n          {isLoading ? '...' : ''}\n        </button>\n      </div>\n\n      {balances.length === 0 ? (\n        <div className=\"cedros-credit-empty\">\n          <p className=\"cedros-credit-empty-message\">No credit balance yet.</p>\n          <p className=\"cedros-credit-empty-hint\">Make a deposit to get started.</p>\n        </div>\n      ) : (\n        <div className=\"cedros-credit-list\">\n          {balances.map((balance) => (\n            <div key={balance.currency} className=\"cedros-credit-item\">\n              <span className=\"cedros-credit-currency\">{balance.currency}</span>\n              <span className=\"cedros-credit-amount\">{balance.display}</span>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","/**\n * History component\n *\n * Shows all account activity in a tabbed interface:\n * - All: Everything in chronological order\n * - Deposits: Incoming deposits with status tracking\n * - Usage: Service charges and spending\n * - Adjustments: Refunds, bonuses, and admin adjustments\n */\n\nimport { useState, useEffect, useCallback, useMemo } from 'react';\nimport { useCredits } from '../../hooks/useCredits';\nimport type { CreditTransactionResponse, CreditHistoryResponse } from '../../types/deposit';\n\n/** History tab category for filtering */\nexport type HistoryCategory = 'all' | 'deposits' | 'usage' | 'adjustments';\n\n/** Tab configuration */\ninterface TabConfig {\n  key: HistoryCategory;\n  label: string;\n  txTypes: string[] | null; // null means show all\n}\n\nconst TABS: TabConfig[] = [\n  { key: 'all', label: 'All', txTypes: null },\n  { key: 'deposits', label: 'Deposits', txTypes: ['deposit'] },\n  { key: 'usage', label: 'Usage', txTypes: ['spend', 'usage', 'charge'] },\n  {\n    key: 'adjustments',\n    label: 'Adjustments',\n    txTypes: ['refund', 'adjustment', 'bonus', 'credit'],\n  },\n];\n\nexport interface HistoryProps {\n  /** Initially selected tab (default: 'all') */\n  defaultTab?: HistoryCategory;\n  /** Number of items per page (default: 10) */\n  pageSize?: number;\n  /** Auto-refresh interval in milliseconds (0 to disable) */\n  refreshInterval?: number;\n  /** Additional CSS classes */\n  className?: string;\n  /** Callback when history is loaded */\n  onLoad?: (history: CreditHistoryResponse) => void;\n  /** Callback when a transaction is clicked */\n  onTransactionClick?: (transaction: CreditTransactionResponse) => void;\n}\n\n/**\n * Format amount for display\n */\nfunction formatAmount(lamports: number, currency: string): string {\n  const isNegative = lamports < 0;\n  const absLamports = Math.abs(lamports);\n\n  // For stablecoins (6 decimals), show as dollars\n  // For SOL (9 decimals), show as SOL\n  const isSol = currency.toUpperCase() === 'SOL';\n  const decimals = isSol ? 9 : 6;\n  const amount = absLamports / Math.pow(10, decimals);\n\n  const prefix = isNegative ? '-' : '+';\n  if (isSol) {\n    return `${prefix}${amount.toFixed(4)} SOL`;\n  }\n  return `${prefix}$${amount.toFixed(2)}`;\n}\n\n/**\n * Format date for display\n */\nfunction formatDate(dateString: string): string {\n  const date = new Date(dateString);\n  const now = new Date();\n  const diffMs = now.getTime() - date.getTime();\n  const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\n\n  // Show relative time for recent transactions\n  if (diffDays === 0) {\n    const diffHours = Math.floor(diffMs / (1000 * 60 * 60));\n    if (diffHours === 0) {\n      const diffMins = Math.floor(diffMs / (1000 * 60));\n      if (diffMins < 1) return 'Just now';\n      return `${diffMins}m ago`;\n    }\n    return `${diffHours}h ago`;\n  }\n  if (diffDays === 1) return 'Yesterday';\n  if (diffDays < 7) return `${diffDays}d ago`;\n\n  // Show full date for older transactions\n  return date.toLocaleDateString(undefined, {\n    month: 'short',\n    day: 'numeric',\n    year: date.getFullYear() !== now.getFullYear() ? 'numeric' : undefined,\n  });\n}\n\n/**\n * Get display label for transaction type\n */\nfunction getTypeLabel(txType: string | undefined): string {\n  if (!txType) return 'Transaction';\n  const labels: Record<string, string> = {\n    deposit: 'Deposit',\n    spend: 'Usage',\n    usage: 'Usage',\n    charge: 'Charge',\n    refund: 'Refund',\n    adjustment: 'Adjustment',\n    bonus: 'Bonus',\n    credit: 'Credit',\n  };\n  return labels[txType.toLowerCase()] || txType;\n}\n\n/**\n * Get icon for transaction type\n */\nfunction getTypeIcon(txType: string | undefined, isPositive: boolean): string {\n  const type = (txType || '').toLowerCase();\n  if (type === 'deposit') return '';\n  if (type === 'spend' || type === 'usage' || type === 'charge') return '';\n  if (type === 'refund') return '';\n  if (type === 'bonus' || type === 'credit') return '';\n  if (type === 'adjustment') return isPositive ? '+' : '';\n  return isPositive ? '+' : '';\n}\n\n/**\n * History component with tabs\n */\nexport function History({\n  defaultTab = 'all',\n  pageSize = 10,\n  refreshInterval = 0,\n  className = '',\n  onLoad,\n  onTransactionClick,\n}: HistoryProps) {\n  const { getHistory, isLoading, error, clearError } = useCredits();\n\n  const [activeTab, setActiveTab] = useState<HistoryCategory>(defaultTab);\n  const [transactions, setTransactions] = useState<CreditTransactionResponse[]>([]);\n  const [total, setTotal] = useState(0);\n  const [offset, setOffset] = useState(0);\n  const [loadError, setLoadError] = useState<string | null>(null);\n\n  // Get current tab config\n  const currentTab = TABS.find((t) => t.key === activeTab) || TABS[0];\n\n  // Filter transactions based on active tab (useMemo to avoid extra renders)\n  const filteredTransactions = useMemo(() => {\n    if (currentTab.txTypes === null) {\n      return transactions;\n    }\n    return transactions.filter((tx) => {\n      const txType = tx.txType || '';\n      return currentTab.txTypes!.some((type) => txType.toLowerCase().includes(type.toLowerCase()));\n    });\n  }, [transactions, currentTab.txTypes]);\n\n  const fetchHistory = useCallback(async () => {\n    try {\n      // Fetch more than pageSize to allow client-side filtering\n      const result = await getHistory({ limit: pageSize * 3, offset });\n      setTransactions(result.transactions);\n      setTotal(result.total);\n      onLoad?.(result);\n      setLoadError(null);\n    } catch (err) {\n      setLoadError(err instanceof Error ? err.message : 'Failed to load history');\n    }\n  }, [pageSize, offset, getHistory, onLoad]);\n\n  // Reset offset when tab changes\n  useEffect(() => {\n    setOffset(0);\n  }, [activeTab]);\n\n  // Fetch on mount and when dependencies change\n  useEffect(() => {\n    fetchHistory();\n  }, [fetchHistory]);\n\n  // Auto-refresh\n  useEffect(() => {\n    if (refreshInterval <= 0) return;\n    const interval = setInterval(fetchHistory, refreshInterval);\n    return () => clearInterval(interval);\n  }, [refreshInterval, fetchHistory]);\n\n  const totalPages = Math.ceil(total / pageSize);\n  const currentPage = Math.floor(offset / pageSize) + 1;\n\n  const goToPage = (page: number) => {\n    const newOffset = (page - 1) * pageSize;\n    setOffset(Math.max(0, Math.min(newOffset, Math.max(0, total - 1))));\n  };\n\n  // Handle tab change\n  const handleTabChange = (tab: HistoryCategory) => {\n    setActiveTab(tab);\n  };\n\n  // Error state\n  if (loadError || error) {\n    return (\n      <div className={`cedros-tx-history cedros-tx-history-error ${className}`}>\n        <p className=\"cedros-tx-error\">{loadError || error}</p>\n        <button\n          type=\"button\"\n          className=\"cedros-tx-retry\"\n          onClick={() => {\n            clearError();\n            setLoadError(null);\n            fetchHistory();\n          }}\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  // Loading state (initial load only)\n  if (isLoading && transactions.length === 0) {\n    return (\n      <div className={`cedros-tx-history cedros-tx-history-loading ${className}`}>\n        <span className=\"cedros-tx-loading-indicator\" />\n        <span className=\"cedros-tx-loading-text\">Loading transactions...</span>\n      </div>\n    );\n  }\n\n  // Get count for each tab\n  const getTabCount = (tab: TabConfig): number => {\n    if (tab.txTypes === null) return transactions.length;\n    return transactions.filter((tx) => {\n      const txType = tx.txType || '';\n      return tab.txTypes!.some((type) => txType.toLowerCase().includes(type.toLowerCase()));\n    }).length;\n  };\n\n  return (\n    <div className={`cedros-tx-history ${className}`}>\n      {/* Header */}\n      <div className=\"cedros-tx-header\">\n        <h4 className=\"cedros-tx-title\">Transaction History</h4>\n        <button\n          type=\"button\"\n          className=\"cedros-tx-refresh\"\n          onClick={fetchHistory}\n          disabled={isLoading}\n          title=\"Refresh\"\n        >\n          {isLoading ? '...' : ''}\n        </button>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"cedros-tx-tabs\">\n        {TABS.map((tab) => {\n          const count = getTabCount(tab);\n          const isActive = activeTab === tab.key;\n          return (\n            <button\n              key={tab.key}\n              type=\"button\"\n              className={`cedros-tx-tab ${isActive ? 'cedros-tx-tab-active' : ''}`}\n              onClick={() => handleTabChange(tab.key)}\n            >\n              {tab.label}\n              {count > 0 && <span className=\"cedros-tx-tab-count\">{count}</span>}\n            </button>\n          );\n        })}\n      </div>\n\n      {/* Transaction List */}\n      {filteredTransactions.length === 0 ? (\n        <div className=\"cedros-tx-empty\">\n          <p className=\"cedros-tx-empty-message\">\n            {activeTab === 'all'\n              ? 'No transactions yet.'\n              : `No ${currentTab.label.toLowerCase()} found.`}\n          </p>\n          {activeTab === 'all' && (\n            <p className=\"cedros-tx-empty-hint\">Make a deposit to get started.</p>\n          )}\n        </div>\n      ) : (\n        <>\n          <div className=\"cedros-tx-list\">\n            {filteredTransactions.slice(0, pageSize).map((tx) => {\n              const isPositive = tx.amountLamports >= 0;\n              return (\n                <div\n                  key={tx.id}\n                  className={`cedros-tx-item ${isPositive ? 'cedros-tx-item-positive' : 'cedros-tx-item-negative'}`}\n                  onClick={() => onTransactionClick?.(tx)}\n                  onKeyDown={(e) => {\n                    if (e.key === 'Enter' || e.key === ' ') {\n                      e.preventDefault();\n                      onTransactionClick?.(tx);\n                    }\n                  }}\n                  role={onTransactionClick ? 'button' : undefined}\n                  tabIndex={onTransactionClick ? 0 : undefined}\n                >\n                  {/* Icon */}\n                  <div\n                    className={`cedros-tx-icon ${isPositive ? 'cedros-tx-icon-positive' : 'cedros-tx-icon-negative'}`}\n                  >\n                    {getTypeIcon(tx.txType, isPositive)}\n                  </div>\n\n                  {/* Main content */}\n                  <div className=\"cedros-tx-content\">\n                    <div className=\"cedros-tx-row-main\">\n                      <span className=\"cedros-tx-type\">{getTypeLabel(tx.txType)}</span>\n                      <span\n                        className={`cedros-tx-amount ${isPositive ? 'cedros-tx-amount-positive' : 'cedros-tx-amount-negative'}`}\n                      >\n                        {formatAmount(tx.amountLamports, tx.currency)}\n                      </span>\n                    </div>\n                    <div className=\"cedros-tx-row-details\">\n                      <span className=\"cedros-tx-description\">{tx.description}</span>\n                      <span className=\"cedros-tx-date\">{formatDate(tx.createdAt)}</span>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n\n          {/* Pagination */}\n          {totalPages > 1 && (\n            <div className=\"cedros-tx-pagination\">\n              <button\n                type=\"button\"\n                className=\"cedros-tx-page-btn\"\n                onClick={() => goToPage(currentPage - 1)}\n                disabled={currentPage <= 1}\n              >\n                Previous\n              </button>\n              <span className=\"cedros-tx-page-info\">\n                Page {currentPage} of {totalPages}\n              </span>\n              <button\n                type=\"button\"\n                className=\"cedros-tx-page-btn\"\n                onClick={() => goToPage(currentPage + 1)}\n                disabled={currentPage >= totalPages}\n              >\n                Next\n              </button>\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n","import type { ReactNode } from 'react';\nimport { LoginForm } from '../LoginForm';\n\nexport interface FullPageLayoutProps {\n  /** Brand logo element (e.g., an img or svg) */\n  brandLogo?: ReactNode;\n  /** Brand name displayed next to the logo */\n  brandName?: string;\n  /** Title displayed above the form. @default \"Welcome back\" */\n  title?: string;\n  /** Subtitle displayed below the title. @default \"Login with your Apple or Google account\" */\n  subtitle?: string;\n  /** Terms/legal text displayed below the card */\n  termsText?: ReactNode;\n  /** Called when login/register succeeds */\n  onSuccess?: () => void;\n  /** Default tab for the form. @default \"login\" */\n  defaultTab?: 'login' | 'register';\n  /** Custom content to render instead of LoginForm */\n  children?: ReactNode;\n  /** Additional CSS class for the outer container */\n  className?: string;\n}\n\n/**\n * Full page login layout with centered card on gradient background.\n * Follows shadcn/ui login block pattern.\n *\n * @example\n * ```tsx\n * // Basic usage\n * <FullPageLayout onSuccess={() => navigate('/dashboard')} />\n *\n * // With branding and terms\n * <FullPageLayout\n *   brandLogo={<img src=\"/logo.svg\" alt=\"\" />}\n *   brandName=\"Acme Inc.\"\n *   termsText={<>By clicking continue, you agree to our <a href=\"/terms\">Terms</a>.</>}\n *   onSuccess={handleSuccess}\n * />\n * ```\n */\nexport function FullPageLayout({\n  brandLogo,\n  brandName,\n  title = 'Welcome back',\n  subtitle = 'Login with your Apple or Google account',\n  termsText,\n  onSuccess,\n  defaultTab = 'login',\n  children,\n  className = '',\n}: FullPageLayoutProps) {\n  return (\n    <div className={`cedros-full-page-layout ${className}`}>\n      {/* Brand header */}\n      {(brandLogo || brandName) && (\n        <div className=\"cedros-brand-header\">\n          {brandLogo}\n          {brandName && <span className=\"cedros-brand-name\">{brandName}</span>}\n        </div>\n      )}\n\n      <div className=\"cedros-full-page-card\">\n        <div className=\"cedros-full-page-header\">\n          <h1 className=\"cedros-full-page-title\">{title}</h1>\n          {subtitle && <p className=\"cedros-full-page-subtitle\">{subtitle}</p>}\n        </div>\n        {children ?? <LoginForm defaultTab={defaultTab} onSuccess={onSuccess} />}\n      </div>\n\n      {/* Terms footer */}\n      {termsText && <p className=\"cedros-terms-footer\">{termsText}</p>}\n    </div>\n  );\n}\n","import type { ReactNode } from 'react';\nimport { LoginForm } from '../LoginForm';\n\nexport interface SplitPageLayoutProps {\n  /** Brand name or logo text displayed on the left panel */\n  brandName?: string;\n  /** Brand logo element (replaces default logo) */\n  brandLogo?: ReactNode;\n  /** Tagline displayed below the brand name */\n  tagline?: string;\n  /** Title displayed above the form. @default \"Sign in\" */\n  title?: string;\n  /** Subtitle displayed below the title */\n  subtitle?: string;\n  /** Called when login/register succeeds */\n  onSuccess?: () => void;\n  /** Default tab for the form. @default \"login\" */\n  defaultTab?: 'login' | 'register';\n  /** Custom content to render instead of LoginForm */\n  children?: ReactNode;\n  /** Additional CSS class for the outer container */\n  className?: string;\n}\n\n/**\n * Split page login layout with branding on the left and form on the right.\n *\n * @example\n * ```tsx\n * // Basic usage\n * <SplitPageLayout\n *   brandName=\"MyApp\"\n *   tagline=\"The best app for everything\"\n *   onSuccess={() => navigate('/dashboard')}\n * />\n *\n * // With custom logo\n * <SplitPageLayout\n *   brandLogo={<img src=\"/logo.svg\" alt=\"MyApp\" />}\n *   brandName=\"MyApp\"\n *   tagline=\"Enterprise-grade solutions\"\n *   title=\"Welcome back\"\n *   subtitle=\"Sign in to continue\"\n * />\n * ```\n */\nexport function SplitPageLayout({\n  brandName = 'Your Brand',\n  brandLogo,\n  tagline = 'Your tagline goes here. Make it compelling.',\n  title = 'Sign in',\n  subtitle = 'Enter your credentials to access your account',\n  onSuccess,\n  defaultTab = 'login',\n  children,\n  className = '',\n}: SplitPageLayoutProps) {\n  return (\n    <div className={`cedros-split-page-layout ${className}`}>\n      {/* Left side - Branding */}\n      <div className=\"cedros-split-page-brand\">\n        <div className=\"cedros-split-page-brand-content\">\n          {brandLogo ?? (\n            <div className=\"cedros-split-page-logo\">{brandName.charAt(0).toUpperCase()}</div>\n          )}\n          <h1 className=\"cedros-split-page-brand-name\">{brandName}</h1>\n          {tagline && <p className=\"cedros-split-page-tagline\">{tagline}</p>}\n        </div>\n      </div>\n\n      {/* Right side - Login form */}\n      <div className=\"cedros-split-page-form\">\n        <div className=\"cedros-split-page-form-content\">\n          <h2 className=\"cedros-split-page-title\">{title}</h2>\n          {subtitle && <p className=\"cedros-split-page-subtitle\">{subtitle}</p>}\n          {children ?? <LoginForm defaultTab={defaultTab} onSuccess={onSuccess} />}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import type { Session, ListSessionsResponse, RevokeAllSessionsResponse } from '../types';\nimport { ApiClient, handleApiError } from './apiClient';\n\n/**\n * API client for session management operations\n */\nexport class SessionApiClient {\n  private client: ApiClient;\n\n  constructor(\n    baseUrl: string,\n    timeoutMs?: number,\n    retryAttempts?: number,\n    getAccessToken?: () => string | null\n  ) {\n    this.client = new ApiClient({ baseUrl, timeoutMs, retryAttempts, getAccessToken });\n  }\n\n  /**\n   * List all active sessions for the current user\n   */\n  async listSessions(): Promise<Session[]> {\n    try {\n      const response = await this.client.get<ListSessionsResponse>('/sessions');\n      return response.sessions;\n    } catch (error) {\n      throw handleApiError(error, 'Failed to list sessions');\n    }\n  }\n\n  /**\n   * Revoke all sessions (logout from all devices)\n   */\n  async revokeAllSessions(): Promise<RevokeAllSessionsResponse> {\n    try {\n      return await this.client.delete<RevokeAllSessionsResponse>('/sessions');\n    } catch (error) {\n      throw handleApiError(error, 'Failed to revoke sessions');\n    }\n  }\n}\n","import { useState, useCallback, useMemo, useEffect } from 'react';\nimport type { Session, AuthError, RevokeAllSessionsResponse } from '../types';\nimport { useCedrosLogin } from '../context/useCedrosLogin';\nimport { SessionApiClient } from '../utils/sessionApi';\n\nexport interface UseSessionsReturn {\n  /** List of active sessions */\n  sessions: Session[];\n  /** Loading state */\n  isLoading: boolean;\n  /** Error state */\n  error: AuthError | null;\n  /** Fetch/refresh sessions list */\n  fetchSessions: () => Promise<void>;\n  /** Revoke all sessions (logout everywhere) */\n  revokeAllSessions: () => Promise<RevokeAllSessionsResponse>;\n  /** Number of other active sessions (excluding current) */\n  otherSessionCount: number;\n}\n\n/**\n * Hook for managing user sessions across devices.\n *\n * @example\n * ```tsx\n * function SessionManager() {\n *   const { sessions, isLoading, revokeAllSessions, otherSessionCount } = useSessions();\n *\n *   return (\n *     <div>\n *       <h3>Active Sessions ({sessions.length})</h3>\n *       <ul>\n *         {sessions.map(session => (\n *           <li key={session.id}>\n *             {session.userAgent}\n *             {session.isCurrent && ' (current)'}\n *           </li>\n *         ))}\n *       </ul>\n *       {otherSessionCount > 0 && (\n *         <button onClick={revokeAllSessions}>\n *           Sign out of {otherSessionCount} other device(s)\n *         </button>\n *       )}\n *     </div>\n *   );\n * }\n * ```\n */\nexport function useSessions(): UseSessionsReturn {\n  const { config, authState, _internal } = useCedrosLogin();\n\n  const [sessions, setSessions] = useState<Session[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<AuthError | null>(null);\n\n  const apiClient = useMemo(\n    () =>\n      new SessionApiClient(\n        config.serverUrl,\n        config.requestTimeout,\n        config.retryAttempts,\n        _internal?.getAccessToken\n      ),\n    [config.serverUrl, config.requestTimeout, config.retryAttempts, _internal]\n  );\n\n  const fetchSessions = useCallback(async () => {\n    if (authState !== 'authenticated') {\n      setSessions([]);\n      return;\n    }\n\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const fetchedSessions = await apiClient.listSessions();\n      setSessions(fetchedSessions);\n    } catch (err) {\n      setError(err as AuthError);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [authState, apiClient]);\n\n  // Auto-fetch when authenticated\n  useEffect(() => {\n    if (authState === 'authenticated') {\n      fetchSessions();\n    } else {\n      setSessions([]);\n    }\n  }, [authState, fetchSessions]);\n\n  const revokeAllSessions = useCallback(async (): Promise<RevokeAllSessionsResponse> => {\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const result = await apiClient.revokeAllSessions();\n      // Refresh sessions list after revoking\n      await fetchSessions();\n      return result;\n    } catch (err) {\n      setError(err as AuthError);\n      throw err;\n    } finally {\n      setIsLoading(false);\n    }\n  }, [apiClient, fetchSessions]);\n\n  const otherSessionCount = useMemo(() => {\n    return sessions.filter((s) => !s.isCurrent).length;\n  }, [sessions]);\n\n  return {\n    sessions,\n    isLoading,\n    error,\n    fetchSessions,\n    revokeAllSessions,\n    otherSessionCount,\n  };\n}\n","import { useState, useCallback, useMemo } from 'react';\nimport type { AuthorizeRequest, AuthError } from '../types';\nimport { useCedrosLogin } from '../context/useCedrosLogin';\nimport { OrgApiClient } from '../utils/orgApi';\n\nexport interface AuthorizationCheck {\n  allowed: boolean;\n  reason?: string;\n  isLoading: boolean;\n  error: AuthError | null;\n}\n\nexport interface UseAuthorizeReturn {\n  /**\n   * Check if an action is authorized server-side.\n   * Use this for dynamic authorization checks.\n   */\n  authorize: (request: AuthorizeRequest) => Promise<boolean>;\n  /**\n   * Authorization state for the last check\n   */\n  lastCheck: AuthorizationCheck;\n  /**\n   * Clear the last authorization check\n   */\n  clearCheck: () => void;\n  /**\n   * Check authorization and return detailed result\n   */\n  checkAuthorization: (request: AuthorizeRequest) => Promise<AuthorizationCheck>;\n}\n\n/**\n * Hook for server-side authorization checks.\n *\n * This hook allows you to check if a specific action is authorized\n * by making a request to the server's /authorize endpoint.\n *\n * For simple permission checks based on the user's role, use `useOrgs().hasPermission()` instead.\n *\n * @example\n * ```tsx\n * function DeleteButton({ resourceId }: { resourceId: string }) {\n *   const { authorize, lastCheck } = useAuthorize();\n *   const { activeOrg } = useOrgs();\n *\n *   const handleDelete = async () => {\n *     const allowed = await authorize({\n *       orgId: activeOrg?.id!,\n *       action: 'delete',\n *       resource: 'document',\n *       resourceId,\n *     });\n *\n *     if (allowed) {\n *       // Proceed with delete\n *     }\n *   };\n *\n *   return (\n *     <button onClick={handleDelete} disabled={lastCheck.isLoading}>\n *       Delete\n *     </button>\n *   );\n * }\n * ```\n */\nexport function useAuthorize(): UseAuthorizeReturn {\n  const { config, _internal } = useCedrosLogin();\n\n  const [lastCheck, setLastCheck] = useState<AuthorizationCheck>({\n    allowed: false,\n    reason: undefined,\n    isLoading: false,\n    error: null,\n  });\n\n  const apiClient = useMemo(\n    () =>\n      new OrgApiClient(\n        config.serverUrl,\n        config.requestTimeout,\n        config.retryAttempts,\n        _internal?.getAccessToken\n      ),\n    [config.serverUrl, config.requestTimeout, config.retryAttempts, _internal]\n  );\n\n  const checkAuthorization = useCallback(\n    async (request: AuthorizeRequest): Promise<AuthorizationCheck> => {\n      setLastCheck((prev) => ({ ...prev, isLoading: true, error: null }));\n\n      try {\n        const response = await apiClient.authorize(request);\n        const result: AuthorizationCheck = {\n          allowed: response.allowed,\n          reason: response.reason,\n          isLoading: false,\n          error: null,\n        };\n        setLastCheck(result);\n        return result;\n      } catch (err) {\n        const result: AuthorizationCheck = {\n          allowed: false,\n          reason: undefined,\n          isLoading: false,\n          error: err as AuthError,\n        };\n        setLastCheck(result);\n        return result;\n      }\n    },\n    [apiClient]\n  );\n\n  const authorize = useCallback(\n    async (request: AuthorizeRequest): Promise<boolean> => {\n      const result = await checkAuthorization(request);\n      return result.allowed;\n    },\n    [checkAuthorization]\n  );\n\n  const clearCheck = useCallback(() => {\n    setLastCheck({\n      allowed: false,\n      reason: undefined,\n      isLoading: false,\n      error: null,\n    });\n  }, []);\n\n  return {\n    authorize,\n    lastCheck,\n    clearCheck,\n    checkAuthorization,\n  };\n}\n","/**\n * Hook for pending wallet recovery management\n *\n * After wallet enrollment, if recovery mode is enabled, the server stores\n * recovery data temporarily. This hook fetches that data and allows the\n * user to acknowledge receipt (after which the data is deleted from server).\n */\n\nimport { useState, useCallback, useMemo, useEffect } from 'react';\nimport { useCedrosLoginOptional } from '../context/useCedrosLogin';\nimport { ApiClient, handleApiError } from '../utils/apiClient';\nimport type {\n  PendingWalletRecoveryResponse,\n  AcknowledgeRecoveryRequest,\n  MessageResponse,\n} from '../types/wallet';\n\nexport interface UsePendingRecoveryReturn {\n  /** Whether there is pending recovery data */\n  hasPendingRecovery: boolean;\n  /** Recovery type: 'share_c' or 'full_seed' */\n  recoveryType: string | null;\n  /** Recovery phrase (base64-encoded seed) */\n  recoveryPhrase: string | null;\n  /** When the recovery data expires */\n  expiresAt: Date | null;\n  /** Fetch pending recovery data from server */\n  fetchPendingRecovery: () => Promise<void>;\n  /** Acknowledge that user has saved the recovery phrase (deletes from server) */\n  acknowledgeRecovery: () => Promise<void>;\n  /** Whether request is in progress */\n  isLoading: boolean;\n  /** Error from last request */\n  error: string | null;\n  /** Clear error */\n  clearError: () => void;\n}\n\n/**\n * Hook for managing pending wallet recovery data\n *\n * Use this after wallet enrollment to show the user their recovery phrase\n * and allow them to acknowledge receipt.\n */\nexport function usePendingRecovery(): UsePendingRecoveryReturn {\n  const context = useCedrosLoginOptional();\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [pendingData, setPendingData] = useState<PendingWalletRecoveryResponse | null>(null);\n\n  const apiClient = useMemo(() => {\n    if (!context) return null;\n    return new ApiClient({\n      baseUrl: context.config.serverUrl,\n      timeoutMs: context.config.requestTimeout,\n      retryAttempts: context.config.retryAttempts,\n      getAccessToken: context._internal?.getAccessToken,\n    });\n  }, [context]);\n\n  const fetchPendingRecovery = useCallback(async (): Promise<void> => {\n    if (!apiClient) {\n      throw new Error('usePendingRecovery must be used within a CedrosLoginProvider');\n    }\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const data = await apiClient.get<PendingWalletRecoveryResponse>('/wallet/pending-recovery');\n      setPendingData(data);\n    } catch (err) {\n      const apiError = handleApiError(err, 'Failed to fetch pending recovery');\n      setError(apiError.message);\n      throw apiError;\n    } finally {\n      setIsLoading(false);\n    }\n  }, [apiClient]);\n\n  const acknowledgeRecovery = useCallback(async (): Promise<void> => {\n    if (!apiClient) {\n      throw new Error('usePendingRecovery must be used within a CedrosLoginProvider');\n    }\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const request: AcknowledgeRecoveryRequest = { confirmed: true };\n      await apiClient.post<MessageResponse>('/wallet/acknowledge-recovery', request);\n      // Clear pending data after successful acknowledgment\n      setPendingData(null);\n    } catch (err) {\n      const apiError = handleApiError(err, 'Failed to acknowledge recovery');\n      setError(apiError.message);\n      throw apiError;\n    } finally {\n      setIsLoading(false);\n    }\n  }, [apiClient]);\n\n  const clearError = useCallback(() => setError(null), []);\n\n  // Auto-fetch on mount if authenticated\n  useEffect(() => {\n    if (apiClient && context?.authState === 'authenticated') {\n      fetchPendingRecovery().catch(() => {\n        // Silently ignore errors on auto-fetch\n      });\n    }\n  }, [apiClient, context?.authState, fetchPendingRecovery]);\n\n  return {\n    hasPendingRecovery: pendingData?.hasPendingRecovery ?? false,\n    recoveryType: pendingData?.recoveryType ?? null,\n    recoveryPhrase: pendingData?.recoveryPhrase ?? null,\n    expiresAt: pendingData?.expiresAt ? new Date(pendingData.expiresAt) : null,\n    fetchPendingRecovery,\n    acknowledgeRecovery,\n    isLoading,\n    error,\n    clearError,\n  };\n}\n","/**\n * Unified transaction signing hook\n *\n * Handles signing for both wallet types:\n * - External Solana wallet: Delegates to wallet adapter (app-provided callback)\n * - SSS embedded wallet: Uses server-side signing\n *\n * Usage:\n * ```tsx\n * const { signTransaction, signingMethod, canSign } = useTransactionSigning({\n *   // For external wallet users, provide your wallet adapter's signTransaction\n *   onExternalSign: async (tx) => walletAdapter.signTransaction(tx),\n * });\n *\n * // Sign a transaction (automatically routes to correct method)\n * const signature = await signTransaction(txBytes, credential);\n * ```\n */\n\nimport { useCallback, useMemo } from 'react';\nimport { useWallet } from './useWallet';\nimport { useWalletSigning } from './useWalletSigning';\nimport type { UnlockCredential } from '../types/wallet';\n\n/** Signing method in use */\nexport type SigningMethod = 'external' | 'sss' | 'none';\n\n/** Options for external wallet signing */\nexport interface ExternalSignOptions {\n  /**\n   * Callback to sign transaction with external wallet adapter.\n   * Only called when user has external Solana wallet.\n   *\n   * @param transaction - Transaction bytes to sign\n   * @returns Signature bytes (64 bytes Ed25519)\n   */\n  onExternalSign?: (transaction: Uint8Array) => Promise<Uint8Array>;\n}\n\n/** Return type for useTransactionSigning hook */\nexport interface UseTransactionSigningReturn {\n  /** Sign a transaction (routes to appropriate method) */\n  signTransaction: (transaction: Uint8Array, credential?: UnlockCredential) => Promise<Uint8Array>;\n  /** Which signing method is available */\n  signingMethod: SigningMethod;\n  /** Whether user can sign transactions */\n  canSign: boolean;\n  /** Whether signing is in progress */\n  isSigning: boolean;\n  /** Solana public key (from either wallet type) */\n  publicKey: string | null;\n  /** Whether user has external Solana wallet */\n  hasExternalWallet: boolean;\n  /** Whether SSS wallet is enrolled */\n  hasSssWallet: boolean;\n  /** Whether SSS wallet is unlocked (for session-based signing) */\n  isSssUnlocked: boolean;\n  /** Error from last signing attempt */\n  error: string | null;\n  /** Clear error */\n  clearError: () => void;\n}\n\n/**\n * Unified transaction signing hook\n *\n * Automatically routes signing requests to the appropriate method:\n * - External wallet: Uses provided callback\n * - SSS wallet: Uses server-side signing\n */\nexport function useTransactionSigning(\n  options: ExternalSignOptions = {}\n): UseTransactionSigningReturn {\n  const { onExternalSign } = options;\n\n  const { solanaPubkey, hasExternalWallet, status, isUnlocked: isSssUnlocked } = useWallet();\n\n  const {\n    signTransaction: sssSignTransaction,\n    isSigning: isSssSigning,\n    error: sssError,\n    clearError: clearSssError,\n  } = useWalletSigning();\n\n  // Determine which signing method is available\n  const signingMethod = useMemo((): SigningMethod => {\n    if (hasExternalWallet && onExternalSign) {\n      return 'external';\n    }\n    if (status === 'enrolled_locked' || status === 'enrolled_unlocked') {\n      return 'sss';\n    }\n    return 'none';\n  }, [hasExternalWallet, onExternalSign, status]);\n\n  // Whether user can sign\n  const canSign = signingMethod !== 'none';\n  const hasSssWallet = status === 'enrolled_locked' || status === 'enrolled_unlocked';\n\n  // Unified sign function\n  const signTransaction = useCallback(\n    async (transaction: Uint8Array, credential?: UnlockCredential): Promise<Uint8Array> => {\n      if (signingMethod === 'external') {\n        if (!onExternalSign) {\n          throw new Error('External wallet signing callback not provided');\n        }\n        return onExternalSign(transaction);\n      }\n\n      if (signingMethod === 'sss') {\n        if (!credential && !isSssUnlocked) {\n          throw new Error(\n            'Credential required for signing. Unlock wallet first or provide credential.'\n          );\n        }\n        if (credential) {\n          return sssSignTransaction(transaction, credential);\n        }\n        // If unlocked, credential is optional (server uses cached key)\n        return sssSignTransaction(transaction);\n      }\n\n      throw new Error('No signing method available. Enroll a wallet first.');\n    },\n    [signingMethod, onExternalSign, isSssUnlocked, sssSignTransaction]\n  );\n\n  return {\n    signTransaction,\n    signingMethod,\n    canSign,\n    isSigning: isSssSigning,\n    publicKey: solanaPubkey,\n    hasExternalWallet,\n    hasSssWallet,\n    isSssUnlocked,\n    error: sssError,\n    clearError: clearSssError,\n  };\n}\n","import { createContext } from 'react';\nimport type { Translations } from './translations';\n\nexport interface I18nContextValue {\n  t: Translations;\n  locale: string;\n}\n\nexport const I18nContext = createContext<I18nContextValue | null>(null);\n","//! Default English translations for the Cedros Login UI\n\nexport interface Translations {\n  // Auth forms\n  auth: {\n    email: string;\n    password: string;\n    confirmPassword: string;\n    name: string;\n    optional: string;\n    createPassword: string;\n    confirmYourPassword: string;\n    emailPlaceholder: string;\n    namePlaceholder: string;\n  };\n  // Buttons\n  buttons: {\n    signIn: string;\n    signUp: string;\n    signOut: string;\n    createAccount: string;\n    continueWithGoogle: string;\n    continueWithSolana: string;\n    forgotPassword: string;\n    resetPassword: string;\n    sendVerification: string;\n  };\n  // Messages\n  messages: {\n    signingIn: string;\n    signingUp: string;\n    creatingAccount: string;\n    connectingWallet: string;\n    verifyingSignature: string;\n    passwordsDoNotMatch: string;\n    alreadyHaveAccount: string;\n    dontHaveAccount: string;\n    orContinueWith: string;\n  };\n  // Errors\n  errors: {\n    invalidCredentials: string;\n    emailExists: string;\n    invalidEmail: string;\n    weakPassword: string;\n    networkError: string;\n    unknownError: string;\n    walletNotFound: string;\n    signatureRejected: string;\n    challengeExpired: string;\n  };\n  // Password validation\n  passwordValidation: {\n    minLength: string;\n    uppercase: string;\n    lowercase: string;\n    number: string;\n    special: string;\n    weak: string;\n    fair: string;\n    good: string;\n    strong: string;\n  };\n}\n\nexport const defaultTranslations: Translations = {\n  auth: {\n    email: 'Email',\n    password: 'Password',\n    confirmPassword: 'Confirm Password',\n    name: 'Name',\n    optional: '(optional)',\n    createPassword: 'Create a password',\n    confirmYourPassword: 'Confirm your password',\n    emailPlaceholder: 'you@example.com',\n    namePlaceholder: 'Your name',\n  },\n  buttons: {\n    signIn: 'Sign in',\n    signUp: 'Sign up',\n    signOut: 'Sign out',\n    createAccount: 'Create account',\n    continueWithGoogle: 'Continue with Google',\n    continueWithSolana: 'Connect Wallet',\n    forgotPassword: 'Forgot password?',\n    resetPassword: 'Reset password',\n    sendVerification: 'Send verification email',\n  },\n  messages: {\n    signingIn: 'Signing in...',\n    signingUp: 'Signing up...',\n    creatingAccount: 'Creating account...',\n    connectingWallet: 'Connecting wallet...',\n    verifyingSignature: 'Verifying signature...',\n    passwordsDoNotMatch: 'Passwords do not match',\n    alreadyHaveAccount: 'Already have an account?',\n    dontHaveAccount: \"Don't have an account?\",\n    orContinueWith: 'Or continue with',\n  },\n  errors: {\n    invalidCredentials: 'Invalid email or password',\n    emailExists: 'An account with this email already exists',\n    invalidEmail: 'Please enter a valid email address',\n    weakPassword: 'Password does not meet requirements',\n    networkError: 'Network error. Please try again.',\n    unknownError: 'An error occurred. Please try again.',\n    walletNotFound: 'No wallet found. Please install a Solana wallet.',\n    signatureRejected: 'Signature request was rejected',\n    challengeExpired: 'Challenge expired. Please try again.',\n  },\n  passwordValidation: {\n    minLength: 'At least 10 characters',\n    uppercase: 'At least 1 uppercase letter',\n    lowercase: 'At least 1 lowercase letter',\n    number: 'At least 1 number',\n    special: 'At least 1 special character',\n    weak: 'Weak',\n    fair: 'Fair',\n    good: 'Good',\n    strong: 'Strong',\n  },\n};\n\n/**\n * Deep merge translations, allowing partial overrides\n */\nexport function mergeTranslations(\n  base: Translations,\n  overrides: DeepPartial<Translations>\n): Translations {\n  return deepMerge(base, overrides) as Translations;\n}\n\ntype DeepPartial<T> = {\n  [P in keyof T]?: T[P] extends object ? DeepPartial<T[P]> : T[P];\n};\n\nfunction deepMerge<T extends object>(base: T, overrides: DeepPartial<T>): T {\n  const result = { ...base };\n\n  for (const key in overrides) {\n    if (Object.prototype.hasOwnProperty.call(overrides, key)) {\n      const baseValue = base[key as keyof T];\n      const overrideValue = overrides[key as keyof typeof overrides];\n\n      if (\n        typeof baseValue === 'object' &&\n        baseValue !== null &&\n        typeof overrideValue === 'object' &&\n        overrideValue !== null\n      ) {\n        (result as Record<string, unknown>)[key] = deepMerge(\n          baseValue as object,\n          overrideValue as DeepPartial<object>\n        );\n      } else if (overrideValue !== undefined) {\n        (result as Record<string, unknown>)[key] = overrideValue;\n      }\n    }\n  }\n\n  return result;\n}\n","import { useMemo, type ReactNode } from 'react';\nimport { I18nContext } from './context';\nimport { defaultTranslations, mergeTranslations, type Translations } from './translations';\n\ntype DeepPartial<T> = {\n  [P in keyof T]?: T[P] extends object ? DeepPartial<T[P]> : T[P];\n};\n\nexport interface I18nProviderProps {\n  children: ReactNode;\n  locale?: string;\n  translations?: DeepPartial<Translations>;\n}\n\n/**\n * Provider for internationalization support.\n * Allows overriding default English translations with custom strings.\n */\nexport function I18nProvider({\n  children,\n  locale = 'en',\n  translations: customTranslations,\n}: I18nProviderProps) {\n  const value = useMemo(() => {\n    const t = customTranslations\n      ? mergeTranslations(defaultTranslations, customTranslations)\n      : defaultTranslations;\n\n    return { t, locale };\n  }, [customTranslations, locale]);\n\n  return <I18nContext.Provider value={value}>{children}</I18nContext.Provider>;\n}\n","import { useContext } from 'react';\nimport { I18nContext } from './context';\nimport { defaultTranslations, type Translations } from './translations';\n\n/**\n * Hook to access translations\n */\nexport function useTranslations(): Translations {\n  const context = useContext(I18nContext);\n  return context?.t ?? defaultTranslations;\n}\n\n/**\n * Hook to access current locale\n */\nexport function useLocale(): string {\n  const context = useContext(I18nContext);\n  return context?.locale ?? 'en';\n}\n"],"names":["isBytes","a","isArrayOf","isString","arr","item","afn","input","astr","label","anumber","n","aArr","astrArr","anumArr","chain","args","id","wrap","b","c","encode","x","decode","alphabet","letters","lettersA","len","indexes","l","i","digits","letter","join","separator","from","to","padding","bits","chr","data","end","convertRadix","pos","res","d","dlen","carry","done","digit","fromCarry","digitBase","div","rounded","gcd","radix2carry","powers","convertRadix2","max","mask","pow","radix","num","_256","bytes","radix2","revPadding","checksum","fn","sum","payload","oldChecksum","newChecksum","utils","isJapanese","wordlist","nfkd","str","normalize","norm","words","aentropy","ent","abytes","calcChecksum","entropy","bitsLeft","sha256","getCoder","baseUtils","mnemonicToEntropy","mnemonic","entropyToMnemonic","validateMnemonic","MNEMONIC_WORD_COUNT","shareToMnemonic","share","mnemonicToShare","toShamirShare","seedToMnemonic","seed","mnemonicToSeed","toSeed","isValidMnemonic","isValidWord","word","getWordSuggestions","prefix","limit","normalizedPrefix","formatMnemonicForDisplay","groups","parseMnemonicInput","w","LoginButton","className","variant","size","children","menuItems","hideSignOut","user","isAuthenticated","isLoading","openLoginModal","logout","useAuth","isMenuOpen","setIsMenuOpen","useState","focusedIndex","setFocusedIndex","menuRef","useRef","buttonRef","allMenuItems","useMemo","useEffect","handleClickOutside","e","handleEscape","handleMenuKeyDown","useCallback","toggleMenu","open","sizeClasses","variantClasses","jsx","LoadingSpinner","displayName","sanitizedPicture","sanitizeImageUrl","jsxs","index","usePasswordReset","config","useCedrosLogin","setIsLoading","isSuccess","setIsSuccess","error","setError","apiClient","ApiClient","checkLimit","getRemainingAttempts","useRateLimiter","forgotPassword","email","validateEmail","validationError","err","rateLimitError","authError","handleApiError","resetPassword","token","newPassword","clearError","reset","ForgotPasswordForm","onSuccess","onCancel","setEmail","emailId","useId","handleSubmit","ErrorMessage","Fragment","scriptLoader","resolve","reject","existingScript","cb","script","useAppleAuth","_internal","isInitialized","setIsInitialized","configRef","isMounted","initializeAppleSignIn","signIn","response","idToken","userName","isAppleDevice","userAgent","platform","AppleLoginButton","onError","disabled","hideOnNonApple","isApple","handleClick","assert","condition","message","normalizeBase64Url","base64UrlToArrayBuffer","b64url","base64","padded","binary","arrayBufferToBase64Url","buffer","mapCredentialDescriptor","desc","parseCreationOptionsFromServer","options","publicKey","rp","exclude","pubKeyCredParams","p","parseRequestOptionsFromServer","allow","credentialToServerJson","cred","rawId","responseJson","att","asr","isWebAuthnAvailable","hostname","isLocalhost","mapWebAuthnDomError","name","useWebAuthn","isSupported","authenticatePasskey","params","optionsResponse","assertion","registerPasskey","created","result","PasskeyLoginButton","isDisabled","PasskeyIcon","TABS","LoginForm","defaultTab","activeTab","setActiveTab","viewState","setViewState","hasWallets","setHasWallets","detectSolanaWallets","updateWallets","forgotPasswordMode","handleTabKeyDown","currentIndex","newIndex","newTab","features","showEmail","showGoogle","showApple","showSolana","showPasskey","showDivider","GoogleLoginButton","SolanaLoginButton","EmailLoginForm","EmailRegisterForm","ErrorBoundary","Component","props","errorInfo","hasError","fallback","showDetails","LoginModal","title","isModalOpen","closeModal","modalRef","previousActiveElement","closeModalRef","handleKeyDown","focusableElements","firstElement","lastElement","previousOverflow","handleBackdropClick","ResetPasswordForm","onLoginClick","password","setPassword","confirmPassword","setConfirmPassword","validation","setValidation","passwordsMatch","isValid","PasswordInput","validatePassword","OrgAvatar","org","sanitizedLogoUrl","sizeClass","imageClassName","placeholderClassName","OrgSelector","orgs","activeOrg","onSelect","onCreateClick","placeholder","isOpen","setIsOpen","dropdownRef","event","handleSelect","orgId","handleCreateClick","toggleDropdown","prev","RoleBadge","ChevronIcon","CheckIcon","PlusIcon","role","CloseIcon","OrgListView","CreateOrgForm","onSubmit","setName","slug","setSlug","formError","setFormError","handleNameChange","value","generatedSlug","OrgSwitcher","onClose","onCreate","OrgSwitcherModal","viewMode","setViewMode","previousFocusRef","handleCreate","ROLE_OPTIONS","MemberList","members","currentUserId","canManage","canChangeRoles","onUpdateRole","onRemove","member","MemberRow","isCurrentUser","isUpdating","setIsUpdating","selectedRole","setSelectedRole","handleRoleChange","newRole","handleRemove","isOwner","canModify","MemberAvatar","formatDate","initial","dateString","DEFAULT_ROLES","InviteForm","availableRoles","defaultRole","setRole","success","setSuccess","successTimerRef","isMountedRef","trimmedEmail","r","InviteList","invites","onResend","invite","InviteItem","resendSuccess","setResendSuccess","resendTimerRef","isExpired","handleCancel","handleResend","formatRelativeTime","date","now","diffMs","diffDays","SessionList","sessions","onRevokeAll","isRevoking","setIsRevoking","revokeSuccess","setRevokeSuccess","revokeTimerRef","otherSessionCount","s","handleRevokeAll","currentOtherCount","session","SessionItem","browserInfo","parseUserAgent","isExpiringSoon","isSessionExpiringSoon","DeviceIcon","browser","os","diffMins","diffHours","expiresAt","expires","hourInMs","RecoveryPhraseDisplay","onConfirm","copied","setCopied","confirmed","setConfirmed","copyTimerRef","wordGroups","handleCopy","handleConfirm","group","groupIndex","wordIndex","number","RecoveryPhraseInput","isSubmitting","setWords","activeIndex","setActiveIndex","suggestions","setSuggestions","setValidationError","inputId","suggestionsTimerRef","handleWordChange","newWords","newSuggestions","handleWordFocus","handleWordBlur","handleSuggestionClick","suggestion","handlePaste","pastedText","parsedWords","invalidWords","displayError","_","CapabilityWarning","capabilities","getMissingCapabilitiesMessage","getBrowserSupportInfo","VALID_RECOVERY_MODES","normalizeRecoveryMode","mode","DEFAULT_RETURN","useWalletDiscovery","context","useCedrosLoginOptional","walletConfig","setWalletConfig","fetchConfig","useWalletEnrollment","enroll","useWalletMaterial","recoveryMode","state","setState","isEnrolling","setIsEnrolling","sensitiveData","cleanup","wipeAll","doEnrollment","authMethod","encryptionKey","kdfSalt","prfSalt","generateSeed","shareA","shareB","shareC","splitSecret","encryptedA","aesGcmEncryptToBase64","toEncryptionKey","getPublicKeyFromSeed","solanaPubkey","publicKeyToBase58","request","uint8ArrayToBase64","DEFAULT_KDF_PARAMS","recoveryPhrase","startEnrollmentWithPassword","salt","generateArgon2Salt","key","argon2DeriveInWorker","startEnrollmentWithPasskey","generatePrfSalt","prfSaltBase64","prfOutput","userIdBytes","registerPasskeyWithPrf","authenticateWithDiscoverablePrf","deriveKeyFromPrf","confirmRecoveryPhrase","cancel","WalletEnrollment","onComplete","forceAuthMethod","getDefaultAuthMethod","setAuthMethod","passwordError","setPasswordError","handlePasswordSubmit","handlePasskeySubmit","handleRecoveryConfirm","useWalletSigning","apiSignTransaction","isSigning","setIsSigning","signTransaction","transaction","credential","msg","toCredentialRequest","base64ToUint8Array","usePasskeySigning","getMaterial","isAuthenticating","setIsAuthenticating","getPasskeyCredential","material","PasskeyPrompt","onPrompt","onRetry","description","handlePrompt","handleRetry","defaultTitle","defaultDescription","ErrorIcon","WalletUnlock","onUnlock","showCancel","propAuthMethod","unlock","phase","setPhase","setCredential","isPasswordAuth","isPasskeyAuth","startUnlock","unlockCredential","handlePasskeyUnlock","passkeyCredential","isProcessing","renderContent","LockIcon","SuccessIcon","useWalletRecovery","recover","getShareBForRecovery","isRecovering","setIsRecovering","startRecovery","method","shareCBase64","combineShares","prfResult","WalletRecovery","defaultAuthMethod","phraseValidated","setPhraseValidated","confirmCredential","setConfirmCredential","credentialError","setCredentialError","handlePhraseSubmit","submittedWords","handleCredentialSubmit","handleBack","handleComplete","WalletAddressRow","address","showCopy","showExplorerLink","allowReveal","copyError","setCopyError","revealFull","setRevealFull","network","explorerHref","base","isTruncatable","displayAddress","v","WalletStatus","controlledStatus","controlledPubkey","_onLock","onEnroll","onRecover","showActions","compact","isControlled","wallet","useWallet","status","refresh","statusConfig","getStatusConfig","truncatePubkey","StatusIcon","pubkey","WalletManager","view","setView","header","handleBackToStatus","handleEnrollComplete","handleUnlockComplete","handleRecoverComplete","SystemSettingsApiClient","baseUrl","timeoutMs","retryAttempts","getAccessToken","settings","useSystemSettings","authState","setSettings","requestIdRef","apiClientRef","fetchSettings","requestId","updateSettings","updates","getValue","categorySettings","found","secondsToDuration","totalSeconds","days","hours","minutes","seconds","formatDuration","parts","SETTING_METADATA","CATEGORY_METADATA","SystemSettings","showDescriptions","onSave","edits","setEdits","saveError","setSaveError","saveSuccess","setSaveSuccess","timer","handleChange","handleSave","handleReset","hasChanges","changeCount","categories","category","SettingsSection","showDescription","onChange","meta","setting","SettingRow","editValue","currentValue","hasChange","warning","numValue","above","below","DurationInput","PercentageInput","SelectInput","NumberInput","TokenListInput","TokenSymbolListInput","presets","min","displayValue","handlePresetChange","handleCustomChange","newValue","preset","step","handleSliderChange","handlePresetClick","presetValue","unit","isCustomValue","handleSelectChange","PRESET_TOKEN_SYMBOLS","tokens","updateTokens","updated","addToken","updateToken","field","val","removeToken","symbol","symbols","addSymbol","removeSymbol","isSelected","OrgApiClient","ACTIVE_ORG_KEY","safeGetItem","safeSetItem","useOrgs","hasStorage","setOrgs","setActiveOrg","permissions","setPermissions","loadPermissions","fetchOrgs","fetchedOrgs","savedOrgId","selectedOrg","switchOrg","o","createOrg","newOrg","updateOrg","updatedOrg","deleteOrg","hasPermission","permission","MemberApiClient","offset","userId","useMembers","setMembers","total","setTotal","fetchedOrgIdRef","fetchMembers","updateMemberRole","removeMember","InviteApiClient","inviteId","useInvites","setInvites","fetchInvites","createInvite","cancelInvite","resendInvite","acceptInvite","useCredits","getBalance","apiError","getAllBalances","getHistory","queryString","url","useAdminDeposits","listDeposits","query","getStats","listInPrivacyPeriod","listPendingWithdrawals","processWithdrawal","sessionId","processAllWithdrawals","getPrivacyStatus","getCreditStats","AdminDepositStats","refreshInterval","onLoad","stats","setStats","loadError","setLoadError","fetchStats","interval","getStatusLabel","getStatusClass","formatAmount","lamports","truncateId","AdminDepositList","statusFilter","pageSize","onDepositClick","deposits","setDeposits","setOffset","fetchDeposits","totalPages","currentPage","goToPage","page","newOffset","deposit","getTimeElapsed","isWithinPrivacyPeriod","withdrawalAvailableAt","AdminWithdrawalQueue","onItemClick","onWithdrawalProcessed","onAllProcessed","items","setItems","processingId","setProcessingId","processingAll","setProcessingAll","processResult","setProcessResult","earlyWithdrawalItem","setEarlyWithdrawalItem","fetchItems","handleProcessSingle","force","handleProcessAll","withinPrivacyPeriod","getTimeRemaining","remainingHours","remainingMins","AdminPrivacyPeriodDeposits","truncateSignature","sig","AdminWithdrawalHistory","PrivacySystemStatus","setStatus","fetchStatus","isPartialWithdrawalEnabled","AdminUserApiClient","isAdmin","useAdminUsers","users","setUsers","lastParams","setLastParams","listUsers","getUser","setSystemAdmin","updateUser","deleteUser","forcePasswordReset","adjustCredits","amount","reason","getUserDeposits","getUserCredits","getUserWithdrawalHistory","AdminUserList","onUserClick","onEditUser","onAdjustCredits","togglingId","setTogglingId","actionInProgress","setActionInProgress","fetchUsers","handleToggleAdmin","action","handleDelete","handlePasswordReset","isToggling","formatDateTime","formatSol","AdminUserDetail","onBack","setUser","credits","setCredits","userError","setUserError","creditsError","setCreditsError","depositsError","setDepositsError","depositsOffset","setDepositsOffset","transactionsOffset","setTransactionsOffset","fetchUser","userData","depositsData","fetchCredits","creditsData","depositsTotalPages","depositsCurrentPage","transactionsTotalPages","transactionsCurrentPage","goToDepositsPage","goToTransactionsPage","DepositsTab","TransactionsTab","onPageChange","Pagination","transactions","tx","Icons","ALL_SECTIONS","CedrosAdminDashboard","sections","defaultSection","onSectionChange","activeSection","setActiveSection","orgsLoading","handleSectionChange","section","enabledSections","currentSection","OverviewSection","UsersSection","MembersSection","InvitesSection","DepositsSection","WithdrawalsSection","balanceDisplay","setBalanceDisplay","selectedUser","setSelectedUser","canInvite","canCancel","setStatusFilter","canPromise","toSJISFunction","CODEWORDS_COUNT","version","f","kanji","exports","fromString","string","level","defaultValue","BitBuffer","bufIndex","length","bit","bitBuffer","BitMatrix","row","col","reserved","bitMatrix","getSymbolSize","require$$0","posCount","intervals","positions","coords","posLength","j","FINDER_PATTERN_SIZE","finderPattern","PenaltyScores","points","sameCountCol","sameCountRow","lastCol","lastRow","module","last","bitsCol","bitsRow","darkCount","modulesCount","getMaskAt","maskPattern","pattern","setupFormatFunc","numPatterns","bestPattern","lowerPenalty","penalty","ECLevel","EC_BLOCKS_TABLE","EC_CODEWORDS_TABLE","errorCorrectionCode","errorCorrectionLevel","EXP_TABLE","LOG_TABLE","galoisField","y","GF","p1","p2","coeff","divident","divisor","degree","poly","Polynomial","ReedSolomonEncoder","paddedData","remainder","start","buff","reedSolomonEncoder","versionCheck","numeric","alphanumeric","byte","regex","TEST_KANJI","TEST_NUMERIC","TEST_ALPHANUMERIC","VersionCheck","Regex","require$$1","dataStr","Utils","ECCode","require$$2","Mode","require$$3","require$$4","G18","G18_BCH","getBestVersionForDataLength","currentVersion","getReservedBitsCount","getTotalBitsFromDataArray","segments","totalBits","reservedBits","getBestVersionForMixedData","totalCodewords","ecTotalCodewords","dataTotalCodewordsBits","usableBits","seg","ecl","G15","G15_MASK","G15_BCH","formatInfo","NumericData","remainingNum","numericData","ALPHA_NUM_CHARS","AlphanumericData","alphanumericData","ByteData","byteData","KanjiData","kanjiData","dijkstra","graph","predecessors","costs","closest","cost_of_s_to_u","adjacent_nodes","cost_of_e","cost_of_s_to_u_plus_cost_of_e","cost_of_s_to_v","first_visit","nodes","u","opts","T","t","cost","require$$5","require$$6","require$$7","getStringByteLength","getSegments","getSegmentsFromString","numSegs","alphaNumSegs","byteSegs","kanjiSegs","s1","s2","obj","getSegmentBitsLength","mergeSegments","segs","acc","curr","prevSeg","buildNodes","buildGraph","table","prevNodeIds","nodeGroup","currentNodeIds","node","prevNodeId","buildSingleSegment","modesHint","bestMode","array","path","optimizedSegs","AlignmentPattern","FinderPattern","MaskPattern","require$$8","Version","require$$9","FormatInfo","require$$10","require$$11","Segments","require$$12","setupFinderPattern","matrix","setupTimingPattern","setupAlignmentPattern","setupVersionInfo","mod","setupFormatInfo","setupData","inc","bitIndex","byteIndex","dark","createData","remainingByte","createCodewords","dataTotalCodewords","ecTotalBlocks","blocksInGroup2","blocksInGroup1","totalCodewordsInGroup1","dataCodewordsInGroup1","dataCodewordsInGroup2","ecCount","rs","dcData","ecData","maxDataSize","dataSize","createSymbol","estimatedVersion","rawSegments","bestVersion","dataBits","moduleCount","modules","qrcode","hex2rgba","hex","hexCode","hexValue","margin","width","scale","qrSize","imgData","qr","symbolSize","scaledMargin","palette","posDst","pxColor","iSrc","jSrc","clearCanvas","ctx","canvas","getCanvasElement","qrData","canvasEl","image","type","rendererOpts","getColorAttrib","color","attrib","alpha","svgCmd","cmd","qrToPath","moveBy","newRow","lineLength","svgTag","qrcodesize","bg","viewBox","QRCode","CanvasRenderer","SvgRenderer","renderCanvas","renderFunc","text","argsNum","isLastArgCb","QrCode","alt","canvasRef","useTotp","setupState","setSetupState","setSetupData","getStatus","beginSetup","enableTotp","code","disableTotp","regenerateBackupCodes","TotpSetup","setStep","verifyCode","setVerifyCode","copiedSecret","setCopiedSecret","savedBackupCodes","setSavedBackupCodes","handleCopySecret","handleCopyBackupCodes","codes","handleVerify","OtpInput","TotpSettings","onStatusChange","disablePassword","setDisablePassword","regenerateCode","setRegenerateCode","newRecoveryCodes","setNewRecoveryCodes","actionLoading","setActionLoading","actionError","setActionError","handleSetupComplete","handleDisable","handleRegenerate","useDeposit","amountLamports","getConfig","getQuote","queryParams","publicDeposit","microDeposit","TokenSelector","selectedToken","openSignal","searchable","search","setSearch","containerRef","searchInputRef","filteredTokens","searchLower","handleToggle","getTierForAmount","usd","solLogo","DEFAULT_MAX_USD","SLIDER_STEPS","CURVE_POWER","formatUsd","getTierInfo","tier","clamp","usdToSlider","maxUsd","normalized","sliderToUsd","position","getUsdStep","getStepDecimals","roundUsd","decimals","TieredAmountSlider","valueUsd","normalizedValue","tierInfo","sliderValue","sliderPercent","hasUserFee","getEffectiveFeePercent","isPrivate","isMicro","feePolicy","privacyFeePercent","swapFeePercent","companyFeePercent","userFee","LAMPORTS_PER_SOL","SOL_TOKEN","OTHER_TOKEN","MAX_DEPOSIT_USD","calculateFeeLines","amountUsd","lines","privacyActive","swapActive","companyActive","solAmount","percent","fixedUsd","percentUsd","formatFeeTooltip","totalFeeUsd","feeLines","feeTotalDisplay","totalSol","line","totalPercent","COL","formatLine","sol","pct","divider","totalUsdStr","totalLine","formatExplainerFeeSummary","feeLabels","hasPrivacyFee","hasSwapFee","hasCompanyFee","getTotalFeeUsd","feePercent","userFixedLamports","fixedFeeUsd","percentFeeUsd","getPurchaseCurrencyLabel","currencyMode","supported","normalizeTokenSymbols","USD_STABLE_TOKENS","getTokenUsdPrice","priceOverrides","serverPrice","override","formatTokenAmount","DepositFlow","depositMethodProp","defaultToken","minAmount","maxAmount","onUnlockRequired","onAuthorize","showStepIndicator","pollInterval","demoMode","demoAutoConfirmMs","tokenPriceUsd","showExplainer","siteName","explainerConfig","depositError","quickActionSymbols","customTokenSymbols","mergedTokens","customDefs","seen","merged","def","customListTokens","filtered","canUseSignMode","depositMethod","firstQuickActionToken","effectiveToken","candidate","getFirstStep","setSelectedToken","setAmount","setResult","flowError","setFlowError","setSessionId","depositAddress","setDepositAddress","isAuthorizing","setIsAuthorizing","receiveAmountUsd","setReceiveAmountUsd","effectiveMin","effectiveMax","parsedAmount","isEnrolled","walletReady","needsUnlock","steps","currentStepIndex","handleTokenSelect","handleAuthorize","handleDeposit","depositAmount","depositToken","finalAmount","finalToken","smallestUnit","flowResult","handleSentDeposit","handleCopyAddress","textArea","cancelled","pollCount","maxPolls","poll","detectedAmount","timeout","tokenAmount","idx","isActive","isCurrent","ExplainerStep","UnlockStep","ConfirmStep","amt","tkn","SigningStep","ShowAddressStep","WaitingStep","SuccessStep","ErrorStep","depositConfig","onContinue","exchangeName","exchangeUrl","sanitizeExternalUrl","showExchange","purchaseCurrencyLabel","defaultBody","body","showUserFee","feeDescription","isListening","onCopy","onTokenSelect","setAmountUsd","showCustomToken","setShowCustomToken","feeTooltipOpen","setFeeTooltipOpen","customOpenSignal","setCustomOpenSignal","preMicroToken","setPreMicroToken","isMicroTier","isOtherToken","customTokens","baseTokens","resolved","feeLine","feeTooltip","tokenUsdPrice","sendAmountLabel","feesExceedAmount","isValidAmount","solToken","quickToken","current","onAmountChange","onSent","canSubmit","onNewDeposit","creditsUsd","totalFeeDisplay","bonkLogo","cashLogo","eurcLogo","oreLogo","pyusdLogo","usdcLogo","usdhLogo","usd1Logo","usdtLogo","SUPPORTED_TOKENS","CreditBalance","showAllCurrencies","balances","setBalances","fetchBalance","primaryBalance","balance","currency","isNegative","absLamports","isSol","getTypeLabel","txType","getTypeIcon","isPositive","History","onTransactionClick","setTransactions","currentTab","filteredTransactions","fetchHistory","handleTabChange","tab","getTabCount","count","FullPageLayout","brandLogo","brandName","subtitle","termsText","SplitPageLayout","tagline","SessionApiClient","useSessions","setSessions","fetchSessions","fetchedSessions","revokeAllSessions","useAuthorize","lastCheck","setLastCheck","checkAuthorization","authorize","clearCheck","usePendingRecovery","pendingData","setPendingData","fetchPendingRecovery","acknowledgeRecovery","useTransactionSigning","onExternalSign","hasExternalWallet","isSssUnlocked","sssSignTransaction","isSssSigning","sssError","clearSssError","signingMethod","canSign","hasSssWallet","I18nContext","createContext","defaultTranslations","mergeTranslations","overrides","deepMerge","baseValue","overrideValue","I18nProvider","locale","customTranslations","useTranslations","useContext","useLocale"],"mappings":"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AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;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","x_google_ignoreList":[0,1,2,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90]}